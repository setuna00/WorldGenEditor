function I1(n,e){for(var s=0;s<e.length;s++){const o=e[s];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in n)){const c=Object.getOwnPropertyDescriptor(o,r);c&&Object.defineProperty(n,r,c.get?c:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function Fb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jf={exports:{}},gr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function k1(){if(Jy)return gr;Jy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(o,r,c){var d=null;if(c!==void 0&&(d=""+c),r.key!==void 0&&(d=""+r.key),"key"in r){c={};for(var h in r)h!=="key"&&(c[h]=r[h])}else c=r;return r=c.ref,{$$typeof:n,type:o,key:d,ref:r!==void 0?r:null,props:c}}return gr.Fragment=e,gr.jsx=s,gr.jsxs=s,gr}var Wy;function D1(){return Wy||(Wy=1,Jf.exports=k1()),Jf.exports}var u=D1(),Wf={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function P1(){if(Yy)return qe;Yy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,_={};function M(D,q,oe){this.props=D,this.context=q,this.refs=_,this.updater=oe||T}M.prototype.isReactComponent={},M.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},M.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=M.prototype;function I(D,q,oe){this.props=D,this.context=q,this.refs=_,this.updater=oe||T}var j=I.prototype=new k;j.constructor=I,R(j,M.prototype),j.isPureReactComponent=!0;var J=Array.isArray;function Z(){}var $={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function V(D,q,oe){var fe=oe.ref;return{$$typeof:n,type:D,key:q,ref:fe!==void 0?fe:null,props:oe}}function le(D,q){return V(D.type,q,D.props)}function ie(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function pe(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return q[oe]})}var H=/\/+/g;function ve(D,q){return typeof D=="object"&&D!==null&&D.key!=null?pe(""+D.key):q.toString(36)}function Ce(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Z,Z):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function U(D,q,oe,fe,F){var ge=typeof D;(ge==="undefined"||ge==="boolean")&&(D=null);var _e=!1;if(D===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(D.$$typeof){case n:case e:_e=!0;break;case v:return _e=D._init,U(_e(D._payload),q,oe,fe,F)}}if(_e)return F=F(D),_e=fe===""?"."+ve(D,0):fe,J(F)?(oe="",_e!=null&&(oe=_e.replace(H,"$&/")+"/"),U(F,q,oe,"",function(W){return W})):F!=null&&(ie(F)&&(F=le(F,oe+(F.key==null||D&&D.key===F.key?"":(""+F.key).replace(H,"$&/")+"/")+_e)),q.push(F)),1;_e=0;var X=fe===""?".":fe+":";if(J(D))for(var O=0;O<D.length;O++)fe=D[O],ge=X+ve(fe,O),_e+=U(fe,q,oe,ge,F);else if(O=E(D),typeof O=="function")for(D=O.call(D),O=0;!(fe=D.next()).done;)fe=fe.value,ge=X+ve(fe,O++),_e+=U(fe,q,oe,ge,F);else if(ge==="object"){if(typeof D.then=="function")return U(Ce(D),q,oe,fe,F);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ne(D,q,oe){if(D==null)return D;var fe=[],F=0;return U(D,fe,"","",function(ge){return q.call(oe,ge,F++)}),fe}function me(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var Ee=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ae={map:ne,forEach:function(D,q,oe){ne(D,function(){q.apply(this,arguments)},oe)},count:function(D){var q=0;return ne(D,function(){q++}),q},toArray:function(D){return ne(D,function(q){return q})||[]},only:function(D){if(!ie(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return qe.Activity=b,qe.Children=Ae,qe.Component=M,qe.Fragment=s,qe.Profiler=r,qe.PureComponent=I,qe.StrictMode=o,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return $.H.useMemoCache(D)}},qe.cache=function(D){return function(){return D.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(D,q,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var fe=R({},D.props),F=D.key;if(q!=null)for(ge in q.key!==void 0&&(F=""+q.key),q)!ce.call(q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&q.ref===void 0||(fe[ge]=q[ge]);var ge=arguments.length-2;if(ge===1)fe.children=oe;else if(1<ge){for(var _e=Array(ge),X=0;X<ge;X++)_e[X]=arguments[X+2];fe.children=_e}return V(D.type,F,fe)},qe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},qe.createElement=function(D,q,oe){var fe,F={},ge=null;if(q!=null)for(fe in q.key!==void 0&&(ge=""+q.key),q)ce.call(q,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(F[fe]=q[fe]);var _e=arguments.length-2;if(_e===1)F.children=oe;else if(1<_e){for(var X=Array(_e),O=0;O<_e;O++)X[O]=arguments[O+2];F.children=X}if(D&&D.defaultProps)for(fe in _e=D.defaultProps,_e)F[fe]===void 0&&(F[fe]=_e[fe]);return V(D,ge,F)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(D){return{$$typeof:h,render:D}},qe.isValidElement=ie,qe.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:me}},qe.memo=function(D,q){return{$$typeof:m,type:D,compare:q===void 0?null:q}},qe.startTransition=function(D){var q=$.T,oe={};$.T=oe;try{var fe=D(),F=$.S;F!==null&&F(oe,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Z,Ee)}catch(ge){Ee(ge)}finally{q!==null&&oe.types!==null&&(q.types=oe.types),$.T=q}},qe.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},qe.use=function(D){return $.H.use(D)},qe.useActionState=function(D,q,oe){return $.H.useActionState(D,q,oe)},qe.useCallback=function(D,q){return $.H.useCallback(D,q)},qe.useContext=function(D){return $.H.useContext(D)},qe.useDebugValue=function(){},qe.useDeferredValue=function(D,q){return $.H.useDeferredValue(D,q)},qe.useEffect=function(D,q){return $.H.useEffect(D,q)},qe.useEffectEvent=function(D){return $.H.useEffectEvent(D)},qe.useId=function(){return $.H.useId()},qe.useImperativeHandle=function(D,q,oe){return $.H.useImperativeHandle(D,q,oe)},qe.useInsertionEffect=function(D,q){return $.H.useInsertionEffect(D,q)},qe.useLayoutEffect=function(D,q){return $.H.useLayoutEffect(D,q)},qe.useMemo=function(D,q){return $.H.useMemo(D,q)},qe.useOptimistic=function(D,q){return $.H.useOptimistic(D,q)},qe.useReducer=function(D,q,oe){return $.H.useReducer(D,q,oe)},qe.useRef=function(D){return $.H.useRef(D)},qe.useState=function(D){return $.H.useState(D)},qe.useSyncExternalStore=function(D,q,oe){return $.H.useSyncExternalStore(D,q,oe)},qe.useTransition=function(){return $.H.useTransition()},qe.version="19.2.3",qe}var Ky;function up(){return Ky||(Ky=1,Wf.exports=P1()),Wf.exports}var N=up();const be=Fb(N),Bb=I1({__proto__:null,default:be},[N]);var Yf={exports:{}},yr={},Kf={exports:{}},Xf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function L1(){return Xy||(Xy=1,(function(n){function e(U,ne){var me=U.length;U.push(ne);e:for(;0<me;){var Ee=me-1>>>1,Ae=U[Ee];if(0<r(Ae,ne))U[Ee]=ne,U[me]=Ae,me=Ee;else break e}}function s(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var ne=U[0],me=U.pop();if(me!==ne){U[0]=me;e:for(var Ee=0,Ae=U.length,D=Ae>>>1;Ee<D;){var q=2*(Ee+1)-1,oe=U[q],fe=q+1,F=U[fe];if(0>r(oe,me))fe<Ae&&0>r(F,oe)?(U[Ee]=F,U[fe]=me,Ee=fe):(U[Ee]=oe,U[q]=me,Ee=q);else if(fe<Ae&&0>r(F,me))U[Ee]=F,U[fe]=me,Ee=fe;else break e}}return ne}function r(U,ne){var me=U.sortIndex-ne.sortIndex;return me!==0?me:U.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],m=[],v=1,b=null,S=3,E=!1,T=!1,R=!1,_=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function j(U){for(var ne=s(m);ne!==null;){if(ne.callback===null)o(m);else if(ne.startTime<=U)o(m),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=s(m)}}function J(U){if(R=!1,j(U),!T)if(s(g)!==null)T=!0,Z||(Z=!0,pe());else{var ne=s(m);ne!==null&&Ce(J,ne.startTime-U)}}var Z=!1,$=-1,ce=5,V=-1;function le(){return _?!0:!(n.unstable_now()-V<ce)}function ie(){if(_=!1,Z){var U=n.unstable_now();V=U;var ne=!0;try{e:{T=!1,R&&(R=!1,k($),$=-1),E=!0;var me=S;try{t:{for(j(U),b=s(g);b!==null&&!(b.expirationTime>U&&le());){var Ee=b.callback;if(typeof Ee=="function"){b.callback=null,S=b.priorityLevel;var Ae=Ee(b.expirationTime<=U);if(U=n.unstable_now(),typeof Ae=="function"){b.callback=Ae,j(U),ne=!0;break t}b===s(g)&&o(g),j(U)}else o(g);b=s(g)}if(b!==null)ne=!0;else{var D=s(m);D!==null&&Ce(J,D.startTime-U),ne=!1}}break e}finally{b=null,S=me,E=!1}ne=void 0}}finally{ne?pe():Z=!1}}}var pe;if(typeof I=="function")pe=function(){I(ie)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ve=H.port2;H.port1.onmessage=ie,pe=function(){ve.postMessage(null)}}else pe=function(){M(ie,0)};function Ce(U,ne){$=M(function(){U(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(U){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var me=S;S=ne;try{return U()}finally{S=me}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var me=S;S=U;try{return ne()}finally{S=me}},n.unstable_scheduleCallback=function(U,ne,me){var Ee=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ee+me:Ee):me=Ee,U){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=me+Ae,U={id:v++,callback:ne,priorityLevel:U,startTime:me,expirationTime:Ae,sortIndex:-1},me>Ee?(U.sortIndex=me,e(m,U),s(g)===null&&U===s(m)&&(R?(k($),$=-1):R=!0,Ce(J,me-Ee))):(U.sortIndex=Ae,e(g,U),T||E||(T=!0,Z||(Z=!0,pe()))),U},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(U){var ne=S;return function(){var me=S;S=ne;try{return U.apply(this,arguments)}finally{S=me}}}})(Xf)),Xf}var Qy;function j1(){return Qy||(Qy=1,Kf.exports=L1()),Kf.exports}var Qf={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function U1(){if(Zy)return dn;Zy=1;var n=up();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:g,containerInfo:m,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,dn.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(g,m,null,v)},dn.flushSync=function(g){var m=d.T,v=o.p;try{if(d.T=null,o.p=2,g)return g()}finally{d.T=m,o.p=v,o.d.f()}},dn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},dn.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},dn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:E}):v==="script"&&o.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},dn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=h(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dn.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},dn.requestFormReset=function(g){o.d.r(g)},dn.unstable_batchedUpdates=function(g,m){return g(m)},dn.useFormState=function(g,m,v){return d.H.useFormState(g,m,v)},dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},dn.version="19.2.3",dn}var ex;function $b(){if(ex)return Qf.exports;ex=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qf.exports=U1(),Qf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function O1(){if(tx)return yr;tx=1;var n=j1(),e=up(),s=$b();function o(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function d(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function g(i){if(c(i)!==i)throw Error(o(188))}function m(i){var a=i.alternate;if(!a){if(a=c(i),a===null)throw Error(o(188));return a!==i?null:i}for(var l=i,f=a;;){var x=l.return;if(x===null)break;var C=x.alternate;if(C===null){if(f=x.return,f!==null){l=f;continue}break}if(x.child===C.child){for(C=x.child;C;){if(C===l)return g(x),i;if(C===f)return g(x),a;C=C.sibling}throw Error(o(188))}if(l.return!==f.return)l=x,f=C;else{for(var w=!1,A=x.child;A;){if(A===l){w=!0,l=x,f=C;break}if(A===f){w=!0,f=x,l=C;break}A=A.sibling}if(!w){for(A=C.child;A;){if(A===l){w=!0,l=C,f=x;break}if(A===f){w=!0,f=C,l=x;break}A=A.sibling}if(!w)throw Error(o(189))}}if(l.alternate!==f)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var H=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===H?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case M:return"Profiler";case _:return"StrictMode";case J:return"Suspense";case Z:return"SuspenseList";case V:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case I:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case j:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $:return a=i.displayName||null,a!==null?a:ve(i.type)||"Memo";case ce:a=i._payload,i=i._init;try{return ve(i(a))}catch{}}return null}var Ce=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ee=[],Ae=-1;function D(i){return{current:i}}function q(i){0>Ae||(i.current=Ee[Ae],Ee[Ae]=null,Ae--)}function oe(i,a){Ae++,Ee[Ae]=i.current,i.current=a}var fe=D(null),F=D(null),ge=D(null),_e=D(null);function X(i,a){switch(oe(ge,a),oe(F,i),oe(fe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?gy(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=gy(a),i=yy(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(fe),oe(fe,i)}function O(){q(fe),q(F),q(ge)}function W(i){i.memoizedState!==null&&oe(_e,i);var a=fe.current,l=yy(a,i.type);a!==l&&(oe(F,i),oe(fe,l))}function ae(i){F.current===i&&(q(fe),q(F)),_e.current===i&&(q(_e),fr._currentValue=me)}var te,Te;function ze(i){if(te===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);te=a&&a[1]||"",Te=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+i+Te}var rt=!1;function mt(i,a){if(!i||rt)return"";rt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var ee=se}Reflect.construct(i,[],de)}else{try{de.call()}catch(se){ee=se}i.call(de.prototype)}}else{try{throw Error()}catch(se){ee=se}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&ee&&typeof se.stack=="string")return[se.stack,ee.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=f.DetermineComponentFrameRoot(),w=C[0],A=C[1];if(w&&A){var L=w.split(`
`),K=A.split(`
`);for(x=f=0;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;for(;x<K.length&&!K[x].includes("DetermineComponentFrameRoot");)x++;if(f===L.length||x===K.length)for(f=L.length-1,x=K.length-1;1<=f&&0<=x&&L[f]!==K[x];)x--;for(;1<=f&&0<=x;f--,x--)if(L[f]!==K[x]){if(f!==1||x!==1)do if(f--,x--,0>x||L[f]!==K[x]){var re=`
`+L[f].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=f&&0<=x);break}}}finally{rt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?ze(l):""}function tt(i,a){switch(i.tag){case 26:case 27:case 5:return ze(i.type);case 16:return ze("Lazy");case 13:return i.child!==a&&a!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return mt(i.type,!1);case 11:return mt(i.type.render,!1);case 1:return mt(i.type,!0);case 31:return ze("Activity");default:return""}}function St(i){try{var a="",l=null;do a+=tt(i,l),l=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var yt=Object.prototype.hasOwnProperty,$t=n.unstable_scheduleCallback,ls=n.unstable_cancelCallback,wt=n.unstable_shouldYield,Wt=n.unstable_requestPaint,Tt=n.unstable_now,Hn=n.unstable_getCurrentPriorityLevel,pn=n.unstable_ImmediatePriority,z=n.unstable_UserBlockingPriority,P=n.unstable_NormalPriority,he=n.unstable_LowPriority,ye=n.unstable_IdlePriority,Ie=n.log,Oe=n.unstable_setDisableYieldValue,ut=null,Be=null;function $e(i){if(typeof Ie=="function"&&Oe(i),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(ut,i)}catch{}}var xt=Math.clz32?Math.clz32:qn,Fi=Math.log,Ns=Math.LN2;function qn(i){return i>>>=0,i===0?32:31-(Fi(i)/Ns|0)|0}var As=256,Rs=262144,Et=4194304;function Ht(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ue(i,a,l){var f=i.pendingLanes;if(f===0)return 0;var x=0,C=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var A=f&134217727;return A!==0?(f=A&~C,f!==0?x=Ht(f):(w&=A,w!==0?x=Ht(w):l||(l=A&~i,l!==0&&(x=Ht(l))))):(A=f&~C,A!==0?x=Ht(A):w!==0?x=Ht(w):l||(l=f&~i,l!==0&&(x=Ht(l)))),x===0?0:a!==0&&a!==x&&(a&C)===0&&(C=x&-x,l=a&-a,C>=l||C===32&&(l&4194048)!==0)?a:x}function dt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Pt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lt(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function Ms(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Nt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function vn(i,a,l,f,x,C){var w=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var A=i.entanglements,L=i.expirationTimes,K=i.hiddenUpdates;for(l=w&~l;0<l;){var re=31-xt(l),de=1<<re;A[re]=0,L[re]=-1;var ee=K[re];if(ee!==null)for(K[re]=null,re=0;re<ee.length;re++){var se=ee[re];se!==null&&(se.lane&=-536870913)}l&=~de}f!==0&&Bi(i,f,0),C!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=C&~(w&~a))}function Bi(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-xt(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|l&261930}function bn(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var f=31-xt(l),x=1<<f;x&a|i[f]&a&&(i[f]|=a),l&=~x}}function Cn(i,a){var l=a&-a;return l=(l&42)!==0?1:vo(l),(l&(i.suspendedLanes|a))!==0?0:l}function vo(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function cs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ju(){var i=ne.p;return i!==0?i:(i=window.event,i===void 0?32:zy(i.type))}function nm(i,a){var l=ne.p;try{return ne.p=i,a()}finally{ne.p=l}}var oi=Math.random().toString(36).slice(2),tn="__reactFiber$"+oi,Sn="__reactProps$"+oi,bo="__reactContainer$"+oi,Uu="__reactEvents$"+oi,bE="__reactListeners$"+oi,CE="__reactHandles$"+oi,sm="__reactResources$"+oi,Na="__reactMarker$"+oi;function Ou(i){delete i[tn],delete i[Sn],delete i[Uu],delete i[bE],delete i[CE]}function Co(i){var a=i[tn];if(a)return a;for(var l=i.parentNode;l;){if(a=l[bo]||l[tn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Ey(i);i!==null;){if(l=i[tn])return l;i=Ey(i)}return a}i=l,l=i.parentNode}return null}function So(i){if(i=i[tn]||i[bo]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Aa(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(o(33))}function wo(i){var a=i[sm];return a||(a=i[sm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(i){i[Na]=!0}var im=new Set,om={};function $i(i,a){Eo(i,a),Eo(i+"Capture",a)}function Eo(i,a){for(om[i]=a,i=0;i<a.length;i++)im.add(a[i])}var SE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},rm={};function wE(i){return yt.call(rm,i)?!0:yt.call(am,i)?!1:SE.test(i)?rm[i]=!0:(am[i]=!0,!1)}function Kr(i,a,l){if(wE(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Xr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Is(i,a,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+f)}}function Vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function lm(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function EE(i,a,l){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,C=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return x.call(this)},set:function(w){l=""+w,C.call(this,w)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Gu(i){if(!i._valueTracker){var a=lm(i)?"checked":"value";i._valueTracker=EE(i,a,""+i[a])}}function cm(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),f="";return i&&(f=lm(i)?i.checked?"true":"false":i.value),i=f,i!==l?(a.setValue(i),!0):!1}function Qr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _E=/[\n"\\]/g;function Jn(i){return i.replace(_E,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zu(i,a,l,f,x,C,w,A){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),a!=null?w==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Vn(a)):i.value!==""+Vn(a)&&(i.value=""+Vn(a)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),a!=null?Fu(i,w,Vn(a)):l!=null?Fu(i,w,Vn(l)):f!=null&&i.removeAttribute("value"),x==null&&C!=null&&(i.defaultChecked=!!C),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Vn(A):i.removeAttribute("name")}function um(i,a,l,f,x,C,w,A){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.type=C),a!=null||l!=null){if(!(C!=="submit"&&C!=="reset"||a!=null)){Gu(i);return}l=l!=null?""+Vn(l):"",a=a!=null?""+Vn(a):l,A||a===i.value||(i.value=a),i.defaultValue=a}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=A?i.checked:!!f,i.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Gu(i)}function Fu(i,a,l){a==="number"&&Qr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function _o(i,a,l,f){if(i=i.options,a){a={};for(var x=0;x<l.length;x++)a["$"+l[x]]=!0;for(l=0;l<i.length;l++)x=a.hasOwnProperty("$"+i[l].value),i[l].selected!==x&&(i[l].selected=x),x&&f&&(i[l].defaultSelected=!0)}else{for(l=""+Vn(l),a=null,x=0;x<i.length;x++){if(i[x].value===l){i[x].selected=!0,f&&(i[x].defaultSelected=!0);return}a!==null||i[x].disabled||(a=i[x])}a!==null&&(a.selected=!0)}}function dm(i,a,l){if(a!=null&&(a=""+Vn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Vn(l):""}function fm(i,a,l,f){if(a==null){if(f!=null){if(l!=null)throw Error(o(92));if(Ce(f)){if(1<f.length)throw Error(o(93));f=f[0]}l=f}l==null&&(l=""),a=l}l=Vn(a),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f),Gu(i)}function To(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var TE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hm(i,a,l){var f=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,l):typeof l!="number"||l===0||TE.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function pm(i,a,l){if(a!=null&&typeof a!="object")throw Error(o(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var x in a)f=a[x],a.hasOwnProperty(x)&&l[x]!==f&&hm(i,x,f)}else for(var C in a)a.hasOwnProperty(C)&&hm(i,C,a[C])}function Bu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),AE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zr(i){return AE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ks(){}var $u=null;function Hu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var No=null,Ao=null;function mm(i){var a=So(i);if(a&&(i=a.stateNode)){var l=i[Sn]||null;e:switch(i=a.stateNode,a.type){case"input":if(zu(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Jn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var f=l[a];if(f!==i&&f.form===i.form){var x=f[Sn]||null;if(!x)throw Error(o(90));zu(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<l.length;a++)f=l[a],f.form===i.form&&cm(f)}break e;case"textarea":dm(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&_o(i,!!l.multiple,a,!1)}}}var qu=!1;function gm(i,a,l){if(qu)return i(a,l);qu=!0;try{var f=i(a);return f}finally{if(qu=!1,(No!==null||Ao!==null)&&(zl(),No&&(a=No,i=Ao,Ao=No=null,mm(a),i)))for(a=0;a<i.length;a++)mm(i[a])}}function Ra(i,a){var l=i.stateNode;if(l===null)return null;var f=l[Sn]||null;if(f===null)return null;l=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(o(231,a,typeof l));return l}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=!1;if(Ds)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{Vu=!1}var ai=null,Ju=null,el=null;function ym(){if(el)return el;var i,a=Ju,l=a.length,f,x="value"in ai?ai.value:ai.textContent,C=x.length;for(i=0;i<l&&a[i]===x[i];i++);var w=l-i;for(f=1;f<=w&&a[l-f]===x[C-f];f++);return el=x.slice(i,1<f?1-f:void 0)}function tl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function nl(){return!0}function xm(){return!1}function wn(i){function a(l,f,x,C,w){this._reactName=l,this._targetInst=x,this.type=f,this.nativeEvent=C,this.target=w,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(l=i[A],this[A]=l?l(C):C[A]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?nl:xm,this.isPropagationStopped=xm,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),a}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=wn(Hi),Ia=b({},Hi,{view:0,detail:0}),RE=wn(Ia),Wu,Yu,ka,il=b({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ka&&(ka&&i.type==="mousemove"?(Wu=i.screenX-ka.screenX,Yu=i.screenY-ka.screenY):Yu=Wu=0,ka=i),Wu)},movementY:function(i){return"movementY"in i?i.movementY:Yu}}),vm=wn(il),ME=b({},il,{dataTransfer:0}),IE=wn(ME),kE=b({},Ia,{relatedTarget:0}),Ku=wn(kE),DE=b({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=wn(DE),LE=b({},Hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jE=wn(LE),UE=b({},Hi,{data:0}),bm=wn(UE),OE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FE(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=zE[i])?!!a[i]:!1}function Xu(){return FE}var BE=b({},Ia,{key:function(i){if(i.key){var a=OE[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=tl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?GE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(i){return i.type==="keypress"?tl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$E=wn(BE),HE=b({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cm=wn(HE),qE=b({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),VE=wn(qE),JE=b({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=wn(JE),YE=b({},il,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),KE=wn(YE),XE=b({},Hi,{newState:0,oldState:0}),QE=wn(XE),ZE=[9,13,27,32],Qu=Ds&&"CompositionEvent"in window,Da=null;Ds&&"documentMode"in document&&(Da=document.documentMode);var e_=Ds&&"TextEvent"in window&&!Da,Sm=Ds&&(!Qu||Da&&8<Da&&11>=Da),wm=" ",Em=!1;function _m(i,a){switch(i){case"keyup":return ZE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tm(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ro=!1;function t_(i,a){switch(i){case"compositionend":return Tm(a);case"keypress":return a.which!==32?null:(Em=!0,wm);case"textInput":return i=a.data,i===wm&&Em?null:i;default:return null}}function n_(i,a){if(Ro)return i==="compositionend"||!Qu&&_m(i,a)?(i=ym(),el=Ju=ai=null,Ro=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Sm&&a.locale!=="ko"?null:a.data;default:return null}}var s_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!s_[i.type]:a==="textarea"}function Am(i,a,l,f){No?Ao?Ao.push(f):Ao=[f]:No=f,a=Jl(a,"onChange"),0<a.length&&(l=new sl("onChange","change",null,l,f),i.push({event:l,listeners:a}))}var Pa=null,La=null;function i_(i){uy(i,0)}function ol(i){var a=Aa(i);if(cm(a))return i}function Rm(i,a){if(i==="change")return a}var Mm=!1;if(Ds){var Zu;if(Ds){var ed="oninput"in document;if(!ed){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),ed=typeof Im.oninput=="function"}Zu=ed}else Zu=!1;Mm=Zu&&(!document.documentMode||9<document.documentMode)}function km(){Pa&&(Pa.detachEvent("onpropertychange",Dm),La=Pa=null)}function Dm(i){if(i.propertyName==="value"&&ol(La)){var a=[];Am(a,La,i,Hu(i)),gm(i_,a)}}function o_(i,a,l){i==="focusin"?(km(),Pa=a,La=l,Pa.attachEvent("onpropertychange",Dm)):i==="focusout"&&km()}function a_(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ol(La)}function r_(i,a){if(i==="click")return ol(a)}function l_(i,a){if(i==="input"||i==="change")return ol(a)}function c_(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Dn=typeof Object.is=="function"?Object.is:c_;function ja(i,a){if(Dn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),f=Object.keys(a);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var x=l[f];if(!yt.call(a,x)||!Dn(i[x],a[x]))return!1}return!0}function Pm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lm(i,a){var l=Pm(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=a&&f>=a)return{node:l,offset:a-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Pm(l)}}function jm(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?jm(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Um(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Qr(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Qr(i.document)}return a}function td(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var u_=Ds&&"documentMode"in document&&11>=document.documentMode,Mo=null,nd=null,Ua=null,sd=!1;function Om(i,a,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sd||Mo==null||Mo!==Qr(f)||(f=Mo,"selectionStart"in f&&td(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ua&&ja(Ua,f)||(Ua=f,f=Jl(nd,"onSelect"),0<f.length&&(a=new sl("onSelect","select",null,a,l),i.push({event:a,listeners:f}),a.target=Mo)))}function qi(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Io={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},id={},Gm={};Ds&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Vi(i){if(id[i])return id[i];if(!Io[i])return i;var a=Io[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in Gm)return id[i]=a[l];return i}var zm=Vi("animationend"),Fm=Vi("animationiteration"),Bm=Vi("animationstart"),d_=Vi("transitionrun"),f_=Vi("transitionstart"),h_=Vi("transitioncancel"),$m=Vi("transitionend"),Hm=new Map,od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");od.push("scrollEnd");function us(i,a){Hm.set(i,a),$i(a,[i])}var al=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Wn=[],ko=0,ad=0;function rl(){for(var i=ko,a=ad=ko=0;a<i;){var l=Wn[a];Wn[a++]=null;var f=Wn[a];Wn[a++]=null;var x=Wn[a];Wn[a++]=null;var C=Wn[a];if(Wn[a++]=null,f!==null&&x!==null){var w=f.pending;w===null?x.next=x:(x.next=w.next,w.next=x),f.pending=x}C!==0&&qm(l,x,C)}}function ll(i,a,l,f){Wn[ko++]=i,Wn[ko++]=a,Wn[ko++]=l,Wn[ko++]=f,ad|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function rd(i,a,l,f){return ll(i,a,l,f),cl(i)}function Ji(i,a){return ll(i,null,null,a),cl(i)}function qm(i,a,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var x=!1,C=i.return;C!==null;)C.childLanes|=l,f=C.alternate,f!==null&&(f.childLanes|=l),C.tag===22&&(i=C.stateNode,i===null||i._visibility&1||(x=!0)),i=C,C=C.return;return i.tag===3?(C=i.stateNode,x&&a!==null&&(x=31-xt(l),i=C.hiddenUpdates,f=i[x],f===null?i[x]=[a]:f.push(a),a.lane=l|536870912),C):null}function cl(i){if(50<or)throw or=0,yf=null,Error(o(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Do={};function p_(i,a,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,a,l,f){return new p_(i,a,l,f)}function ld(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ps(i,a){var l=i.alternate;return l===null?(l=Pn(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Vm(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function ul(i,a,l,f,x,C){var w=0;if(f=i,typeof i=="function")ld(i)&&(w=1);else if(typeof i=="string")w=v1(i,l,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case V:return i=Pn(31,l,a,x),i.elementType=V,i.lanes=C,i;case R:return Wi(l.children,x,C,a);case _:w=8,x|=24;break;case M:return i=Pn(12,l,a,x|2),i.elementType=M,i.lanes=C,i;case J:return i=Pn(13,l,a,x),i.elementType=J,i.lanes=C,i;case Z:return i=Pn(19,l,a,x),i.elementType=Z,i.lanes=C,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:w=10;break e;case k:w=9;break e;case j:w=11;break e;case $:w=14;break e;case ce:w=16,f=null;break e}w=29,l=Error(o(130,i===null?"null":typeof i,"")),f=null}return a=Pn(w,l,a,x),a.elementType=i,a.type=f,a.lanes=C,a}function Wi(i,a,l,f){return i=Pn(7,i,f,a),i.lanes=l,i}function cd(i,a,l){return i=Pn(6,i,null,a),i.lanes=l,i}function Jm(i){var a=Pn(18,null,null,0);return a.stateNode=i,a}function ud(i,a,l){return a=Pn(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Wm=new WeakMap;function Yn(i,a){if(typeof i=="object"&&i!==null){var l=Wm.get(i);return l!==void 0?l:(a={value:i,source:a,stack:St(a)},Wm.set(i,a),a)}return{value:i,source:a,stack:St(a)}}var Po=[],Lo=0,dl=null,Oa=0,Kn=[],Xn=0,ri=null,xs=1,vs="";function Ls(i,a){Po[Lo++]=Oa,Po[Lo++]=dl,dl=i,Oa=a}function Ym(i,a,l){Kn[Xn++]=xs,Kn[Xn++]=vs,Kn[Xn++]=ri,ri=i;var f=xs;i=vs;var x=32-xt(f)-1;f&=~(1<<x),l+=1;var C=32-xt(a)+x;if(30<C){var w=x-x%5;C=(f&(1<<w)-1).toString(32),f>>=w,x-=w,xs=1<<32-xt(a)+x|l<<x|f,vs=C+i}else xs=1<<C|l<<x|f,vs=i}function dd(i){i.return!==null&&(Ls(i,1),Ym(i,1,0))}function fd(i){for(;i===dl;)dl=Po[--Lo],Po[Lo]=null,Oa=Po[--Lo],Po[Lo]=null;for(;i===ri;)ri=Kn[--Xn],Kn[Xn]=null,vs=Kn[--Xn],Kn[Xn]=null,xs=Kn[--Xn],Kn[Xn]=null}function Km(i,a){Kn[Xn++]=xs,Kn[Xn++]=vs,Kn[Xn++]=ri,xs=a.id,vs=a.overflow,ri=i}var nn=null,vt=null,et=!1,li=null,Qn=!1,hd=Error(o(519));function ci(i){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ga(Yn(a,i)),hd}function Xm(i){var a=i.stateNode,l=i.type,f=i.memoizedProps;switch(a[tn]=i,a[Sn]=f,l){case"dialog":Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":case"embed":Xe("load",a);break;case"video":case"audio":for(l=0;l<rr.length;l++)Xe(rr[l],a);break;case"source":Xe("error",a);break;case"img":case"image":case"link":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"input":Xe("invalid",a),um(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Xe("invalid",a);break;case"textarea":Xe("invalid",a),fm(a,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||f.suppressHydrationWarning===!0||py(a.textContent,l)?(f.popover!=null&&(Xe("beforetoggle",a),Xe("toggle",a)),f.onScroll!=null&&Xe("scroll",a),f.onScrollEnd!=null&&Xe("scrollend",a),f.onClick!=null&&(a.onclick=ks),a=!0):a=!1,a||ci(i,!0)}function Qm(i){for(nn=i.return;nn;)switch(nn.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:nn=nn.return}}function jo(i){if(i!==nn)return!1;if(!et)return Qm(i),et=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||kf(i.type,i.memoizedProps)),l=!l),l&&vt&&ci(i),Qm(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));vt=wy(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));vt=wy(i)}else a===27?(a=vt,wi(i.type)?(i=Uf,Uf=null,vt=i):vt=a):vt=nn?es(i.stateNode.nextSibling):null;return!0}function Yi(){vt=nn=null,et=!1}function pd(){var i=li;return i!==null&&(Nn===null?Nn=i:Nn.push.apply(Nn,i),li=null),i}function Ga(i){li===null?li=[i]:li.push(i)}var md=D(null),Ki=null,js=null;function ui(i,a,l){oe(md,a._currentValue),a._currentValue=l}function Us(i){i._currentValue=md.current,q(md)}function gd(i,a,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===l)break;i=i.return}}function yd(i,a,l,f){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var C=x.dependencies;if(C!==null){var w=x.child;C=C.firstContext;e:for(;C!==null;){var A=C;C=x;for(var L=0;L<a.length;L++)if(A.context===a[L]){C.lanes|=l,A=C.alternate,A!==null&&(A.lanes|=l),gd(C.return,l,i),f||(w=null);break e}C=A.next}}else if(x.tag===18){if(w=x.return,w===null)throw Error(o(341));w.lanes|=l,C=w.alternate,C!==null&&(C.lanes|=l),gd(w,l,i),w=null}else w=x.child;if(w!==null)w.return=x;else for(w=x;w!==null;){if(w===i){w=null;break}if(x=w.sibling,x!==null){x.return=w.return,w=x;break}w=w.return}x=w}}function Uo(i,a,l,f){i=null;for(var x=a,C=!1;x!==null;){if(!C){if((x.flags&524288)!==0)C=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var w=x.alternate;if(w===null)throw Error(o(387));if(w=w.memoizedProps,w!==null){var A=x.type;Dn(x.pendingProps.value,w.value)||(i!==null?i.push(A):i=[A])}}else if(x===_e.current){if(w=x.alternate,w===null)throw Error(o(387));w.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(fr):i=[fr])}x=x.return}i!==null&&yd(a,i,l,f),a.flags|=262144}function fl(i){for(i=i.firstContext;i!==null;){if(!Dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xi(i){Ki=i,js=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return Zm(Ki,i)}function hl(i,a){return Ki===null&&Xi(i),Zm(i,a)}function Zm(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},js===null){if(i===null)throw Error(o(308));js=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else js=js.next=a;return l}var m_=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},g_=n.unstable_scheduleCallback,y_=n.unstable_NormalPriority,jt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xd(){return{controller:new m_,data:new Map,refCount:0}}function za(i){i.refCount--,i.refCount===0&&g_(y_,function(){i.controller.abort()})}var Fa=null,vd=0,Oo=0,Go=null;function x_(i,a){if(Fa===null){var l=Fa=[];vd=0,Oo=wf(),Go={status:"pending",value:void 0,then:function(f){l.push(f)}}}return vd++,a.then(eg,eg),a}function eg(){if(--vd===0&&Fa!==null){Go!==null&&(Go.status="fulfilled");var i=Fa;Fa=null,Oo=0,Go=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function v_(i,a){var l=[],f={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var x=0;x<l.length;x++)(0,l[x])(a)},function(x){for(f.status="rejected",f.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),f}var tg=U.S;U.S=function(i,a){O0=Tt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&x_(i,a),tg!==null&&tg(i,a)};var Qi=D(null);function bd(){var i=Qi.current;return i!==null?i:gt.pooledCache}function pl(i,a){a===null?oe(Qi,Qi.current):oe(Qi,a.pool)}function ng(){var i=bd();return i===null?null:{parent:jt._currentValue,pool:i}}var zo=Error(o(460)),Cd=Error(o(474)),ml=Error(o(542)),gl={then:function(){}};function sg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ig(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(ks,ks),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ag(i),i;default:if(typeof a.status=="string")a.then(ks,ks);else{if(i=gt,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=f}},function(f){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ag(i),i}throw eo=a,zo}}function Zi(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(eo=l,zo):l}}var eo=null;function og(){if(eo===null)throw Error(o(459));var i=eo;return eo=null,i}function ag(i){if(i===zo||i===ml)throw Error(o(483))}var Fo=null,Ba=0;function yl(i){var a=Ba;return Ba+=1,Fo===null&&(Fo=[]),ig(Fo,i,a)}function $a(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function xl(i,a){throw a.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(a),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function rg(i){function a(B,G){if(i){var Y=B.deletions;Y===null?(B.deletions=[G],B.flags|=16):Y.push(G)}}function l(B,G){if(!i)return null;for(;G!==null;)a(B,G),G=G.sibling;return null}function f(B){for(var G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function x(B,G){return B=Ps(B,G),B.index=0,B.sibling=null,B}function C(B,G,Y){return B.index=Y,i?(Y=B.alternate,Y!==null?(Y=Y.index,Y<G?(B.flags|=67108866,G):Y):(B.flags|=67108866,G)):(B.flags|=1048576,G)}function w(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function A(B,G,Y,ue){return G===null||G.tag!==6?(G=cd(Y,B.mode,ue),G.return=B,G):(G=x(G,Y),G.return=B,G)}function L(B,G,Y,ue){var Le=Y.type;return Le===R?re(B,G,Y.props.children,ue,Y.key):G!==null&&(G.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ce&&Zi(Le)===G.type)?(G=x(G,Y.props),$a(G,Y),G.return=B,G):(G=ul(Y.type,Y.key,Y.props,null,B.mode,ue),$a(G,Y),G.return=B,G)}function K(B,G,Y,ue){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=ud(Y,B.mode,ue),G.return=B,G):(G=x(G,Y.children||[]),G.return=B,G)}function re(B,G,Y,ue,Le){return G===null||G.tag!==7?(G=Wi(Y,B.mode,ue,Le),G.return=B,G):(G=x(G,Y),G.return=B,G)}function de(B,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=cd(""+G,B.mode,Y),G.return=B,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return Y=ul(G.type,G.key,G.props,null,B.mode,Y),$a(Y,G),Y.return=B,Y;case T:return G=ud(G,B.mode,Y),G.return=B,G;case ce:return G=Zi(G),de(B,G,Y)}if(Ce(G)||pe(G))return G=Wi(G,B.mode,Y,null),G.return=B,G;if(typeof G.then=="function")return de(B,yl(G),Y);if(G.$$typeof===I)return de(B,hl(B,G),Y);xl(B,G)}return null}function ee(B,G,Y,ue){var Le=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Le!==null?null:A(B,G,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Le?L(B,G,Y,ue):null;case T:return Y.key===Le?K(B,G,Y,ue):null;case ce:return Y=Zi(Y),ee(B,G,Y,ue)}if(Ce(Y)||pe(Y))return Le!==null?null:re(B,G,Y,ue,null);if(typeof Y.then=="function")return ee(B,G,yl(Y),ue);if(Y.$$typeof===I)return ee(B,G,hl(B,Y),ue);xl(B,Y)}return null}function se(B,G,Y,ue,Le){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return B=B.get(Y)||null,A(G,B,""+ue,Le);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case E:return B=B.get(ue.key===null?Y:ue.key)||null,L(G,B,ue,Le);case T:return B=B.get(ue.key===null?Y:ue.key)||null,K(G,B,ue,Le);case ce:return ue=Zi(ue),se(B,G,Y,ue,Le)}if(Ce(ue)||pe(ue))return B=B.get(Y)||null,re(G,B,ue,Le,null);if(typeof ue.then=="function")return se(B,G,Y,yl(ue),Le);if(ue.$$typeof===I)return se(B,G,Y,hl(G,ue),Le);xl(G,ue)}return null}function Re(B,G,Y,ue){for(var Le=null,st=null,ke=G,Je=G=0,Ze=null;ke!==null&&Je<Y.length;Je++){ke.index>Je?(Ze=ke,ke=null):Ze=ke.sibling;var it=ee(B,ke,Y[Je],ue);if(it===null){ke===null&&(ke=Ze);break}i&&ke&&it.alternate===null&&a(B,ke),G=C(it,G,Je),st===null?Le=it:st.sibling=it,st=it,ke=Ze}if(Je===Y.length)return l(B,ke),et&&Ls(B,Je),Le;if(ke===null){for(;Je<Y.length;Je++)ke=de(B,Y[Je],ue),ke!==null&&(G=C(ke,G,Je),st===null?Le=ke:st.sibling=ke,st=ke);return et&&Ls(B,Je),Le}for(ke=f(ke);Je<Y.length;Je++)Ze=se(ke,B,Je,Y[Je],ue),Ze!==null&&(i&&Ze.alternate!==null&&ke.delete(Ze.key===null?Je:Ze.key),G=C(Ze,G,Je),st===null?Le=Ze:st.sibling=Ze,st=Ze);return i&&ke.forEach(function(Ai){return a(B,Ai)}),et&&Ls(B,Je),Le}function Ge(B,G,Y,ue){if(Y==null)throw Error(o(151));for(var Le=null,st=null,ke=G,Je=G=0,Ze=null,it=Y.next();ke!==null&&!it.done;Je++,it=Y.next()){ke.index>Je?(Ze=ke,ke=null):Ze=ke.sibling;var Ai=ee(B,ke,it.value,ue);if(Ai===null){ke===null&&(ke=Ze);break}i&&ke&&Ai.alternate===null&&a(B,ke),G=C(Ai,G,Je),st===null?Le=Ai:st.sibling=Ai,st=Ai,ke=Ze}if(it.done)return l(B,ke),et&&Ls(B,Je),Le;if(ke===null){for(;!it.done;Je++,it=Y.next())it=de(B,it.value,ue),it!==null&&(G=C(it,G,Je),st===null?Le=it:st.sibling=it,st=it);return et&&Ls(B,Je),Le}for(ke=f(ke);!it.done;Je++,it=Y.next())it=se(ke,B,Je,it.value,ue),it!==null&&(i&&it.alternate!==null&&ke.delete(it.key===null?Je:it.key),G=C(it,G,Je),st===null?Le=it:st.sibling=it,st=it);return i&&ke.forEach(function(M1){return a(B,M1)}),et&&Ls(B,Je),Le}function pt(B,G,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Le=Y.key;G!==null;){if(G.key===Le){if(Le=Y.type,Le===R){if(G.tag===7){l(B,G.sibling),ue=x(G,Y.props.children),ue.return=B,B=ue;break e}}else if(G.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ce&&Zi(Le)===G.type){l(B,G.sibling),ue=x(G,Y.props),$a(ue,Y),ue.return=B,B=ue;break e}l(B,G);break}else a(B,G);G=G.sibling}Y.type===R?(ue=Wi(Y.props.children,B.mode,ue,Y.key),ue.return=B,B=ue):(ue=ul(Y.type,Y.key,Y.props,null,B.mode,ue),$a(ue,Y),ue.return=B,B=ue)}return w(B);case T:e:{for(Le=Y.key;G!==null;){if(G.key===Le)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){l(B,G.sibling),ue=x(G,Y.children||[]),ue.return=B,B=ue;break e}else{l(B,G);break}else a(B,G);G=G.sibling}ue=ud(Y,B.mode,ue),ue.return=B,B=ue}return w(B);case ce:return Y=Zi(Y),pt(B,G,Y,ue)}if(Ce(Y))return Re(B,G,Y,ue);if(pe(Y)){if(Le=pe(Y),typeof Le!="function")throw Error(o(150));return Y=Le.call(Y),Ge(B,G,Y,ue)}if(typeof Y.then=="function")return pt(B,G,yl(Y),ue);if(Y.$$typeof===I)return pt(B,G,hl(B,Y),ue);xl(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(l(B,G.sibling),ue=x(G,Y),ue.return=B,B=ue):(l(B,G),ue=cd(Y,B.mode,ue),ue.return=B,B=ue),w(B)):l(B,G)}return function(B,G,Y,ue){try{Ba=0;var Le=pt(B,G,Y,ue);return Fo=null,Le}catch(ke){if(ke===zo||ke===ml)throw ke;var st=Pn(29,ke,null,B.mode);return st.lanes=ue,st.return=B,st}finally{}}}var to=rg(!0),lg=rg(!1),di=!1;function Sd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wd(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function fi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function hi(i,a,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var x=f.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),f.pending=a,a=cl(i),qm(i,null,l),a}return ll(i,f,a,l),cl(i)}function Ha(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,l|=f,a.lanes=l,bn(i,l)}}function Ed(i,a){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var x=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};C===null?x=C=w:C=C.next=w,l=l.next}while(l!==null);C===null?x=C=a:C=C.next=a}else x=C=a;l={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:C,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var _d=!1;function qa(){if(_d){var i=Go;if(i!==null)throw i}}function Va(i,a,l,f){_d=!1;var x=i.updateQueue;di=!1;var C=x.firstBaseUpdate,w=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,K=L.next;L.next=null,w===null?C=K:w.next=K,w=L;var re=i.alternate;re!==null&&(re=re.updateQueue,A=re.lastBaseUpdate,A!==w&&(A===null?re.firstBaseUpdate=K:A.next=K,re.lastBaseUpdate=L))}if(C!==null){var de=x.baseState;w=0,re=K=L=null,A=C;do{var ee=A.lane&-536870913,se=ee!==A.lane;if(se?(Qe&ee)===ee:(f&ee)===ee){ee!==0&&ee===Oo&&(_d=!0),re!==null&&(re=re.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=i,Ge=A;ee=a;var pt=l;switch(Ge.tag){case 1:if(Re=Ge.payload,typeof Re=="function"){de=Re.call(pt,de,ee);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ge.payload,ee=typeof Re=="function"?Re.call(pt,de,ee):Re,ee==null)break e;de=b({},de,ee);break e;case 2:di=!0}}ee=A.callback,ee!==null&&(i.flags|=64,se&&(i.flags|=8192),se=x.callbacks,se===null?x.callbacks=[ee]:se.push(ee))}else se={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},re===null?(K=re=se,L=de):re=re.next=se,w|=ee;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;se=A,A=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);re===null&&(L=de),x.baseState=L,x.firstBaseUpdate=K,x.lastBaseUpdate=re,C===null&&(x.shared.lanes=0),xi|=w,i.lanes=w,i.memoizedState=de}}function cg(i,a){if(typeof i!="function")throw Error(o(191,i));i.call(a)}function ug(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)cg(l[i],a)}var Bo=D(null),vl=D(0);function dg(i,a){i=Vs,oe(vl,i),oe(Bo,a),Vs=i|a.baseLanes}function Td(){oe(vl,Vs),oe(Bo,Bo.current)}function Nd(){Vs=vl.current,q(Bo),q(vl)}var Ln=D(null),Zn=null;function pi(i){var a=i.alternate;oe(kt,kt.current&1),oe(Ln,i),Zn===null&&(a===null||Bo.current!==null||a.memoizedState!==null)&&(Zn=i)}function Ad(i){oe(kt,kt.current),oe(Ln,i),Zn===null&&(Zn=i)}function fg(i){i.tag===22?(oe(kt,kt.current),oe(Ln,i),Zn===null&&(Zn=i)):mi()}function mi(){oe(kt,kt.current),oe(Ln,Ln.current)}function jn(i){q(Ln),Zn===i&&(Zn=null),q(kt)}var kt=D(0);function bl(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lf(l)||jf(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Os=0,Ve=null,ft=null,Ut=null,Cl=!1,$o=!1,no=!1,Sl=0,Ja=0,Ho=null,b_=0;function Rt(){throw Error(o(321))}function Rd(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Dn(i[l],a[l]))return!1;return!0}function Md(i,a,l,f,x,C){return Os=C,Ve=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,U.H=i===null||i.memoizedState===null?Yg:qd,no=!1,C=l(f,x),no=!1,$o&&(C=pg(a,l,f,x)),hg(i),C}function hg(i){U.H=Ka;var a=ft!==null&&ft.next!==null;if(Os=0,Ut=ft=Ve=null,Cl=!1,Ja=0,Ho=null,a)throw Error(o(300));i===null||Ot||(i=i.dependencies,i!==null&&fl(i)&&(Ot=!0))}function pg(i,a,l,f){Ve=i;var x=0;do{if($o&&(Ho=null),Ja=0,$o=!1,25<=x)throw Error(o(301));if(x+=1,Ut=ft=null,i.updateQueue!=null){var C=i.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}U.H=Kg,C=a(l,f)}while($o);return C}function C_(){var i=U.H,a=i.useState()[0];return a=typeof a.then=="function"?Wa(a):a,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Ve.flags|=1024),a}function Id(){var i=Sl!==0;return Sl=0,i}function kd(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Dd(i){if(Cl){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Cl=!1}Os=0,Ut=ft=Ve=null,$o=!1,Ja=Sl=0,Ho=null}function mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ve.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function Dt(){if(ft===null){var i=Ve.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var a=Ut===null?Ve.memoizedState:Ut.next;if(a!==null)Ut=a,ft=i;else{if(i===null)throw Ve.alternate===null?Error(o(467)):Error(o(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ut===null?Ve.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(i){var a=Ja;return Ja+=1,Ho===null&&(Ho=[]),i=ig(Ho,i,a),a=Ve,(Ut===null?a.memoizedState:Ut.next)===null&&(a=a.alternate,U.H=a===null||a.memoizedState===null?Yg:qd),i}function El(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wa(i);if(i.$$typeof===I)return sn(i)}throw Error(o(438,String(i)))}function Pd(i){var a=null,l=Ve.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var f=Ve.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=wl(),Ve.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),f=0;f<i;f++)l[f]=le;return a.index++,l}function Gs(i,a){return typeof a=="function"?a(i):a}function _l(i){var a=Dt();return Ld(a,ft,i)}function Ld(i,a,l){var f=i.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=l;var x=i.baseQueue,C=f.pending;if(C!==null){if(x!==null){var w=x.next;x.next=C.next,C.next=w}a.baseQueue=x=C,f.pending=null}if(C=i.baseState,x===null)i.memoizedState=C;else{a=x.next;var A=w=null,L=null,K=a,re=!1;do{var de=K.lane&-536870913;if(de!==K.lane?(Qe&de)===de:(Os&de)===de){var ee=K.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),de===Oo&&(re=!0);else if((Os&ee)===ee){K=K.next,ee===Oo&&(re=!0);continue}else de={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(A=L=de,w=C):L=L.next=de,Ve.lanes|=ee,xi|=ee;de=K.action,no&&l(C,de),C=K.hasEagerState?K.eagerState:l(C,de)}else ee={lane:de,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(A=L=ee,w=C):L=L.next=ee,Ve.lanes|=de,xi|=de;K=K.next}while(K!==null&&K!==a);if(L===null?w=C:L.next=A,!Dn(C,i.memoizedState)&&(Ot=!0,re&&(l=Go,l!==null)))throw l;i.memoizedState=C,i.baseState=w,i.baseQueue=L,f.lastRenderedState=C}return x===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function jd(i){var a=Dt(),l=a.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var f=l.dispatch,x=l.pending,C=a.memoizedState;if(x!==null){l.pending=null;var w=x=x.next;do C=i(C,w.action),w=w.next;while(w!==x);Dn(C,a.memoizedState)||(Ot=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),l.lastRenderedState=C}return[C,f]}function mg(i,a,l){var f=Ve,x=Dt(),C=et;if(C){if(l===void 0)throw Error(o(407));l=l()}else l=a();var w=!Dn((ft||x).memoizedState,l);if(w&&(x.memoizedState=l,Ot=!0),x=x.queue,Gd(xg.bind(null,f,x,i),[i]),x.getSnapshot!==a||w||Ut!==null&&Ut.memoizedState.tag&1){if(f.flags|=2048,qo(9,{destroy:void 0},yg.bind(null,f,x,l,a),null),gt===null)throw Error(o(349));C||(Os&127)!==0||gg(f,a,l)}return l}function gg(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Ve.updateQueue,a===null?(a=wl(),Ve.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function yg(i,a,l,f){a.value=l,a.getSnapshot=f,vg(a)&&bg(i)}function xg(i,a,l){return l(function(){vg(a)&&bg(i)})}function vg(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Dn(i,l)}catch{return!0}}function bg(i){var a=Ji(i,2);a!==null&&An(a,i,2)}function Ud(i){var a=mn();if(typeof i=="function"){var l=i;if(i=l(),no){$e(!0);try{l()}finally{$e(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:i},a}function Cg(i,a,l,f){return i.baseState=l,Ld(i,ft,typeof f=="function"?f:Gs)}function S_(i,a,l,f,x){if(Al(i))throw Error(o(485));if(i=a.action,i!==null){var C={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){C.listeners.push(w)}};U.T!==null?l(!0):C.isTransition=!1,f(C),l=a.pending,l===null?(C.next=a.pending=C,Sg(a,C)):(C.next=l.next,a.pending=l.next=C)}}function Sg(i,a){var l=a.action,f=a.payload,x=i.state;if(a.isTransition){var C=U.T,w={};U.T=w;try{var A=l(x,f),L=U.S;L!==null&&L(w,A),wg(i,a,A)}catch(K){Od(i,a,K)}finally{C!==null&&w.types!==null&&(C.types=w.types),U.T=C}}else try{C=l(x,f),wg(i,a,C)}catch(K){Od(i,a,K)}}function wg(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Eg(i,a,f)},function(f){return Od(i,a,f)}):Eg(i,a,l)}function Eg(i,a,l){a.status="fulfilled",a.value=l,_g(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Sg(i,l)))}function Od(i,a,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=l,_g(a),a=a.next;while(a!==f)}i.action=null}function _g(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Tg(i,a){return a}function Ng(i,a){if(et){var l=gt.formState;if(l!==null){e:{var f=Ve;if(et){if(vt){t:{for(var x=vt,C=Qn;x.nodeType!==8;){if(!C){x=null;break t}if(x=es(x.nextSibling),x===null){x=null;break t}}C=x.data,x=C==="F!"||C==="F"?x:null}if(x){vt=es(x.nextSibling),f=x.data==="F!";break e}}ci(f)}f=!1}f&&(a=l[0])}}return l=mn(),l.memoizedState=l.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:a},l.queue=f,l=Vg.bind(null,Ve,f),f.dispatch=l,f=Ud(!1),C=Hd.bind(null,Ve,!1,f.queue),f=mn(),x={state:a,dispatch:null,action:i,pending:null},f.queue=x,l=S_.bind(null,Ve,x,C,l),x.dispatch=l,f.memoizedState=i,[a,l,!1]}function Ag(i){var a=Dt();return Rg(a,ft,i)}function Rg(i,a,l){if(a=Ld(i,a,Tg)[0],i=_l(Gs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=Wa(a)}catch(w){throw w===zo?ml:w}else f=a;a=Dt();var x=a.queue,C=x.dispatch;return l!==a.memoizedState&&(Ve.flags|=2048,qo(9,{destroy:void 0},w_.bind(null,x,l),null)),[f,C,i]}function w_(i,a){i.action=a}function Mg(i){var a=Dt(),l=ft;if(l!==null)return Rg(a,l,i);Dt(),a=a.memoizedState,l=Dt();var f=l.queue.dispatch;return l.memoizedState=i,[a,f,!1]}function qo(i,a,l,f){return i={tag:i,create:l,deps:f,inst:a,next:null},a=Ve.updateQueue,a===null&&(a=wl(),Ve.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,a.lastEffect=i),i}function Ig(){return Dt().memoizedState}function Tl(i,a,l,f){var x=mn();Ve.flags|=i,x.memoizedState=qo(1|a,{destroy:void 0},l,f===void 0?null:f)}function Nl(i,a,l,f){var x=Dt();f=f===void 0?null:f;var C=x.memoizedState.inst;ft!==null&&f!==null&&Rd(f,ft.memoizedState.deps)?x.memoizedState=qo(a,C,l,f):(Ve.flags|=i,x.memoizedState=qo(1|a,C,l,f))}function kg(i,a){Tl(8390656,8,i,a)}function Gd(i,a){Nl(2048,8,i,a)}function E_(i){Ve.flags|=4;var a=Ve.updateQueue;if(a===null)a=wl(),Ve.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Dg(i){var a=Dt().memoizedState;return E_({ref:a,nextImpl:i}),function(){if((at&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function Pg(i,a){return Nl(4,2,i,a)}function Lg(i,a){return Nl(4,4,i,a)}function jg(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ug(i,a,l){l=l!=null?l.concat([i]):null,Nl(4,4,jg.bind(null,a,i),l)}function zd(){}function Og(i,a){var l=Dt();a=a===void 0?null:a;var f=l.memoizedState;return a!==null&&Rd(a,f[1])?f[0]:(l.memoizedState=[i,a],i)}function Gg(i,a){var l=Dt();a=a===void 0?null:a;var f=l.memoizedState;if(a!==null&&Rd(a,f[1]))return f[0];if(f=i(),no){$e(!0);try{i()}finally{$e(!1)}}return l.memoizedState=[f,a],f}function Fd(i,a,l){return l===void 0||(Os&1073741824)!==0&&(Qe&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=z0(),Ve.lanes|=i,xi|=i,l)}function zg(i,a,l,f){return Dn(l,a)?l:Bo.current!==null?(i=Fd(i,l,f),Dn(i,a)||(Ot=!0),i):(Os&42)===0||(Os&1073741824)!==0&&(Qe&261930)===0?(Ot=!0,i.memoizedState=l):(i=z0(),Ve.lanes|=i,xi|=i,a)}function Fg(i,a,l,f,x){var C=ne.p;ne.p=C!==0&&8>C?C:8;var w=U.T,A={};U.T=A,Hd(i,!1,a,l);try{var L=x(),K=U.S;if(K!==null&&K(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=v_(L,f);Ya(i,a,re,Gn(i))}else Ya(i,a,f,Gn(i))}catch(de){Ya(i,a,{then:function(){},status:"rejected",reason:de},Gn())}finally{ne.p=C,w!==null&&A.types!==null&&(w.types=A.types),U.T=w}}function __(){}function Bd(i,a,l,f){if(i.tag!==5)throw Error(o(476));var x=Bg(i).queue;Fg(i,x,a,me,l===null?__:function(){return $g(i),l(f)})}function Bg(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:me},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function $g(i){var a=Bg(i);a.next===null&&(a=i.alternate.memoizedState),Ya(i,a.next.queue,{},Gn())}function $d(){return sn(fr)}function Hg(){return Dt().memoizedState}function qg(){return Dt().memoizedState}function T_(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Gn();i=fi(l);var f=hi(a,i,l);f!==null&&(An(f,a,l),Ha(f,a,l)),a={cache:xd()},i.payload=a;return}a=a.return}}function N_(i,a,l){var f=Gn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Al(i)?Jg(a,l):(l=rd(i,a,l,f),l!==null&&(An(l,i,f),Wg(l,a,f)))}function Vg(i,a,l){var f=Gn();Ya(i,a,l,f)}function Ya(i,a,l,f){var x={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Al(i))Jg(a,x);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var w=a.lastRenderedState,A=C(w,l);if(x.hasEagerState=!0,x.eagerState=A,Dn(A,w))return ll(i,a,x,0),gt===null&&rl(),!1}catch{}finally{}if(l=rd(i,a,x,f),l!==null)return An(l,i,f),Wg(l,a,f),!0}return!1}function Hd(i,a,l,f){if(f={lane:2,revertLane:wf(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Al(i)){if(a)throw Error(o(479))}else a=rd(i,l,f,2),a!==null&&An(a,i,2)}function Al(i){var a=i.alternate;return i===Ve||a!==null&&a===Ve}function Jg(i,a){$o=Cl=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Wg(i,a,l){if((l&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,l|=f,a.lanes=l,bn(i,l)}}var Ka={readContext:sn,use:El,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Ka.useEffectEvent=Rt;var Yg={readContext:sn,use:El,useCallback:function(i,a){return mn().memoizedState=[i,a===void 0?null:a],i},useContext:sn,useEffect:kg,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Tl(4194308,4,jg.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Tl(4194308,4,i,a)},useInsertionEffect:function(i,a){Tl(4,2,i,a)},useMemo:function(i,a){var l=mn();a=a===void 0?null:a;var f=i();if(no){$e(!0);try{i()}finally{$e(!1)}}return l.memoizedState=[f,a],f},useReducer:function(i,a,l){var f=mn();if(l!==void 0){var x=l(a);if(no){$e(!0);try{l(a)}finally{$e(!1)}}}else x=a;return f.memoizedState=f.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},f.queue=i,i=i.dispatch=N_.bind(null,Ve,i),[f.memoizedState,i]},useRef:function(i){var a=mn();return i={current:i},a.memoizedState=i},useState:function(i){i=Ud(i);var a=i.queue,l=Vg.bind(null,Ve,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:zd,useDeferredValue:function(i,a){var l=mn();return Fd(l,i,a)},useTransition:function(){var i=Ud(!1);return i=Fg.bind(null,Ve,i.queue,!0,!1),mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var f=Ve,x=mn();if(et){if(l===void 0)throw Error(o(407));l=l()}else{if(l=a(),gt===null)throw Error(o(349));(Qe&127)!==0||gg(f,a,l)}x.memoizedState=l;var C={value:l,getSnapshot:a};return x.queue=C,kg(xg.bind(null,f,C,i),[i]),f.flags|=2048,qo(9,{destroy:void 0},yg.bind(null,f,C,l,a),null),l},useId:function(){var i=mn(),a=gt.identifierPrefix;if(et){var l=vs,f=xs;l=(f&~(1<<32-xt(f)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Sl++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=b_++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:$d,useFormState:Ng,useActionState:Ng,useOptimistic:function(i){var a=mn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Hd.bind(null,Ve,!0,l),l.dispatch=a,[i,a]},useMemoCache:Pd,useCacheRefresh:function(){return mn().memoizedState=T_.bind(null,Ve)},useEffectEvent:function(i){var a=mn(),l={impl:i};return a.memoizedState=l,function(){if((at&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},qd={readContext:sn,use:El,useCallback:Og,useContext:sn,useEffect:Gd,useImperativeHandle:Ug,useInsertionEffect:Pg,useLayoutEffect:Lg,useMemo:Gg,useReducer:_l,useRef:Ig,useState:function(){return _l(Gs)},useDebugValue:zd,useDeferredValue:function(i,a){var l=Dt();return zg(l,ft.memoizedState,i,a)},useTransition:function(){var i=_l(Gs)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:Wa(i),a]},useSyncExternalStore:mg,useId:Hg,useHostTransitionStatus:$d,useFormState:Ag,useActionState:Ag,useOptimistic:function(i,a){var l=Dt();return Cg(l,ft,i,a)},useMemoCache:Pd,useCacheRefresh:qg};qd.useEffectEvent=Dg;var Kg={readContext:sn,use:El,useCallback:Og,useContext:sn,useEffect:Gd,useImperativeHandle:Ug,useInsertionEffect:Pg,useLayoutEffect:Lg,useMemo:Gg,useReducer:jd,useRef:Ig,useState:function(){return jd(Gs)},useDebugValue:zd,useDeferredValue:function(i,a){var l=Dt();return ft===null?Fd(l,i,a):zg(l,ft.memoizedState,i,a)},useTransition:function(){var i=jd(Gs)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:Wa(i),a]},useSyncExternalStore:mg,useId:Hg,useHostTransitionStatus:$d,useFormState:Mg,useActionState:Mg,useOptimistic:function(i,a){var l=Dt();return ft!==null?Cg(l,ft,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Pd,useCacheRefresh:qg};Kg.useEffectEvent=Dg;function Vd(i,a,l,f){a=i.memoizedState,l=l(f,a),l=l==null?a:b({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Jd={enqueueSetState:function(i,a,l){i=i._reactInternals;var f=Gn(),x=fi(f);x.payload=a,l!=null&&(x.callback=l),a=hi(i,x,f),a!==null&&(An(a,i,f),Ha(a,i,f))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var f=Gn(),x=fi(f);x.tag=1,x.payload=a,l!=null&&(x.callback=l),a=hi(i,x,f),a!==null&&(An(a,i,f),Ha(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Gn(),f=fi(l);f.tag=2,a!=null&&(f.callback=a),a=hi(i,f,l),a!==null&&(An(a,i,l),Ha(a,i,l))}};function Xg(i,a,l,f,x,C,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,C,w):a.prototype&&a.prototype.isPureReactComponent?!ja(l,f)||!ja(x,C):!0}function Qg(i,a,l,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,f),a.state!==i&&Jd.enqueueReplaceState(a,a.state,null)}function so(i,a){var l=a;if("ref"in a){l={};for(var f in a)f!=="ref"&&(l[f]=a[f])}if(i=i.defaultProps){l===a&&(l=b({},l));for(var x in i)l[x]===void 0&&(l[x]=i[x])}return l}function Zg(i){al(i)}function e0(i){console.error(i)}function t0(i){al(i)}function Rl(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function n0(i,a,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Wd(i,a,l){return l=fi(l),l.tag=3,l.payload={element:null},l.callback=function(){Rl(i,a)},l}function s0(i){return i=fi(i),i.tag=3,i}function i0(i,a,l,f){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var C=f.value;i.payload=function(){return x(C)},i.callback=function(){n0(a,l,f)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){n0(a,l,f),typeof x!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function A_(i,a,l,f,x){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=l.alternate,a!==null&&Uo(a,l,x,!0),l=Ln.current,l!==null){switch(l.tag){case 31:case 13:return Zn===null?Fl():l.alternate===null&&Mt===0&&(Mt=3),l.flags&=-257,l.flags|=65536,l.lanes=x,f===gl?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([f]):a.add(f),bf(i,f,x)),!1;case 22:return l.flags|=65536,f===gl?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([f]):l.add(f)),bf(i,f,x)),!1}throw Error(o(435,l.tag))}return bf(i,f,x),Fl(),!1}if(et)return a=Ln.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,f!==hd&&(i=Error(o(422),{cause:f}),Ga(Yn(i,l)))):(f!==hd&&(a=Error(o(423),{cause:f}),Ga(Yn(a,l))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,f=Yn(f,l),x=Wd(i.stateNode,f,x),Ed(i,x),Mt!==4&&(Mt=2)),!1;var C=Error(o(520),{cause:f});if(C=Yn(C,l),ir===null?ir=[C]:ir.push(C),Mt!==4&&(Mt=2),a===null)return!0;f=Yn(f,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=x&-x,l.lanes|=i,i=Wd(l.stateNode,f,i),Ed(l,i),!1;case 1:if(a=l.type,C=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(vi===null||!vi.has(C))))return l.flags|=65536,x&=-x,l.lanes|=x,x=s0(x),i0(x,i,l,f),Ed(l,x),!1}l=l.return}while(l!==null);return!1}var Yd=Error(o(461)),Ot=!1;function on(i,a,l,f){a.child=i===null?lg(a,null,l,f):to(a,i.child,l,f)}function o0(i,a,l,f,x){l=l.render;var C=a.ref;if("ref"in f){var w={};for(var A in f)A!=="ref"&&(w[A]=f[A])}else w=f;return Xi(a),f=Md(i,a,l,w,C,x),A=Id(),i!==null&&!Ot?(kd(i,a,x),zs(i,a,x)):(et&&A&&dd(a),a.flags|=1,on(i,a,f,x),a.child)}function a0(i,a,l,f,x){if(i===null){var C=l.type;return typeof C=="function"&&!ld(C)&&C.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=C,r0(i,a,C,f,x)):(i=ul(l.type,null,f,a,a.mode,x),i.ref=a.ref,i.return=a,a.child=i)}if(C=i.child,!sf(i,x)){var w=C.memoizedProps;if(l=l.compare,l=l!==null?l:ja,l(w,f)&&i.ref===a.ref)return zs(i,a,x)}return a.flags|=1,i=Ps(C,f),i.ref=a.ref,i.return=a,a.child=i}function r0(i,a,l,f,x){if(i!==null){var C=i.memoizedProps;if(ja(C,f)&&i.ref===a.ref)if(Ot=!1,a.pendingProps=f=C,sf(i,x))(i.flags&131072)!==0&&(Ot=!0);else return a.lanes=i.lanes,zs(i,a,x)}return Kd(i,a,l,f,x)}function l0(i,a,l,f){var x=f.children,C=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(C=C!==null?C.baseLanes|l:l,i!==null){for(f=a.child=i.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~C}else f=0,a.child=null;return c0(i,a,C,l,f)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&pl(a,C!==null?C.cachePool:null),C!==null?dg(a,C):Td(),fg(a);else return f=a.lanes=536870912,c0(i,a,C!==null?C.baseLanes|l:l,l,f)}else C!==null?(pl(a,C.cachePool),dg(a,C),mi(),a.memoizedState=null):(i!==null&&pl(a,null),Td(),mi());return on(i,a,x,l),a.child}function Xa(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function c0(i,a,l,f,x){var C=bd();return C=C===null?null:{parent:jt._currentValue,pool:C},a.memoizedState={baseLanes:l,cachePool:C},i!==null&&pl(a,null),Td(),fg(a),i!==null&&Uo(i,a,f,!0),a.childLanes=x,null}function Ml(i,a){return a=kl({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function u0(i,a,l){return to(a,i.child,null,l),i=Ml(a,a.pendingProps),i.flags|=2,jn(a),a.memoizedState=null,i}function R_(i,a,l){var f=a.pendingProps,x=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(et){if(f.mode==="hidden")return i=Ml(a,f),a.lanes=536870912,Xa(null,i);if(Ad(a),(i=vt)?(i=Sy(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ri!==null?{id:xs,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},l=Jm(i),l.return=a,a.child=l,nn=a,vt=null)):i=null,i===null)throw ci(a);return a.lanes=536870912,null}return Ml(a,f)}var C=i.memoizedState;if(C!==null){var w=C.dehydrated;if(Ad(a),x)if(a.flags&256)a.flags&=-257,a=u0(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(o(558));else if(Ot||Uo(i,a,l,!1),x=(l&i.childLanes)!==0,Ot||x){if(f=gt,f!==null&&(w=Cn(f,l),w!==0&&w!==C.retryLane))throw C.retryLane=w,Ji(i,w),An(f,i,w),Yd;Fl(),a=u0(i,a,l)}else i=C.treeContext,vt=es(w.nextSibling),nn=a,et=!0,li=null,Qn=!1,i!==null&&Km(a,i),a=Ml(a,f),a.flags|=4096;return a}return i=Ps(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Il(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Kd(i,a,l,f,x){return Xi(a),l=Md(i,a,l,f,void 0,x),f=Id(),i!==null&&!Ot?(kd(i,a,x),zs(i,a,x)):(et&&f&&dd(a),a.flags|=1,on(i,a,l,x),a.child)}function d0(i,a,l,f,x,C){return Xi(a),a.updateQueue=null,l=pg(a,f,l,x),hg(i),f=Id(),i!==null&&!Ot?(kd(i,a,C),zs(i,a,C)):(et&&f&&dd(a),a.flags|=1,on(i,a,l,C),a.child)}function f0(i,a,l,f,x){if(Xi(a),a.stateNode===null){var C=Do,w=l.contextType;typeof w=="object"&&w!==null&&(C=sn(w)),C=new l(f,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Jd,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=f,C.state=a.memoizedState,C.refs={},Sd(a),w=l.contextType,C.context=typeof w=="object"&&w!==null?sn(w):Do,C.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Vd(a,l,w,f),C.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(w=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),w!==C.state&&Jd.enqueueReplaceState(C,C.state,null),Va(a,f,C,x),qa(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){C=a.stateNode;var A=a.memoizedProps,L=so(l,A);C.props=L;var K=C.context,re=l.contextType;w=Do,typeof re=="object"&&re!==null&&(w=sn(re));var de=l.getDerivedStateFromProps;re=typeof de=="function"||typeof C.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,re||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(A||K!==w)&&Qg(a,C,f,w),di=!1;var ee=a.memoizedState;C.state=ee,Va(a,f,C,x),qa(),K=a.memoizedState,A||ee!==K||di?(typeof de=="function"&&(Vd(a,l,de,f),K=a.memoizedState),(L=di||Xg(a,l,L,f,ee,K,w))?(re||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=K),C.props=f,C.state=K,C.context=w,f=L):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,wd(i,a),w=a.memoizedProps,re=so(l,w),C.props=re,de=a.pendingProps,ee=C.context,K=l.contextType,L=Do,typeof K=="object"&&K!==null&&(L=sn(K)),A=l.getDerivedStateFromProps,(K=typeof A=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(w!==de||ee!==L)&&Qg(a,C,f,L),di=!1,ee=a.memoizedState,C.state=ee,Va(a,f,C,x),qa();var se=a.memoizedState;w!==de||ee!==se||di||i!==null&&i.dependencies!==null&&fl(i.dependencies)?(typeof A=="function"&&(Vd(a,l,A,f),se=a.memoizedState),(re=di||Xg(a,l,re,f,ee,se,L)||i!==null&&i.dependencies!==null&&fl(i.dependencies))?(K||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,se,L),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,se,L)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||w===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=se),C.props=f,C.state=se,C.context=L,f=re):(typeof C.componentDidUpdate!="function"||w===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),f=!1)}return C=f,Il(i,a),f=(a.flags&128)!==0,C||f?(C=a.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,i!==null&&f?(a.child=to(a,i.child,null,x),a.child=to(a,null,l,x)):on(i,a,l,x),a.memoizedState=C.state,i=a.child):i=zs(i,a,x),i}function h0(i,a,l,f){return Yi(),a.flags|=256,on(i,a,l,f),a.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qd(i){return{baseLanes:i,cachePool:ng()}}function Zd(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=On),i}function p0(i,a,l){var f=a.pendingProps,x=!1,C=(a.flags&128)!==0,w;if((w=C)||(w=i!==null&&i.memoizedState===null?!1:(kt.current&2)!==0),w&&(x=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,i===null){if(et){if(x?pi(a):mi(),(i=vt)?(i=Sy(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ri!==null?{id:xs,overflow:vs}:null,retryLane:536870912,hydrationErrors:null},l=Jm(i),l.return=a,a.child=l,nn=a,vt=null)):i=null,i===null)throw ci(a);return jf(i)?a.lanes=32:a.lanes=536870912,null}var A=f.children;return f=f.fallback,x?(mi(),x=a.mode,A=kl({mode:"hidden",children:A},x),f=Wi(f,x,l,null),A.return=a,f.return=a,A.sibling=f,a.child=A,f=a.child,f.memoizedState=Qd(l),f.childLanes=Zd(i,w,l),a.memoizedState=Xd,Xa(null,f)):(pi(a),ef(a,A))}var L=i.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(C)a.flags&256?(pi(a),a.flags&=-257,a=tf(i,a,l)):a.memoizedState!==null?(mi(),a.child=i.child,a.flags|=128,a=null):(mi(),A=f.fallback,x=a.mode,f=kl({mode:"visible",children:f.children},x),A=Wi(A,x,l,null),A.flags|=2,f.return=a,A.return=a,f.sibling=A,a.child=f,to(a,i.child,null,l),f=a.child,f.memoizedState=Qd(l),f.childLanes=Zd(i,w,l),a.memoizedState=Xd,a=Xa(null,f));else if(pi(a),jf(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var K=w.dgst;w=K,f=Error(o(419)),f.stack="",f.digest=w,Ga({value:f,source:null,stack:null}),a=tf(i,a,l)}else if(Ot||Uo(i,a,l,!1),w=(l&i.childLanes)!==0,Ot||w){if(w=gt,w!==null&&(f=Cn(w,l),f!==0&&f!==L.retryLane))throw L.retryLane=f,Ji(i,f),An(w,i,f),Yd;Lf(A)||Fl(),a=tf(i,a,l)}else Lf(A)?(a.flags|=192,a.child=i.child,a=null):(i=L.treeContext,vt=es(A.nextSibling),nn=a,et=!0,li=null,Qn=!1,i!==null&&Km(a,i),a=ef(a,f.children),a.flags|=4096);return a}return x?(mi(),A=f.fallback,x=a.mode,L=i.child,K=L.sibling,f=Ps(L,{mode:"hidden",children:f.children}),f.subtreeFlags=L.subtreeFlags&65011712,K!==null?A=Ps(K,A):(A=Wi(A,x,l,null),A.flags|=2),A.return=a,f.return=a,f.sibling=A,a.child=f,Xa(null,f),f=a.child,A=i.child.memoizedState,A===null?A=Qd(l):(x=A.cachePool,x!==null?(L=jt._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=ng(),A={baseLanes:A.baseLanes|l,cachePool:x}),f.memoizedState=A,f.childLanes=Zd(i,w,l),a.memoizedState=Xd,Xa(i.child,f)):(pi(a),l=i.child,i=l.sibling,l=Ps(l,{mode:"visible",children:f.children}),l.return=a,l.sibling=null,i!==null&&(w=a.deletions,w===null?(a.deletions=[i],a.flags|=16):w.push(i)),a.child=l,a.memoizedState=null,l)}function ef(i,a){return a=kl({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function kl(i,a){return i=Pn(22,i,null,a),i.lanes=0,i}function tf(i,a,l){return to(a,i.child,null,l),i=ef(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function m0(i,a,l){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),gd(i.return,a,l)}function nf(i,a,l,f,x,C){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:x,treeForkCount:C}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=l,w.tailMode=x,w.treeForkCount=C)}function g0(i,a,l){var f=a.pendingProps,x=f.revealOrder,C=f.tail;f=f.children;var w=kt.current,A=(w&2)!==0;if(A?(w=w&1|2,a.flags|=128):w&=1,oe(kt,w),on(i,a,f,l),f=et?Oa:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&m0(i,l,a);else if(i.tag===19)m0(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(l=a.child,x=null;l!==null;)i=l.alternate,i!==null&&bl(i)===null&&(x=l),l=l.sibling;l=x,l===null?(x=a.child,a.child=null):(x=l.sibling,l.sibling=null),nf(a,!1,x,l,C,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,x=a.child,a.child=null;x!==null;){if(i=x.alternate,i!==null&&bl(i)===null){a.child=x;break}i=x.sibling,x.sibling=l,l=x,x=i}nf(a,!0,l,null,C,f);break;case"together":nf(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function zs(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),xi|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Uo(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(o(153));if(a.child!==null){for(i=a.child,l=Ps(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Ps(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function sf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&fl(i)))}function M_(i,a,l){switch(a.tag){case 3:X(a,a.stateNode.containerInfo),ui(a,jt,i.memoizedState.cache),Yi();break;case 27:case 5:W(a);break;case 4:X(a,a.stateNode.containerInfo);break;case 10:ui(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ad(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(pi(a),a.flags|=128,null):(l&a.child.childLanes)!==0?p0(i,a,l):(pi(a),i=zs(i,a,l),i!==null?i.sibling:null);pi(a);break;case 19:var x=(i.flags&128)!==0;if(f=(l&a.childLanes)!==0,f||(Uo(i,a,l,!1),f=(l&a.childLanes)!==0),x){if(f)return g0(i,a,l);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),oe(kt,kt.current),f)break;return null;case 22:return a.lanes=0,l0(i,a,l,a.pendingProps);case 24:ui(a,jt,i.memoizedState.cache)}return zs(i,a,l)}function y0(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)Ot=!0;else{if(!sf(i,l)&&(a.flags&128)===0)return Ot=!1,M_(i,a,l);Ot=(i.flags&131072)!==0}else Ot=!1,et&&(a.flags&1048576)!==0&&Ym(a,Oa,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=Zi(a.elementType),a.type=i,typeof i=="function")ld(i)?(f=so(i,f),a.tag=1,a=f0(null,a,i,f,l)):(a.tag=0,a=Kd(null,a,i,f,l));else{if(i!=null){var x=i.$$typeof;if(x===j){a.tag=11,a=o0(null,a,i,f,l);break e}else if(x===$){a.tag=14,a=a0(null,a,i,f,l);break e}}throw a=ve(i)||i,Error(o(306,a,""))}}return a;case 0:return Kd(i,a,a.type,a.pendingProps,l);case 1:return f=a.type,x=so(f,a.pendingProps),f0(i,a,f,x,l);case 3:e:{if(X(a,a.stateNode.containerInfo),i===null)throw Error(o(387));f=a.pendingProps;var C=a.memoizedState;x=C.element,wd(i,a),Va(a,f,null,l);var w=a.memoizedState;if(f=w.cache,ui(a,jt,f),f!==C.cache&&yd(a,[jt],l,!0),qa(),f=w.element,C.isDehydrated)if(C={element:f,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=h0(i,a,f,l);break e}else if(f!==x){x=Yn(Error(o(424)),a),Ga(x),a=h0(i,a,f,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(vt=es(i.firstChild),nn=a,et=!0,li=null,Qn=!0,l=lg(a,null,f,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Yi(),f===x){a=zs(i,a,l);break e}on(i,a,f,l)}a=a.child}return a;case 26:return Il(i,a),i===null?(l=Ay(a.type,null,a.pendingProps,null))?a.memoizedState=l:et||(l=a.type,i=a.pendingProps,f=Wl(ge.current).createElement(l),f[tn]=a,f[Sn]=i,an(f,l,i),Yt(f),a.stateNode=f):a.memoizedState=Ay(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return W(a),i===null&&et&&(f=a.stateNode=_y(a.type,a.pendingProps,ge.current),nn=a,Qn=!0,x=vt,wi(a.type)?(Uf=x,vt=es(f.firstChild)):vt=x),on(i,a,a.pendingProps.children,l),Il(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&et&&((x=f=vt)&&(f=a1(f,a.type,a.pendingProps,Qn),f!==null?(a.stateNode=f,nn=a,vt=es(f.firstChild),Qn=!1,x=!0):x=!1),x||ci(a)),W(a),x=a.type,C=a.pendingProps,w=i!==null?i.memoizedProps:null,f=C.children,kf(x,C)?f=null:w!==null&&kf(x,w)&&(a.flags|=32),a.memoizedState!==null&&(x=Md(i,a,C_,null,null,l),fr._currentValue=x),Il(i,a),on(i,a,f,l),a.child;case 6:return i===null&&et&&((i=l=vt)&&(l=r1(l,a.pendingProps,Qn),l!==null?(a.stateNode=l,nn=a,vt=null,i=!0):i=!1),i||ci(a)),null;case 13:return p0(i,a,l);case 4:return X(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=to(a,null,f,l):on(i,a,f,l),a.child;case 11:return o0(i,a,a.type,a.pendingProps,l);case 7:return on(i,a,a.pendingProps,l),a.child;case 8:return on(i,a,a.pendingProps.children,l),a.child;case 12:return on(i,a,a.pendingProps.children,l),a.child;case 10:return f=a.pendingProps,ui(a,a.type,f.value),on(i,a,f.children,l),a.child;case 9:return x=a.type._context,f=a.pendingProps.children,Xi(a),x=sn(x),f=f(x),a.flags|=1,on(i,a,f,l),a.child;case 14:return a0(i,a,a.type,a.pendingProps,l);case 15:return r0(i,a,a.type,a.pendingProps,l);case 19:return g0(i,a,l);case 31:return R_(i,a,l);case 22:return l0(i,a,l,a.pendingProps);case 24:return Xi(a),f=sn(jt),i===null?(x=bd(),x===null&&(x=gt,C=xd(),x.pooledCache=C,C.refCount++,C!==null&&(x.pooledCacheLanes|=l),x=C),a.memoizedState={parent:f,cache:x},Sd(a),ui(a,jt,x)):((i.lanes&l)!==0&&(wd(i,a),Va(a,null,null,l),qa()),x=i.memoizedState,C=a.memoizedState,x.parent!==f?(x={parent:f,cache:f},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),ui(a,jt,f)):(f=C.cache,ui(a,jt,f),f!==x.cache&&yd(a,[jt],l,!0))),on(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Fs(i){i.flags|=4}function of(i,a,l,f,x){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(H0())i.flags|=8192;else throw eo=gl,Cd}else i.flags&=-16777217}function x0(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Dy(a))if(H0())i.flags|=8192;else throw eo=gl,Cd}function Dl(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Lt():536870912,i.lanes|=a,Yo|=a)}function Qa(i,a){if(!et)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function bt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(a)for(var x=i.child;x!==null;)l|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)l|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=f,i.childLanes=l,a}function I_(i,a,l){var f=a.pendingProps;switch(fd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(a),null;case 1:return bt(a),null;case 3:return l=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Us(jt),O(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(jo(a)?Fs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pd())),bt(a),null;case 26:var x=a.type,C=a.memoizedState;return i===null?(Fs(a),C!==null?(bt(a),x0(a,C)):(bt(a),of(a,x,null,f,l))):C?C!==i.memoizedState?(Fs(a),bt(a),x0(a,C)):(bt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&Fs(a),bt(a),of(a,x,i,f,l)),null;case 27:if(ae(a),l=ge.current,x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Fs(a);else{if(!f){if(a.stateNode===null)throw Error(o(166));return bt(a),null}i=fe.current,jo(a)?Xm(a):(i=_y(x,f,l),a.stateNode=i,Fs(a))}return bt(a),null;case 5:if(ae(a),x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Fs(a);else{if(!f){if(a.stateNode===null)throw Error(o(166));return bt(a),null}if(C=fe.current,jo(a))Xm(a);else{var w=Wl(ge.current);switch(C){case 1:C=w.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:C=w.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":C=w.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":C=w.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":C=w.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof f.is=="string"?w.createElement("select",{is:f.is}):w.createElement("select"),f.multiple?C.multiple=!0:f.size&&(C.size=f.size);break;default:C=typeof f.is=="string"?w.createElement(x,{is:f.is}):w.createElement(x)}}C[tn]=a,C[Sn]=f;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)C.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=C;e:switch(an(C,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Fs(a)}}return bt(a),of(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Fs(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(o(166));if(i=ge.current,jo(a)){if(i=a.stateNode,l=a.memoizedProps,f=null,x=nn,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}i[tn]=a,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||py(i.nodeValue,l)),i||ci(a,!0)}else i=Wl(i).createTextNode(f),i[tn]=a,a.stateNode=i}return bt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(f=jo(a),l!==null){if(i===null){if(!f)throw Error(o(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[tn]=a}else Yi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),i=!1}else l=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(jn(a),a):(jn(a),null);if((a.flags&128)!==0)throw Error(o(558))}return bt(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=jo(a),f!==null&&f.dehydrated!==null){if(i===null){if(!x)throw Error(o(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));x[tn]=a}else Yi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),x=!1}else x=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(jn(a),a):(jn(a),null)}return jn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=f!==null,i=i!==null&&i.memoizedState!==null,l&&(f=a.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),C=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(C=f.memoizedState.cachePool.pool),C!==x&&(f.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Dl(a,a.updateQueue),bt(a),null);case 4:return O(),i===null&&Nf(a.stateNode.containerInfo),bt(a),null;case 10:return Us(a.type),bt(a),null;case 19:if(q(kt),f=a.memoizedState,f===null)return bt(a),null;if(x=(a.flags&128)!==0,C=f.rendering,C===null)if(x)Qa(f,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=bl(i),C!==null){for(a.flags|=128,Qa(f,!1),i=C.updateQueue,a.updateQueue=i,Dl(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Vm(l,i),l=l.sibling;return oe(kt,kt.current&1|2),et&&Ls(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&Tt()>Ol&&(a.flags|=128,x=!0,Qa(f,!1),a.lanes=4194304)}else{if(!x)if(i=bl(C),i!==null){if(a.flags|=128,x=!0,i=i.updateQueue,a.updateQueue=i,Dl(a,i),Qa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!C.alternate&&!et)return bt(a),null}else 2*Tt()-f.renderingStartTime>Ol&&l!==536870912&&(a.flags|=128,x=!0,Qa(f,!1),a.lanes=4194304);f.isBackwards?(C.sibling=a.child,a.child=C):(i=f.last,i!==null?i.sibling=C:a.child=C,f.last=C)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Tt(),i.sibling=null,l=kt.current,oe(kt,x?l&1|2:l&1),et&&Ls(a,f.treeForkCount),i):(bt(a),null);case 22:case 23:return jn(a),Nd(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(l&536870912)!==0&&(a.flags&128)===0&&(bt(a),a.subtreeFlags&6&&(a.flags|=8192)):bt(a),l=a.updateQueue,l!==null&&Dl(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==l&&(a.flags|=2048),i!==null&&q(Qi),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Us(jt),bt(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function k_(i,a){switch(fd(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Us(jt),O(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ae(a),null;case 31:if(a.memoizedState!==null){if(jn(a),a.alternate===null)throw Error(o(340));Yi()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(jn(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(o(340));Yi()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return q(kt),null;case 4:return O(),null;case 10:return Us(a.type),null;case 22:case 23:return jn(a),Nd(),i!==null&&q(Qi),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Us(jt),null;case 25:return null;default:return null}}function v0(i,a){switch(fd(a),a.tag){case 3:Us(jt),O();break;case 26:case 27:case 5:ae(a);break;case 4:O();break;case 31:a.memoizedState!==null&&jn(a);break;case 13:jn(a);break;case 19:q(kt);break;case 10:Us(a.type);break;case 22:case 23:jn(a),Nd(),i!==null&&q(Qi);break;case 24:Us(jt)}}function Za(i,a){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var x=f.next;l=x;do{if((l.tag&i)===i){f=void 0;var C=l.create,w=l.inst;f=C(),w.destroy=f}l=l.next}while(l!==x)}}catch(A){ct(a,a.return,A)}}function gi(i,a,l){try{var f=a.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var C=x.next;f=C;do{if((f.tag&i)===i){var w=f.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,x=a;var L=l,K=A;try{K()}catch(re){ct(x,L,re)}}}f=f.next}while(f!==C)}}catch(re){ct(a,a.return,re)}}function b0(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{ug(a,l)}catch(f){ct(i,i.return,f)}}}function C0(i,a,l){l.props=so(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){ct(i,a,f)}}function er(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(x){ct(i,a,x)}}function bs(i,a){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(x){ct(i,a,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){ct(i,a,x)}else l.current=null}function S0(i){var a=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(x){ct(i,i.return,x)}}function af(i,a,l){try{var f=i.stateNode;e1(f,i.type,l,a),f[Sn]=a}catch(x){ct(i,i.return,x)}}function w0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&wi(i.type)||i.tag===4}function rf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||w0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&wi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lf(i,a,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ks));else if(f!==4&&(f===27&&wi(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(lf(i,a,l),i=i.sibling;i!==null;)lf(i,a,l),i=i.sibling}function Pl(i,a,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(f!==4&&(f===27&&wi(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Pl(i,a,l),i=i.sibling;i!==null;)Pl(i,a,l),i=i.sibling}function E0(i){var a=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);an(a,f,l),a[tn]=i,a[Sn]=l}catch(C){ct(i,i.return,C)}}var Bs=!1,Gt=!1,cf=!1,_0=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function D_(i,a){if(i=i.containerInfo,Mf=tc,i=Um(i),td(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var x=f.anchorOffset,C=f.focusNode;f=f.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break e}var w=0,A=-1,L=-1,K=0,re=0,de=i,ee=null;t:for(;;){for(var se;de!==l||x!==0&&de.nodeType!==3||(A=w+x),de!==C||f!==0&&de.nodeType!==3||(L=w+f),de.nodeType===3&&(w+=de.nodeValue.length),(se=de.firstChild)!==null;)ee=de,de=se;for(;;){if(de===i)break t;if(ee===l&&++K===x&&(A=w),ee===C&&++re===f&&(L=w),(se=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=se}l=A===-1||L===-1?null:{start:A,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(If={focusedElem:i,selectionRange:l},tc=!1,Kt=a;Kt!==null;)if(a=Kt,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Kt=i;else for(;Kt!==null;){switch(a=Kt,C=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)x=i[l],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&C!==null){i=void 0,l=a,x=C.memoizedProps,C=C.memoizedState,f=l.stateNode;try{var Re=so(l.type,x);i=f.getSnapshotBeforeUpdate(Re,C),f.__reactInternalSnapshotBeforeUpdate=i}catch(Ge){ct(l,l.return,Ge)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Pf(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Pf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=a.sibling,i!==null){i.return=a.return,Kt=i;break}Kt=a.return}}function T0(i,a,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Hs(i,l),f&4&&Za(5,l);break;case 1:if(Hs(i,l),f&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(w){ct(l,l.return,w)}else{var x=so(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(x,a,i.__reactInternalSnapshotBeforeUpdate)}catch(w){ct(l,l.return,w)}}f&64&&b0(l),f&512&&er(l,l.return);break;case 3:if(Hs(i,l),f&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{ug(i,a)}catch(w){ct(l,l.return,w)}}break;case 27:a===null&&f&4&&E0(l);case 26:case 5:Hs(i,l),a===null&&f&4&&S0(l),f&512&&er(l,l.return);break;case 12:Hs(i,l);break;case 31:Hs(i,l),f&4&&R0(i,l);break;case 13:Hs(i,l),f&4&&M0(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=B_.bind(null,l),l1(i,l))));break;case 22:if(f=l.memoizedState!==null||Bs,!f){a=a!==null&&a.memoizedState!==null||Gt,x=Bs;var C=Gt;Bs=f,(Gt=a)&&!C?qs(i,l,(l.subtreeFlags&8772)!==0):Hs(i,l),Bs=x,Gt=C}break;case 30:break;default:Hs(i,l)}}function N0(i){var a=i.alternate;a!==null&&(i.alternate=null,N0(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ou(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _t=null,En=!1;function $s(i,a,l){for(l=l.child;l!==null;)A0(i,a,l),l=l.sibling}function A0(i,a,l){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(ut,l)}catch{}switch(l.tag){case 26:Gt||bs(l,a),$s(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Gt||bs(l,a);var f=_t,x=En;wi(l.type)&&(_t=l.stateNode,En=!1),$s(i,a,l),cr(l.stateNode),_t=f,En=x;break;case 5:Gt||bs(l,a);case 6:if(f=_t,x=En,_t=null,$s(i,a,l),_t=f,En=x,_t!==null)if(En)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(l.stateNode)}catch(C){ct(l,a,C)}else try{_t.removeChild(l.stateNode)}catch(C){ct(l,a,C)}break;case 18:_t!==null&&(En?(i=_t,by(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),sa(i)):by(_t,l.stateNode));break;case 4:f=_t,x=En,_t=l.stateNode.containerInfo,En=!0,$s(i,a,l),_t=f,En=x;break;case 0:case 11:case 14:case 15:gi(2,l,a),Gt||gi(4,l,a),$s(i,a,l);break;case 1:Gt||(bs(l,a),f=l.stateNode,typeof f.componentWillUnmount=="function"&&C0(l,a,f)),$s(i,a,l);break;case 21:$s(i,a,l);break;case 22:Gt=(f=Gt)||l.memoizedState!==null,$s(i,a,l),Gt=f;break;default:$s(i,a,l)}}function R0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{sa(i)}catch(l){ct(a,a.return,l)}}}function M0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{sa(i)}catch(l){ct(a,a.return,l)}}function P_(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new _0),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new _0),a;default:throw Error(o(435,i.tag))}}function Ll(i,a){var l=P_(i);a.forEach(function(f){if(!l.has(f)){l.add(f);var x=$_.bind(null,i,f);f.then(x,x)}})}function _n(i,a){var l=a.deletions;if(l!==null)for(var f=0;f<l.length;f++){var x=l[f],C=i,w=a,A=w;e:for(;A!==null;){switch(A.tag){case 27:if(wi(A.type)){_t=A.stateNode,En=!1;break e}break;case 5:_t=A.stateNode,En=!1;break e;case 3:case 4:_t=A.stateNode.containerInfo,En=!0;break e}A=A.return}if(_t===null)throw Error(o(160));A0(C,w,x),_t=null,En=!1,C=x.alternate,C!==null&&(C.return=null),x.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)I0(a,i),a=a.sibling}var ds=null;function I0(i,a){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:_n(a,i),Tn(i),f&4&&(gi(3,i,i.return),Za(3,i),gi(5,i,i.return));break;case 1:_n(a,i),Tn(i),f&512&&(Gt||l===null||bs(l,l.return)),f&64&&Bs&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var x=ds;if(_n(a,i),Tn(i),f&512&&(Gt||l===null||bs(l,l.return)),f&4){var C=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":C=x.getElementsByTagName("title")[0],(!C||C[Na]||C[tn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=x.createElement(f),x.head.insertBefore(C,x.querySelector("head > title"))),an(C,f,l),C[tn]=i,Yt(C),f=C;break e;case"link":var w=Iy("link","href",x).get(f+(l.href||""));if(w){for(var A=0;A<w.length;A++)if(C=w[A],C.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&C.getAttribute("rel")===(l.rel==null?null:l.rel)&&C.getAttribute("title")===(l.title==null?null:l.title)&&C.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(A,1);break t}}C=x.createElement(f),an(C,f,l),x.head.appendChild(C);break;case"meta":if(w=Iy("meta","content",x).get(f+(l.content||""))){for(A=0;A<w.length;A++)if(C=w[A],C.getAttribute("content")===(l.content==null?null:""+l.content)&&C.getAttribute("name")===(l.name==null?null:l.name)&&C.getAttribute("property")===(l.property==null?null:l.property)&&C.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&C.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(A,1);break t}}C=x.createElement(f),an(C,f,l),x.head.appendChild(C);break;default:throw Error(o(468,f))}C[tn]=i,Yt(C),f=C}i.stateNode=f}else ky(x,i.type,i.stateNode);else i.stateNode=My(x,f,i.memoizedProps);else C!==f?(C===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):C.count--,f===null?ky(x,i.type,i.stateNode):My(x,f,i.memoizedProps)):f===null&&i.stateNode!==null&&af(i,i.memoizedProps,l.memoizedProps)}break;case 27:_n(a,i),Tn(i),f&512&&(Gt||l===null||bs(l,l.return)),l!==null&&f&4&&af(i,i.memoizedProps,l.memoizedProps);break;case 5:if(_n(a,i),Tn(i),f&512&&(Gt||l===null||bs(l,l.return)),i.flags&32){x=i.stateNode;try{To(x,"")}catch(Re){ct(i,i.return,Re)}}f&4&&i.stateNode!=null&&(x=i.memoizedProps,af(i,x,l!==null?l.memoizedProps:x)),f&1024&&(cf=!0);break;case 6:if(_n(a,i),Tn(i),f&4){if(i.stateNode===null)throw Error(o(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(Re){ct(i,i.return,Re)}}break;case 3:if(Xl=null,x=ds,ds=Yl(a.containerInfo),_n(a,i),ds=x,Tn(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{sa(a.containerInfo)}catch(Re){ct(i,i.return,Re)}cf&&(cf=!1,k0(i));break;case 4:f=ds,ds=Yl(i.stateNode.containerInfo),_n(a,i),Tn(i),ds=f;break;case 12:_n(a,i),Tn(i);break;case 31:_n(a,i),Tn(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ll(i,f)));break;case 13:_n(a,i),Tn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ul=Tt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ll(i,f)));break;case 22:x=i.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,K=Bs,re=Gt;if(Bs=K||x,Gt=re||L,_n(a,i),Gt=re,Bs=K,Tn(i),f&8192)e:for(a=i.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(l===null||L||Bs||Gt||io(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){L=l=a;try{if(C=L.stateNode,x)w=C.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=L.stateNode;var de=L.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Re){ct(L,L.return,Re)}}}else if(a.tag===6){if(l===null){L=a;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Re){ct(L,L.return,Re)}}}else if(a.tag===18){if(l===null){L=a;try{var se=L.stateNode;x?Cy(se,!0):Cy(L.stateNode,!1)}catch(Re){ct(L,L.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Ll(i,l))));break;case 19:_n(a,i),Tn(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ll(i,f)));break;case 30:break;case 21:break;default:_n(a,i),Tn(i)}}function Tn(i){var a=i.flags;if(a&2){try{for(var l,f=i.return;f!==null;){if(w0(f)){l=f;break}f=f.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var x=l.stateNode,C=rf(i);Pl(i,C,x);break;case 5:var w=l.stateNode;l.flags&32&&(To(w,""),l.flags&=-33);var A=rf(i);Pl(i,A,w);break;case 3:case 4:var L=l.stateNode.containerInfo,K=rf(i);lf(i,K,L);break;default:throw Error(o(161))}}catch(re){ct(i,i.return,re)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function k0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;k0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Hs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)T0(i,a.alternate,a),a=a.sibling}function io(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:gi(4,a,a.return),io(a);break;case 1:bs(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&C0(a,a.return,l),io(a);break;case 27:cr(a.stateNode);case 26:case 5:bs(a,a.return),io(a);break;case 22:a.memoizedState===null&&io(a);break;case 30:io(a);break;default:io(a)}i=i.sibling}}function qs(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,x=i,C=a,w=C.flags;switch(C.tag){case 0:case 11:case 15:qs(x,C,l),Za(4,C);break;case 1:if(qs(x,C,l),f=C,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(K){ct(f,f.return,K)}if(f=C,x=f.updateQueue,x!==null){var A=f.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)cg(L[x],A)}catch(K){ct(f,f.return,K)}}l&&w&64&&b0(C),er(C,C.return);break;case 27:E0(C);case 26:case 5:qs(x,C,l),l&&f===null&&w&4&&S0(C),er(C,C.return);break;case 12:qs(x,C,l);break;case 31:qs(x,C,l),l&&w&4&&R0(x,C);break;case 13:qs(x,C,l),l&&w&4&&M0(x,C);break;case 22:C.memoizedState===null&&qs(x,C,l),er(C,C.return);break;case 30:break;default:qs(x,C,l)}a=a.sibling}}function uf(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&za(l))}function df(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&za(i))}function fs(i,a,l,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)D0(i,a,l,f),a=a.sibling}function D0(i,a,l,f){var x=a.flags;switch(a.tag){case 0:case 11:case 15:fs(i,a,l,f),x&2048&&Za(9,a);break;case 1:fs(i,a,l,f);break;case 3:fs(i,a,l,f),x&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&za(i)));break;case 12:if(x&2048){fs(i,a,l,f),i=a.stateNode;try{var C=a.memoizedProps,w=C.id,A=C.onPostCommit;typeof A=="function"&&A(w,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){ct(a,a.return,L)}}else fs(i,a,l,f);break;case 31:fs(i,a,l,f);break;case 13:fs(i,a,l,f);break;case 23:break;case 22:C=a.stateNode,w=a.alternate,a.memoizedState!==null?C._visibility&2?fs(i,a,l,f):tr(i,a):C._visibility&2?fs(i,a,l,f):(C._visibility|=2,Vo(i,a,l,f,(a.subtreeFlags&10256)!==0||!1)),x&2048&&uf(w,a);break;case 24:fs(i,a,l,f),x&2048&&df(a.alternate,a);break;default:fs(i,a,l,f)}}function Vo(i,a,l,f,x){for(x=x&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var C=i,w=a,A=l,L=f,K=w.flags;switch(w.tag){case 0:case 11:case 15:Vo(C,w,A,L,x),Za(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?Vo(C,w,A,L,x):tr(C,w):(re._visibility|=2,Vo(C,w,A,L,x)),x&&K&2048&&uf(w.alternate,w);break;case 24:Vo(C,w,A,L,x),x&&K&2048&&df(w.alternate,w);break;default:Vo(C,w,A,L,x)}a=a.sibling}}function tr(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,f=a,x=f.flags;switch(f.tag){case 22:tr(l,f),x&2048&&uf(f.alternate,f);break;case 24:tr(l,f),x&2048&&df(f.alternate,f);break;default:tr(l,f)}a=a.sibling}}var nr=8192;function Jo(i,a,l){if(i.subtreeFlags&nr)for(i=i.child;i!==null;)P0(i,a,l),i=i.sibling}function P0(i,a,l){switch(i.tag){case 26:Jo(i,a,l),i.flags&nr&&i.memoizedState!==null&&b1(l,ds,i.memoizedState,i.memoizedProps);break;case 5:Jo(i,a,l);break;case 3:case 4:var f=ds;ds=Yl(i.stateNode.containerInfo),Jo(i,a,l),ds=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=nr,nr=16777216,Jo(i,a,l),nr=f):Jo(i,a,l));break;default:Jo(i,a,l)}}function L0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function sr(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var f=a[l];Kt=f,U0(f,i)}L0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j0(i),i=i.sibling}function j0(i){switch(i.tag){case 0:case 11:case 15:sr(i),i.flags&2048&&gi(9,i,i.return);break;case 3:sr(i);break;case 12:sr(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,jl(i)):sr(i);break;default:sr(i)}}function jl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var f=a[l];Kt=f,U0(f,i)}L0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:gi(8,a,a.return),jl(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,jl(a));break;default:jl(a)}i=i.sibling}}function U0(i,a){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:gi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:za(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Kt=f;else e:for(l=i;Kt!==null;){f=Kt;var x=f.sibling,C=f.return;if(N0(f),f===l){Kt=null;break e}if(x!==null){x.return=C,Kt=x;break e}Kt=C}}}var L_={getCacheForType:function(i){var a=sn(jt),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return sn(jt).controller.signal}},j_=typeof WeakMap=="function"?WeakMap:Map,at=0,gt=null,Ke=null,Qe=0,lt=0,Un=null,yi=!1,Wo=!1,ff=!1,Vs=0,Mt=0,xi=0,oo=0,hf=0,On=0,Yo=0,ir=null,Nn=null,pf=!1,Ul=0,O0=0,Ol=1/0,Gl=null,vi=null,qt=0,bi=null,Ko=null,Js=0,mf=0,gf=null,G0=null,or=0,yf=null;function Gn(){return(at&2)!==0&&Qe!==0?Qe&-Qe:U.T!==null?wf():ju()}function z0(){if(On===0)if((Qe&536870912)===0||et){var i=Rs;Rs<<=1,(Rs&3932160)===0&&(Rs=262144),On=i}else On=536870912;return i=Ln.current,i!==null&&(i.flags|=32),On}function An(i,a,l){(i===gt&&(lt===2||lt===9)||i.cancelPendingCommit!==null)&&(Xo(i,0),Ci(i,Qe,On,!1)),Nt(i,l),((at&2)===0||i!==gt)&&(i===gt&&((at&2)===0&&(oo|=l),Mt===4&&Ci(i,Qe,On,!1)),Cs(i))}function F0(i,a,l){if((at&6)!==0)throw Error(o(327));var f=!l&&(a&127)===0&&(a&i.expiredLanes)===0||dt(i,a),x=f?G_(i,a):vf(i,a,!0),C=f;do{if(x===0){Wo&&!f&&Ci(i,a,0,!1);break}else{if(l=i.current.alternate,C&&!U_(l)){x=vf(i,a,!1),C=!1;continue}if(x===2){if(C=a,i.errorRecoveryDisabledLanes&C)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var A=i;x=ir;var L=A.current.memoizedState.isDehydrated;if(L&&(Xo(A,w).flags|=256),w=vf(A,w,!1),w!==2){if(ff&&!L){A.errorRecoveryDisabledLanes|=C,oo|=C,x=4;break e}C=Nn,Nn=x,C!==null&&(Nn===null?Nn=C:Nn.push.apply(Nn,C))}x=w}if(C=!1,x!==2)continue}}if(x===1){Xo(i,0),Ci(i,a,0,!0);break}e:{switch(f=i,C=x,C){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Ci(f,a,On,!yi);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(x=Ul+300-Tt(),10<x)){if(Ci(f,a,On,!yi),Ue(f,0,!0)!==0)break e;Js=a,f.timeoutHandle=xy(B0.bind(null,f,l,Nn,Gl,pf,a,On,oo,Yo,yi,C,"Throttled",-0,0),x);break e}B0(f,l,Nn,Gl,pf,a,On,oo,Yo,yi,C,null,-0,0)}}break}while(!0);Cs(i)}function B0(i,a,l,f,x,C,w,A,L,K,re,de,ee,se){if(i.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},P0(a,C,de);var Re=(C&62914560)===C?Ul-Tt():(C&4194048)===C?O0-Tt():0;if(Re=C1(de,Re),Re!==null){Js=C,i.cancelPendingCommit=Re(K0.bind(null,i,a,C,l,f,x,w,A,L,re,de,null,ee,se)),Ci(i,C,w,!K);return}}K0(i,a,C,l,f,x,w,A,L)}function U_(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var x=l[f],C=x.getSnapshot;x=x.value;try{if(!Dn(C(),x))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ci(i,a,l,f){a&=~hf,a&=~oo,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var x=a;0<x;){var C=31-xt(x),w=1<<C;f[C]=-1,x&=~w}l!==0&&Bi(i,l,a)}function zl(){return(at&6)===0?(ar(0),!1):!0}function xf(){if(Ke!==null){if(lt===0)var i=Ke.return;else i=Ke,js=Ki=null,Dd(i),Fo=null,Ba=0,i=Ke;for(;i!==null;)v0(i.alternate,i),i=i.return;Ke=null}}function Xo(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,s1(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Js=0,xf(),gt=i,Ke=l=Ps(i.current,null),Qe=a,lt=0,Un=null,yi=!1,Wo=dt(i,a),ff=!1,Yo=On=hf=oo=xi=Mt=0,Nn=ir=null,pf=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var x=31-xt(f),C=1<<x;a|=i[x],f&=~C}return Vs=a,rl(),l}function $0(i,a){Ve=null,U.H=Ka,a===zo||a===ml?(a=og(),lt=3):a===Cd?(a=og(),lt=4):lt=a===Yd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Un=a,Ke===null&&(Mt=1,Rl(i,Yn(a,i.current)))}function H0(){var i=Ln.current;return i===null?!0:(Qe&4194048)===Qe?Zn===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?i===Zn:!1}function q0(){var i=U.H;return U.H=Ka,i===null?Ka:i}function V0(){var i=U.A;return U.A=L_,i}function Fl(){Mt=4,yi||(Qe&4194048)!==Qe&&Ln.current!==null||(Wo=!0),(xi&134217727)===0&&(oo&134217727)===0||gt===null||Ci(gt,Qe,On,!1)}function vf(i,a,l){var f=at;at|=2;var x=q0(),C=V0();(gt!==i||Qe!==a)&&(Gl=null,Xo(i,a)),a=!1;var w=Mt;e:do try{if(lt!==0&&Ke!==null){var A=Ke,L=Un;switch(lt){case 8:xf(),w=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(a=!0);var K=lt;if(lt=0,Un=null,Qo(i,A,L,K),l&&Wo){w=0;break e}break;default:K=lt,lt=0,Un=null,Qo(i,A,L,K)}}O_(),w=Mt;break}catch(re){$0(i,re)}while(!0);return a&&i.shellSuspendCounter++,js=Ki=null,at=f,U.H=x,U.A=C,Ke===null&&(gt=null,Qe=0,rl()),w}function O_(){for(;Ke!==null;)J0(Ke)}function G_(i,a){var l=at;at|=2;var f=q0(),x=V0();gt!==i||Qe!==a?(Gl=null,Ol=Tt()+500,Xo(i,a)):Wo=dt(i,a);e:do try{if(lt!==0&&Ke!==null){a=Ke;var C=Un;t:switch(lt){case 1:lt=0,Un=null,Qo(i,a,C,1);break;case 2:case 9:if(sg(C)){lt=0,Un=null,W0(a);break}a=function(){lt!==2&&lt!==9||gt!==i||(lt=7),Cs(i)},C.then(a,a);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:sg(C)?(lt=0,Un=null,W0(a)):(lt=0,Un=null,Qo(i,a,C,7));break;case 5:var w=null;switch(Ke.tag){case 26:w=Ke.memoizedState;case 5:case 27:var A=Ke;if(w?Dy(w):A.stateNode.complete){lt=0,Un=null;var L=A.sibling;if(L!==null)Ke=L;else{var K=A.return;K!==null?(Ke=K,Bl(K)):Ke=null}break t}}lt=0,Un=null,Qo(i,a,C,5);break;case 6:lt=0,Un=null,Qo(i,a,C,6);break;case 8:xf(),Mt=6;break e;default:throw Error(o(462))}}z_();break}catch(re){$0(i,re)}while(!0);return js=Ki=null,U.H=f,U.A=x,at=l,Ke!==null?0:(gt=null,Qe=0,rl(),Mt)}function z_(){for(;Ke!==null&&!wt();)J0(Ke)}function J0(i){var a=y0(i.alternate,i,Vs);i.memoizedProps=i.pendingProps,a===null?Bl(i):Ke=a}function W0(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=d0(l,a,a.pendingProps,a.type,void 0,Qe);break;case 11:a=d0(l,a,a.pendingProps,a.type.render,a.ref,Qe);break;case 5:Dd(a);default:v0(l,a),a=Ke=Vm(a,Vs),a=y0(l,a,Vs)}i.memoizedProps=i.pendingProps,a===null?Bl(i):Ke=a}function Qo(i,a,l,f){js=Ki=null,Dd(a),Fo=null,Ba=0;var x=a.return;try{if(A_(i,x,a,l,Qe)){Mt=1,Rl(i,Yn(l,i.current)),Ke=null;return}}catch(C){if(x!==null)throw Ke=x,C;Mt=1,Rl(i,Yn(l,i.current)),Ke=null;return}a.flags&32768?(et||f===1?i=!0:Wo||(Qe&536870912)!==0?i=!1:(yi=i=!0,(f===2||f===9||f===3||f===6)&&(f=Ln.current,f!==null&&f.tag===13&&(f.flags|=16384))),Y0(a,i)):Bl(a)}function Bl(i){var a=i;do{if((a.flags&32768)!==0){Y0(a,yi);return}i=a.return;var l=I_(a.alternate,a,Vs);if(l!==null){Ke=l;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=i}while(a!==null);Mt===0&&(Mt=5)}function Y0(i,a){do{var l=k_(i.alternate,i);if(l!==null){l.flags&=32767,Ke=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=l}while(i!==null);Mt=6,Ke=null}function K0(i,a,l,f,x,C,w,A,L){i.cancelPendingCommit=null;do $l();while(qt!==0);if((at&6)!==0)throw Error(o(327));if(a!==null){if(a===i.current)throw Error(o(177));if(C=a.lanes|a.childLanes,C|=ad,vn(i,l,C,w,A,L),i===gt&&(Ke=gt=null,Qe=0),Ko=a,bi=i,Js=l,mf=C,gf=x,G0=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,H_(P,function(){return ty(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,x=ne.p,ne.p=2,w=at,at|=4;try{D_(i,a,l)}finally{at=w,ne.p=x,U.T=f}}qt=1,X0(),Q0(),Z0()}}function X0(){if(qt===1){qt=0;var i=bi,a=Ko,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=U.T,U.T=null;var f=ne.p;ne.p=2;var x=at;at|=4;try{I0(a,i);var C=If,w=Um(i.containerInfo),A=C.focusedElem,L=C.selectionRange;if(w!==A&&A&&A.ownerDocument&&jm(A.ownerDocument.documentElement,A)){if(L!==null&&td(A)){var K=L.start,re=L.end;if(re===void 0&&(re=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(re,A.value.length);else{var de=A.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var se=ee.getSelection(),Re=A.textContent.length,Ge=Math.min(L.start,Re),pt=L.end===void 0?Ge:Math.min(L.end,Re);!se.extend&&Ge>pt&&(w=pt,pt=Ge,Ge=w);var B=Lm(A,Ge),G=Lm(A,pt);if(B&&G&&(se.rangeCount!==1||se.anchorNode!==B.node||se.anchorOffset!==B.offset||se.focusNode!==G.node||se.focusOffset!==G.offset)){var Y=de.createRange();Y.setStart(B.node,B.offset),se.removeAllRanges(),Ge>pt?(se.addRange(Y),se.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),se.addRange(Y))}}}}for(de=[],se=A;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<de.length;A++){var ue=de[A];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}tc=!!Mf,If=Mf=null}finally{at=x,ne.p=f,U.T=l}}i.current=a,qt=2}}function Q0(){if(qt===2){qt=0;var i=bi,a=Ko,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=U.T,U.T=null;var f=ne.p;ne.p=2;var x=at;at|=4;try{T0(i,a.alternate,a)}finally{at=x,ne.p=f,U.T=l}}qt=3}}function Z0(){if(qt===4||qt===3){qt=0,Wt();var i=bi,a=Ko,l=Js,f=G0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?qt=5:(qt=0,Ko=bi=null,ey(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(vi=null),cs(l),a=a.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(ut,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=U.T,x=ne.p,ne.p=2,U.T=null;try{for(var C=i.onRecoverableError,w=0;w<f.length;w++){var A=f[w];C(A.value,{componentStack:A.stack})}}finally{U.T=a,ne.p=x}}(Js&3)!==0&&$l(),Cs(i),x=i.pendingLanes,(l&261930)!==0&&(x&42)!==0?i===yf?or++:(or=0,yf=i):or=0,ar(0)}}function ey(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,za(a)))}function $l(){return X0(),Q0(),Z0(),ty()}function ty(){if(qt!==5)return!1;var i=bi,a=mf;mf=0;var l=cs(Js),f=U.T,x=ne.p;try{ne.p=32>l?32:l,U.T=null,l=gf,gf=null;var C=bi,w=Js;if(qt=0,Ko=bi=null,Js=0,(at&6)!==0)throw Error(o(331));var A=at;if(at|=4,j0(C.current),D0(C,C.current,w,l),at=A,ar(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(ut,C)}catch{}return!0}finally{ne.p=x,U.T=f,ey(i,a)}}function ny(i,a,l){a=Yn(l,a),a=Wd(i.stateNode,a,2),i=hi(i,a,2),i!==null&&(Nt(i,2),Cs(i))}function ct(i,a,l){if(i.tag===3)ny(i,i,l);else for(;a!==null;){if(a.tag===3){ny(a,i,l);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(vi===null||!vi.has(f))){i=Yn(l,i),l=s0(2),f=hi(a,l,2),f!==null&&(i0(l,f,a,i),Nt(f,2),Cs(f));break}}a=a.return}}function bf(i,a,l){var f=i.pingCache;if(f===null){f=i.pingCache=new j_;var x=new Set;f.set(a,x)}else x=f.get(a),x===void 0&&(x=new Set,f.set(a,x));x.has(l)||(ff=!0,x.add(l),i=F_.bind(null,i,a,l),a.then(i,i))}function F_(i,a,l){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,gt===i&&(Qe&l)===l&&(Mt===4||Mt===3&&(Qe&62914560)===Qe&&300>Tt()-Ul?(at&2)===0&&Xo(i,0):hf|=l,Yo===Qe&&(Yo=0)),Cs(i)}function sy(i,a){a===0&&(a=Lt()),i=Ji(i,a),i!==null&&(Nt(i,a),Cs(i))}function B_(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),sy(i,l)}function $_(i,a){var l=0;switch(i.tag){case 31:case 13:var f=i.stateNode,x=i.memoizedState;x!==null&&(l=x.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(o(314))}f!==null&&f.delete(a),sy(i,l)}function H_(i,a){return $t(i,a)}var Hl=null,Zo=null,Cf=!1,ql=!1,Sf=!1,Si=0;function Cs(i){i!==Zo&&i.next===null&&(Zo===null?Hl=Zo=i:Zo=Zo.next=i),ql=!0,Cf||(Cf=!0,V_())}function ar(i,a){if(!Sf&&ql){Sf=!0;do for(var l=!1,f=Hl;f!==null;){if(i!==0){var x=f.pendingLanes;if(x===0)var C=0;else{var w=f.suspendedLanes,A=f.pingedLanes;C=(1<<31-xt(42|i)+1)-1,C&=x&~(w&~A),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(l=!0,ry(f,C))}else C=Qe,C=Ue(f,f===gt?C:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(C&3)===0||dt(f,C)||(l=!0,ry(f,C));f=f.next}while(l);Sf=!1}}function q_(){iy()}function iy(){ql=Cf=!1;var i=0;Si!==0&&n1()&&(i=Si);for(var a=Tt(),l=null,f=Hl;f!==null;){var x=f.next,C=oy(f,a);C===0?(f.next=null,l===null?Hl=x:l.next=x,x===null&&(Zo=l)):(l=f,(i!==0||(C&3)!==0)&&(ql=!0)),f=x}qt!==0&&qt!==5||ar(i),Si!==0&&(Si=0)}function oy(i,a){for(var l=i.suspendedLanes,f=i.pingedLanes,x=i.expirationTimes,C=i.pendingLanes&-62914561;0<C;){var w=31-xt(C),A=1<<w,L=x[w];L===-1?((A&l)===0||(A&f)!==0)&&(x[w]=Pt(A,a)):L<=a&&(i.expiredLanes|=A),C&=~A}if(a=gt,l=Qe,l=Ue(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===a&&(lt===2||lt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&ls(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||dt(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(f!==null&&ls(f),cs(l)){case 2:case 8:l=z;break;case 32:l=P;break;case 268435456:l=ye;break;default:l=P}return f=ay.bind(null,i),l=$t(l,f),i.callbackPriority=a,i.callbackNode=l,a}return f!==null&&f!==null&&ls(f),i.callbackPriority=2,i.callbackNode=null,2}function ay(i,a){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if($l()&&i.callbackNode!==l)return null;var f=Qe;return f=Ue(i,i===gt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(F0(i,f,a),oy(i,Tt()),i.callbackNode!=null&&i.callbackNode===l?ay.bind(null,i):null)}function ry(i,a){if($l())return null;F0(i,a,!0)}function V_(){i1(function(){(at&6)!==0?$t(pn,q_):iy()})}function wf(){if(Si===0){var i=Oo;i===0&&(i=As,As<<=1,(As&261888)===0&&(As=256)),Si=i}return Si}function ly(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Zr(""+i)}function cy(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function J_(i,a,l,f,x){if(a==="submit"&&l&&l.stateNode===x){var C=ly((x[Sn]||null).action),w=f.submitter;w&&(a=(a=w[Sn]||null)?ly(a.formAction):w.getAttribute("formAction"),a!==null&&(C=a,w=null));var A=new sl("action","action",null,f,x);i.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Si!==0){var L=w?cy(x,w):new FormData(x);Bd(l,{pending:!0,data:L,method:x.method,action:C},null,L)}}else typeof C=="function"&&(A.preventDefault(),L=w?cy(x,w):new FormData(x),Bd(l,{pending:!0,data:L,method:x.method,action:C},C,L))},currentTarget:x}]})}}for(var Ef=0;Ef<od.length;Ef++){var _f=od[Ef],W_=_f.toLowerCase(),Y_=_f[0].toUpperCase()+_f.slice(1);us(W_,"on"+Y_)}us(zm,"onAnimationEnd"),us(Fm,"onAnimationIteration"),us(Bm,"onAnimationStart"),us("dblclick","onDoubleClick"),us("focusin","onFocus"),us("focusout","onBlur"),us(d_,"onTransitionRun"),us(f_,"onTransitionStart"),us(h_,"onTransitionCancel"),us($m,"onTransitionEnd"),Eo("onMouseEnter",["mouseout","mouseover"]),Eo("onMouseLeave",["mouseout","mouseover"]),Eo("onPointerEnter",["pointerout","pointerover"]),Eo("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rr));function uy(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],x=f.event;f=f.listeners;e:{var C=void 0;if(a)for(var w=f.length-1;0<=w;w--){var A=f[w],L=A.instance,K=A.currentTarget;if(A=A.listener,L!==C&&x.isPropagationStopped())break e;C=A,x.currentTarget=K;try{C(x)}catch(re){al(re)}x.currentTarget=null,C=L}else for(w=0;w<f.length;w++){if(A=f[w],L=A.instance,K=A.currentTarget,A=A.listener,L!==C&&x.isPropagationStopped())break e;C=A,x.currentTarget=K;try{C(x)}catch(re){al(re)}x.currentTarget=null,C=L}}}}function Xe(i,a){var l=a[Uu];l===void 0&&(l=a[Uu]=new Set);var f=i+"__bubble";l.has(f)||(dy(a,i,2,!1),l.add(f))}function Tf(i,a,l){var f=0;a&&(f|=4),dy(l,i,f,a)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Nf(i){if(!i[Vl]){i[Vl]=!0,im.forEach(function(l){l!=="selectionchange"&&(K_.has(l)||Tf(l,!1,i),Tf(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Vl]||(a[Vl]=!0,Tf("selectionchange",!1,a))}}function dy(i,a,l,f){switch(zy(a)){case 2:var x=E1;break;case 8:x=_1;break;default:x=Bf}l=x.bind(null,a,l,i),x=void 0,!Vu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),f?x!==void 0?i.addEventListener(a,l,{capture:!0,passive:x}):i.addEventListener(a,l,!0):x!==void 0?i.addEventListener(a,l,{passive:x}):i.addEventListener(a,l,!1)}function Af(i,a,l,f,x){var C=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var A=f.stateNode.containerInfo;if(A===x)break;if(w===4)for(w=f.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===x)return;w=w.return}for(;A!==null;){if(w=Co(A),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){f=C=w;continue e}A=A.parentNode}}f=f.return}gm(function(){var K=C,re=Hu(l),de=[];e:{var ee=Hm.get(i);if(ee!==void 0){var se=sl,Re=i;switch(i){case"keypress":if(tl(l)===0)break e;case"keydown":case"keyup":se=$E;break;case"focusin":Re="focus",se=Ku;break;case"focusout":Re="blur",se=Ku;break;case"beforeblur":case"afterblur":se=Ku;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=IE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=VE;break;case zm:case Fm:case Bm:se=PE;break;case $m:se=WE;break;case"scroll":case"scrollend":se=RE;break;case"wheel":se=KE;break;case"copy":case"cut":case"paste":se=jE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Cm;break;case"toggle":case"beforetoggle":se=QE}var Ge=(a&4)!==0,pt=!Ge&&(i==="scroll"||i==="scrollend"),B=Ge?ee!==null?ee+"Capture":null:ee;Ge=[];for(var G=K,Y;G!==null;){var ue=G;if(Y=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Y===null||B===null||(ue=Ra(G,B),ue!=null&&Ge.push(lr(G,ue,Y))),pt)break;G=G.return}0<Ge.length&&(ee=new se(ee,Re,null,l,re),de.push({event:ee,listeners:Ge}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",ee&&l!==$u&&(Re=l.relatedTarget||l.fromElement)&&(Co(Re)||Re[bo]))break e;if((se||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,se?(Re=l.relatedTarget||l.toElement,se=K,Re=Re?Co(Re):null,Re!==null&&(pt=c(Re),Ge=Re.tag,Re!==pt||Ge!==5&&Ge!==27&&Ge!==6)&&(Re=null)):(se=null,Re=K),se!==Re)){if(Ge=vm,ue="onMouseLeave",B="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Ge=Cm,ue="onPointerLeave",B="onPointerEnter",G="pointer"),pt=se==null?ee:Aa(se),Y=Re==null?ee:Aa(Re),ee=new Ge(ue,G+"leave",se,l,re),ee.target=pt,ee.relatedTarget=Y,ue=null,Co(re)===K&&(Ge=new Ge(B,G+"enter",Re,l,re),Ge.target=Y,Ge.relatedTarget=pt,ue=Ge),pt=ue,se&&Re)t:{for(Ge=X_,B=se,G=Re,Y=0,ue=B;ue;ue=Ge(ue))Y++;ue=0;for(var Le=G;Le;Le=Ge(Le))ue++;for(;0<Y-ue;)B=Ge(B),Y--;for(;0<ue-Y;)G=Ge(G),ue--;for(;Y--;){if(B===G||G!==null&&B===G.alternate){Ge=B;break t}B=Ge(B),G=Ge(G)}Ge=null}else Ge=null;se!==null&&fy(de,ee,se,Ge,!1),Re!==null&&pt!==null&&fy(de,pt,Re,Ge,!0)}}e:{if(ee=K?Aa(K):window,se=ee.nodeName&&ee.nodeName.toLowerCase(),se==="select"||se==="input"&&ee.type==="file")var st=Rm;else if(Nm(ee))if(Mm)st=l_;else{st=a_;var ke=o_}else se=ee.nodeName,!se||se.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?K&&Bu(K.elementType)&&(st=Rm):st=r_;if(st&&(st=st(i,K))){Am(de,st,l,re);break e}ke&&ke(i,ee,K),i==="focusout"&&K&&ee.type==="number"&&K.memoizedProps.value!=null&&Fu(ee,"number",ee.value)}switch(ke=K?Aa(K):window,i){case"focusin":(Nm(ke)||ke.contentEditable==="true")&&(Mo=ke,nd=K,Ua=null);break;case"focusout":Ua=nd=Mo=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,Om(de,l,re);break;case"selectionchange":if(u_)break;case"keydown":case"keyup":Om(de,l,re)}var Je;if(Qu)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Ro?_m(i,l)&&(Ze="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(Sm&&l.locale!=="ko"&&(Ro||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Ro&&(Je=ym()):(ai=re,Ju="value"in ai?ai.value:ai.textContent,Ro=!0)),ke=Jl(K,Ze),0<ke.length&&(Ze=new bm(Ze,i,null,l,re),de.push({event:Ze,listeners:ke}),Je?Ze.data=Je:(Je=Tm(l),Je!==null&&(Ze.data=Je)))),(Je=e_?t_(i,l):n_(i,l))&&(Ze=Jl(K,"onBeforeInput"),0<Ze.length&&(ke=new bm("onBeforeInput","beforeinput",null,l,re),de.push({event:ke,listeners:Ze}),ke.data=Je)),J_(de,i,K,l,re)}uy(de,a)})}function lr(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Jl(i,a){for(var l=a+"Capture",f=[];i!==null;){var x=i,C=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||C===null||(x=Ra(i,l),x!=null&&f.unshift(lr(i,x,C)),x=Ra(i,a),x!=null&&f.push(lr(i,x,C))),i.tag===3)return f;i=i.return}return[]}function X_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function fy(i,a,l,f,x){for(var C=a._reactName,w=[];l!==null&&l!==f;){var A=l,L=A.alternate,K=A.stateNode;if(A=A.tag,L!==null&&L===f)break;A!==5&&A!==26&&A!==27||K===null||(L=K,x?(K=Ra(l,C),K!=null&&w.unshift(lr(l,K,L))):x||(K=Ra(l,C),K!=null&&w.push(lr(l,K,L)))),l=l.return}w.length!==0&&i.push({event:a,listeners:w})}var Q_=/\r\n?/g,Z_=/\u0000|\uFFFD/g;function hy(i){return(typeof i=="string"?i:""+i).replace(Q_,`
`).replace(Z_,"")}function py(i,a){return a=hy(a),hy(i)===a}function ht(i,a,l,f,x,C){switch(l){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||To(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&To(i,""+f);break;case"className":Xr(i,"class",f);break;case"tabIndex":Xr(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(i,l,f);break;case"style":pm(i,f,C);break;case"data":if(a!=="object"){Xr(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=Zr(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(l==="formAction"?(a!=="input"&&ht(i,a,"name",x.name,x,null),ht(i,a,"formEncType",x.formEncType,x,null),ht(i,a,"formMethod",x.formMethod,x,null),ht(i,a,"formTarget",x.formTarget,x,null)):(ht(i,a,"encType",x.encType,x,null),ht(i,a,"method",x.method,x,null),ht(i,a,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=Zr(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=ks);break;case"onScroll":f!=null&&Xe("scroll",i);break;case"onScrollEnd":f!=null&&Xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(l=f.__html,l!=null){if(x.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=Zr(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":Xe("beforetoggle",i),Xe("toggle",i),Kr(i,"popover",f);break;case"xlinkActuate":Is(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Is(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Is(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Is(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Is(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Is(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Is(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Is(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Is(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Kr(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=NE.get(l)||l,Kr(i,l,f))}}function Rf(i,a,l,f,x,C){switch(l){case"style":pm(i,f,C);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(l=f.__html,l!=null){if(x.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"children":typeof f=="string"?To(i,f):(typeof f=="number"||typeof f=="bigint")&&To(i,""+f);break;case"onScroll":f!=null&&Xe("scroll",i);break;case"onScrollEnd":f!=null&&Xe("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!om.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),a=l.slice(2,x?l.length-7:void 0),C=i[Sn]||null,C=C!=null?C[l]:null,typeof C=="function"&&i.removeEventListener(a,C,x),typeof f=="function")){typeof C!="function"&&C!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,f,x);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):Kr(i,l,f)}}}function an(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",i),Xe("load",i);var f=!1,x=!1,C;for(C in l)if(l.hasOwnProperty(C)){var w=l[C];if(w!=null)switch(C){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:ht(i,a,C,w,l,null)}}x&&ht(i,a,"srcSet",l.srcSet,l,null),f&&ht(i,a,"src",l.src,l,null);return;case"input":Xe("invalid",i);var A=C=w=x=null,L=null,K=null;for(f in l)if(l.hasOwnProperty(f)){var re=l[f];if(re!=null)switch(f){case"name":x=re;break;case"type":w=re;break;case"checked":L=re;break;case"defaultChecked":K=re;break;case"value":C=re;break;case"defaultValue":A=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,a));break;default:ht(i,a,f,re,l,null)}}um(i,C,A,L,K,w,x,!1);return;case"select":Xe("invalid",i),f=w=C=null;for(x in l)if(l.hasOwnProperty(x)&&(A=l[x],A!=null))switch(x){case"value":C=A;break;case"defaultValue":w=A;break;case"multiple":f=A;default:ht(i,a,x,A,l,null)}a=C,l=w,i.multiple=!!f,a!=null?_o(i,!!f,a,!1):l!=null&&_o(i,!!f,l,!0);return;case"textarea":Xe("invalid",i),C=x=f=null;for(w in l)if(l.hasOwnProperty(w)&&(A=l[w],A!=null))switch(w){case"value":f=A;break;case"defaultValue":x=A;break;case"children":C=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:ht(i,a,w,A,l,null)}fm(i,f,x,C);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(f=l[L],f!=null))switch(L){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ht(i,a,L,f,l,null)}return;case"dialog":Xe("beforetoggle",i),Xe("toggle",i),Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":Xe("load",i);break;case"video":case"audio":for(f=0;f<rr.length;f++)Xe(rr[f],i);break;case"image":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"embed":case"source":case"link":Xe("error",i),Xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(f=l[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:ht(i,a,K,f,l,null)}return;default:if(Bu(a)){for(re in l)l.hasOwnProperty(re)&&(f=l[re],f!==void 0&&Rf(i,a,re,f,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(f=l[A],f!=null&&ht(i,a,A,f,l,null))}function e1(i,a,l,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,C=null,w=null,A=null,L=null,K=null,re=null;for(se in l){var de=l[se];if(l.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":L=de;default:f.hasOwnProperty(se)||ht(i,a,se,null,f,de)}}for(var ee in f){var se=f[ee];if(de=l[ee],f.hasOwnProperty(ee)&&(se!=null||de!=null))switch(ee){case"type":C=se;break;case"name":x=se;break;case"checked":K=se;break;case"defaultChecked":re=se;break;case"value":w=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,a));break;default:se!==de&&ht(i,a,ee,se,f,de)}}zu(i,w,A,L,K,re,C,x);return;case"select":se=w=A=ee=null;for(C in l)if(L=l[C],l.hasOwnProperty(C)&&L!=null)switch(C){case"value":break;case"multiple":se=L;default:f.hasOwnProperty(C)||ht(i,a,C,null,f,L)}for(x in f)if(C=f[x],L=l[x],f.hasOwnProperty(x)&&(C!=null||L!=null))switch(x){case"value":ee=C;break;case"defaultValue":A=C;break;case"multiple":w=C;default:C!==L&&ht(i,a,x,C,f,L)}a=A,l=w,f=se,ee!=null?_o(i,!!l,ee,!1):!!f!=!!l&&(a!=null?_o(i,!!l,a,!0):_o(i,!!l,l?[]:"",!1));return;case"textarea":se=ee=null;for(A in l)if(x=l[A],l.hasOwnProperty(A)&&x!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ht(i,a,A,null,f,x)}for(w in f)if(x=f[w],C=l[w],f.hasOwnProperty(w)&&(x!=null||C!=null))switch(w){case"value":ee=x;break;case"defaultValue":se=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(91));break;default:x!==C&&ht(i,a,w,x,f,C)}dm(i,ee,se);return;case"option":for(var Re in l)if(ee=l[Re],l.hasOwnProperty(Re)&&ee!=null&&!f.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:ht(i,a,Re,null,f,ee)}for(L in f)if(ee=f[L],se=l[L],f.hasOwnProperty(L)&&ee!==se&&(ee!=null||se!=null))switch(L){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:ht(i,a,L,ee,f,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in l)ee=l[Ge],l.hasOwnProperty(Ge)&&ee!=null&&!f.hasOwnProperty(Ge)&&ht(i,a,Ge,null,f,ee);for(K in f)if(ee=f[K],se=l[K],f.hasOwnProperty(K)&&ee!==se&&(ee!=null||se!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,a));break;default:ht(i,a,K,ee,f,se)}return;default:if(Bu(a)){for(var pt in l)ee=l[pt],l.hasOwnProperty(pt)&&ee!==void 0&&!f.hasOwnProperty(pt)&&Rf(i,a,pt,void 0,f,ee);for(re in f)ee=f[re],se=l[re],!f.hasOwnProperty(re)||ee===se||ee===void 0&&se===void 0||Rf(i,a,re,ee,f,se);return}}for(var B in l)ee=l[B],l.hasOwnProperty(B)&&ee!=null&&!f.hasOwnProperty(B)&&ht(i,a,B,null,f,ee);for(de in f)ee=f[de],se=l[de],!f.hasOwnProperty(de)||ee===se||ee==null&&se==null||ht(i,a,de,ee,f,se)}function my(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function t1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var x=l[f],C=x.transferSize,w=x.initiatorType,A=x.duration;if(C&&A&&my(w)){for(w=0,A=x.responseEnd,f+=1;f<l.length;f++){var L=l[f],K=L.startTime;if(K>A)break;var re=L.transferSize,de=L.initiatorType;re&&my(de)&&(L=L.responseEnd,w+=re*(L<A?1:(A-K)/(L-K)))}if(--f,a+=8*(C+w)/(x.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Mf=null,If=null;function Wl(i){return i.nodeType===9?i:i.ownerDocument}function gy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yy(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function kf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Df=null;function n1(){var i=window.event;return i&&i.type==="popstate"?i===Df?!1:(Df=i,!0):(Df=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,s1=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(i){return vy.resolve(null).then(i).catch(o1)}:xy;function o1(i){setTimeout(function(){throw i})}function wi(i){return i==="head"}function by(i,a){var l=a,f=0;do{var x=l.nextSibling;if(i.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"||l==="/&"){if(f===0){i.removeChild(x),sa(a);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")cr(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,cr(l);for(var C=l.firstChild;C;){var w=C.nextSibling,A=C.nodeName;C[Na]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}else l==="body"&&cr(i.ownerDocument.body);l=x}while(l);sa(a)}function Cy(i,a){var l=i;i=0;do{var f=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=f}while(l)}function Pf(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Pf(l),Ou(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function a1(i,a,l,f){for(;i.nodeType===1;){var x=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Na])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(C=i.getAttribute("rel"),C==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(C!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(C=i.getAttribute("src"),(C!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&C&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var C=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===C)return i}else return i;if(i=es(i.nextSibling),i===null)break}return null}function r1(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=es(i.nextSibling),i===null))return null;return i}function Sy(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=es(i.nextSibling),i===null))return null;return i}function Lf(i){return i.data==="$?"||i.data==="$~"}function jf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function l1(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var f=function(){a(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function es(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Uf=null;function wy(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return es(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Ey(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function _y(i,a,l){switch(a=Wl(l),i){case"html":if(i=a.documentElement,!i)throw Error(o(452));return i;case"head":if(i=a.head,!i)throw Error(o(453));return i;case"body":if(i=a.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function cr(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ou(i)}var ts=new Map,Ty=new Set;function Yl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ws=ne.d;ne.d={f:c1,r:u1,D:d1,C:f1,L:h1,m:p1,X:g1,S:m1,M:y1};function c1(){var i=Ws.f(),a=zl();return i||a}function u1(i){var a=So(i);a!==null&&a.tag===5&&a.type==="form"?$g(a):Ws.r(i)}var ea=typeof document>"u"?null:document;function Ny(i,a,l){var f=ea;if(f&&typeof a=="string"&&a){var x=Jn(a);x='link[rel="'+i+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Ty.has(x)||(Ty.add(x),i={rel:i,crossOrigin:l,href:a},f.querySelector(x)===null&&(a=f.createElement("link"),an(a,"link",i),Yt(a),f.head.appendChild(a)))}}function d1(i){Ws.D(i),Ny("dns-prefetch",i,null)}function f1(i,a){Ws.C(i,a),Ny("preconnect",i,a)}function h1(i,a,l){Ws.L(i,a,l);var f=ea;if(f&&i&&a){var x='link[rel="preload"][as="'+Jn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+Jn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+Jn(l.imageSizes)+'"]')):x+='[href="'+Jn(i)+'"]';var C=x;switch(a){case"style":C=ta(i);break;case"script":C=na(i)}ts.has(C)||(i=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),ts.set(C,i),f.querySelector(x)!==null||a==="style"&&f.querySelector(ur(C))||a==="script"&&f.querySelector(dr(C))||(a=f.createElement("link"),an(a,"link",i),Yt(a),f.head.appendChild(a)))}}function p1(i,a){Ws.m(i,a);var l=ea;if(l&&i){var f=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+Jn(f)+'"][href="'+Jn(i)+'"]',C=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=na(i)}if(!ts.has(C)&&(i=b({rel:"modulepreload",href:i},a),ts.set(C,i),l.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(dr(C)))return}f=l.createElement("link"),an(f,"link",i),Yt(f),l.head.appendChild(f)}}}function m1(i,a,l){Ws.S(i,a,l);var f=ea;if(f&&i){var x=wo(f).hoistableStyles,C=ta(i);a=a||"default";var w=x.get(C);if(!w){var A={loading:0,preload:null};if(w=f.querySelector(ur(C)))A.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":a},l),(l=ts.get(C))&&Of(i,l);var L=w=f.createElement("link");Yt(L),an(L,"link",i),L._p=new Promise(function(K,re){L.onload=K,L.onerror=re}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Kl(w,a,f)}w={type:"stylesheet",instance:w,count:1,state:A},x.set(C,w)}}}function g1(i,a){Ws.X(i,a);var l=ea;if(l&&i){var f=wo(l).hoistableScripts,x=na(i),C=f.get(x);C||(C=l.querySelector(dr(x)),C||(i=b({src:i,async:!0},a),(a=ts.get(x))&&Gf(i,a),C=l.createElement("script"),Yt(C),an(C,"link",i),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},f.set(x,C))}}function y1(i,a){Ws.M(i,a);var l=ea;if(l&&i){var f=wo(l).hoistableScripts,x=na(i),C=f.get(x);C||(C=l.querySelector(dr(x)),C||(i=b({src:i,async:!0,type:"module"},a),(a=ts.get(x))&&Gf(i,a),C=l.createElement("script"),Yt(C),an(C,"link",i),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},f.set(x,C))}}function Ay(i,a,l,f){var x=(x=ge.current)?Yl(x):null;if(!x)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ta(l.href),l=wo(x).hoistableStyles,f=l.get(a),f||(f={type:"style",instance:null,count:0,state:null},l.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=ta(l.href);var C=wo(x).hoistableStyles,w=C.get(i);if(w||(x=x.ownerDocument||x,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(i,w),(C=x.querySelector(ur(i)))&&!C._p&&(w.instance=C,w.state.loading=5),ts.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ts.set(i,l),C||x1(x,i,l,w.state))),a&&f===null)throw Error(o(528,""));return w}if(a&&f!==null)throw Error(o(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=na(l),l=wo(x).hoistableScripts,f=l.get(a),f||(f={type:"script",instance:null,count:0,state:null},l.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function ta(i){return'href="'+Jn(i)+'"'}function ur(i){return'link[rel="stylesheet"]['+i+"]"}function Ry(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function x1(i,a,l,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),an(a,"link",l),Yt(a),i.head.appendChild(a))}function na(i){return'[src="'+Jn(i)+'"]'}function dr(i){return"script[async]"+i}function My(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+Jn(l.href)+'"]');if(f)return a.instance=f,Yt(f),f;var x=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Yt(f),an(f,"style",x),Kl(f,l.precedence,i),a.instance=f;case"stylesheet":x=ta(l.href);var C=i.querySelector(ur(x));if(C)return a.state.loading|=4,a.instance=C,Yt(C),C;f=Ry(l),(x=ts.get(x))&&Of(f,x),C=(i.ownerDocument||i).createElement("link"),Yt(C);var w=C;return w._p=new Promise(function(A,L){w.onload=A,w.onerror=L}),an(C,"link",f),a.state.loading|=4,Kl(C,l.precedence,i),a.instance=C;case"script":return C=na(l.src),(x=i.querySelector(dr(C)))?(a.instance=x,Yt(x),x):(f=l,(x=ts.get(C))&&(f=b({},l),Gf(f,x)),i=i.ownerDocument||i,x=i.createElement("script"),Yt(x),an(x,"link",f),i.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Kl(f,l.precedence,i));return a.instance}function Kl(i,a,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,C=x,w=0;w<f.length;w++){var A=f[w];if(A.dataset.precedence===a)C=A;else if(C!==x)break}C?C.parentNode.insertBefore(i,C.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Of(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Gf(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Xl=null;function Iy(i,a,l){if(Xl===null){var f=new Map,x=Xl=new Map;x.set(l,f)}else x=Xl,f=x.get(l),f||(f=new Map,x.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),x=0;x<l.length;x++){var C=l[x];if(!(C[Na]||C[tn]||i==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var w=C.getAttribute(a)||"";w=i+w;var A=f.get(w);A?A.push(C):f.set(w,[C])}}return f}function ky(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function v1(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Dy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function b1(i,a,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=ta(f.href),C=a.querySelector(ur(x));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Ql.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=C,Yt(C);return}C=a.ownerDocument||a,f=Ry(f),(x=ts.get(x))&&Of(f,x),C=C.createElement("link"),Yt(C);var w=C;w._p=new Promise(function(A,L){w.onload=A,w.onerror=L}),an(C,"link",f),l.instance=C}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Ql.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var zf=0;function C1(i,a){return i.stylesheets&&i.count===0&&ec(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var f=setTimeout(function(){if(i.stylesheets&&ec(i,i.stylesheets),i.unsuspend){var C=i.unsuspend;i.unsuspend=null,C()}},6e4+a);0<i.imgBytes&&zf===0&&(zf=62500*t1());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ec(i,i.stylesheets),i.unsuspend)){var C=i.unsuspend;i.unsuspend=null,C()}},(i.imgBytes>zf?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function Ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ec(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Zl=null;function ec(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Zl=new Map,a.forEach(S1,i),Zl=null,Ql.call(i))}function S1(i,a){if(!(a.state.loading&4)){var l=Zl.get(i);if(l)var f=l.get(null);else{l=new Map,Zl.set(i,l);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<x.length;C++){var w=x[C];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),f=w)}f&&l.set(null,f)}x=a.instance,w=x.getAttribute("data-precedence"),C=l.get(w)||f,C===f&&l.set(null,x),l.set(w,x),this.count++,f=Ql.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),C?C.parentNode.insertBefore(x,C.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),a.state.loading|=4}}var fr={$$typeof:I,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function w1(i,a,l,f,x,C,w,A,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.hiddenUpdates=Ms(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=C,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Py(i,a,l,f,x,C,w,A,L,K,re,de){return i=new w1(i,a,l,w,L,K,re,de,A),a=1,C===!0&&(a|=24),C=Pn(3,null,null,a),i.current=C,C.stateNode=i,a=xd(),a.refCount++,i.pooledCache=a,a.refCount++,C.memoizedState={element:f,isDehydrated:l,cache:a},Sd(C),i}function Ly(i){return i?(i=Do,i):Do}function jy(i,a,l,f,x,C){x=Ly(x),f.context===null?f.context=x:f.pendingContext=x,f=fi(a),f.payload={element:l},C=C===void 0?null:C,C!==null&&(f.callback=C),l=hi(i,f,a),l!==null&&(An(l,i,a),Ha(l,i,a))}function Uy(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Ff(i,a){Uy(i,a),(i=i.alternate)&&Uy(i,a)}function Oy(i){if(i.tag===13||i.tag===31){var a=Ji(i,67108864);a!==null&&An(a,i,67108864),Ff(i,67108864)}}function Gy(i){if(i.tag===13||i.tag===31){var a=Gn();a=vo(a);var l=Ji(i,a);l!==null&&An(l,i,a),Ff(i,a)}}var tc=!0;function E1(i,a,l,f){var x=U.T;U.T=null;var C=ne.p;try{ne.p=2,Bf(i,a,l,f)}finally{ne.p=C,U.T=x}}function _1(i,a,l,f){var x=U.T;U.T=null;var C=ne.p;try{ne.p=8,Bf(i,a,l,f)}finally{ne.p=C,U.T=x}}function Bf(i,a,l,f){if(tc){var x=$f(f);if(x===null)Af(i,a,f,nc,l),Fy(i,f);else if(N1(x,i,a,l,f))f.stopPropagation();else if(Fy(i,f),a&4&&-1<T1.indexOf(i)){for(;x!==null;){var C=So(x);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var w=Ht(C.pendingLanes);if(w!==0){var A=C;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var L=1<<31-xt(w);A.entanglements[1]|=L,w&=~L}Cs(C),(at&6)===0&&(Ol=Tt()+500,ar(0))}}break;case 31:case 13:A=Ji(C,2),A!==null&&An(A,C,2),zl(),Ff(C,2)}if(C=$f(f),C===null&&Af(i,a,f,nc,l),C===x)break;x=C}x!==null&&f.stopPropagation()}else Af(i,a,f,null,l)}}function $f(i){return i=Hu(i),Hf(i)}var nc=null;function Hf(i){if(nc=null,i=Co(i),i!==null){var a=c(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=d(a),i!==null)return i;i=null}else if(l===31){if(i=h(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return nc=i,null}function zy(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hn()){case pn:return 2;case z:return 8;case P:case he:return 32;case ye:return 268435456;default:return 32}default:return 32}}var qf=!1,Ei=null,_i=null,Ti=null,hr=new Map,pr=new Map,Ni=[],T1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(i,a){switch(i){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":hr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(a.pointerId)}}function mr(i,a,l,f,x,C){return i===null||i.nativeEvent!==C?(i={blockedOn:a,domEventName:l,eventSystemFlags:f,nativeEvent:C,targetContainers:[x]},a!==null&&(a=So(a),a!==null&&Oy(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),i)}function N1(i,a,l,f,x){switch(a){case"focusin":return Ei=mr(Ei,i,a,l,f,x),!0;case"dragenter":return _i=mr(_i,i,a,l,f,x),!0;case"mouseover":return Ti=mr(Ti,i,a,l,f,x),!0;case"pointerover":var C=x.pointerId;return hr.set(C,mr(hr.get(C)||null,i,a,l,f,x)),!0;case"gotpointercapture":return C=x.pointerId,pr.set(C,mr(pr.get(C)||null,i,a,l,f,x)),!0}return!1}function By(i){var a=Co(i.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){i.blockedOn=a,nm(i.priority,function(){Gy(l)});return}}else if(a===31){if(a=h(l),a!==null){i.blockedOn=a,nm(i.priority,function(){Gy(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sc(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=$f(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);$u=f,l.target.dispatchEvent(f),$u=null}else return a=So(l),a!==null&&Oy(a),i.blockedOn=l,!1;a.shift()}return!0}function $y(i,a,l){sc(i)&&l.delete(a)}function A1(){qf=!1,Ei!==null&&sc(Ei)&&(Ei=null),_i!==null&&sc(_i)&&(_i=null),Ti!==null&&sc(Ti)&&(Ti=null),hr.forEach($y),pr.forEach($y)}function ic(i,a){i.blockedOn===a&&(i.blockedOn=null,qf||(qf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,A1)))}var oc=null;function Hy(i){oc!==i&&(oc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){oc===i&&(oc=null);for(var a=0;a<i.length;a+=3){var l=i[a],f=i[a+1],x=i[a+2];if(typeof f!="function"){if(Hf(f||l)===null)continue;break}var C=So(l);C!==null&&(i.splice(a,3),a-=3,Bd(C,{pending:!0,data:x,method:l.method,action:f},f,x))}}))}function sa(i){function a(L){return ic(L,i)}Ei!==null&&ic(Ei,i),_i!==null&&ic(_i,i),Ti!==null&&ic(Ti,i),hr.forEach(a),pr.forEach(a);for(var l=0;l<Ni.length;l++){var f=Ni[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ni.length&&(l=Ni[0],l.blockedOn===null);)By(l),l.blockedOn===null&&Ni.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var x=l[f],C=l[f+1],w=x[Sn]||null;if(typeof C=="function")w||Hy(l);else if(w){var A=null;if(C&&C.hasAttribute("formAction")){if(x=C,w=C[Sn]||null)A=w.formAction;else if(Hf(x)!==null)continue}else A=w.action;typeof A=="function"?l[f+1]=A:(l.splice(f,3),f-=3),Hy(l)}}}function qy(){function i(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(w){return x=w})},focusReset:"manual",scroll:"manual"})}function a(){x!==null&&(x(),x=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),x!==null&&(x(),x=null)}}}function Vf(i){this._internalRoot=i}ac.prototype.render=Vf.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(o(409));var l=a.current,f=Gn();jy(l,f,i,a,null,null)},ac.prototype.unmount=Vf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;jy(i.current,2,null,i,null,null),zl(),a[bo]=null}};function ac(i){this._internalRoot=i}ac.prototype.unstable_scheduleHydration=function(i){if(i){var a=ju();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ni.length&&a!==0&&a<Ni[l].priority;l++);Ni.splice(l,0,i),l===0&&By(i)}};var Vy=e.version;if(Vy!=="19.2.3")throw Error(o(527,Vy,"19.2.3"));ne.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var R1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ut=rc.inject(R1),Be=rc}catch{}}return yr.createRoot=function(i,a){if(!r(i))throw Error(o(299));var l=!1,f="",x=Zg,C=e0,w=t0;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=Py(i,1,!1,null,null,l,f,null,x,C,w,qy),i[bo]=a.current,Nf(i),new Vf(a)},yr.hydrateRoot=function(i,a,l){if(!r(i))throw Error(o(299));var f=!1,x="",C=Zg,w=e0,A=t0,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),a=Py(i,1,!0,a,l??null,f,x,L,C,w,A,qy),a.context=Ly(null),l=a.current,f=Gn(),f=vo(f),x=fi(f),x.callback=null,hi(l,x,f),l=f,a.current.lanes=l,Nt(a,l),Cs(a),i[bo]=a.current,Nf(i),new ac(a)},yr.version="19.2.3",yr}var nx;function G1(){if(nx)return Yf.exports;nx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yf.exports=O1(),Yf.exports}var z1=G1(),du=$b();const F1=Fb(du);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gr(){return Gr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Gr.apply(this,arguments)}var Pi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Pi||(Pi={}));const sx="popstate";function B1(n){n===void 0&&(n={});function e(r,c){let{pathname:d="/",search:h="",hash:g=""}=go(r.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),vh("",{pathname:d,search:h,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(r,c){let d=r.document.querySelector("base"),h="";if(d&&d.getAttribute("href")){let g=r.location.href,m=g.indexOf("#");h=m===-1?g:g.slice(0,m)}return h+"#"+(typeof c=="string"?c:Oc(c))}function o(r,c){dp(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return H1(e,s,o,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $1(){return Math.random().toString(36).substr(2,8)}function ix(n,e){return{usr:n.state,key:n.key,idx:e}}function vh(n,e,s,o){return s===void 0&&(s=null),Gr({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?go(e):e,{state:s,key:e&&e.key||o||$1()})}function Oc(n){let{pathname:e="/",search:s="",hash:o=""}=n;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function go(n){let e={};if(n){let s=n.indexOf("#");s>=0&&(e.hash=n.substr(s),n=n.substr(0,s));let o=n.indexOf("?");o>=0&&(e.search=n.substr(o),n=n.substr(0,o)),n&&(e.pathname=n)}return e}function H1(n,e,s,o){o===void 0&&(o={});let{window:r=document.defaultView,v5Compat:c=!1}=o,d=r.history,h=Pi.Pop,g=null,m=v();m==null&&(m=0,d.replaceState(Gr({},d.state,{idx:m}),""));function v(){return(d.state||{idx:null}).idx}function b(){h=Pi.Pop;let _=v(),M=_==null?null:_-m;m=_,g&&g({action:h,location:R.location,delta:M})}function S(_,M){h=Pi.Push;let k=vh(R.location,_,M);s&&s(k,_),m=v()+1;let I=ix(k,m),j=R.createHref(k);try{d.pushState(I,"",j)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;r.location.assign(j)}c&&g&&g({action:h,location:R.location,delta:1})}function E(_,M){h=Pi.Replace;let k=vh(R.location,_,M);s&&s(k,_),m=v();let I=ix(k,m),j=R.createHref(k);d.replaceState(I,"",j),c&&g&&g({action:h,location:R.location,delta:0})}function T(_){let M=r.location.origin!=="null"?r.location.origin:r.location.href,k=typeof _=="string"?_:Oc(_);return k=k.replace(/ $/,"%20"),At(M,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,M)}let R={get action(){return h},get location(){return n(r,d)},listen(_){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(sx,b),g=_,()=>{r.removeEventListener(sx,b),g=null}},createHref(_){return e(r,_)},createURL:T,encodeLocation(_){let M=T(_);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:S,replace:E,go(_){return d.go(_)}};return R}var ox;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ox||(ox={}));function q1(n,e,s){s===void 0&&(s="/");let o=typeof e=="string"?go(e):e,r=ga(o.pathname||"/",s);if(r==null)return null;let c=Hb(n);V1(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let g=sT(r);d=tT(c[h],g)}return d}function Hb(n,e,s,o){e===void 0&&(e=[]),s===void 0&&(s=[]),o===void 0&&(o="");let r=(c,d,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(At(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let m=Ui([o,g.relativePath]),v=s.concat(g);c.children&&c.children.length>0&&(At(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Hb(c.children,e,v,m)),!(c.path==null&&!c.index)&&e.push({path:m,score:Z1(m,c.index),routesMeta:v})};return n.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))r(c,d);else for(let g of qb(c.path))r(c,d,g)}),e}function qb(n){let e=n.split("/");if(e.length===0)return[];let[s,...o]=e,r=s.endsWith("?"),c=s.replace(/\?$/,"");if(o.length===0)return r?[c,""]:[c];let d=qb(o.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),r&&h.push(...d),h.map(g=>n.startsWith("/")&&g===""?"/":g)}function V1(n){n.sort((e,s)=>e.score!==s.score?s.score-e.score:eT(e.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const J1=/^:[\w-]+$/,W1=3,Y1=2,K1=1,X1=10,Q1=-2,ax=n=>n==="*";function Z1(n,e){let s=n.split("/"),o=s.length;return s.some(ax)&&(o+=Q1),e&&(o+=Y1),s.filter(r=>!ax(r)).reduce((r,c)=>r+(J1.test(c)?W1:c===""?K1:X1),o)}function eT(n,e){return n.length===e.length&&n.slice(0,-1).every((o,r)=>o===e[r])?n[n.length-1]-e[e.length-1]:0}function tT(n,e){let{routesMeta:s}=n,o={},r="/",c=[];for(let d=0;d<s.length;++d){let h=s[d],g=d===s.length-1,m=r==="/"?e:e.slice(r.length)||"/",v=bh({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},m);if(!v)return null;Object.assign(o,v.params);let b=h.route;c.push({params:o,pathname:Ui([r,v.pathname]),pathnameBase:rT(Ui([r,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(r=Ui([r,v.pathnameBase]))}return c}function bh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,o]=nT(n.path,n.caseSensitive,n.end),r=e.match(s);if(!r)return null;let c=r[0],d=c.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:o.reduce((m,v,b)=>{let{paramName:S,isOptional:E}=v;if(S==="*"){let R=h[b]||"";d=c.slice(0,c.length-R.length).replace(/(.)\/+$/,"$1")}const T=h[b];return E&&!T?m[S]=void 0:m[S]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:d,pattern:n}}function nT(n,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),dp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let o=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(o.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(o.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function sT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ga(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,o=n.charAt(s);return o&&o!=="/"?null:n.slice(s)||"/"}function iT(n,e){e===void 0&&(e="/");let{pathname:s,search:o="",hash:r=""}=typeof n=="string"?go(n):n;return{pathname:s?s.startsWith("/")?s:oT(s,e):e,search:lT(o),hash:cT(r)}}function oT(n,e){let s=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function Zf(n,e,s,o){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aT(n){return n.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function fp(n,e){let s=aT(n);return e?s.map((o,r)=>r===n.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function hp(n,e,s,o){o===void 0&&(o=!1);let r;typeof n=="string"?r=go(n):(r=Gr({},n),At(!r.pathname||!r.pathname.includes("?"),Zf("?","pathname","search",r)),At(!r.pathname||!r.pathname.includes("#"),Zf("#","pathname","hash",r)),At(!r.search||!r.search.includes("#"),Zf("#","search","hash",r)));let c=n===""||r.pathname==="",d=c?"/":r.pathname,h;if(d==null)h=s;else{let b=e.length-1;if(!o&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),b-=1;r.pathname=S.join("/")}h=b>=0?e[b]:"/"}let g=iT(r,h),m=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(m||v)&&(g.pathname+="/"),g}const Ui=n=>n.join("/").replace(/\/\/+/g,"/"),rT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function uT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Vb=["post","put","patch","delete"];new Set(Vb);const dT=["get",...Vb];new Set(dT);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zr(){return zr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},zr.apply(this,arguments)}const fu=N.createContext(null),Jb=N.createContext(null),ni=N.createContext(null),hu=N.createContext(null),Ts=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Wb=N.createContext(null);function fT(n,e){let{relative:s}=e===void 0?{}:e;ya()||At(!1);let{basename:o,navigator:r}=N.useContext(ni),{hash:c,pathname:d,search:h}=pu(n,{relative:s}),g=d;return o!=="/"&&(g=d==="/"?o:Ui([o,d])),r.createHref({pathname:g,search:h,hash:c})}function ya(){return N.useContext(hu)!=null}function yo(){return ya()||At(!1),N.useContext(hu).location}function Yb(n){N.useContext(ni).static||N.useLayoutEffect(n)}function xa(){let{isDataRoute:n}=N.useContext(Ts);return n?NT():hT()}function hT(){ya()||At(!1);let n=N.useContext(fu),{basename:e,future:s,navigator:o}=N.useContext(ni),{matches:r}=N.useContext(Ts),{pathname:c}=yo(),d=JSON.stringify(fp(r,s.v7_relativeSplatPath)),h=N.useRef(!1);return Yb(()=>{h.current=!0}),N.useCallback(function(m,v){if(v===void 0&&(v={}),!h.current)return;if(typeof m=="number"){o.go(m);return}let b=hp(m,JSON.parse(d),c,v.relative==="path");n==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Ui([e,b.pathname])),(v.replace?o.replace:o.push)(b,v.state,v)},[e,o,d,c,n])}const pT=N.createContext(null);function mT(n){let e=N.useContext(Ts).outlet;return e&&N.createElement(pT.Provider,{value:n},e)}function Kb(){let{matches:n}=N.useContext(Ts),e=n[n.length-1];return e?e.params:{}}function pu(n,e){let{relative:s}=e===void 0?{}:e,{future:o}=N.useContext(ni),{matches:r}=N.useContext(Ts),{pathname:c}=yo(),d=JSON.stringify(fp(r,o.v7_relativeSplatPath));return N.useMemo(()=>hp(n,JSON.parse(d),c,s==="path"),[n,d,c,s])}function gT(n,e){return yT(n,e)}function yT(n,e,s,o){ya()||At(!1);let{navigator:r}=N.useContext(ni),{matches:c}=N.useContext(Ts),d=c[c.length-1],h=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let m=yo(),v;if(e){var b;let _=typeof e=="string"?go(e):e;g==="/"||(b=_.pathname)!=null&&b.startsWith(g)||At(!1),v=_}else v=m;let S=v.pathname||"/",E=S;if(g!=="/"){let _=g.replace(/^\//,"").split("/");E="/"+S.replace(/^\//,"").split("/").slice(_.length).join("/")}let T=q1(n,{pathname:E}),R=ST(T&&T.map(_=>Object.assign({},_,{params:Object.assign({},h,_.params),pathname:Ui([g,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?g:Ui([g,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),c,s,o);return e&&R?N.createElement(hu.Provider,{value:{location:zr({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Pi.Pop}},R):R}function xT(){let n=TT(),e=uT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:r},s):null,null)}const vT=N.createElement(xT,null);class bT extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?N.createElement(Ts.Provider,{value:this.props.routeContext},N.createElement(Wb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CT(n){let{routeContext:e,match:s,children:o}=n,r=N.useContext(fu);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Ts.Provider,{value:e},o)}function ST(n,e,s,o){var r;if(e===void 0&&(e=[]),s===void 0&&(s=null),o===void 0&&(o=null),n==null){var c;if((c=s)!=null&&c.errors)n=s.matches;else return null}let d=n,h=(r=s)==null?void 0:r.errors;if(h!=null){let v=d.findIndex(b=>b.route.id&&(h==null?void 0:h[b.route.id]));v>=0||At(!1),d=d.slice(0,Math.min(d.length,v+1))}let g=!1,m=-1;if(s&&o&&o.v7_partialHydration)for(let v=0;v<d.length;v++){let b=d[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=v),b.route.id){let{loaderData:S,errors:E}=s,T=b.route.loader&&S[b.route.id]===void 0&&(!E||E[b.route.id]===void 0);if(b.route.lazy||T){g=!0,m>=0?d=d.slice(0,m+1):d=[d[0]];break}}}return d.reduceRight((v,b,S)=>{let E,T=!1,R=null,_=null;s&&(E=h&&b.route.id?h[b.route.id]:void 0,R=b.route.errorElement||vT,g&&(m<0&&S===0?(AT("route-fallback"),T=!0,_=null):m===S&&(T=!0,_=b.route.hydrateFallbackElement||null)));let M=e.concat(d.slice(0,S+1)),k=()=>{let I;return E?I=R:T?I=_:b.route.Component?I=N.createElement(b.route.Component,null):b.route.element?I=b.route.element:I=v,N.createElement(CT,{match:b,routeContext:{outlet:v,matches:M,isDataRoute:s!=null},children:I})};return s&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?N.createElement(bT,{location:s.location,revalidation:s.revalidation,component:R,error:E,children:k(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):k()},null)}var Xb=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Xb||{}),Qb=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Qb||{});function wT(n){let e=N.useContext(fu);return e||At(!1),e}function ET(n){let e=N.useContext(Jb);return e||At(!1),e}function _T(n){let e=N.useContext(Ts);return e||At(!1),e}function Zb(n){let e=_T(),s=e.matches[e.matches.length-1];return s.route.id||At(!1),s.route.id}function TT(){var n;let e=N.useContext(Wb),s=ET(),o=Zb();return e!==void 0?e:(n=s.errors)==null?void 0:n[o]}function NT(){let{router:n}=wT(Xb.UseNavigateStable),e=Zb(Qb.UseNavigateStable),s=N.useRef(!1);return Yb(()=>{s.current=!0}),N.useCallback(function(r,c){c===void 0&&(c={}),s.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,zr({fromRouteId:e},c)))},[n,e])}const rx={};function AT(n,e,s){rx[n]||(rx[n]=!0)}function RT(n){let{to:e,replace:s,state:o,relative:r}=n;ya()||At(!1);let{future:c,static:d}=N.useContext(ni),{matches:h}=N.useContext(Ts),{pathname:g}=yo(),m=xa(),v=hp(e,fp(h,c.v7_relativeSplatPath),g,r==="path"),b=JSON.stringify(v);return N.useEffect(()=>m(JSON.parse(b),{replace:s,state:o,relative:r}),[m,b,r,s,o]),null}function MT(n){return mT(n.context)}function fn(n){At(!1)}function IT(n){let{basename:e="/",children:s=null,location:o,navigationType:r=Pi.Pop,navigator:c,static:d=!1,future:h}=n;ya()&&At(!1);let g=e.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:g,navigator:c,static:d,future:zr({v7_relativeSplatPath:!1},h)}),[g,h,c,d]);typeof o=="string"&&(o=go(o));let{pathname:v="/",search:b="",hash:S="",state:E=null,key:T="default"}=o,R=N.useMemo(()=>{let _=ga(v,g);return _==null?null:{location:{pathname:_,search:b,hash:S,state:E,key:T},navigationType:r}},[g,v,b,S,E,T,r]);return R==null?null:N.createElement(ni.Provider,{value:m},N.createElement(hu.Provider,{children:s,value:R}))}function kT(n){let{children:e,location:s}=n;return gT(Ch(e),s)}new Promise(()=>{});function Ch(n,e){e===void 0&&(e=[]);let s=[];return N.Children.forEach(n,(o,r)=>{if(!N.isValidElement(o))return;let c=[...e,r];if(o.type===N.Fragment){s.push.apply(s,Ch(o.props.children,c));return}o.type!==fn&&At(!1),!o.props.index||!o.props.children||At(!1);let d={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=Ch(o.props.children,c)),s.push(d)}),s}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gc(){return Gc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},Gc.apply(this,arguments)}function eC(n,e){if(n==null)return{};var s={},o=Object.keys(n),r,c;for(c=0;c<o.length;c++)r=o[c],!(e.indexOf(r)>=0)&&(s[r]=n[r]);return s}function DT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PT(n,e){return n.button===0&&(!e||e==="_self")&&!DT(n)}const LT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],jT=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],UT="6";try{window.__reactRouterVersion=UT}catch{}const OT=N.createContext({isTransitioning:!1}),GT="startTransition",lx=Bb[GT];function zT(n){let{basename:e,children:s,future:o,window:r}=n,c=N.useRef();c.current==null&&(c.current=B1({window:r,v5Compat:!0}));let d=c.current,[h,g]=N.useState({action:d.action,location:d.location}),{v7_startTransition:m}=o||{},v=N.useCallback(b=>{m&&lx?lx(()=>g(b)):g(b)},[g,m]);return N.useLayoutEffect(()=>d.listen(v),[d,v]),N.createElement(IT,{basename:e,children:s,location:h.location,navigationType:h.action,navigator:d,future:o})}const FT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tC=N.forwardRef(function(e,s){let{onClick:o,relative:r,reloadDocument:c,replace:d,state:h,target:g,to:m,preventScrollReset:v,unstable_viewTransition:b}=e,S=eC(e,LT),{basename:E}=N.useContext(ni),T,R=!1;if(typeof m=="string"&&BT.test(m)&&(T=m,FT))try{let I=new URL(window.location.href),j=m.startsWith("//")?new URL(I.protocol+m):new URL(m),J=ga(j.pathname,E);j.origin===I.origin&&J!=null?m=J+j.search+j.hash:R=!0}catch{}let _=fT(m,{relative:r}),M=qT(m,{replace:d,state:h,target:g,preventScrollReset:v,relative:r,unstable_viewTransition:b});function k(I){o&&o(I),I.defaultPrevented||M(I)}return N.createElement("a",Gc({},S,{href:T||_,onClick:R||c?o:k,ref:s,target:g}))}),$T=N.forwardRef(function(e,s){let{"aria-current":o="page",caseSensitive:r=!1,className:c="",end:d=!1,style:h,to:g,unstable_viewTransition:m,children:v}=e,b=eC(e,jT),S=pu(g,{relative:b.relative}),E=yo(),T=N.useContext(Jb),{navigator:R,basename:_}=N.useContext(ni),M=T!=null&&VT(S)&&m===!0,k=R.encodeLocation?R.encodeLocation(S).pathname:S.pathname,I=E.pathname,j=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;r||(I=I.toLowerCase(),j=j?j.toLowerCase():null,k=k.toLowerCase()),j&&_&&(j=ga(j,_)||j);const J=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let Z=I===k||!d&&I.startsWith(k)&&I.charAt(J)==="/",$=j!=null&&(j===k||!d&&j.startsWith(k)&&j.charAt(k.length)==="/"),ce={isActive:Z,isPending:$,isTransitioning:M},V=Z?o:void 0,le;typeof c=="function"?le=c(ce):le=[c,Z?"active":null,$?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let ie=typeof h=="function"?h(ce):h;return N.createElement(tC,Gc({},b,{"aria-current":V,className:le,ref:s,style:ie,to:g,unstable_viewTransition:m}),typeof v=="function"?v(ce):v)});var Sh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Sh||(Sh={}));var cx;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(cx||(cx={}));function HT(n){let e=N.useContext(fu);return e||At(!1),e}function qT(n,e){let{target:s,replace:o,state:r,preventScrollReset:c,relative:d,unstable_viewTransition:h}=e===void 0?{}:e,g=xa(),m=yo(),v=pu(n,{relative:d});return N.useCallback(b=>{if(PT(b,s)){b.preventDefault();let S=o!==void 0?o:Oc(m)===Oc(v);g(n,{replace:S,state:r,preventScrollReset:c,relative:d,unstable_viewTransition:h})}},[m,g,v,o,r,s,n,c,d,h])}function VT(n,e){e===void 0&&(e={});let s=N.useContext(OT);s==null&&At(!1);let{basename:o}=HT(Sh.useViewTransitionState),r=pu(n,{relative:e.relative});if(!s.isTransitioning)return!1;let c=ga(s.currentLocation.pathname,o)||s.currentLocation.pathname,d=ga(s.nextLocation.pathname,o)||s.nextLocation.pathname;return bh(r.pathname,d)!=null||bh(r.pathname,c)!=null}/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,o)=>o?o.toUpperCase():s.toLowerCase()),ux=n=>{const e=WT(n);return e.charAt(0).toUpperCase()+e.slice(1)},nC=(...n)=>n.filter((e,s,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===s).join(" ").trim(),YT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:r="",children:c,iconNode:d,...h},g)=>N.createElement("svg",{ref:g,...KT,width:e,height:e,stroke:n,strokeWidth:o?Number(s)*24/Number(e):s,className:nC("lucide",r),...!c&&!YT(h)&&{"aria-hidden":"true"},...h},[...d.map(([m,v])=>N.createElement(m,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(n,e)=>{const s=N.forwardRef(({className:o,...r},c)=>N.createElement(XT,{ref:c,iconNode:e,className:nC(`lucide-${JT(ux(n))}`,`lucide-${n}`,o),...r}));return s.displayName=ux(n),s};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],zc=we("activity",QT);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eN=we("arrow-left",ZT);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sC=we("arrow-right",tN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sN=we("arrow-up-right",nN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ss=we("book-open",iN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],iC=we("bot",oN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ha=we("box",aN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],lN=we("brain-circuit",rN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],uN=we("calculator",cN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Li=we("check",dN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pp=we("chevron-down",fN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mp=we("chevron-right",hN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],mN=we("chevron-up",pN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oC=we("circle-check-big",gN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xN=we("circle-check",yN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],dx=we("circle-plus",vN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aC=we("circle-question-mark",bN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rC=we("circle-x",CN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],wN=we("coins",SN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],_N=we("contact",EN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z",key:"1u2ovd"}],["path",{d:"M10 22v-8L2.25 9.15",key:"11pn4q"}],["path",{d:"m10 14 11.77-6.87",key:"1kt1wh"}]],Fc=we("cuboid",TN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Fr=we("database",NN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],RN=we("dices",AN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bc=we("download",MN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lC=we("eye-off",IN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cC=we("eye",kN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],PN=we("file-braces",DN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jN=we("file-text",LN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],ON=we("file-up",UN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],uC=we("flask-conical",GN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],wh=we("folder",zN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],BN=we("funnel",FN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qr=we("globe",$N);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],qN=we("grip-vertical",HN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],dC=we("hammer",VN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],fC=we("hash",JN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],YN=we("house",WN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],XN=we("inbox",KN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],hC=we("key",QN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],eA=we("languages",ZN);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gp=we("layers",tA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],sA=we("layout-dashboard",nA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],oA=we("lightbulb",iA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],mu=we("link-2",aA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_c=we("loader-circle",rA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cA=we("lock",lA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],dA=we("menu",uA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],pC=we("message-square",fA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M5 12h14",key:"1ays0h"}]],pA=we("minus",hA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Eh=we("monitor",mA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],fx=we("network",gA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],mC=we("palette",yA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$c=we("pen-line",xA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Br=we("pen",vA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],CA=we("play",bA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ft=we("plus",SA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gC=we("refresh-cw",wA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$n=we("save",EA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],TA=we("scroll-text",_A);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yp=we("search",NA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qs=we("settings",AA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],MA=we("shield-alert",RA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],kA=we("sliders-vertical",IA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$r=we("sparkles",DA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],LA=we("square-check-big",PA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],UA=we("square",jA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gu=we("tag",OA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],yC=we("terminal",GA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],FA=we("text-align-start",zA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Hc=we("toggle-left",BA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],qc=we("toggle-right",$A);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qt=we("trash-2",HA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zs=we("triangle-alert",qA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_h=we("upload",VA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Th=we("user",JA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],hx=we("wand-sparkles",WA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],xC=we("workflow",YA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ei=we("x",KA);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xp=we("zap",XA),vC=N.createContext(null),QA=({children:n})=>{const[e,s]=N.useState(null),[o,r]=N.useState(0),c=()=>r(h=>h+1),d=N.useMemo(()=>({activeWorldId:e,setActiveWorldId:s,refreshSignal:o,triggerRefresh:c}),[e,o]);return u.jsx(vC.Provider,{value:d,children:n})},Oi=()=>{const n=N.useContext(vC);if(!n)throw new Error("useActiveWorld must be used within ActiveWorldProvider");return n},Nh=(n,e)=>e.some(s=>n instanceof s);let px,mx;function ZA(){return px||(px=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e2(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ah=new WeakMap,eh=new WeakMap,yu=new WeakMap;function t2(n){const e=new Promise((s,o)=>{const r=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{s(po(n.result)),r()},d=()=>{o(n.error),r()};n.addEventListener("success",c),n.addEventListener("error",d)});return yu.set(e,n),e}function n2(n){if(Ah.has(n))return;const e=new Promise((s,o)=>{const r=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{s(),r()},d=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Ah.set(n,e)}let Rh={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return Ah.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return po(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bC(n){Rh=n(Rh)}function s2(n){return e2().includes(n)?function(...e){return n.apply(Mh(this),e),po(this.request)}:function(...e){return po(n.apply(Mh(this),e))}}function i2(n){return typeof n=="function"?s2(n):(n instanceof IDBTransaction&&n2(n),Nh(n,ZA())?new Proxy(n,Rh):n)}function po(n){if(n instanceof IDBRequest)return t2(n);if(eh.has(n))return eh.get(n);const e=i2(n);return e!==n&&(eh.set(n,e),yu.set(e,n)),e}const Mh=n=>yu.get(n);function o2(n,e,{blocked:s,upgrade:o,blocking:r,terminated:c}={}){const d=indexedDB.open(n,e),h=po(d);return o&&d.addEventListener("upgradeneeded",g=>{o(po(d.result),g.oldVersion,g.newVersion,po(d.transaction),g)}),s&&d.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),h.then(g=>{c&&g.addEventListener("close",()=>c()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const a2=["get","getKey","getAll","getAllKeys","count"],r2=["put","add","delete","clear"],th=new Map;function gx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const s=e.replace(/FromIndex$/,""),o=e!==s,r=r2.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(r||a2.includes(s)))return;const c=async function(d,...h){const g=this.transaction(d,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[s](...h),r&&g.done]))[0]};return th.set(e,c),c}bC(n=>({...n,get:(e,s,o)=>gx(e,s)||n.get(e,s,o),has:(e,s)=>!!gx(e,s)||n.has(e,s)}));const l2=["continue","continuePrimaryKey","advance"],yx={},Ih=new WeakMap,CC=new WeakMap,c2={get(n,e){if(!l2.includes(e))return n[e];let s=yx[e];return s||(s=yx[e]=function(...o){Ih.set(this,CC.get(this)[e](...o))}),s}};async function*u2(...n){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...n)),!e)return;e=e;const s=new Proxy(e,c2);for(CC.set(s,e),yu.set(s,Mh(e));e;)yield s,e=await(Ih.get(s)||e.continue()),Ih.delete(s)}function xx(n,e){return e===Symbol.asyncIterator&&Nh(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Nh(n,[IDBIndex,IDBObjectStore])}bC(n=>({...n,get(e,s,o){return xx(e,s)?u2:n.get(e,s,o)},has(e,s){return xx(e,s)||n.has(e,s)}}));const d2="nexus-core-db",f2=4;class h2{constructor(){this.dbPromise=o2(d2,f2,{async upgrade(e,s,o,r){if(s<1&&(e.createObjectStore("worlds",{keyPath:"id"}),e.createObjectStore("entities",{keyPath:"id"}).createIndex("by-world-pool",["worldId","poolName"])),s<2){const c=r.objectStore("entities");c.indexNames.contains("by-world")||c.createIndex("by-world","worldId")}if(s<3){const c=r.objectStore("entities");c.indexNames.contains("by-tag")||c.createIndex("by-tag","tags",{multiEntry:!0})}if(s<4){const c=r.objectStore("entities");c.indexNames.contains("by-component")||c.createIndex("by-component","activeComponents",{multiEntry:!0})}}})}async saveWorld(e){const s=await this.dbPromise,{pools:o,...r}=e,c={};o&&Object.keys(o).forEach(h=>{c[h]={...o[h],entities:[]}});const d={...r,pools:c};await s.put("worlds",d)}async loadWorldMeta(e){return(await this.dbPromise).get("worlds",e)}async listWorlds(){return(await(await this.dbPromise).getAll("worlds")).map(o=>({id:o.id,name:o.name,type:o.type}))}async deleteWorld(e){const o=(await this.dbPromise).transaction(["worlds","entities"],"readwrite");await o.objectStore("worlds").delete(e);const r=o.objectStore("entities");let d=await r.index("by-world").openKeyCursor(IDBKeyRange.only(e));const h=[];for(;d;)h.push(r.delete(d.primaryKey)),d=await d.continue();await Promise.all(h),await o.done}prepareEntity(e,s,o){return{...o,worldId:e,poolName:s,activeComponents:o.components?Object.keys(o.components):[]}}async saveEntity(e,s,o){await(await this.dbPromise).put("entities",this.prepareEntity(e,s,o))}async saveEntitiesBatch(e,s,o){const c=(await this.dbPromise).transaction("entities","readwrite"),d=c.objectStore("entities");await Promise.all([...o.map(h=>d.put(this.prepareEntity(e,s,h))),c.done])}async deleteEntity(e){await(await this.dbPromise).delete("entities",e)}async getEntitiesForPoolPaginated(e,s,o=1,r=50){const c=await this.dbPromise,d=IDBKeyRange.only([e,s]),h=await c.countFromIndex("entities","by-world-pool",d);let g=await c.transaction("entities").store.index("by-world-pool").openCursor(d);const m=[];if(!g)return{items:[],total:h};const v=(o-1)*r;for(v>0&&await g.advance(v);g&&m.length<r;)m.push(g.value),g=await g.continue();return{items:m,total:h}}async getEntitiesForPool(e,s){return(await this.dbPromise).getAllFromIndex("entities","by-world-pool",[e,s])}async getPoolCounts(e){const r=(await this.dbPromise).transaction("entities","readonly").store.index("by-world"),c={};let d=await r.openCursor(IDBKeyRange.only(e));for(;d;){const h=d.value.poolName;c[h]=(c[h]||0)+1,d=await d.continue()}return c}async getComponentUsageStats(e,s){let d=await(await this.dbPromise).transaction("entities","readonly").store.index("by-component").openCursor(IDBKeyRange.only(s)),h=0;const g={},m=[];for(;d;){const v=d.value;v.worldId===e&&(h++,g[v.poolName]=(g[v.poolName]||0)+1,m.length<3&&m.push(v.name)),d=await d.continue()}return{totalCount:h,poolCounts:g,examples:m}}async getTagUsageCount(e,s){let r=await(await this.dbPromise).transaction("entities").store.index("by-tag").openCursor(IDBKeyRange.only(s)),c=0;for(;r;)r.value.worldId===e&&c++,r=await r.continue();return c}async getTopTags(e,s=20){const c=(await this.dbPromise).transaction("entities","readonly").store.index("by-tag"),d=new Map;let h=await c.openCursor();for(;h;){if(h.value.worldId===e){const g=h.key;d.set(g,(d.get(g)||0)+1)}h=await h.continue()}return Array.from(d.entries()).sort((g,m)=>m[1]-g[1]).slice(0,s).map(g=>g[0])}async migrateTag(e,s,o){const c=(await this.dbPromise).transaction("entities","readwrite");let h=await c.store.index("by-tag").openCursor(IDBKeyRange.only(s)),g=0;for(;h;){const m=h.value;if(m.worldId===e){const v=new Set(m.tags);v.delete(s),v.add(o);const b={...m,tags:Array.from(v)};h.update(b),g++}h=await h.continue()}return await c.done,g}async getFullWorldPackage(e){const s=await this.loadWorldMeta(e);if(!s)return null;const o=Object.keys(s.pools),r=await Promise.all(o.map(c=>this.getEntitiesForPool(e,c)));return o.forEach((c,d)=>{s.pools[c].entities=r[d]}),{version:"5.1-DynamicECS",exportDate:Date.now(),world:s}}async getRollCandidates(e,s){var g;const c=(await this.dbPromise).transaction("entities","readonly").store.index("by-world-pool"),d=[];let h=await c.openCursor(IDBKeyRange.only([e,s]));for(;h;){const m=h.value,v=((g=m.components.rarity)==null?void 0:g.value)||"Common";d.push({id:m.id,name:m.name,tags:m.tags,rarity:String(v),original:m}),h=await h.continue()}return d}async searchEntities(e,s,o=50,r){const d=(await this.dbPromise).transaction("entities","readonly");let h;r&&r!=="All"?h=await d.store.index("by-world-pool").openCursor(IDBKeyRange.only([e,r])):h=await d.store.index("by-world").openCursor(IDBKeyRange.only(e));const g=[],m=s.toLowerCase().trim(),v=!m;for(;h&&g.length<o;){const b=h.value;if(v)g.push(b);else if(b.name.toLowerCase().includes(m))g.push(b);else{const S=b.tags;let E=!1;for(let T=0;T<S.length;T++)if(S[T].toLowerCase().includes(m)){E=!0;break}E&&g.push(b)}h=await h.continue()}return g}}const De=new h2,p2=[{id:"metadata",label:"Metadata",category:"System",isCore:!0,fields:[{key:"id",type:"text",defaultValue:"UUID"},{key:"created_at",type:"date",defaultValue:""}]},{id:"rarity",label:"Rarity",category:"System",isCore:!0,fields:[{key:"value",type:"select",defaultValue:"Common",options:["Common","Uncommon","Rare","Epic","Legendary"]}]}],Tc=n=>n?n.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^\p{L}\p{N}_-]+/gu,""):"";class m2{constructor(){this.analyticsCache=new Map}async listWorlds(){return await De.listWorlds()}async createWorld(e,s){const o=crypto.randomUUID(),r={};p2.forEach(d=>{r[d.id]=d});const c={id:o,type:"Rulebook",name:e,config:{genre:s,loreContext:`A default setting for ${e}.`,contextFields:[],raritySettings:{defaultLevel:"Common",levels:[{id:"common",label:"Common",weight:50,color:"#94a3b8"},{id:"uncommon",label:"Uncommon",weight:30,color:"#10b981"},{id:"rare",label:"Rare",weight:15,color:"#3b82f6"},{id:"epic",label:"Epic",weight:4,color:"#a855f7"},{id:"legendary",label:"Legendary",weight:1,color:"#f59e0b"}]},useGlobalPromptPrefix:!1},componentRegistry:r,pools:{},rules:[],tags:{}};return await De.saveWorld(c),c}async loadWorld(e,s=!0){const o=await De.loadWorldMeta(e);return o?(Object.keys(o.pools).forEach(r=>{o.pools[r].entities||(o.pools[r].entities=[])}),o.componentRegistry||(o.componentRegistry={}),o):null}async deleteWorld(e){await De.deleteWorld(e),this.invalidateCache(e)}async saveWorld(e){await De.saveWorld(e)}async exportWorldToJson(e){const s=await De.getFullWorldPackage(e);return s?JSON.stringify(s,null,2):null}async importWorldFromJson(e){try{const s=JSON.parse(e),o=s.world||s;if(!o.name)throw new Error("Invalid World Data");const r=crypto.randomUUID(),c={...o,id:r,name:`${o.name} (Imported)`};await De.saveWorld(c);for(const d of Object.keys(c.pools)){const h=c.pools[d].entities||[];for(const g of h)await De.saveEntity(r,d,g)}return c}catch(s){return console.error("Import Failed",s),null}}async createPool(e,s,o,r,c){const d=await this.loadWorld(e,!0);if(!d||d.pools[s])return;const h={metadata:{id:"UUID",created_at:""}};d.pools[s]={name:s,type:o,description:r||"",color:c,entities:[],defaultComponents:h,suggestedTags:[],relationshipTypes:o==="World"||o==="Character"?["Ally of","Enemy of"]:void 0},await De.saveWorld(d)}async deletePool(e,s){const o=await this.loadWorld(e,!0);if(!o||!o.pools[s])return;const c=(await De.getEntitiesForPool(e,s)).map(d=>De.deleteEntity(d.id));await Promise.all(c),delete o.pools[s],await De.saveWorld(o)}async renamePool(e,s,o){const r=await this.loadWorld(e,!0);if(!r||!r.pools[s])return;if(r.pools[o])throw new Error(`Pool '${o}' already exists.`);r.pools[o]={...r.pools[s],name:o},delete r.pools[s],await De.saveWorld(r);const c=await De.getEntitiesForPool(e,s);c.length>0&&await De.saveEntitiesBatch(e,o,c)}async updatePoolDetails(e,s,o){const r=await this.loadWorld(e,!0);!r||!r.pools[s]||(o.description!==void 0&&(r.pools[s].description=o.description),o.color!==void 0&&(r.pools[s].color=o.color),await De.saveWorld(r))}async saveEntityToPool(e,s,o){await De.saveEntity(e,s,o)}async deleteEntityFromPool(e,s,o){await De.deleteEntity(o)}async updateComponentDefinition(e,s){const o=await De.loadWorldMeta(e);o&&(o.componentRegistry||(o.componentRegistry={}),o.componentRegistry[s.id]={...o.componentRegistry[s.id],...s},await De.saveWorld(o))}async registerComponentDefinition(e,s,o){const r=await De.loadWorldMeta(e);if(!r)return;let c;if(o)if(r.pools[o])c=o;else{const h=o.toLowerCase(),g=Object.keys(r.pools).find(m=>m.toLowerCase()===h);g&&(c=g)}if(s.category||(s.category=c?c.charAt(0).toUpperCase()+c.slice(1):"General"),r.componentRegistry[s.id]=s,await De.saveWorld(r),c&&r.pools[c]){const d=r.pools[c],h={};s.fields.forEach(g=>h[g.key]=g.defaultValue),d.defaultComponents[s.id]=h,await this.updatePoolBlueprints(e,c,d.defaultComponents)}}async deleteComponentDefinition(e,s){var r;const o=await De.loadWorldMeta(e);if(!(!o||!o.componentRegistry)){if((r=o.componentRegistry[s])!=null&&r.isCore)throw new Error("Cannot delete Core components.");delete o.componentRegistry[s],await De.saveWorld(o)}}async getComponentUsageReport(e,s){const o=await De.loadWorldMeta(e);if(!o)return{pools:[],entityCount:0,entityExamples:[],usageByPool:{}};const r=Object.values(o.pools).filter(h=>h.defaultComponents&&h.defaultComponents[s]).map(h=>h.name),c=await De.getComponentUsageStats(e,s);return{pools:Array.from(new Set([...r,...Object.keys(c.poolCounts)])),entityCount:c.totalCount,entityExamples:c.examples,usageByPool:c.poolCounts}}async updatePoolBlueprints(e,s,o){const r=await De.loadWorldMeta(e);if(!r||!r.pools[s])return;r.pools[s].defaultComponents=o,await De.saveWorld(r);const{items:c}=await De.getEntitiesForPoolPaginated(e,s,1,1e4),d=new Set(Object.keys(o));d.add("metadata");const h=c.map(g=>{let m=!1;const v=g.components||{},b={};return Object.keys(v).forEach(S=>{d.has(S)?b[S]=v[S]:m=!0}),Object.keys(o).forEach(S=>{if(!b[S])b[S]=JSON.parse(JSON.stringify(o[S])),m=!0;else{const E=o[S];Object.keys(E).forEach(T=>{b[S][T]===void 0&&(b[S][T]=E[T],m=!0)})}}),m?{...g,components:b}:null}).filter(Boolean);h.length>0&&await De.saveEntitiesBatch(e,s,h)}ensureTag(e,s){if(!s)return"";const o=Tc(s);return o?(e.tags[o]||(e.tags[o]={id:o,label:s.trim()}),o):""}async updateTagDefinition(e,s,o){const r=await De.loadWorldMeta(e);if(!r)return;const c=Tc(s);if(!c)throw new Error("Invalid Tag Label");r.tags[c]?(r.tags[c].label=s,r.tags[c].description=o):r.tags[c]={id:c,label:s,description:o,color:"#64748b"},await De.saveWorld(r)}async renameTag(e,s,o){const r=await De.loadWorldMeta(e);if(!r)return 0;const c=Tc(o);if(!c)throw new Error("Invalid tag label");if(c===s)return 0;const d=await De.migrateTag(e,s,c);return r.tags[c]||(r.tags[c]={...r.tags[s],id:c,label:o}),delete r.tags[s],await De.saveWorld(r),this.invalidateCache(e),d}async updateWorldTags(e,s){const o=await De.loadWorldMeta(e);o&&(o.tags=s,await De.saveWorld(o))}getTagAnalytics(e){return this.analyticsCache.has(e)?this.analyticsCache.get(e):{}}getAllTags(e,s){const o=this.getTagAnalytics(e);return Object.keys(o).map(r=>o[r].label)}getTagMetadata(e,s){const r=this.getTagAnalytics(e)[s];return r?{id:s,label:r.label,color:r.color,isGlobal:r.sources.length>1}:{id:s,label:s,color:"#64748b",isGlobal:!1}}resolveTagColor(e,s,o){const c=this.getTagAnalytics(e)[s];return(c==null?void 0:c.color)||"#64748b"}resolveRarityColor(e,s){var c;const r=(((c=e.config.raritySettings)==null?void 0:c.levels)||[]).find(d=>d.label.toLowerCase()===s.toLowerCase()||d.id===s);return r?r.color:null}async updateWorldConfig(e,s,o){const r=await De.loadWorldMeta(e);r&&(r.name=s,r.config=o,await De.saveWorld(r))}async saveRule(e,s){const o=await De.loadWorldMeta(e);if(!o)return;s.id||(s.id=crypto.randomUUID());const r=o.rules.findIndex(c=>c.id===s.id);r>=0?o.rules[r]=s:o.rules.push(s),await De.saveWorld(o)}async deleteRule(e,s){const o=await De.loadWorldMeta(e);o&&(o.rules=o.rules.filter(r=>r.id!==s),await De.saveWorld(o))}generateContextString(e){let s=`WORLD: ${e.name} (Genre: ${e.config.genre})
`;return s+=`LORE: ${e.config.loreContext||""}

`,e.config.contextFields&&e.config.contextFields.forEach(o=>{o.key&&o.value&&(s+=`[${o.key.toUpperCase()}]: ${o.value}
`)}),s}invalidateCache(e){this.analyticsCache.delete(e)}async saveEntitiesToPool(e,s,o){await De.saveEntitiesBatch(e,s,o)}}const Rn=new m2,SC=N.createContext(Rn),g2=({children:n})=>u.jsx(SC.Provider,{value:Rn,children:n}),va=()=>{const n=N.useContext(SC);if(!n)throw new Error("useWorldManager must be used within ServiceProvider");return n},wC=n=>{const[e,s]=N.useState(null),[o,r]=N.useState(!1),{refreshSignal:c}=Oi(),d=N.useCallback(async()=>{if(n){r(!0);try{const g=await De.loadWorldMeta(n);s(g||null)}catch(g){console.error("Failed to load world",g)}finally{r(!1)}}},[n]);return N.useEffect(()=>{d()},[d,c]),{world:e,loading:o,updateConfig:async g=>{if(!e)return;const m={...e,config:g};s(m),await De.saveWorld(m)},reload:d}};function y2(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}const x2=n=>{switch(n){case"success":return C2;case"info":return w2;case"warning":return S2;case"error":return E2;default:return null}},v2=Array(12).fill(0),b2=({visible:n,className:e})=>be.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},be.createElement("div",{className:"sonner-spinner"},v2.map((s,o)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),C2=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),S2=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),w2=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),E2=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_2=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),T2=()=>{const[n,e]=be.useState(document.hidden);return be.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),n};let kh=1;class N2{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:o,...r}=e,c=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:kh++,d=this.toasts.find(g=>g.id===c),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(g=>g.id===c?(this.publish({...g,...e,id:c,title:o}),{...g,...e,id:c,dismissible:h,title:o}):g):this.addToast({title:o,...r,dismissible:h,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(o=>o({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let o;s.loading!==void 0&&(o=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let c=o!==void 0,d;const h=r.then(async m=>{if(d=["resolve",m],be.isValidElement(m))c=!1,this.create({id:o,type:"default",message:m});else if(R2(m)&&!m.ok){c=!1;const b=typeof s.error=="function"?await s.error(`HTTP error! status: ${m.status}`):s.error,S=typeof s.description=="function"?await s.description(`HTTP error! status: ${m.status}`):s.description,T=typeof b=="object"&&!be.isValidElement(b)?b:{message:b};this.create({id:o,type:"error",description:S,...T})}else if(m instanceof Error){c=!1;const b=typeof s.error=="function"?await s.error(m):s.error,S=typeof s.description=="function"?await s.description(m):s.description,T=typeof b=="object"&&!be.isValidElement(b)?b:{message:b};this.create({id:o,type:"error",description:S,...T})}else if(s.success!==void 0){c=!1;const b=typeof s.success=="function"?await s.success(m):s.success,S=typeof s.description=="function"?await s.description(m):s.description,T=typeof b=="object"&&!be.isValidElement(b)?b:{message:b};this.create({id:o,type:"success",description:S,...T})}}).catch(async m=>{if(d=["reject",m],s.error!==void 0){c=!1;const v=typeof s.error=="function"?await s.error(m):s.error,b=typeof s.description=="function"?await s.description(m):s.description,E=typeof v=="object"&&!be.isValidElement(v)?v:{message:v};this.create({id:o,type:"error",description:b,...E})}}).finally(()=>{c&&(this.dismiss(o),o=void 0),s.finally==null||s.finally.call(s)}),g=()=>new Promise((m,v)=>h.then(()=>d[0]==="reject"?v(d[1]):m(d[1])).catch(v));return typeof o!="string"&&typeof o!="number"?{unwrap:g}:Object.assign(o,{unwrap:g})},this.custom=(e,s)=>{const o=(s==null?void 0:s.id)||kh++;return this.create({jsx:e(o),id:o,...s}),o},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Mn=new N2,A2=(n,e)=>{const s=(e==null?void 0:e.id)||kh++;return Mn.addToast({title:n,...e,id:s}),s},R2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",M2=A2,I2=()=>Mn.toasts,k2=()=>Mn.getActiveToasts(),ao=Object.assign(M2,{success:Mn.success,info:Mn.info,warning:Mn.warning,error:Mn.error,custom:Mn.custom,message:Mn.message,promise:Mn.promise,dismiss:Mn.dismiss,loading:Mn.loading},{getHistory:I2,getToasts:k2});y2("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function lc(n){return n.label!==void 0}const D2=3,P2="24px",L2="16px",vx=4e3,j2=356,U2=14,O2=45,G2=200;function Ss(...n){return n.filter(Boolean).join(" ")}function z2(n){const[e,s]=n.split("-"),o=[];return e&&o.push(e),s&&o.push(s),o}const F2=n=>{var e,s,o,r,c,d,h,g,m;const{invert:v,toast:b,unstyled:S,interacting:E,setHeights:T,visibleToasts:R,heights:_,index:M,toasts:k,expanded:I,removeToast:j,defaultRichColors:J,closeButton:Z,style:$,cancelButtonStyle:ce,actionButtonStyle:V,className:le="",descriptionClassName:ie="",duration:pe,position:H,gap:ve,expandByDefault:Ce,classNames:U,icons:ne,closeButtonAriaLabel:me="Close toast"}=n,[Ee,Ae]=be.useState(null),[D,q]=be.useState(null),[oe,fe]=be.useState(!1),[F,ge]=be.useState(!1),[_e,X]=be.useState(!1),[O,W]=be.useState(!1),[ae,te]=be.useState(!1),[Te,ze]=be.useState(0),[rt,mt]=be.useState(0),tt=be.useRef(b.duration||pe||vx),St=be.useRef(null),yt=be.useRef(null),$t=M===0,ls=M+1<=R,wt=b.type,Wt=b.dismissible!==!1,Tt=b.className||"",Hn=b.descriptionClassName||"",pn=be.useMemo(()=>_.findIndex(Ue=>Ue.toastId===b.id)||0,[_,b.id]),z=be.useMemo(()=>{var Ue;return(Ue=b.closeButton)!=null?Ue:Z},[b.closeButton,Z]),P=be.useMemo(()=>b.duration||pe||vx,[b.duration,pe]),he=be.useRef(0),ye=be.useRef(0),Ie=be.useRef(0),Oe=be.useRef(null),[ut,Be]=H.split("-"),$e=be.useMemo(()=>_.reduce((Ue,dt,Pt)=>Pt>=pn?Ue:Ue+dt.height,0),[_,pn]),xt=T2(),Fi=b.invert||v,Ns=wt==="loading";ye.current=be.useMemo(()=>pn*ve+$e,[pn,$e]),be.useEffect(()=>{tt.current=P},[P]),be.useEffect(()=>{fe(!0)},[]),be.useEffect(()=>{const Ue=yt.current;if(Ue){const dt=Ue.getBoundingClientRect().height;return mt(dt),T(Pt=>[{toastId:b.id,height:dt,position:b.position},...Pt]),()=>T(Pt=>Pt.filter(Lt=>Lt.toastId!==b.id))}},[T,b.id]),be.useLayoutEffect(()=>{if(!oe)return;const Ue=yt.current,dt=Ue.style.height;Ue.style.height="auto";const Pt=Ue.getBoundingClientRect().height;Ue.style.height=dt,mt(Pt),T(Lt=>Lt.find(Nt=>Nt.toastId===b.id)?Lt.map(Nt=>Nt.toastId===b.id?{...Nt,height:Pt}:Nt):[{toastId:b.id,height:Pt,position:b.position},...Lt])},[oe,b.title,b.description,T,b.id,b.jsx,b.action,b.cancel]);const qn=be.useCallback(()=>{ge(!0),ze(ye.current),T(Ue=>Ue.filter(dt=>dt.toastId!==b.id)),setTimeout(()=>{j(b)},G2)},[b,j,T,ye]);be.useEffect(()=>{if(b.promise&&wt==="loading"||b.duration===1/0||b.type==="loading")return;let Ue;return I||E||xt?(()=>{if(Ie.current<he.current){const Lt=new Date().getTime()-he.current;tt.current=tt.current-Lt}Ie.current=new Date().getTime()})():(()=>{tt.current!==1/0&&(he.current=new Date().getTime(),Ue=setTimeout(()=>{b.onAutoClose==null||b.onAutoClose.call(b,b),qn()},tt.current))})(),()=>clearTimeout(Ue)},[I,E,b,wt,xt,qn]),be.useEffect(()=>{b.delete&&(qn(),b.onDismiss==null||b.onDismiss.call(b,b))},[qn,b.delete]);function As(){var Ue;if(ne!=null&&ne.loading){var dt;return be.createElement("div",{className:Ss(U==null?void 0:U.loader,b==null||(dt=b.classNames)==null?void 0:dt.loader,"sonner-loader"),"data-visible":wt==="loading"},ne.loading)}return be.createElement(b2,{className:Ss(U==null?void 0:U.loader,b==null||(Ue=b.classNames)==null?void 0:Ue.loader),visible:wt==="loading"})}const Rs=b.icon||(ne==null?void 0:ne[wt])||x2(wt);var Et,Ht;return be.createElement("li",{tabIndex:0,ref:yt,className:Ss(le,Tt,U==null?void 0:U.toast,b==null||(e=b.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[wt],b==null||(s=b.classNames)==null?void 0:s[wt]),"data-sonner-toast":"","data-rich-colors":(Et=b.richColors)!=null?Et:J,"data-styled":!(b.jsx||b.unstyled||S),"data-mounted":oe,"data-promise":!!b.promise,"data-swiped":ae,"data-removed":F,"data-visible":ls,"data-y-position":ut,"data-x-position":Be,"data-index":M,"data-front":$t,"data-swiping":_e,"data-dismissible":Wt,"data-type":wt,"data-invert":Fi,"data-swipe-out":O,"data-swipe-direction":D,"data-expanded":!!(I||Ce&&oe),"data-testid":b.testId,style:{"--index":M,"--toasts-before":M,"--z-index":k.length-M,"--offset":`${F?Te:ye.current}px`,"--initial-height":Ce?"auto":`${rt}px`,...$,...b.style},onDragEnd:()=>{X(!1),Ae(null),Oe.current=null},onPointerDown:Ue=>{Ue.button!==2&&(Ns||!Wt||(St.current=new Date,ze(ye.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(X(!0),Oe.current={x:Ue.clientX,y:Ue.clientY})))},onPointerUp:()=>{var Ue,dt,Pt;if(O||!Wt)return;Oe.current=null;const Lt=Number(((Ue=yt.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ms=Number(((dt=yt.current)==null?void 0:dt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Nt=new Date().getTime()-((Pt=St.current)==null?void 0:Pt.getTime()),vn=Ee==="x"?Lt:Ms,Bi=Math.abs(vn)/Nt;if(Math.abs(vn)>=O2||Bi>.11){ze(ye.current),b.onDismiss==null||b.onDismiss.call(b,b),q(Ee==="x"?Lt>0?"right":"left":Ms>0?"down":"up"),qn(),W(!0);return}else{var bn,Cn;(bn=yt.current)==null||bn.style.setProperty("--swipe-amount-x","0px"),(Cn=yt.current)==null||Cn.style.setProperty("--swipe-amount-y","0px")}te(!1),X(!1),Ae(null)},onPointerMove:Ue=>{var dt,Pt,Lt;if(!Oe.current||!Wt||((dt=window.getSelection())==null?void 0:dt.toString().length)>0)return;const Nt=Ue.clientY-Oe.current.y,vn=Ue.clientX-Oe.current.x;var Bi;const bn=(Bi=n.swipeDirections)!=null?Bi:z2(H);!Ee&&(Math.abs(vn)>1||Math.abs(Nt)>1)&&Ae(Math.abs(vn)>Math.abs(Nt)?"x":"y");let Cn={x:0,y:0};const vo=cs=>1/(1.5+Math.abs(cs)/20);if(Ee==="y"){if(bn.includes("top")||bn.includes("bottom"))if(bn.includes("top")&&Nt<0||bn.includes("bottom")&&Nt>0)Cn.y=Nt;else{const cs=Nt*vo(Nt);Cn.y=Math.abs(cs)<Math.abs(Nt)?cs:Nt}}else if(Ee==="x"&&(bn.includes("left")||bn.includes("right")))if(bn.includes("left")&&vn<0||bn.includes("right")&&vn>0)Cn.x=vn;else{const cs=vn*vo(vn);Cn.x=Math.abs(cs)<Math.abs(vn)?cs:vn}(Math.abs(Cn.x)>0||Math.abs(Cn.y)>0)&&te(!0),(Pt=yt.current)==null||Pt.style.setProperty("--swipe-amount-x",`${Cn.x}px`),(Lt=yt.current)==null||Lt.style.setProperty("--swipe-amount-y",`${Cn.y}px`)}},z&&!b.jsx&&wt!=="loading"?be.createElement("button",{"aria-label":me,"data-disabled":Ns,"data-close-button":!0,onClick:Ns||!Wt?()=>{}:()=>{qn(),b.onDismiss==null||b.onDismiss.call(b,b)},className:Ss(U==null?void 0:U.closeButton,b==null||(o=b.classNames)==null?void 0:o.closeButton)},(Ht=ne==null?void 0:ne.close)!=null?Ht:_2):null,(wt||b.icon||b.promise)&&b.icon!==null&&((ne==null?void 0:ne[wt])!==null||b.icon)?be.createElement("div",{"data-icon":"",className:Ss(U==null?void 0:U.icon,b==null||(r=b.classNames)==null?void 0:r.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||As():null,b.type!=="loading"?Rs:null):null,be.createElement("div",{"data-content":"",className:Ss(U==null?void 0:U.content,b==null||(c=b.classNames)==null?void 0:c.content)},be.createElement("div",{"data-title":"",className:Ss(U==null?void 0:U.title,b==null||(d=b.classNames)==null?void 0:d.title)},b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title),b.description?be.createElement("div",{"data-description":"",className:Ss(ie,Hn,U==null?void 0:U.description,b==null||(h=b.classNames)==null?void 0:h.description)},typeof b.description=="function"?b.description():b.description):null),be.isValidElement(b.cancel)?b.cancel:b.cancel&&lc(b.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||ce,onClick:Ue=>{lc(b.cancel)&&Wt&&(b.cancel.onClick==null||b.cancel.onClick.call(b.cancel,Ue),qn())},className:Ss(U==null?void 0:U.cancelButton,b==null||(g=b.classNames)==null?void 0:g.cancelButton)},b.cancel.label):null,be.isValidElement(b.action)?b.action:b.action&&lc(b.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||V,onClick:Ue=>{lc(b.action)&&(b.action.onClick==null||b.action.onClick.call(b.action,Ue),!Ue.defaultPrevented&&qn())},className:Ss(U==null?void 0:U.actionButton,b==null||(m=b.classNames)==null?void 0:m.actionButton)},b.action.label):null)};function bx(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function B2(n,e){const s={};return[n,e].forEach((o,r)=>{const c=r===1,d=c?"--mobile-offset":"--offset",h=c?L2:P2;function g(m){["top","right","bottom","left"].forEach(v=>{s[`${d}-${v}`]=typeof m=="number"?`${m}px`:m})}typeof o=="number"||typeof o=="string"?g(o):typeof o=="object"?["top","right","bottom","left"].forEach(m=>{o[m]===void 0?s[`${d}-${m}`]=h:s[`${d}-${m}`]=typeof o[m]=="number"?`${o[m]}px`:o[m]}):g(h)}),s}const $2=be.forwardRef(function(e,s){const{id:o,invert:r,position:c="bottom-right",hotkey:d=["altKey","KeyT"],expand:h,closeButton:g,className:m,offset:v,mobileOffset:b,theme:S="light",richColors:E,duration:T,style:R,visibleToasts:_=D2,toastOptions:M,dir:k=bx(),gap:I=U2,icons:j,containerAriaLabel:J="Notifications"}=e,[Z,$]=be.useState([]),ce=be.useMemo(()=>o?Z.filter(oe=>oe.toasterId===o):Z.filter(oe=>!oe.toasterId),[Z,o]),V=be.useMemo(()=>Array.from(new Set([c].concat(ce.filter(oe=>oe.position).map(oe=>oe.position)))),[ce,c]),[le,ie]=be.useState([]),[pe,H]=be.useState(!1),[ve,Ce]=be.useState(!1),[U,ne]=be.useState(S!=="system"?S:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),me=be.useRef(null),Ee=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ae=be.useRef(null),D=be.useRef(!1),q=be.useCallback(oe=>{$(fe=>{var F;return(F=fe.find(ge=>ge.id===oe.id))!=null&&F.delete||Mn.dismiss(oe.id),fe.filter(({id:ge})=>ge!==oe.id)})},[]);return be.useEffect(()=>Mn.subscribe(oe=>{if(oe.dismiss){requestAnimationFrame(()=>{$(fe=>fe.map(F=>F.id===oe.id?{...F,delete:!0}:F))});return}setTimeout(()=>{F1.flushSync(()=>{$(fe=>{const F=fe.findIndex(ge=>ge.id===oe.id);return F!==-1?[...fe.slice(0,F),{...fe[F],...oe},...fe.slice(F+1)]:[oe,...fe]})})})}),[Z]),be.useEffect(()=>{if(S!=="system"){ne(S);return}if(S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:fe})=>{ne(fe?"dark":"light")})}catch{oe.addListener(({matches:F})=>{try{ne(F?"dark":"light")}catch(ge){console.error(ge)}})}},[S]),be.useEffect(()=>{Z.length<=1&&H(!1)},[Z]),be.useEffect(()=>{const oe=fe=>{var F;if(d.every(X=>fe[X]||fe.code===X)){var _e;H(!0),(_e=me.current)==null||_e.focus()}fe.code==="Escape"&&(document.activeElement===me.current||(F=me.current)!=null&&F.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[d]),be.useEffect(()=>{if(me.current)return()=>{Ae.current&&(Ae.current.focus({preventScroll:!0}),Ae.current=null,D.current=!1)}},[me.current]),be.createElement("section",{ref:s,"aria-label":`${J} ${Ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map((oe,fe)=>{var F;const[ge,_e]=oe.split("-");return ce.length?be.createElement("ol",{key:oe,dir:k==="auto"?bx():k,tabIndex:-1,ref:me,className:m,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":ge,"data-x-position":_e,style:{"--front-toast-height":`${((F=le[0])==null?void 0:F.height)||0}px`,"--width":`${j2}px`,"--gap":`${I}px`,...R,...B2(v,b)},onBlur:X=>{D.current&&!X.currentTarget.contains(X.relatedTarget)&&(D.current=!1,Ae.current&&(Ae.current.focus({preventScroll:!0}),Ae.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||D.current||(D.current=!0,Ae.current=X.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{ve||H(!1)},onDragEnd:()=>H(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||Ce(!0)},onPointerUp:()=>Ce(!1)},ce.filter(X=>!X.position&&fe===0||X.position===oe).map((X,O)=>{var W,ae;return be.createElement(F2,{key:X.id,icons:j,index:O,toast:X,defaultRichColors:E,duration:(W=M==null?void 0:M.duration)!=null?W:T,className:M==null?void 0:M.className,descriptionClassName:M==null?void 0:M.descriptionClassName,invert:r,visibleToasts:_,closeButton:(ae=M==null?void 0:M.closeButton)!=null?ae:g,interacting:ve,position:oe,style:M==null?void 0:M.style,unstyled:M==null?void 0:M.unstyled,classNames:M==null?void 0:M.classNames,cancelButtonStyle:M==null?void 0:M.cancelButtonStyle,actionButtonStyle:M==null?void 0:M.actionButtonStyle,closeButtonAriaLabel:M==null?void 0:M.closeButtonAriaLabel,removeToast:q,toasts:ce.filter(te=>te.position==X.position),heights:le.filter(te=>te.position==X.position),setHeights:ie,expandByDefault:h,gap:I,expanded:pe,swipeDirections:e.swipeDirections})})):null}))}),EC=N.createContext(null),H2=({children:n})=>{const e={toast:s=>{const r={description:s.message,duration:s.duration};switch(s.type){case"success":return ao.success(s.title,r);case"error":return ao.error(s.title,r);case"warning":return ao.warning(s.title,r);case"info":return ao.info(s.title,r);default:return ao(s.title,r)}},success:(s,o)=>ao.success(s,{description:o}),error:(s,o)=>ao.error(s,{description:o})};return u.jsxs(EC.Provider,{value:e,children:[n,u.jsx($2,{position:"top-right",theme:"dark",richColors:!0,closeButton:!0,style:{fontFamily:"inherit"}})]})},as=()=>{const n=N.useContext(EC);if(!n)throw new Error("useToast must be used within ToastProvider");return n},q2=[{id:"t1",name:"Neutral Descriptive Prose",description:"Clear, atmospheric third-person narration for rules and setting text.",instruction:"Write in third-person past tense with a neutral, observant voice. Prioritise clarity and readability. Use concrete details and controlled, vivid imagery so the world feels solid and functional at the table. Avoid slang, heavy slangy voice, or dense purple prose. This tone is ideal for rule explanations, location descriptions, and general setting overview.",i18n:{Chinese:{name:"",description:"",instruction:""},English:{name:"Neutral Descriptive Prose",description:"Clear, atmospheric third-person narration for rules and setting text.",instruction:"Write in third-person past tense with a neutral, observant voice. Prioritise clarity and readability. Use concrete details and controlled, vivid imagery so the world feels solid and functional at the table. Avoid slang, heavy slangy voice, or dense purple prose. This tone is ideal for rule explanations, location descriptions, and general setting overview."}}},{id:"t2",name:"Cinematic Storytelling",description:"Film-like, visual narration for flavour scenes and examples of play.",instruction:"Write as if directing a film: an external camera moves through the scene, focusing on motion, visuals, and sensory impressions. Emphasise pacing, action beats, and striking imagery. Reveal information through what the camera notices rather than exposition dumps. This tone is ideal for opening vignettes, in-world stories, and examples of play that show how the game feels in action.",i18n:{Chinese:{name:"",description:"",instruction:""},English:{name:"Cinematic Storytelling",description:"Film-like, visual narration for flavour scenes and examples of play.",instruction:"Write as if directing a film: an external camera moves through the scene, focusing on motion, visuals, and sensory impressions. Emphasise pacing, action beats, and striking imagery. Reveal information through what the camera notices rather than exposition dumps. This tone is ideal for opening vignettes, in-world stories, and examples of play that show how the game feels in action."}}},{id:"t3",name:"In-World Document",description:"Diegetic letters, reports, logs, and codices from inside the setting.",instruction:"Write as an in-world document: a letter, field report, captains log, scholars note, or similar. The writer has a personality and agenda; let their biases, priorities, and omissions shape the text. Keep structure clear, but allow subtle hints of wider events and tensions to leak through. This tone is ideal for lore fragments, sidebars, artefact descriptions, and snippets that make the setting feel lived-in.",i18n:{Chinese:{name:"",description:"",instruction:""},English:{name:"In-World Document",description:"Diegetic letters, reports, logs, and codices from inside the setting.",instruction:"Write as an in-world document: a letter, field report, captains log, scholars note, or similar. The writer has a personality and agenda; let their biases, priorities, and omissions shape the text. Keep structure clear, but allow subtle hints of wider events and tensions to leak through. This tone is ideal for lore fragments, sidebars, artefact descriptions, and snippets that make the setting feel lived-in."}}}],nh={defaultLanguage:"English",defaultOutputLength:"Medium",tones:q2,lengthDefinitions:{short:"Max 30 words",medium:"Approx 80 words",long:"Min 120 words"},enableImageGen:!1,globalPromptPrefix:"",uiScale:"Small"},_C=N.createContext(null),V2=({children:n})=>{const[e,s]=N.useState(()=>{try{const c=localStorage.getItem("nexus_global_settings");if(c){const d=JSON.parse(c);return{...nh,...d}}return nh}catch{return nh}});N.useEffect(()=>{const c=document.documentElement,d=e.uiScale||"Small";c.removeAttribute("data-scale"),requestAnimationFrame(()=>{c.setAttribute("data-scale",d)})},[e.uiScale]);const o=c=>{const d=c.defaultLanguage||"English",h=c.tones.map(m=>m.i18n&&m.i18n[d]?{...m,name:m.i18n[d].name,description:m.i18n[d].description,instruction:m.i18n[d].instruction}:m),g={...c,tones:h};s(g),localStorage.setItem("nexus_global_settings",JSON.stringify(g))},r=N.useMemo(()=>({settings:e,updateSettings:o}),[e]);return u.jsx(_C.Provider,{value:r,children:n})},ba=()=>{const n=N.useContext(_C);if(!n)throw new Error("useAppSettings must be used within SettingsProvider");return n};function J2(n,e){return e?n.replace(/\{(\w+)\}/g,(s,o)=>{const r=e[o];return r==null?`{${o}}`:String(r)}):n}const Cx={English:{common:{search:"Search...",cancel:"Cancel",save:"Save",saved:"Saved",saving:"Saving...",delete:"Delete",edit:"Edit",confirm:"Confirm",close:"Close",back:"Back",loading:"Loading...",validation:{required:"This field is required",minLength:"Must be at least 2 characters",maxLength:"Must be less than 50 characters",invalidChars:"Only letters, numbers, spaces and hyphens allowed",alreadyExists:"This name already exists"}},sidebar:{backToHub:"Back to Hub",activeWorld:"Active World",overview:"Overview",settings:"Settings",worldContext:"World Context",worldLore:"World Lore",characterLore:"Character Lore",assetsData:"Assets & Data",tools:"Tools",components:"Components",tagManager:"Tag Manager",aiForge:"AI Forge",rules:"Logic / Rules",rollerTest:"Roller Test",export:"Export",manualSave:"Save"},headers:{worldEditor:"World Editor",createPool:"Create Pool"},actions:{cancel:"Cancel",create:"Create",save:"Save",saved:"Saved",saving:"Saving..."},placeholders:{noWorldPools:"No world pools.",noCharPools:"No character pools.",noAssetPools:"No asset pools."},home:{hero:{title:"NEXUS CORE",subtitle:`Universal Procedural Generation Engine & World Building IDE.
Design Worlds, define Logic, and forge entities with AI.`},buttons:{globalConfig:"Global Config",import:"Import",aiGenesis:"AI World Genesis",newWorld:"New World",openEditor:"Open Editor",createFirst:"Create First World"},headers:{availableWorlds:"Available Worlds"},emptyState:{title:"No Worlds Found",desc:"Initialize a new rulebook or import an existing JSON package."},modals:{create:{title:"Initialize New World",nameLabel:"World Name",genreLabel:"Genre / Theme",desc:"This will create a new database container. You can define rules, tags, and entities inside it.",submit:"Initialize"},config:{title:"Global Configuration",tabs:{interface:"Interface",narrative:"Narrative Engine",system:"System"}}}},dashboard:{headers:{coreRulebook:"Core Rulebook",subtitle:"Master template configuration."},stats:{pools:"Total Pools",entities:"Total Entities",modules:"Modules"},cards:{genre:"Genre",tags:"Top World Tags",pools:"Data Pools",manageTags:"Manage"},danger:{title:"Danger Zone",desc:"Irreversible actions regarding this Rulebook.",buttons:{delete:"Delete Rulebook",cancel:"Cancel",confirm:"Yes, proceed",finalConfirm:"CONFIRM DELETION"},warnings:{stage1:"Are you absolutely sure?",stage1Desc:"This action cannot be undone. All pools, entities, and rules will be lost.",stage2:"Final Warning",stage2Desc:"Confirming this will permanently destroy"}}},forge:{header:{title:"Forge",subtitle:"Generate content using AI context.",poweredBy:"Powered by"},modes:{asset:{label:"Asset Forge",desc:"Create items, vehicles, and objects."},lore:{label:"Lore Forge",desc:"Generate history, legends, and world details."},character:{label:"Character Forge",desc:"Create NPCs, protagonists, and creatures."}},controls:{targetPool:"Target Pool",language:"Output Language",strictTags:{strict:"Tags: Existing Only",allow:"Tags: Allow New",tooltip:"New Tag Policy: Controls if AI can invent new tags."},tone:"Tone Preset",batchSize:"Batch Size",length:{label:"Output Length",scopeField:"Scope: Field",tooltip:"If checked, the length constraint applies to EACH text field individually rather than the total entity."},advanced:{toggle:"Advanced Constraints",mustContain:"Must Contain Tags",mustAvoid:"Must Avoid Tags"},context:{header:"Context / References",addLink:"Add Link",empty:"No context items linked. The AI will generate based on general world lore only."},prompt:"Prompt",buttons:{generate:"Generate Batch",generating:"Forging Content...",saveAll:"Save All"}},results:{title:"Results"}},pools:{header:{id:"ID"},actions:{editSettings:"Edit Pool Settings",deletePool:"Delete Pool",config:"Config",newEntity:"New"},roster:{title:"Roster",empty:"Select a character to edit details."},emptyState:{noStats:"No stats generated."},modals:{editPool:{title:"Edit Pool Settings",name:"Pool Name",desc:"Description",color:"Theme Color"},config:{title:"Pool Configuration",tabs:{blueprint:"Blueprint",relations:"Relationships"},blueprintDesc:"Selected components define the structure of entities in this pool.",relationsDesc:"Define relationship verbs (e.g. 'Is Enemy Of').",addVerb:"Add Verb"},editEntity:{title:"Edit Entity",name:"Entity Name",tags:"Active Tags"},deleteEntity:{title:"Delete Entity",desc:"Permanently remove this item? This cannot be undone."},deletePool:{title:"Delete Entire Pool",desc:"Are you sure you want to delete",warning:"CRITICAL: This will permanently delete all items. This action cannot be undone."}}}},Chinese:{common:{search:"...",cancel:"",save:"",saved:"",saving:"...",delete:"",edit:"",confirm:"",close:"",back:"",loading:"...",validation:{required:"",minLength:"2",maxLength:"50",invalidChars:"",alreadyExists:""}},sidebar:{backToHub:"",activeWorld:"",overview:"",settings:"",worldContext:"",worldLore:"",characterLore:"",assetsData:"",tools:"",components:"",tagManager:"",aiForge:"AI ",rules:"",rollerTest:"",export:"",manualSave:""},headers:{worldEditor:"",createPool:""},actions:{cancel:"",create:"",save:"",saved:"",saving:"..."},placeholders:{noWorldPools:"",noCharPools:"",noAssetPools:""},home:{hero:{title:"NEXUS CORE",subtitle:` IDE
 AI `},buttons:{globalConfig:"",import:"",aiGenesis:"AI ",newWorld:"",openEditor:"",createFirst:""},headers:{availableWorlds:""},emptyState:{title:"",desc:" JSON "},modals:{create:{title:"",nameLabel:"",genreLabel:" / ",desc:"",submit:""},config:{title:"",tabs:{interface:"",narrative:"",system:""}}}},dashboard:{headers:{coreRulebook:"",subtitle:""},stats:{pools:"",entities:"",modules:""},cards:{genre:"",tags:"",pools:"",manageTags:""},danger:{title:"",desc:"",buttons:{delete:"",cancel:"",confirm:"",finalConfirm:""},warnings:{stage1:"",stage1Desc:"",stage2:"",stage2Desc:""}}},forge:{header:{title:"",subtitle:" AI ",poweredBy:""},modes:{asset:{label:"",desc:""},lore:{label:"",desc:""},character:{label:"",desc:" NPC"}},controls:{targetPool:"",language:"",strictTags:{strict:"",allow:"",tooltip:" AI "},tone:"",batchSize:"",length:{label:"",scopeField:"",tooltip:""},advanced:{toggle:"",mustContain:"",mustAvoid:""},context:{header:" / ",addLink:"",empty:"AI "},prompt:"",buttons:{generate:"",generating:"...",saveAll:""}},results:{title:""}},pools:{header:{id:"ID"},actions:{editSettings:"",deletePool:"",config:"",newEntity:""},roster:{title:"",empty:""},emptyState:{noStats:""},modals:{editPool:{title:"",name:"",desc:"",color:""},config:{title:"",tabs:{blueprint:"",relations:""},blueprintDesc:"",relationsDesc:"",addVerb:""},editEntity:{title:"",name:"",tags:""},deleteEntity:{title:"",desc:""},deletePool:{title:"",desc:"",warning:""}}}}},Vr=()=>{const{settings:n}=ba(),e=n.defaultLanguage||"English";return Cx[e]||Cx.English},W2={"common.noWorldSelected":{English:"No World Selected",Chinese:""},"common.loadFailure.title":{English:"Load Failure",Chinese:""},"common.abort":{English:"Abort",Chinese:""},"home.toast.systemError.title":{English:"System Error",Chinese:""},"home.toast.systemError.message":{English:"Failed to load sector data.",Chinese:""},"home.toast.worldInitialized.title":{English:"World Initialized",Chinese:""},"home.toast.worldInitialized.message":{English:"Welcome to {name}.",Chinese:" {name}"},"home.toast.creationFailed.title":{English:"Creation Failed",Chinese:""},"home.toast.creationFailed.message":{English:"Could not initialize new world.",Chinese:""},"home.toast.exportComplete.title":{English:"Export Complete",Chinese:""},"home.toast.exportComplete.message":{English:"Rulebook package downloaded.",Chinese:""},"home.toast.exportFailed.title":{English:"Export Failed",Chinese:""},"home.toast.exportFailed.message":{English:"Could not generate package.",Chinese:""},"home.toast.importSuccessful.title":{English:"Import Successful",Chinese:""},"home.toast.importSuccessful.message":{English:'Restored "{name}" from archive.',Chinese:"{name}"},"home.toast.importFailed.title":{English:"Import Failed",Chinese:""},"home.toast.importFailed.message":{English:"Corrupted or invalid Rulebook file.",Chinese:""},"home.toast.styleExported.title":{English:"Style Exported",Chinese:""},"home.toast.styleExported.message":{English:"Global narrative settings saved.",Chinese:""},"home.toast.styleImported.title":{English:"Style Imported",Chinese:""},"home.toast.styleImported.message":{English:"Loaded {count} narrative roles.",Chinese:" {count} "},"home.toast.invalidConfig.title":{English:"Import Failed",Chinese:""},"home.toast.invalidConfig.message":{English:"Invalid configuration file.",Chinese:""},"home.toast.interfaceScaled.title":{English:"Interface Scaled",Chinese:""},"home.toast.interfaceScaled.message":{English:"UI set to {scale}.",Chinese:" {scale}"},"home.toast.rolesUpdated.title":{English:"Roles Updated",Chinese:""},"home.toast.rolesUpdated.message":{English:"Narrative roles saved.",Chinese:""},"home.toast.aiConfigSaved.title":{English:"AI Configuration Saved",Chinese:"AI "},"home.toast.aiConfigSaved.message":{English:"Using {provider} - {model}",Chinese:" {provider} - {model}"},"home.toast.apiModeChanged.title":{English:"API Mode Changed",Chinese:"API "},"home.toast.apiModeChanged.custom":{English:"Now using custom API key",Chinese:" API Key"},"home.toast.apiModeChanged.env":{English:"Now using environment variable",Chinese:""},"dashboard.loadFailure.desc":{English:"Could not retrieve world data for ID: {id}",Chinese:" ID {id}"},"dashboard.validationError.title":{English:"Validation Error",Chinese:""},"dashboard.validationError.worldNameEmpty":{English:"World name cannot be empty.",Chinese:""},"dashboard.toast.configSaved.title":{English:"Configuration Saved",Chinese:""},"dashboard.toast.configSaved.message":{English:"World settings updated successfully.",Chinese:""},"dashboard.toast.saveFailed.title":{English:"Save Failed",Chinese:""},"dashboard.toast.saveFailed.message":{English:"Could not persist changes.",Chinese:""},"dashboard.toast.worldDeleted.title":{English:"World Deleted",Chinese:""},"dashboard.toast.worldDeleted.message":{English:"{name} has been removed.",Chinese:" {name}"},"dashboard.toast.deletionFailed.title":{English:"Deletion Failed",Chinese:""},"dashboard.toast.deletionFailed.message":{English:"Database error occurred.",Chinese:""},"dashboard.noTagsYet":{English:"No tags defined yet.",Chinese:""},"dashboard.noDescriptionProvided":{English:"No description provided.",Chinese:""},"dashboard.itemsCount":{English:"{count} items",Chinese:"{count} "},"forge.toast.contextAdded.title":{English:"Context Added",Chinese:""},"forge.toast.contextAdded.message":{English:"Linked {name}",Chinese:" {name}"},"forge.toast.configError.title":{English:"Configuration Error",Chinese:""},"forge.toast.configError.message":{English:"AI is not configured. Please set up your API key in Settings.",Chinese:"AI  API Key"},"forge.toast.missingSelection.title":{English:"Missing Selection",Chinese:""},"forge.toast.missingSelection.message":{English:"Please select a Target Pool before forging.",Chinese:""},"forge.toast.emptyPrompt.title":{English:"Empty Prompt",Chinese:""},"forge.toast.emptyPrompt.message":{English:"Please describe what you want to create.",Chinese:""},"forge.toast.complete.title":{English:"Forge Complete",Chinese:""},"forge.toast.complete.message":{English:"Successfully generated {count} items.",Chinese:" {count} "},"forge.toast.generationFailed.title":{English:"Generation Failed",Chinese:""},"forge.toast.saved.title":{English:"Saved",Chinese:""},"forge.toast.saved.message":{English:"{name} added to {pool}.",Chinese:"{name}  {pool}"},"forge.toast.batchSaved.title":{English:"Batch Saved",Chinese:""},"forge.toast.batchSaved.message":{English:"All generated items have been persisted.",Chinese:""},"forge.relationship.relatedTo":{English:"Related to",Chinese:""},"forge.relationship.allyOf":{English:"Ally of",Chinese:""},"forge.relationship.enemyOf":{English:"Enemy of",Chinese:""},"forge.length.short":{English:"Short",Chinese:""},"forge.length.medium":{English:"Medium",Chinese:""},"forge.length.long":{English:"Long",Chinese:""},"forge.noStatsGenerated":{English:"No stats generated.",Chinese:""},"pools.toast.success.title":{English:"Success",Chinese:""},"pools.toast.success.message":{English:"Pool settings updated.",Chinese:""},"pools.toast.error.title":{English:"Error",Chinese:""},"pools.toast.deleted.title":{English:"Deleted",Chinese:""},"pools.toast.poolRemoved.message":{English:"Pool removed.",Chinese:""},"pools.toast.actionDenied.title":{English:"Action Denied",Chinese:""},"pools.toast.actionDenied.message":{English:"Metadata component is required for system integrity.",Chinese:"Metadata "},"pools.toast.characterCreated.title":{English:"Character Created",Chinese:""},"pools.toast.characterCreated.message":{English:"Added to roster.",Chinese:""},"pools.toast.saved.title":{English:"Saved",Chinese:""},"pools.toast.saveFailed.message":{English:"Save failed.",Chinese:""},"pools.toast.entityRemoved.message":{English:"Entity removed.",Chinese:""},"pools.newCharacter":{English:"New Character",Chinese:""},"pools.newItem":{English:"New Item",Chinese:""},"pools.emptyCharacter.title":{English:"No Character Selected",Chinese:""},"pools.emptyCharacter.desc":{English:"Select a character from the roster on the left, or create a new one to get started.",Chinese:""},"pools.emptyCharacter.action":{English:"Create Character",Chinese:""},"pools.relationship.selectTargets":{English:"Select targets...",Chinese:""},"pools.relationship.noActive":{English:"No active relationships.",Chinese:""},"pools.relationship.addConnectionType":{English:"Add Connection Type",Chinese:""},"pools.relationship.selectOrTypeNew":{English:"Select or Type New...",Chinese:""},"pools.boolean.false":{English:"False",Chinese:""},"pools.boolean.true":{English:"True",Chinese:""},"pools.select.placeholder":{English:"-- Select --",Chinese:"--  --"},"pools.characterName":{English:"Character Name",Chinese:""},"pools.customColor":{English:"Custom Color",Chinese:""},"pools.noRelationshipTypes":{English:"No relationship types defined.",Chinese:""},"pools.addTags":{English:"Add tags...",Chinese:""},"appSettings.title":{English:"System Configuration",Chinese:""},"appSettings.subtitle":{English:"Manage global AI behavior, output preferences, and experimental tools.",Chinese:" AI "},"appSettings.importStyle":{English:"Import Style",Chinese:""},"appSettings.exportStyle":{English:"Export Style",Chinese:""},"appSettings.section.localization":{English:"Localization & Interface",Chinese:""},"appSettings.label.targetLanguage":{English:"Target Language",Chinese:""},"appSettings.hint.languageSwitch":{English:"Switching language will automatically update default narrative roles if translations are available.",Chinese:""},"appSettings.label.interfaceScale":{English:"Interface Scale",Chinese:""},"appSettings.hint.scale":{English:"Adjusts font size and layout density.",Chinese:""},"appSettings.aiProvider.title":{English:"AI Provider Configuration",Chinese:"AI "},"appSettings.aiProvider.subtitle":{English:"Choose your AI provider and model for content generation.",Chinese:" AI "},"appSettings.status.connected":{English:"Connected",Chinese:""},"appSettings.status.notConfigured":{English:"Not Configured",Chinese:""},"appSettings.label.selectModel":{English:"Select Model",Chinese:""},"appSettings.label.useCustomKey":{English:"Use Custom API Key",Chinese:" API Key"},"appSettings.hint.usingPersonalKey":{English:"Using your personal API key (stored locally)",Chinese:" API Key"},"appSettings.hint.usingEnv":{English:"Using environment variable ({key})",Chinese:"{key}"},"appSettings.toggle.customKey":{English:"Custom Key",Chinese:" Key"},"appSettings.toggle.envVar":{English:"Env Variable",Chinese:""},"appSettings.hint.keyStoredLocally":{English:"Your key is stored locally and never sent to any server.",Chinese:" Key "},"appSettings.button.saveAIConfig":{English:"Save AI Configuration",Chinese:" AI "},"appSettings.length.title":{English:"Output Length Definitions",Chinese:""},"appSettings.length.subtitle":{English:"Define instruction sets for short, medium, and long generation.",Chinese:"//"},"appSettings.length.defaultSetting":{English:"Default Setting",Chinese:""},"appSettings.length.shortConcise":{English:"Short (Concise)",Chinese:""},"appSettings.length.mediumStandard":{English:"Medium (Standard)",Chinese:""},"appSettings.length.longDetailed":{English:"Long (Detailed)",Chinese:""},"appSettings.length.placeholder.short":{English:"Instruction for Short output...",Chinese:""},"appSettings.length.placeholder.medium":{English:"Instruction for Medium output...",Chinese:""},"appSettings.length.placeholder.long":{English:"Instruction for Long output...",Chinese:""},"appSettings.button.saveDefinitions":{English:"Save Definitions",Chinese:""},"appSettings.roles.title":{English:"Narrative Roles",Chinese:""},"appSettings.roles.subtitle":{English:"Define the personality and writing style of the AI.",Chinese:" AI "},"appSettings.roles.newRole":{English:"New Role",Chinese:""},"appSettings.badge.multilingual":{English:"Multilingual",Chinese:""},"appSettings.tooltip.editRole":{English:"Edit Role",Chinese:""},"appSettings.tooltip.deleteRole":{English:"Delete Role",Chinese:""},"appSettings.modal.editRoleTitle":{English:"Edit Narrative Role",Chinese:""},"appSettings.modal.createRoleTitle":{English:"Create New Role",Chinese:""},"appSettings.field.roleName":{English:"Role Name",Chinese:""},"appSettings.field.shortDescription":{English:"Short Description",Chinese:""},"appSettings.field.systemPrompt":{English:"System Prompt Instruction",Chinese:""},"appSettings.modal.cancel":{English:"Cancel",Chinese:""},"appSettings.modal.saveRole":{English:"Save Role",Chinese:""},"appSettings.modal.confirmDeletion":{English:"Confirm Deletion",Chinese:""},"appSettings.modal.deleteRole":{English:"Delete Role",Chinese:""},"appSettings.modal.deleteRole.question":{English:"Are you sure you want to delete this narrative role?",Chinese:""},"appSettings.modal.deleteRole.warning":{English:"This action cannot be undone. Any generations using this role will revert to the default.",Chinese:""},"appSettings.experimental.title":{English:"Experimental Features",Chinese:""},"appSettings.experimental.subtitle":{English:"Enable or disable features that are currently in testing.",Chinese:""},"appSettings.imageGen.title":{English:"Image Generation",Chinese:""},"appSettings.imageGen.subtitle":{English:"Allows generating visual previews for items using AI.",Chinese:" AI "},"appSettings.state.enabled":{English:"Enabled",Chinese:""},"appSettings.state.disabled":{English:"Disabled",Chinese:""},"appSettings.logs.title":{English:"System History",Chinese:""},"appSettings.logs.subtitle":{English:"Full generation history. Logs are cleared when refreshing the application.",Chinese:""},"worldSettings.title":{English:"World Settings & Context",Chinese:""},"worldSettings.subtitle":{English:"Define the background lore, physics, and rules that guide the AI.",Chinese:" AI "},"worldSettings.button.guide":{English:"Guide",Chinese:""},"worldSettings.saving":{English:"Saving...",Chinese:""},"worldSettings.saveChanges":{English:"Save Changes",Chinese:""},"worldSettings.saved":{English:"Saved",Chinese:""},"worldSettings.section.systemOverrides":{English:"System Overrides",Chinese:""},"worldSettings.section.systemOverrides.desc":{English:"Control global AI behaviors for this specific world.",Chinese:" AI "},"worldSettings.prefixActive":{English:"Prefix Active",Chinese:""},"worldSettings.prefixDisabled":{English:"Prefix Disabled",Chinese:""},"worldSettings.activeGlobalPrefix":{English:"Active Global Prefix:",Chinese:""},"worldSettings.noGlobalPrefix":{English:"No global prefix defined in Home settings.",Chinese:""},"worldSettings.section.generalSetting":{English:"General Setting",Chinese:""},"worldSettings.section.generalSetting.desc":{English:"The primary background information for your world. Include genre specifics, atmosphere, and major historical events.",Chinese:""},"worldSettings.placeholder.sourceOfTruth":{English:"Define the Source of Truth: The physics, the tone, the major factions, the magic system, or the level of technology. This is the bedrock of your world.",Chinese:""},"worldSettings.section.customFields":{English:"Custom Context Fields",Chinese:""},"worldSettings.section.customFields.desc":{English:"Add specific sections to clarify the prompt (e.g. Magic System, Technology, Physics).",Chinese:""},"worldSettings.button.addField":{English:"Add Field",Chinese:""},"worldSettings.empty.noCustomFields":{English:"No custom context fields defined.",Chinese:""},"worldSettings.empty.addOne":{English:"Add one to guide the AI",Chinese:" AI"},"worldSettings.placeholder.fieldName":{English:"FIELD NAME (e.g. MAGIC)",Chinese:"MAGIC"},"worldSettings.placeholder.description":{English:"Description...",Chinese:""},"worldSettings.guide.title":{English:"Prompt Context Guide",Chinese:""},"worldSettings.guide.close":{English:"Close Guide",Chinese:""},"worldSettings.guide.howItWorks":{English:"How it works",Chinese:""},"worldSettings.guide.whenRequest":{English:"When you request an item, the AI receives:",Chinese:"AI "},"worldSettings.guide.tips":{English:"Tips for Custom Fields",Chinese:""},"worldSettings.guide.magicSystem":{English:"Magic System",Chinese:""},"worldSettings.guide.technology":{English:"Technology",Chinese:""},"worldSettings.guide.cosmology":{English:"Cosmology",Chinese:""},"worldSettings.guide.magicDesc":{English:'Define the rules of magic. Is it rare? Dangerous? Elemental? This stops the AI from generating generic "Fireballs" if your world uses "Soul Arts".',Chinese:"AI "},"worldSettings.guide.techDesc":{English:"Clarify the tech level. Steampunk? Cyberpunk? Stone Age?",Chinese:""},"worldSettings.guide.cosmoDesc":{English:"Are there gods? Multiple moons? Flat earth?",Chinese:""},"roller.toast.dbError.title":{English:"DB Error",Chinese:""},"roller.toast.dbError.message":{English:"Failed to load candidates.",Chinese:""},"roller.toast.emptyPool.title":{English:"Empty Pool",Chinese:""},"roller.toast.emptyPool.message":{English:"No items available to roll.",Chinese:""},"roller.toast.rollFailed.title":{English:"Roll Failed",Chinese:""},"roller.toast.rollFailed.message":{English:"All items filtered out.",Chinese:""},"roller.panel.config":{English:"Config",Chinese:""},"roller.panel.candidates":{English:"{count} Candidates",Chinese:"{count} "},"roller.label.targetPool":{English:"Target Pool",Chinese:""},"roller.label.contextTags":{English:"Context Tags",Chinese:""},"roller.placeholder.contextTags":{English:"e.g. night, forest",Chinese:"night, forest"},"roller.panel.runtimeConstraints":{English:"Runtime Constraints",Chinese:""},"roller.placeholder.path":{English:"Path (e.g. components.basic_stats.power)",Chinese:"components.basic_stats.power"},"roller.placeholder.value":{English:"Value",Chinese:""},"roller.empty.noConstraints":{English:"No active constraints.",Chinese:""},"roller.loading":{English:"Loading...",Chinese:""},"roller.roll":{English:"ROLL",Chinese:""},"roller.awaitingInput":{English:"Awaiting Input",Chinese:""},"roller.executionLog":{English:"Execution Log",Chinese:""},"roller.operator.eq":{English:"Equals (=)",Chinese:" (=)"},"roller.operator.neq":{English:"Not Equals (!=)",Chinese:" (!=)"},"roller.operator.gt":{English:"Greater Than (>)",Chinese:" (>)"},"roller.operator.gte":{English:"Greater/Equal (>=)",Chinese:" (>=)"},"roller.operator.lt":{English:"Less Than (<)",Chinese:" (<)"},"roller.operator.lte":{English:"Less/Equal (<=)",Chinese:" (<=)"},"roller.operator.contains":{English:"Contains",Chinese:""},"roller.operator.missing":{English:"Missing",Chinese:""},"roller.operator.truthy":{English:"Exists",Chinese:""},"tagManager.newTag":{English:"New Tag",Chinese:""},"tagManager.searchPlaceholder":{English:"Search tags...",Chinese:""},"tagManager.allTags":{English:"All Tags",Chinese:""},"tagManager.noDescription":{English:"No description",Chinese:""},"tagManager.noMatches":{English:"No matching tags found.",Chinese:""},"tagManager.modal.confirmRenaming":{English:"Confirm Renaming",Chinese:""},"tagManager.modal.deleteTag":{English:"Delete Tag",Chinese:""},"tagManager.modal.createNewTag":{English:"Create New Tag",Chinese:""},"tagManager.button.createTag":{English:"Create Tag",Chinese:""},"tagManager.field.label":{English:"Label",Chinese:""},"tagManager.field.description":{English:"Description",Chinese:""},"tagManager.button.cancel":{English:"Cancel",Chinese:""},"tagManager.button.save":{English:"Save",Chinese:""},"tagManager.toast.validationError.title":{English:"Validation Error",Chinese:""},"tagManager.toast.validationError.message":{English:"Tag label is required.",Chinese:""},"tagManager.toast.tagCreated.title":{English:"Tag Created",Chinese:""},"tagManager.toast.tagCreated.message":{English:"Added '{label}' to registry.",Chinese:"{label}"},"tagManager.toast.persistFailed.title":{English:"Error",Chinese:""},"tagManager.toast.persistFailed.message":{English:"Failed to persist new tag.",Chinese:""},"tagManager.toast.scanFailed.title":{English:"Error",Chinese:""},"tagManager.toast.scanFailed.message":{English:"Failed to scan database index.",Chinese:""},"tagManager.toast.tagDeleted.title":{English:"Tag Deleted",Chinese:""},"tagManager.toast.tagDeleted.message":{English:"Definition removed from registry.",Chinese:""},"tagManager.toast.deleteFailed.title":{English:"Error",Chinese:""},"tagManager.toast.deleteFailed.message":{English:"Failed to delete tag.",Chinese:""},"tagManager.toast.saved.title":{English:"Saved",Chinese:""},"tagManager.toast.saved.message":{English:"Tag metadata updated.",Chinese:""},"tagManager.toast.saveFailed.title":{English:"Save Failed",Chinese:""},"tagManager.toast.saveFailed.message":{English:"Could not update tag.",Chinese:""},"tagManager.toast.migrationComplete.title":{English:"Migration Complete",Chinese:""},"tagManager.toast.migrationComplete.message":{English:"Updated {count} entities to use '{label}'.",Chinese:" {count} {label}"},"tagManager.toast.migrationFailed.title":{English:"Migration Failed",Chinese:""},"tagManager.toast.migrationFailed.message":{English:"Database transaction error.",Chinese:""},"tagManager.modal.deleteQuestion":{English:"Are you sure you want to delete this tag definition?",Chinese:""},"tagManager.modal.checkingUsage":{English:"Checking usage...",Chinese:""},"tagManager.modal.warningPrefix":{English:"Warning:",Chinese:""},"tagManager.modal.usageWarning":{English:"This tag is currently used by {count} entities. Deleting the definition will not remove the tag from entities, but they will lose metadata (color/description).",Chinese:" {count} /"},"tagManager.modal.renameBody":{English:"Renaming {old} to {new} will update all entities in the database.",Chinese:" {old}  {new} "},"tagManager.modal.renameHint":{English:"This operation might take a moment depending on database size.",Chinese:""},"tagManager.button.confirmRename":{English:"Confirm Rename",Chinese:""},"tagManager.button.migrating":{English:"Migrating...",Chinese:""},"tagManager.placeholder.exampleLabel":{English:"e.g. Arcane",Chinese:""},"tagManager.placeholder.contextUsage":{English:"Context usage...",Chinese:""},"componentManager.registry":{English:"Registry",Chinese:""},"componentManager.createComponent":{English:"Create Component",Chinese:""},"componentManager.saveDefinition":{English:"Save Definition",Chinese:""},"componentManager.deleteComponent":{English:"Delete Component",Chinese:""},"componentManager.toast.validationError.title":{English:"Validation Error",Chinese:""},"componentManager.toast.validationError.message":{English:"Component label is required.",Chinese:""},"componentManager.toast.accessDenied.title":{English:"Access Denied",Chinese:""},"componentManager.toast.accessDenied.message":{English:"Metadata definition is immutable.",Chinese:"Metadata "},"componentManager.toast.schemaUpdated.title":{English:"Schema Updated",Chinese:""},"componentManager.toast.schemaUpdated.message":{English:"Saved definition for '{label}'.",Chinese:"{label}"},"componentManager.toast.saveFailed.title":{English:"Save Failed",Chinese:""},"componentManager.toast.systemProtected.title":{English:"System Protected",Chinese:""},"componentManager.toast.systemProtected.message":{English:"Core components cannot be deleted.",Chinese:""},"componentManager.toast.deleted.title":{English:"Deleted",Chinese:""},"componentManager.toast.deleted.message":{English:"Component removed from registry.",Chinese:""},"componentManager.toast.deletionFailed.title":{English:"Deletion Failed",Chinese:""},"componentManager.label.category":{English:"Category",Chinese:""},"componentManager.probabilityEngine":{English:"Probability Engine",Chinese:""},"componentManager.totalWeight":{English:"Total Weight:",Chinese:""},"componentManager.systemComponent":{English:"System Component",Chinese:""},"componentManager.key":{English:"Key",Chinese:""},"componentManager.type":{English:"Type",Chinese:""},"componentManager.defaultState":{English:"Default State",Chinese:""},"componentManager.defaultSelection":{English:"Default Selection",Chinese:""},"componentManager.default":{English:"Default",Chinese:""},"componentManager.constraint":{English:"Constraint",Chinese:""},"componentManager.float":{English:"Float",Chinese:""},"componentManager.integer":{English:"Integer",Chinese:""},"componentManager.defaultDate":{English:"Default Date",Chinese:""},"componentManager.defaultText":{English:"Default Text",Chinese:""},"componentManager.schemaFields":{English:"Schema Fields",Chinese:""},"componentManager.addField":{English:"Add Field",Chinese:""},"componentManager.fieldKey":{English:"Field Key",Chinese:""},"componentManager.dataType":{English:"Data Type",Chinese:""},"componentManager.dropdownOptions":{English:"Dropdown Options",Chinese:""},"rules.title":{English:"Narrative Logic",Chinese:""},"rules.subtitle":{English:"Define descriptive rules and link them to world entities for reference.",Chinese:""},"rules.listTitle":{English:"Rules",Chinese:""},"rules.none":{English:"No rules defined.",Chinese:""},"rules.field.ruleName":{English:"Rule Name",Chinese:""},"rules.button.addReference":{English:"Add Reference",Chinese:""},"rules.placeholder.ruleName":{English:"Rule Name",Chinese:""},"rules.placeholder.content":{English:"Describe the rule logic here. E.g. 'If [Enemy: Pope] is killed, then [Location: Church] is locked.'",Chinese:"[][]"},"rules.toast.validationError.title":{English:"Validation Error",Chinese:""},"rules.toast.validationError.message":{English:"Rule name is required.",Chinese:""},"rules.toast.saved.title":{English:"Rule Saved",Chinese:""},"rules.toast.saved.message":{English:"Narrative rule updated.",Chinese:""},"rules.toast.saveFailed.title":{English:"Error",Chinese:""},"rules.toast.saveFailed.message":{English:"Failed to save rule.",Chinese:""},"rules.toast.deleted.title":{English:"Deleted",Chinese:""},"rules.toast.deleted.message":{English:"Rule removed.",Chinese:""},"rules.toast.deleteFailed.title":{English:"Error",Chinese:""},"rules.toast.deleteFailed.message":{English:"Failed to delete rule.",Chinese:""},"rules.modal.deleteTitle":{English:"Delete Rule",Chinese:""},"rules.modal.deleteQuestion":{English:"Permanently delete this narrative rule?",Chinese:""},"rules.empty.selectHint":{English:"Select a rule to edit or create a new one.",Chinese:""},"shared.systemLogs":{English:"System Logs",Chinese:""},"shared.selectReferenceEntity":{English:"Select Reference Entity",Chinese:""},"shared.allPools":{English:"All Pools",Chinese:""},"shared.searchByNameOrTag":{English:"Search by name or tag...",Chinese:""},"shared.searching":{English:"Searching...",Chinese:""},"shared.noMatchingEntities":{English:"No matching entities found.",Chinese:""},"shared.tryDifferentSearch":{English:"Try a different search term or pool.",Chinese:""},"shared.foundMatches":{English:"Found {count} matches",Chinese:" {count} "},"shared.hoverForDetails":{English:"Hover for details",Chinese:""},"shared.noDescriptionProvided":{English:"No description provided.",Chinese:""},"shared.systemPromptPayload":{English:"System Prompt payload:",Chinese:""},"shared.rawJsonResponse":{English:"Raw JSON Response:",Chinese:" JSON "},"sourceLayout.sources":{English:"Sources",Chinese:""},"sourceLayout.search":{English:"Search...",Chinese:""},"worldForge.title":{English:"AI World Genesis V2",Chinese:"AI  V2"},"worldForge.toast.aiNotConfigured.title":{English:"AI Not Configured",Chinese:"AI "},"worldForge.toast.aiNotConfigured.message":{English:"Please set up your API key in Settings.",Chinese:" API Key"},"worldForge.toast.error.title":{English:"Error",Chinese:""},"worldForge.toast.generateOptionsFailed":{English:"Failed to generate options.",Chinese:""},"worldForge.toast.inputRequired.title":{English:"Input Required",Chinese:""},"worldForge.toast.inputRequired.message":{English:"Please enter a story prompt.",Chinese:""},"worldForge.toast.analysisFailed.title":{English:"Analysis Failed",Chinese:""},"worldForge.toast.analysisFailed.message":{English:"AI could not parse story.",Chinese:"AI "},"worldForge.toast.genesisFailed.title":{English:"Genesis Failed",Chinese:""},"worldForge.toast.genesisFailed.message":{English:"Build process encountered an error.",Chinese:""},"worldForge.engineTitle":{English:"Story-to-World Engine V2",Chinese:" V2"},"worldForge.step1":{English:"Step 1: Define the core identity. Use the AI to brainstorm or enter your own.",Chinese:" 1  AI "},"worldForge.label.language":{English:"Language",Chinese:""},"worldForge.label.narrativeTone":{English:"Narrative Tone",Chinese:""},"worldForge.defaultStyle":{English:"-- Default Style --",Chinese:"--  --"},"worldForge.brainstorming":{English:"Brainstorming...",Chinese:""},"worldForge.generateOptions":{English:"Generate Options",Chinese:""},"worldForge.worldTitle":{English:"World Title",Chinese:""},"worldForge.noOptionsGenerated":{English:"No options generated",Chinese:""},"worldForge.manualTitle":{English:"Manual Title...",Chinese:""},"worldForge.richGenre":{English:"Rich Genre Description",Chinese:""},"worldForge.manualGenre":{English:"Manual Genre...",Chinese:""},"worldForge.storyPrompt":{English:"Story Context / Prompt",Chinese:" / "},"worldForge.storyPlaceholder":{English:"Paste your story outline, notes, or blurb here...",Chinese:""},"worldForge.decomposerResults":{English:"Story Decomposer Results",Chinese:""},"worldForge.aiSummary":{English:"AI Summary",Chinese:"AI "},"worldForge.proposedCategories":{English:"Proposed Categories (Select Pools)",Chinese:""},"worldForge.selectedCount":{English:"{count} selected",Chinese:" {count} "},"worldForge.generationEngine":{English:"Generation Engine",Chinese:""},"worldForge.complexityLevel":{English:"Complexity Level",Chinese:""},"worldForge.standard":{English:"Standard",Chinese:""},"worldForge.deepLore":{English:"Deep Lore",Chinese:""},"worldForge.deepLoreDesc":{English:"Enables multi-paragraph descriptions, hidden secrets, and complex relationship mapping. Slower generation.",Chinese:""},"worldForge.standardDesc":{English:"Balanced descriptions suitable for standard gameplay reference. Faster generation.",Chinese:""},"worldForge.tokenCost":{English:"Token Cost: {count}",Chinese:"Token {count}"},"worldForge.cancel":{English:"Cancel",Chinese:""},"worldForge.decomposing":{English:"Decomposing Story...",Chinese:""},"worldForge.nextAnalyze":{English:"Next: Analyze",Chinese:""},"worldForge.confirmBuild":{English:"Confirm & Build",Chinese:""}},kn=()=>{const{settings:n}=ba(),e=n.defaultLanguage||"English";return{lang:e,s:(o,r)=>{const c=W2[o];if(!c)return o;const d=c[e]??c.English;return J2(d,r)}}};function Sx(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Y2(...n){return e=>{let s=!1;const o=n.map(r=>{const c=Sx(r,e);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<o.length;r++){const c=o[r];typeof c=="function"?c():Sx(n[r],null)}}}}var K2=Symbol.for("react.lazy"),Vc=Bb[" use ".trim().toString()];function X2(n){return typeof n=="object"&&n!==null&&"then"in n}function TC(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===K2&&"_payload"in n&&X2(n._payload)}function Q2(n){const e=eR(n),s=N.forwardRef((o,r)=>{let{children:c,...d}=o;TC(c)&&typeof Vc=="function"&&(c=Vc(c._payload));const h=N.Children.toArray(c),g=h.find(nR);if(g){const m=g.props.children,v=h.map(b=>b===g?N.Children.count(m)>1?N.Children.only(null):N.isValidElement(m)?m.props.children:null:b);return u.jsx(e,{...d,ref:r,children:N.isValidElement(m)?N.cloneElement(m,void 0,v):null})}return u.jsx(e,{...d,ref:r,children:c})});return s.displayName=`${n}.Slot`,s}var Z2=Q2("Slot");function eR(n){const e=N.forwardRef((s,o)=>{let{children:r,...c}=s;if(TC(r)&&typeof Vc=="function"&&(r=Vc(r._payload)),N.isValidElement(r)){const d=iR(r),h=sR(c,r.props);return r.type!==N.Fragment&&(h.ref=o?Y2(o,d):d),N.cloneElement(r,h)}return N.Children.count(r)>1?N.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var tR=Symbol("radix.slottable");function nR(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===tR}function sR(n,e){const s={...e};for(const o in e){const r=n[o],c=e[o];/^on[A-Z]/.test(o)?r&&c?s[o]=(...h)=>{const g=c(...h);return r(...h),g}:r&&(s[o]=r):o==="style"?s[o]={...r,...c}:o==="className"&&(s[o]=[r,c].filter(Boolean).join(" "))}return{...n,...s}}function iR(n){var o,r;let e=(o=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:o.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?n.props.ref:n.props.ref||n.ref)}function NC(n){var e,s,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(s=NC(n[e]))&&(o&&(o+=" "),o+=s);else for(e in n)n[e]&&(o&&(o+=" "),o+=e);return o}function oR(){for(var n,e,s=0,o="";s<arguments.length;)(n=arguments[s++])&&(e=NC(n))&&(o&&(o+=" "),o+=e);return o}const wx=n=>typeof n=="boolean"?"".concat(n):n===0?"0":n,Ex=oR,aR=(n,e)=>s=>{var o;if((e==null?void 0:e.variants)==null)return Ex(n,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:r,defaultVariants:c}=e,d=Object.keys(r).map(m=>{const v=s==null?void 0:s[m],b=c==null?void 0:c[m];if(v===null)return null;const S=wx(v)||wx(b);return r[m][S]}),h=s&&Object.entries(s).reduce((m,v)=>{let[b,S]=v;return S===void 0||(m[b]=S),m},{}),g=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((m,v)=>{let{class:b,className:S,...E}=v;return Object.entries(E).every(T=>{let[R,_]=T;return Array.isArray(_)?_.includes({...c,...h}[R]):{...c,...h}[R]===_})?[...m,b,S]:m},[]);return Ex(n,d,g,s==null?void 0:s.class,s==null?void 0:s.className)};function AC(n){var e,s,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(s=AC(n[e]))&&(o&&(o+=" "),o+=s)}else for(s in n)n[s]&&(o&&(o+=" "),o+=s);return o}function rR(){for(var n,e,s=0,o="",r=arguments.length;s<r;s++)(n=arguments[s])&&(e=AC(n))&&(o&&(o+=" "),o+=e);return o}const vp="-";function lR(n){const e=uR(n),{conflictingClassGroups:s,conflictingClassGroupModifiers:o}=n;function r(d){const h=d.split(vp);return h[0]===""&&h.length!==1&&h.shift(),RC(h,e)||cR(d)}function c(d,h){const g=s[d]||[];return h&&o[d]?[...g,...o[d]]:g}return{getClassGroupId:r,getConflictingClassGroupIds:c}}function RC(n,e){var d;if(n.length===0)return e.classGroupId;const s=n[0],o=e.nextPart.get(s),r=o?RC(n.slice(1),o):void 0;if(r)return r;if(e.validators.length===0)return;const c=n.join(vp);return(d=e.validators.find(({validator:h})=>h(c)))==null?void 0:d.classGroupId}const _x=/^\[(.+)\]$/;function cR(n){if(_x.test(n)){const e=_x.exec(n)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}}function uR(n){const{theme:e,prefix:s}=n,o={nextPart:new Map,validators:[]};return fR(Object.entries(n.classGroups),s).forEach(([c,d])=>{Dh(d,o,c,e)}),o}function Dh(n,e,s,o){n.forEach(r=>{if(typeof r=="string"){const c=r===""?e:Tx(e,r);c.classGroupId=s;return}if(typeof r=="function"){if(dR(r)){Dh(r(o),e,s,o);return}e.validators.push({validator:r,classGroupId:s});return}Object.entries(r).forEach(([c,d])=>{Dh(d,Tx(e,c),s,o)})})}function Tx(n,e){let s=n;return e.split(vp).forEach(o=>{s.nextPart.has(o)||s.nextPart.set(o,{nextPart:new Map,validators:[]}),s=s.nextPart.get(o)}),s}function dR(n){return n.isThemeGetter}function fR(n,e){return e?n.map(([s,o])=>{const r=o.map(c=>typeof c=="string"?e+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([d,h])=>[e+d,h])):c);return[s,r]}):n}function hR(n){if(n<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,o=new Map;function r(c,d){s.set(c,d),e++,e>n&&(e=0,o=s,s=new Map)}return{get(c){let d=s.get(c);if(d!==void 0)return d;if((d=o.get(c))!==void 0)return r(c,d),d},set(c,d){s.has(c)?s.set(c,d):r(c,d)}}}const MC="!";function pR(n){const e=n.separator,s=e.length===1,o=e[0],r=e.length;return function(d){const h=[];let g=0,m=0,v;for(let R=0;R<d.length;R++){let _=d[R];if(g===0){if(_===o&&(s||d.slice(R,R+r)===e)){h.push(d.slice(m,R)),m=R+r;continue}if(_==="/"){v=R;continue}}_==="["?g++:_==="]"&&g--}const b=h.length===0?d:d.substring(m),S=b.startsWith(MC),E=S?b.substring(1):b,T=v&&v>m?v-m:void 0;return{modifiers:h,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:T}}}function mR(n){if(n.length<=1)return n;const e=[];let s=[];return n.forEach(o=>{o[0]==="["?(e.push(...s.sort(),o),s=[]):s.push(o)}),e.push(...s.sort()),e}function gR(n){return{cache:hR(n.cacheSize),splitModifiers:pR(n),...lR(n)}}const yR=/\s+/;function xR(n,e){const{splitModifiers:s,getClassGroupId:o,getConflictingClassGroupIds:r}=e,c=new Set;return n.trim().split(yR).map(d=>{const{modifiers:h,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:v}=s(d);let b=o(v?m.substring(0,v):m),S=!!v;if(!b){if(!v)return{isTailwindClass:!1,originalClassName:d};if(b=o(m),!b)return{isTailwindClass:!1,originalClassName:d};S=!1}const E=mR(h).join(":");return{isTailwindClass:!0,modifierId:g?E+MC:E,classGroupId:b,originalClassName:d,hasPostfixModifier:S}}).reverse().filter(d=>{if(!d.isTailwindClass)return!0;const{modifierId:h,classGroupId:g,hasPostfixModifier:m}=d,v=h+g;return c.has(v)?!1:(c.add(v),r(g,m).forEach(b=>c.add(h+b)),!0)}).reverse().map(d=>d.originalClassName).join(" ")}function vR(){let n=0,e,s,o="";for(;n<arguments.length;)(e=arguments[n++])&&(s=IC(e))&&(o&&(o+=" "),o+=s);return o}function IC(n){if(typeof n=="string")return n;let e,s="";for(let o=0;o<n.length;o++)n[o]&&(e=IC(n[o]))&&(s&&(s+=" "),s+=e);return s}function bR(n,...e){let s,o,r,c=d;function d(g){const m=e.reduce((v,b)=>b(v),n());return s=gR(m),o=s.cache.get,r=s.cache.set,c=h,h(g)}function h(g){const m=o(g);if(m)return m;const v=xR(g,s);return r(g,v),v}return function(){return c(vR.apply(null,arguments))}}function Ct(n){const e=s=>s[n]||[];return e.isThemeGetter=!0,e}const kC=/^\[(?:([a-z-]+):)?(.+)\]$/i,CR=/^\d+\/\d+$/,SR=new Set(["px","full","screen"]),wR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ER=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_R=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TR=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Ys(n){return uo(n)||SR.has(n)||CR.test(n)}function Ri(n){return Ca(n,"length",LR)}function uo(n){return!!n&&!Number.isNaN(Number(n))}function cc(n){return Ca(n,"number",uo)}function xr(n){return!!n&&Number.isInteger(Number(n))}function AR(n){return n.endsWith("%")&&uo(n.slice(0,-1))}function We(n){return kC.test(n)}function Mi(n){return wR.test(n)}const RR=new Set(["length","size","percentage"]);function MR(n){return Ca(n,RR,DC)}function IR(n){return Ca(n,"position",DC)}const kR=new Set(["image","url"]);function DR(n){return Ca(n,kR,UR)}function PR(n){return Ca(n,"",jR)}function vr(){return!0}function Ca(n,e,s){const o=kC.exec(n);return o?o[1]?typeof e=="string"?o[1]===e:e.has(o[1]):s(o[2]):!1}function LR(n){return ER.test(n)&&!_R.test(n)}function DC(){return!1}function jR(n){return TR.test(n)}function UR(n){return NR.test(n)}function OR(){const n=Ct("colors"),e=Ct("spacing"),s=Ct("blur"),o=Ct("brightness"),r=Ct("borderColor"),c=Ct("borderRadius"),d=Ct("borderSpacing"),h=Ct("borderWidth"),g=Ct("contrast"),m=Ct("grayscale"),v=Ct("hueRotate"),b=Ct("invert"),S=Ct("gap"),E=Ct("gradientColorStops"),T=Ct("gradientColorStopPositions"),R=Ct("inset"),_=Ct("margin"),M=Ct("opacity"),k=Ct("padding"),I=Ct("saturate"),j=Ct("scale"),J=Ct("sepia"),Z=Ct("skew"),$=Ct("space"),ce=Ct("translate"),V=()=>["auto","contain","none"],le=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",We,e],pe=()=>[We,e],H=()=>["",Ys,Ri],ve=()=>["auto",uo,We],Ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],me=()=>["start","end","center","between","around","evenly","stretch"],Ee=()=>["","0",We],Ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[uo,cc],q=()=>[uo,We];return{cacheSize:500,separator:":",theme:{colors:[vr],spacing:[Ys,Ri],blur:["none","",Mi,We],brightness:D(),borderColor:[n],borderRadius:["none","","full",Mi,We],borderSpacing:pe(),borderWidth:H(),contrast:D(),grayscale:Ee(),hueRotate:q(),invert:Ee(),gap:pe(),gradientColorStops:[n],gradientColorStopPositions:[AR,Ri],inset:ie(),margin:ie(),opacity:D(),padding:pe(),saturate:D(),scale:D(),sepia:Ee(),skew:q(),space:pe(),translate:pe()},classGroups:{aspect:[{aspect:["auto","square","video",We]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":Ae()}],"break-before":[{"break-before":Ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ce(),We]}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xr,We]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",We]}],grow:[{grow:Ee()}],shrink:[{shrink:Ee()}],order:[{order:["first","last","none",xr,We]}],"grid-cols":[{"grid-cols":[vr]}],"col-start-end":[{col:["auto",{span:["full",xr,We]},We]}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":[vr]}],"row-start-end":[{row:["auto",{span:[xr,We]},We]}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",We]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",We]}],gap:[{gap:[S]}],"gap-x":[{"gap-x":[S]}],"gap-y":[{"gap-y":[S]}],"justify-content":[{justify:["normal",...me()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...me(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...me(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",We,e]}],"min-w":[{"min-w":[We,e,"min","max","fit"]}],"max-w":[{"max-w":[We,e,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[We,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[We,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Ri]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cc]}],"font-family":[{font:[vr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",We]}],"line-clamp":[{"line-clamp":["none",uo,cc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ys,We]}],"list-image":[{"list-image":["none",We]}],"list-style-type":[{list:["none","disc","decimal",We]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[M]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[M]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ys,Ri]}],"underline-offset":[{"underline-offset":["auto",Ys,We]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:pe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",We]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",We]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[M]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ce(),IR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DR]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[M]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[M]}],"divide-style":[{divide:U()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ys,We]}],"outline-w":[{outline:[Ys,Ri]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[M]}],"ring-offset-w":[{"ring-offset":[Ys,Ri]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Mi,PR]}],"shadow-color":[{shadow:[vr]}],opacity:[{opacity:[M]}],"mix-blend":[{"mix-blend":ne()}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[o]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",Mi,We]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[b]}],saturate:[{saturate:[I]}],sepia:[{sepia:[J]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[M]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",We]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",We]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",We]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[xr,We]}],"translate-x":[{"translate-x":[ce]}],"translate-y":[{"translate-y":[ce]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",We]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",We]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":pe()}],"scroll-mx":[{"scroll-mx":pe()}],"scroll-my":[{"scroll-my":pe()}],"scroll-ms":[{"scroll-ms":pe()}],"scroll-me":[{"scroll-me":pe()}],"scroll-mt":[{"scroll-mt":pe()}],"scroll-mr":[{"scroll-mr":pe()}],"scroll-mb":[{"scroll-mb":pe()}],"scroll-ml":[{"scroll-ml":pe()}],"scroll-p":[{"scroll-p":pe()}],"scroll-px":[{"scroll-px":pe()}],"scroll-py":[{"scroll-py":pe()}],"scroll-ps":[{"scroll-ps":pe()}],"scroll-pe":[{"scroll-pe":pe()}],"scroll-pt":[{"scroll-pt":pe()}],"scroll-pr":[{"scroll-pr":pe()}],"scroll-pb":[{"scroll-pb":pe()}],"scroll-pl":[{"scroll-pl":pe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",We]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ys,Ri,cc]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const GR=bR(OR);function zR(...n){return GR(rR(n))}const FR=aR("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-blue-900/20",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-slate-600/50",ghost:"hover:bg-accent hover:text-accent-foreground text-slate-400 hover:text-white",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),PC=N.forwardRef(({className:n,variant:e,size:s,asChild:o=!1,icon:r,children:c,...d},h)=>{const g=o?Z2:"button";return u.jsxs(g,{className:zR(FR({variant:e,size:s,className:n})),ref:h,...d,children:[r&&u.jsx("span",{className:"mr-2",children:r}),c]})});PC.displayName="Button";const Se=n=>{let e=n.variant;return e==="primary"&&(e="default"),e==="danger"&&(e="destructive"),u.jsx(PC,{...n,variant:e})},nt=({label:n,leftIcon:e,className:s,error:o,required:r,id:c,...d})=>{const h=N.useId(),g=c||h,m=`${g}-error`;return u.jsxs("div",{className:"w-full",children:[n&&u.jsxs("label",{htmlFor:g,className:"block text-xs text-slate-400 uppercase font-bold mb-1.5 tracking-wide",children:[n,r&&u.jsx("span",{className:"text-red-400 ml-1","aria-hidden":"true",children:"*"})]}),u.jsxs("div",{className:"relative",children:[e&&u.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none flex items-center","aria-hidden":"true",children:e}),u.jsx("input",{id:g,className:`w-full bg-nexus-900 border rounded p-2.5 text-sm text-slate-200 outline-none transition-colors placeholder-slate-500 focus:ring-2 focus:ring-nexus-accent/50 ${o?"border-red-500 focus:border-red-500":"border-slate-600 focus:border-nexus-accent"} ${e?"pl-10":""} ${s||""}`,required:r,"aria-invalid":o?"true":void 0,"aria-describedby":o?m:void 0,...d})]}),o&&u.jsx("p",{id:m,className:"mt-1 text-xs text-red-400",role:"alert",children:o})]})},BR=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])'].join(", "),Zt=({isOpen:n,onClose:e,title:s,children:o,footer:r,maxWidth:c="max-w-md",id:d})=>{const[h,g]=N.useState(!1),m=N.useRef(null),v=N.useRef(null),b=N.useRef(null),E=`${d||`nexus-modal-${Math.random().toString(36).substr(2,9)}`}-title`,T=N.useCallback(_=>{if(n){if(_.key==="Escape"){_.preventDefault(),e();return}if(_.key==="Tab"&&m.current){const M=m.current.querySelectorAll(BR),k=M[0],I=M[M.length-1];_.shiftKey?document.activeElement===k&&(_.preventDefault(),I==null||I.focus()):document.activeElement===I&&(_.preventDefault(),k==null||k.focus())}}},[n,e]);if(N.useEffect(()=>{g(!0)},[]),N.useEffect(()=>(n&&(b.current=document.activeElement,document.body.style.overflow="hidden",document.addEventListener("keydown",T),requestAnimationFrame(()=>{var _;(_=v.current)==null||_.focus()})),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",T),!n&&b.current&&b.current.focus()}),[n,T]),!h||!n)return null;const R=u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",role:"presentation",children:[u.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:e,"aria-hidden":"true"}),u.jsxs("div",{ref:m,role:"dialog","aria-modal":"true","aria-labelledby":E,className:`relative bg-nexus-800 border border-slate-600 w-full ${c} rounded-xl shadow-2xl flex flex-col max-h-[85vh] sm:max-h-[90vh] animate-in zoom-in-95 duration-200 mx-4`,onClick:_=>_.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-nexus-900/50 rounded-t-xl shrink-0",children:[u.jsx("h2",{id:E,className:"text-lg font-bold text-slate-100 flex items-center gap-2",children:s}),u.jsx("button",{ref:v,onClick:e,className:"text-slate-400 hover:text-white transition-colors p-1 hover:bg-white/10 rounded focus:outline-none focus:ring-2 focus:ring-nexus-accent focus:ring-offset-2 focus:ring-offset-nexus-800","aria-label":"Close modal",type:"button",children:u.jsx(ei,{size:20,"aria-hidden":"true"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:o}),r&&u.jsx("div",{className:"p-4 border-t border-slate-700 bg-nexus-900/50 rounded-b-xl flex justify-end gap-3 shrink-0",children:r})]})]});return du.createPortal(R,document.body)},xn=({label:n,children:e,className:s,error:o,required:r,id:c,...d})=>{const h=N.useId(),g=c||h,m=`${g}-error`;return u.jsxs("div",{className:"w-full",children:[n&&u.jsxs("label",{htmlFor:g,className:"block text-xs text-slate-400 uppercase font-bold mb-1.5 tracking-wide",children:[n,r&&u.jsx("span",{className:"text-red-400 ml-1","aria-hidden":"true",children:"*"})]}),u.jsx("select",{id:g,className:`w-full bg-nexus-900 border text-slate-200 rounded p-2.5 text-sm outline-none cursor-pointer transition-colors focus:ring-2 focus:ring-nexus-accent/50 ${o?"border-red-500 focus:border-red-500":"border-slate-600 focus:border-nexus-accent"} ${s||""}`,required:r,"aria-invalid":o?"true":void 0,"aria-describedby":o?m:void 0,...d,children:e}),o&&u.jsx("p",{id:m,className:"mt-1 text-xs text-red-400",role:"alert",children:o})]})},cn=({label:n,className:e,value:s,error:o,required:r,id:c,maxAutoHeight:d=400,...h})=>{const g=N.useRef(null),m=N.useId(),v=c||m,b=`${v}-error`;return N.useLayoutEffect(()=>{const S=g.current;if(S){S.style.height="auto";const E=Math.min(S.scrollHeight+2,d);S.style.height=`${E}px`,S.style.overflowY=S.scrollHeight>d?"auto":"hidden"}},[s,d]),u.jsxs("div",{className:"w-full",children:[n&&u.jsxs("label",{htmlFor:v,className:"block text-xs text-slate-400 uppercase font-bold mb-1.5 tracking-wide",children:[n,r&&u.jsx("span",{className:"text-red-400 ml-1","aria-hidden":"true",children:"*"})]}),u.jsx("textarea",{ref:g,id:v,value:s,className:`w-full bg-nexus-900 border rounded p-2.5 text-sm text-slate-200 outline-none placeholder-slate-500 transition-colors resize-none focus:ring-2 focus:ring-nexus-accent/50 ${o?"border-red-500 focus:border-red-500":"border-slate-600 focus:border-nexus-accent"} ${e||""}`,required:r,"aria-invalid":o?"true":void 0,"aria-describedby":o?b:void 0,...h}),o&&u.jsx("p",{id:b,className:"mt-1 text-xs text-red-400",role:"alert",children:o})]})},LC=({icon:n=XN,title:e,description:s,actionLabel:o,onAction:r,secondaryLabel:c,onSecondaryAction:d,className:h="",size:g="md"})=>{const v={sm:{container:"py-6 px-4",icon:32,title:"text-sm",desc:"text-xs"},md:{container:"py-12 px-6",icon:48,title:"text-lg",desc:"text-sm"},lg:{container:"py-16 px-8",icon:64,title:"text-xl",desc:"text-base"}}[g];return u.jsxs("div",{className:`flex flex-col items-center justify-center text-center ${v.container} ${h}`,role:"status","aria-label":e,children:[u.jsx("div",{className:"bg-nexus-900 p-4 rounded-full mb-4 border border-slate-700",children:u.jsx(n,{size:v.icon,className:"text-slate-600","aria-hidden":"true"})}),u.jsx("h3",{className:`font-bold text-slate-300 mb-2 ${v.title}`,children:e}),s&&u.jsx("p",{className:`text-slate-500 max-w-sm mb-6 ${v.desc}`,children:s}),(o||c)&&u.jsxs("div",{className:"flex gap-3 flex-wrap justify-center",children:[c&&d&&u.jsx(Se,{variant:"ghost",onClick:d,size:g==="sm"?"sm":"default",children:c}),o&&r&&u.jsx(Se,{onClick:r,size:g==="sm"?"sm":"default",children:o})]})]})},$R=({items:n,className:e=""})=>n.length===0?null:u.jsx("nav",{"aria-label":"Breadcrumb",className:`flex items-center gap-1 text-sm ${e}`,children:u.jsx("ol",{className:"flex items-center gap-1 flex-wrap",children:n.map((s,o)=>{const r=o===n.length-1;return u.jsxs("li",{className:"flex items-center gap-1",children:[o>0&&u.jsx(mp,{size:14,className:"text-slate-600 flex-shrink-0","aria-hidden":"true"}),r?u.jsxs("span",{className:"text-slate-300 font-medium flex items-center gap-1.5 truncate max-w-[200px]","aria-current":"page",children:[s.icon,s.label]}):s.href?u.jsxs(tC,{to:s.href,className:"text-slate-500 hover:text-nexus-accent transition-colors flex items-center gap-1.5 truncate max-w-[200px]",children:[s.icon,s.label]}):u.jsxs("span",{className:"text-slate-500 flex items-center gap-1.5 truncate max-w-[200px]",children:[s.icon,s.label]})]},o)})})}),HR=(n,e,s)=>{const o=[],r=n.split("/").filter(Boolean);if(r.length>0&&o.push({label:"Hub",href:"/",icon:u.jsx(YN,{size:14})}),r[0]==="world"&&r[1]){const c=r[1];if(o.push({label:e||"World",href:`/world/${c}/edit`}),r[2])switch(r[2]){case"edit":o.push({label:"Overview"});break;case"settings":o.push({label:"World Context"});break;case"app-settings":o.push({label:"Settings"});break;case"pool":r[3]&&o.push({label:s||r[3].charAt(0).toUpperCase()+r[3].slice(1)});break;case"tags":o.push({label:"Tag Manager"});break;case"components":o.push({label:"Components"});break;case"forge":o.push({label:"AI Forge"});break;case"lore-forge":o.push({label:"Lore Forge"});break;case"character-forge":o.push({label:"Character Forge"});break;case"rules":o.push({label:"Rules"});break;case"roller":o.push({label:"Roller Test"});break;default:o.push({label:r[2]})}}return o},Di={World:"#8b5cf6",Character:"#f43f5e",Asset:"#10b981",Default:"#64748b"},jC=["#ef4444","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#d946ef","#f43f5e","#64748b"],qR=(n,e)=>n&&n!=="#64748b"?n:Di[e||"Default"]||Di.Default,hs=({to:n,icon:e,label:s,exact:o,poolCount:r,color:c,description:d,onMoveUp:h,onMoveDown:g,isFirst:m,isLast:v})=>u.jsxs("div",{className:"group/item flex items-center gap-1 pr-1",children:[u.jsxs($T,{to:n,end:o,title:d,className:({isActive:b})=>`flex-1 flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 text-xs font-medium select-none ${b?"bg-nexus-accent/20 text-nexus-accent border-r-2 border-nexus-accent":"text-slate-400 hover:bg-nexus-800 hover:text-slate-100"}`,children:[u.jsxs("div",{className:"relative flex items-center justify-center",children:[u.jsx(e,{size:14}),c&&u.jsx("span",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full border border-nexus-900",style:{backgroundColor:c}})]}),u.jsx("span",{className:"tracking-wide flex-1 truncate",children:s}),r!==void 0&&r>0&&u.jsx("span",{className:"text-xs bg-nexus-900 text-slate-500 px-1.5 py-0.5 rounded",children:r})]}),(h||g)&&u.jsxs("div",{className:"flex flex-col gap-0.5 opacity-0 group-hover/item:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),h==null||h(b)},disabled:m,className:`p-0.5 hover:bg-nexus-700 text-slate-500 hover:text-nexus-accent rounded ${m?"invisible":""}`,title:"Move Up",children:u.jsx(mN,{size:10})}),u.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),g==null||g(b)},disabled:v,className:`p-0.5 hover:bg-nexus-700 text-slate-500 hover:text-nexus-accent rounded ${v?"invisible":""}`,title:"Move Down",children:u.jsx(pp,{size:10})})]})]}),sh=({title:n,isOpen:e,onToggle:s,onAdd:o,children:r,headerColor:c})=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{onClick:s,className:"flex justify-between items-center px-2 py-2 cursor-pointer hover:bg-nexus-800/50 rounded transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase font-bold tracking-widest",style:{color:e&&c?c:"#64748b"},children:[e?u.jsx(pp,{size:12}):u.jsx(mp,{size:12}),n]}),u.jsx("button",{onClick:d=>{d.stopPropagation(),o(d)},className:"text-slate-600 hover:text-white p-1 rounded hover:bg-nexus-700 opacity-0 group-hover:opacity-100 transition-opacity",title:"Create New Pool",children:u.jsx(Ft,{size:12})})]}),e&&u.jsx("div",{className:"pl-2 space-y-0.5 mt-1 animate-fade-in border-l border-slate-700/50 ml-3",children:r})]}),VR=()=>{var ae;const{activeWorldId:n,setActiveWorldId:e,triggerRefresh:s}=Oi(),o=va(),{toast:r}=as(),c=Vr(),d=xa(),h=Kb(),g=yo(),{world:m,loading:v}=wC(n),[b,S]=N.useState("Saved"),[E,T]=N.useState(null),[R,_]=N.useState(""),[M,k]=N.useState(""),[I,j]=N.useState("#3b82f6"),[J,Z]=N.useState(),[$,ce]=N.useState(!1),V=te=>{var Te,ze,rt,mt,tt,St,yt,$t;if(!te.trim())return((ze=(Te=c.common)==null?void 0:Te.validation)==null?void 0:ze.required)||"Pool name is required";if(te.trim().length<2)return((mt=(rt=c.common)==null?void 0:rt.validation)==null?void 0:mt.minLength)||"Name must be at least 2 characters";if(!/^[a-zA-Z0-9\s-]+$/.test(te))return((St=(tt=c.common)==null?void 0:tt.validation)==null?void 0:St.invalidChars)||"Only letters, numbers, spaces and hyphens allowed";if(m!=null&&m.pools[te.trim().toLowerCase().replace(/\s+/g,"-")])return(($t=(yt=c.common)==null?void 0:yt.validation)==null?void 0:$t.alreadyExists)||"Pool with this name already exists"},le=te=>{const Te=te.target.value;_(Te),$&&Z(V(Te))},ie=()=>{ce(!0),Z(V(R))};N.useEffect(()=>{E||(_(""),k(""),j("#3b82f6"),Z(void 0),ce(!1))},[E]);const[pe,H]=N.useState({world:!0,character:!0,asset:!0}),[ve,Ce]=N.useState(!1);N.useEffect(()=>{Ce(!1)},[g.pathname]),N.useEffect(()=>{const te=Te=>{Te.key==="Escape"&&Ce(!1)};return ve&&(document.addEventListener("keydown",te),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",te),document.body.style.overflow="unset"}},[ve]);const U=N.useCallback(()=>{Ce(te=>!te)},[]),[ne,me]=N.useState([]),[Ee,Ae]=N.useState([]),[D,q]=N.useState([]);N.useEffect(()=>{h.worldId&&n!==h.worldId&&e(h.worldId)},[h.worldId,n,e]),N.useEffect(()=>{if(m){const te=Object.values(m.pools),Te=(tt,St)=>{if(tt.length!==St.length)return!0;const yt=new Set(tt.map($t=>$t.name));return St.some($t=>!yt.has($t.name))},ze=te.filter(tt=>tt.type==="World").sort((tt,St)=>tt.name.localeCompare(St.name)),rt=te.filter(tt=>tt.type==="Character").sort((tt,St)=>tt.name.localeCompare(St.name)),mt=te.filter(tt=>tt.type==="Asset").sort((tt,St)=>tt.name.localeCompare(St.name));(ne.length===0||Te(ne,ze))&&me(ze),(Ee.length===0||Te(Ee,rt))&&Ae(rt),(D.length===0||Te(D,mt))&&q(mt)}},[m]);const oe=g.pathname==="/",fe=h.poolName?((ae=m==null?void 0:m.pools[h.poolName])==null?void 0:ae.name)||h.poolName:void 0,F=HR(g.pathname,m==null?void 0:m.name,fe),ge=async()=>{m&&(S("Saving..."),await o.saveWorld(m),setTimeout(()=>S("Saved"),500))},_e=async()=>{if(m)try{const te=await o.exportWorldToJson(m.id);if(!te)throw new Error("Export failed");const Te=new Blob([te],{type:"application/json"}),ze=URL.createObjectURL(Te),rt=document.createElement("a");rt.href=ze,rt.download=`Nexus_${m.name.replace(/\s+/g,"_")}_${Date.now()}.json`,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),URL.revokeObjectURL(ze),r({title:"Export Complete",message:"Rulebook package downloaded.",type:"success"})}catch{r({title:"Export Failed",message:"Could not generate package.",type:"error"})}},X=async()=>{if(!m||!E)return;const te=V(R);if(Z(te),ce(!0),te)return;const Te=R.trim().toLowerCase().replace(/\s+/g,"-");await o.createPool(m.id,Te,E,M,I),s(),T(null),E==="World"&&H(ze=>({...ze,world:!0})),E==="Character"&&H(ze=>({...ze,character:!0})),E==="Asset"&&H(ze=>({...ze,asset:!0})),setTimeout(()=>{d(`/world/${m.id}/pool/${Te}`)},50)},O=te=>{H(Te=>({...Te,[te]:!Te[te]}))},W=(te,Te,ze,rt)=>{if(Te==="up"&&te===0||Te==="down"&&te===ze.length-1)return;const mt=[...ze],tt=Te==="up"?te-1:te+1;[mt[te],mt[tt]]=[mt[tt],mt[te]],rt(mt)};return u.jsxs("div",{className:"flex h-screen bg-nexus-900 text-slate-200 font-sans",children:[!oe&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 h-14 bg-nexus-800 border-b border-slate-700 flex items-center justify-between px-4 z-40 lg:hidden",children:[u.jsx("button",{onClick:U,className:"p-2 text-slate-400 hover:text-white hover:bg-nexus-700 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-nexus-accent","aria-label":ve?"Close menu":"Open menu","aria-expanded":ve,children:ve?u.jsx(ei,{size:24}):u.jsx(dA,{size:24})}),u.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-nexus-accent to-purple-500 bg-clip-text text-transparent cursor-pointer",onClick:()=>d("/"),children:"NEXUS"}),u.jsx("div",{className:"w-10"})," "]}),!oe&&ve&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>Ce(!1),"aria-hidden":"true"}),!oe&&u.jsxs("aside",{className:`
                fixed lg:static inset-y-0 left-0 z-50
                w-72 lg:w-64 bg-nexus-800 border-r border-slate-700 
                flex flex-col shadow-2xl
                transform transition-transform duration-300 ease-in-out
                ${ve?"translate-x-0":"-translate-x-full lg:translate-x-0"}
                pt-14 lg:pt-0
            `,"aria-label":"Main navigation",children:[u.jsxs("div",{className:"p-6 border-b border-slate-700 hidden lg:block",children:[u.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-nexus-accent to-purple-500 bg-clip-text text-transparent cursor-pointer",onClick:()=>d("/"),children:"NEXUS"}),u.jsxs("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-widest flex items-center gap-1",children:[u.jsx(ss,{size:12,className:"text-nexus-accent"})," ",c.headers.worldEditor]})]}),u.jsxs("div",{className:"p-4 overflow-y-auto flex-1 custom-scrollbar",children:[u.jsxs("div",{className:"mb-6",children:[u.jsxs("button",{onClick:()=>d("/"),className:"flex items-center gap-2 text-xs text-slate-400 hover:text-white mb-4 transition-colors",children:[u.jsx(eN,{size:14})," ",c.sidebar.backToHub]}),v&&u.jsxs("div",{className:"border p-3 rounded-lg bg-nexus-900 border-slate-700 animate-pulse",children:[u.jsx("div",{className:"h-3 w-20 bg-slate-700 rounded mb-2"}),u.jsx("div",{className:"h-4 w-32 bg-slate-700 rounded"})]}),!v&&m&&u.jsxs("div",{className:"border p-3 rounded-lg bg-nexus-900 border-slate-700",children:[u.jsx("div",{className:"text-xs uppercase font-bold mb-1 text-slate-500",children:c.sidebar.activeWorld}),u.jsx("div",{className:"font-bold text-white truncate",children:m.name})]})]}),u.jsx("nav",{className:"space-y-1",children:h.worldId&&m&&u.jsxs(u.Fragment,{children:[u.jsx(hs,{to:`/world/${h.worldId}/edit`,icon:sA,label:c.sidebar.overview,exact:!0}),u.jsx(hs,{to:`/world/${h.worldId}/app-settings`,icon:Qs,label:c.sidebar.settings}),u.jsx(hs,{to:`/world/${h.worldId}/settings`,icon:qr,label:c.sidebar.worldContext}),u.jsx("div",{className:"h-px bg-slate-700 my-4"}),u.jsxs(sh,{title:c.sidebar.worldLore,isOpen:pe.world,onToggle:()=>O("world"),onAdd:()=>T("World"),headerColor:Di.World,children:[ne.map((te,Te)=>u.jsx(hs,{to:`/world/${h.worldId}/pool/${te.name}`,icon:ss,label:te.name.charAt(0).toUpperCase()+te.name.slice(1),poolCount:te.entities.length,color:te.color&&te.color!=="#64748b"?te.color:Di.World,description:te.description,onMoveUp:()=>W(Te,"up",ne,me),onMoveDown:()=>W(Te,"down",ne,me),isFirst:Te===0,isLast:Te===ne.length-1},te.name)),ne.length===0&&u.jsx("div",{className:"text-xs text-slate-600 pl-4 italic",children:c.placeholders.noWorldPools})]}),u.jsxs(sh,{title:c.sidebar.characterLore,isOpen:pe.character,onToggle:()=>O("character"),onAdd:()=>T("Character"),headerColor:Di.Character,children:[Ee.map((te,Te)=>u.jsx(hs,{to:`/world/${h.worldId}/pool/${te.name}`,icon:_N,label:te.name.charAt(0).toUpperCase()+te.name.slice(1),poolCount:te.entities.length,color:te.color&&te.color!=="#64748b"?te.color:Di.Character,description:te.description,onMoveUp:()=>W(Te,"up",Ee,Ae),onMoveDown:()=>W(Te,"down",Ee,Ae),isFirst:Te===0,isLast:Te===Ee.length-1},te.name)),Ee.length===0&&u.jsx("div",{className:"text-xs text-slate-600 pl-4 italic",children:c.placeholders.noCharPools})]}),u.jsxs(sh,{title:c.sidebar.assetsData,isOpen:pe.asset,onToggle:()=>O("asset"),onAdd:()=>T("Asset"),headerColor:Di.Asset,children:[D.map((te,Te)=>u.jsx(hs,{to:`/world/${h.worldId}/pool/${te.name}`,icon:Fr,label:te.name.charAt(0).toUpperCase()+te.name.slice(1),poolCount:te.entities.length,color:te.color&&te.color!=="#64748b"?te.color:Di.Asset,description:te.description,onMoveUp:()=>W(Te,"up",D,q),onMoveDown:()=>W(Te,"down",D,q),isFirst:Te===0,isLast:Te===D.length-1},te.name)),D.length===0&&u.jsx("div",{className:"text-xs text-slate-600 pl-4 italic",children:c.placeholders.noAssetPools})]}),u.jsx("div",{className:"h-px bg-slate-700 my-4"}),u.jsx("div",{className:"px-2 text-xs uppercase font-bold text-slate-500 mt-4 mb-1",children:c.sidebar.tools}),u.jsx(hs,{to:`/world/${h.worldId}/components`,icon:Fc,label:c.sidebar.components}),u.jsx(hs,{to:`/world/${h.worldId}/tags`,icon:fC,label:c.sidebar.tagManager}),u.jsx(hs,{to:`/world/${h.worldId}/forge`,icon:dC,label:c.sidebar.aiForge}),u.jsx(hs,{to:`/world/${h.worldId}/rules`,icon:xC,label:c.sidebar.rules}),u.jsx(hs,{to:`/world/${h.worldId}/roller`,icon:RN,label:c.sidebar.rollerTest})]})})]}),u.jsxs("div",{className:"p-4 border-t border-slate-700 bg-nexus-850 space-y-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:_e,className:"flex-1 bg-nexus-accent hover:bg-blue-600 text-white py-2 rounded flex items-center justify-center gap-2 transition-all shadow-lg text-xs font-bold",title:"Export Rulebook JSON",children:[u.jsx(Bc,{size:14})," ",c.sidebar.export]}),u.jsx("button",{onClick:ge,className:"px-3 bg-nexus-900 border border-slate-600 text-slate-400 hover:text-white hover:border-nexus-accent rounded flex items-center justify-center transition-all",title:"Manual Save",children:u.jsx($n,{size:14,className:b==="Saving..."?"animate-pulse text-nexus-accent":""})})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 justify-center pt-1",children:[u.jsx(gp,{size:12}),u.jsx("span",{children:"v5.2.2-Stable"})]})]})]}),u.jsxs("main",{className:`flex-1 overflow-y-auto bg-nexus-900 relative ${oe?"":"pt-14 lg:pt-0"}`,children:[u.jsx("div",{className:"absolute inset-0 bg-[url('[https://grainy-gradients.vercel.app/noise.svg](https://grainy-gradients.vercel.app/noise.svg)')] opacity-5 pointer-events-none"}),u.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 relative z-0",children:[!oe&&F.length>0&&u.jsx("div",{className:"mb-4 pb-3 border-b border-slate-800",children:u.jsx($R,{items:F})}),u.jsx(MT,{})]})]}),u.jsx(Zt,{isOpen:!!E,onClose:()=>T(null),title:u.jsxs(u.Fragment,{children:[u.jsx(Ft,{size:18,className:"text-nexus-accent"})," ",c.headers.createPool," (",E,")"]}),footer:u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"ghost",onClick:()=>T(null),children:c.actions.cancel}),u.jsx(Se,{disabled:!R.trim(),onClick:X,children:c.actions.create})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(nt,{label:"Pool Name",autoFocus:!0,value:R,onChange:le,onBlur:ie,placeholder:"e.g. Guilds, Vehicles, Spells",required:!0,error:J}),u.jsx(nt,{label:"Description",value:M,onChange:te=>k(te.target.value),placeholder:"Brief explanation of this category..."}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:"Theme Color"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex flex-wrap gap-2",children:jC.slice(0,6).map(te=>u.jsx("button",{type:"button",onClick:()=>j(te),className:`w-6 h-6 rounded-full border-2 transition-all ${I===te?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:te}},te))}),u.jsxs("div",{className:"flex items-center gap-1 bg-nexus-900 border border-slate-600 rounded px-1.5 py-0.5 ml-2 relative overflow-hidden",children:[u.jsx(mC,{size:14,className:"text-slate-400 absolute left-1.5 pointer-events-none"}),u.jsx("input",{type:"color",value:I,onChange:te=>j(te.target.value),className:"w-8 h-6 bg-transparent border-none cursor-pointer opacity-0 z-10",title:"Custom Color"}),u.jsx("div",{className:"w-4 h-4 rounded-full absolute right-1.5 pointer-events-none border border-slate-500",style:{backgroundColor:I}})]})]})]})]})})]})},uc=(n,e)=>e?`${n}

NARRATIVE TONE/STYLE GUIDELINES:
${e}`:n,dc=`CRITICAL FORMATTING INSTRUCTION:
- You MUST return ONLY a single JSON object matching the expected schema.
- Do NOT include any explanation, markdown, code blocks (like \`\`\`json), or prose outside the JSON.
- The output must be valid, parseable JSON.
`,br={ideation:(n,e,s)=>({system:uc(`You are a creative writing assistant. Your task is to brainstorm titles and genres based on user input. Language: ${n}.`,s),user:`
        Story Context: "${e.substring(0,3e3)}"
        
        Generate 5 creative Titles.
        Generate 5 RICH, DETAILED Genre descriptions.

        STYLE CONSTRAINTS:
        - Use vivid, sophisticated language with varied sentence lengths.
        - Avoid generic phrases and clichs ("gritty underbelly", "dark secrets", "technology has advanced").
        - Each genre description should feel like a miniature mood piece, not a tag.
        
        CRITICAL CONSTRAINTS: 
        1. The "genres" must NOT be single words like "Sci-Fi". 
        2. They MUST be evocative paragraphs (2-3 sentences) describing the flavor, atmosphere, and tech level.
        3. DO NOT start descriptions with "This genre is", "A setting involving", or meta-commentary. Write directly about the world (e.g., "Neon-soaked streets reflect the chrome sky...").
        4. OUTPUT LANGUAGE: ${n}. All titles and descriptions MUST be in ${n}.
      `}),analysis:(n,e,s)=>({system:uc(`You are a Senior Data Architect. Analyze the story and determine the best DATABASE STRUCTURE. Language: ${n}.`,s),user:`
        1. Summarize the core themes (genreSummary).
        2. Suggest specific Data Pools (Categories) to organize this world (e.g. "Factions", "Artifacts").
        
        CRITICAL INSTRUCTION:
        - Use ATOMIC CATEGORIES. Split concepts (e.g. "Weapons", "Armor", not "Gear").
        - ENSURE BALANCE: Unless the story is extremely specific, you MUST suggest at least one pool for EACH category: 'World' (Lore/Locations), 'Character' (People/Creatures), and 'Asset' (Items/Tech). Do not ignore the World or Character categories.
        - OUTPUT LANGUAGE: ${n}. The 'summary' and 'categoryName' must be in ${n}.
        
        3. For backward compatibility, also sort these into world/character/asset arrays.

        Story: "${e.substring(0,3e3)}"

        ${dc}
      `}),blueprint:(n,e,s,o,r,c)=>({system:uc("You are a World Building Architect. Create a final Blueprint JSON.",c),user:`
        Title: ${n}
        Genre: ${e}
        Language: ${s}

        ORIGINAL USER STORY:
        "${r.substring(0,3e3)}"

        TASK:
        1. Synthesize the user's original story into a comprehensive "World Introduction" (description). 
           - Write 36 substantial paragraphs.
           - Use layered, sophisticated prose: mix history, present tensions, everyday details, and hints of future conflict.
           - Avoid plot summary; focus on mood, social structures, and what it *feels* like to live there.
        2. Map the selected categories to the internal types: "World", "Character", or "Asset".
        
        CRITICAL LOCALIZATION INSTRUCTION:
        The 'description' field MUST be written in ${s}.
        IF LANGUAGE IS CHINESE (Simplified Chinese), you MUST use Chinese characters for the description. Do NOT use English.
        
        Selected Categories to Map: ${JSON.stringify(o)}

        ${dc}
      `}),componentDesign:(n,e)=>({system:"You are a Database Engineer.",user:`
        Design a unique Data Component for '${n}' entities. (e.g. if 'Vehicles', create 'vehicle_stats' with speed/armor). 
        Return a ComponentDefinition.

        CRITICAL REQUIREMENT 1 (FIELDS):
        - Include at least one 'description' field or equivalent (e.g., 'biography', 'history', 'visual_appearance') within this component to hold the main narrative text for this entity type.
        - Add 3-5 other relevant fields (stats, traits, etc.).
        - DO NOT create a 'rarity' field. That is a system field.

        CRITICAL REQUIREMENT 2 (RELATIONSHIPS):
        - Suggest 3-5 distinct "Relationship Verbs" relevant to this pool. 
        - For 'Factions', use verbs like "Allied With", "War With", "Trading With".
        - For 'Items', use "Owned By", "Forged By", "Stolen From".
        - Do NOT use generic "Related To". Be specific.

        LANGUAGE INSTRUCTION:
        The 'language' is: ${e}.
        
        IF LANGUAGE IS CHINESE:
        - The 'label' and 'description' MUST be in Simplified Chinese.
        - The field 'key' MUST remain in English snake_case (e.g., 'attack_power') to ensure code compatibility. Do NOT use Chinese for keys.
        - The 'suggestedRelationshipVerbs' MUST be in Chinese.

        IF LANGUAGE IS ENGLISH:
        - Use Title Case for labels (e.g. "Attack Power").
        - Use snake_case for IDs.

        ${dc}
        `}),seedContent:(n,e,s,o,r,c,d,h)=>{const g=r==="Deep Lore"?["Generate DEEP LORE.","For each entity, write 24 rich paragraphs in the main description-like field.","Weave in history, secrets, sensory details, social context, and hidden motives.","All entities should feel like they could exist in the same broader world or setting.","Vary the connections: sometimes they are independent, sometimes deeply linked."].join(" "):["Generate robust, game-ready descriptions.","For each entity, write at least one full, sophisticated paragraph in the main description-like field.","Avoid one-line or generic text; include concrete details, flavor, and at least one story hook."].join(" "),m=d.length>0?[`USE THESE RELATIONSHIP VERBS WHEN IT MAKES SENSE: ${d.join(", ")}.`,"It is OPTIONAL to give an entity relationships.","Only add relationships that feel natural and interesting; some entities can have none."].join(" "):["You MAY define relationships between entities or to concepts in the story, but this is OPTIONAL.","Only add relationships that feel natural and interesting; some entities can have none."].join(" ");return{system:uc(`You are a creative writer. Generate 3 initial entities for the '${n}' pool (Type: ${e}). Language: ${s}.`,h),user:`
            Story Context: "${o.substring(0,3e3)}".
            
            POOL CONTEXT (${e}):
            ${e==="World"?"- Focus on Lore, Geography, and History.":""}
            ${e==="Character"?"- Focus on Personality, Motives, and Background.":""}
            ${e==="Asset"?"- Focus on Utility, Value, and Mechanics.":""}

            DATA FIELD DEFINITIONS:
            ${c}
            
            COMPLEXITY GUIDELINES:
            ${g}

            RELATIONSHIP LOGIC:
            ${m}

            CRITICAL DATA INSTRUCTION:
            - For any field defined with specific 'options' (select/enum), you MUST choose ONE exact string from that provided list. Do not leave it empty.
            - Fill all fields based on the definitions above.
            
            LANGUAGE ENFORCEMENT:
            - All Name, Description, and String values MUST be in ${s}.

            ${dc}
            `}}},JR=n=>{switch(n.type){case"text":return{type:"string",description:n.key};case"number":return{type:"number",description:n.key};case"boolean":return{type:"boolean",description:n.key};case"select":return n.options&&n.options.length>0?{type:"string",enum:n.options,description:`Select one: ${n.options.join(", ")}`}:{type:"string"};case"list":return{type:"array",items:{type:"string"},description:`List of ${n.key}`};default:return{type:"string"}}},UC=(n,e)=>{const s={},o=[];if(Object.keys(n.defaultComponents).forEach(d=>{const h=e[d];if(!h)return;const g={},m=[];h.fields.forEach(v=>{g[v.key]=JR(v),m.push(v.key)}),Object.keys(g).length>0&&(s[d]={type:"object",properties:g,required:m,description:h.description?`${h.label}: ${h.description}`:h.label},o.push(d))}),n.relationshipTypes&&n.relationshipTypes.length>0){const d={};n.relationshipTypes.forEach(h=>{d[h]={type:"array",items:{type:"string"},description:`List of names/IDs of entities that match relation: '${h}'`}}),s.relations={type:"object",properties:d,description:"Entity relationships to other concepts",nullable:!0}}return Object.keys(s).length===0&&(s._placeholder={type:"string",description:"Ignore",nullable:!0}),{type:"array",items:{type:"object",properties:{name:{type:"string",description:"Name of the entity"},tags:{type:"array",items:{type:"string"},description:"Semantic tags (ids)"},components:{type:"object",properties:s,required:o}},required:["name","tags","components"]},description:`Array of ${n.name} entities`}},WR={World:"#8b5cf6",Character:"#f43f5e",Asset:"#10b981"},Cr=(n,e)=>e?`[GLOBAL PRE-INSTRUCTION]: ${e}

${n}`:n,YR={type:"object",properties:{titles:{type:"array",items:{type:"string"}},genres:{type:"array",items:{type:"string"}}},required:["titles","genres"]},KR={type:"object",properties:{genreSummary:{type:"object",properties:{summary:{type:"string"},detectedGenres:{type:"array",items:{type:"string"}}},required:["summary","detectedGenres"]},dynamicSchema:{type:"array",items:{type:"object",properties:{categoryName:{type:"string"},description:{type:"string"}},required:["categoryName","description"]}},worldPools:{type:"array",items:{type:"string"}},characterPools:{type:"array",items:{type:"string"}},assetPools:{type:"array",items:{type:"string"}},suggestedTags:{type:"array",items:{type:"string"}},suggestedRelationshipTypes:{type:"array",items:{type:"string"}}},required:["genreSummary","dynamicSchema","worldPools","characterPools","assetPools","suggestedTags","suggestedRelationshipTypes"]},XR={type:"object",properties:{worldName:{type:"string"},genre:{type:"string"},description:{type:"string",description:"A comprehensive World Introduction synthesized from the user's story."},pools:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string",enum:["World","Character","Asset"]},description:{type:"string"}},required:["name","type","description"]}}},required:["worldName","genre","description","pools"]},QR={type:"object",properties:{id:{type:"string"},label:{type:"string"},description:{type:"string"},suggestedRelationshipVerbs:{type:"array",items:{type:"string"},description:"List of 3-5 specific relationship verbs (e.g. 'Wields', 'Allied With')"},fields:{type:"array",items:{type:"object",properties:{key:{type:"string"},type:{type:"string",enum:["text","number","boolean","select","list"]},defaultValue:{type:"string"},options:{type:"array",items:{type:"string"},nullable:!0}},required:["key","type","defaultValue"]}}},required:["id","label","fields","suggestedRelationshipVerbs"]};function ZR(n){return{async generateTitleGenreOptions(e,s,o,r){const{system:c,user:d}=br.ideation(e,s,r),h=Cr(c,o);try{const g=await n.generateStructuredData(h,d,YR,.7);return{data:g.data,tokens:g.tokens}}catch{return{data:{titles:[],genres:[]},tokens:0}}},async analyzeStory(e,s="English",o,r){const{system:c,user:d}=br.analysis(s,e,r),h=Cr(c,o);try{const g=await n.generateStructuredData(h,d,KR,.1);return{data:g.data,tokens:g.tokens}}catch{throw new Error("Failed to analyze story structure.")}},async createBlueprint(e,s,o,r,c,d,h,g){const m=s.dynamicSchema.filter(E=>o.includes(E.categoryName)),{system:v,user:b}=br.blueprint(r,c,d,m,e,g),S=Cr(v,h);try{const E=await n.generateStructuredData(S,b,XR,.2);return{data:E.data,tokens:E.tokens}}catch{throw new Error("Failed to create blueprint")}},async buildPoolInfrastructure(e,s,o,r,c){const d=WR[s.type]||"#64748b";await Rn.createPool(e,s.name,s.type,s.description,d);try{const{system:h,user:g}=br.componentDesign(s.name,o,c),m=Cr(h,r),v=await n.generateStructuredData(m,g,QR,.2),b=v.data,S=b.id.toLowerCase().replace(/\s+/g,"_"),E={...b,id:S,category:s.name};if(await Rn.registerComponentDefinition(e,E,s.name),b.suggestedRelationshipVerbs&&b.suggestedRelationshipVerbs.length>0){const T=await Rn.loadWorld(e,!0);T&&T.pools[s.name]&&(T.pools[s.name].relationshipTypes=b.suggestedRelationshipVerbs,await Rn.saveWorld(T))}return{componentId:S,componentDef:E,relationshipTypes:b.suggestedRelationshipVerbs||[],tokens:v.tokens}}catch(h){return console.warn(`Failed to generate infrastructure for ${s.name}`,h),null}},async generatePoolSeeds(e,s,o,r,c,d,h,g){let m="";s!=null&&s.def&&(m=s.def.fields.map(_=>{const M=_.options?`[Options: ${_.options.join(", ")}]`:"";return`${_.key} (${_.type}): ${M}`}).join(`
`));const{system:v,user:b}=br.seedContent(e.name,e.type,o,r,c,m,d,g),S=Cr(v,h),E={name:e.name,type:e.type,defaultComponents:s?{[s.id]:{}}:{},relationshipTypes:d},T=s?{[s.id]:s.def}:{},R=UC(E,T);try{const _=await n.generateStructuredData(S,b,R,.7);return{seeds:_.data,tokens:_.tokens}}catch(_){return console.warn(`Failed to generate seeds for ${e.name}`,_),{seeds:[],tokens:0}}},async persistSeeds(e,s,o,r){var g;const c=await Rn.loadWorld(e,!1);if(!c)throw new Error("World lost during generation");const d=c.pools[s],h=new Set;for(const m of o){m.tags&&Array.isArray(m.tags)&&m.tags.forEach(T=>{if(T.includes("|")){const[R,_]=T.split("|");Rn.ensureTag(c,R);const M=Rn.ensureTag(c,R);c.tags[M]&&(c.tags[M].description=_)}else Rn.ensureTag(c,T)});const v={};let b=((g=m.components)==null?void 0:g.relations)||m.relations;b&&typeof b=="object"&&!Array.isArray(b)?Object.entries(b).forEach(([T,R])=>{if(Array.isArray(R)){const _=R.filter(M=>M&&typeof M=="string");_.length>0&&(v[T]=_,h.add(T))}}):Array.isArray(b)&&b.forEach(T=>{T.type&&T.targetName&&(v[T.type]||(v[T.type]=[]),v[T.type].push(T.targetName),h.add(T.type))});const S={metadata:{id:crypto.randomUUID(),created:Date.now(),rarity:"Common"},relations:v};d.defaultComponents.rarity&&(S.rarity={value:"Common"}),r&&m.components&&m.components[r]&&(S[r]=m.components[r]);const E=(m.tags||[]).map(T=>T.split("|")[0]);await Rn.saveEntityToPool(e,s,{id:crypto.randomUUID(),name:m.name,tags:E,components:S})}if(h.size>0){const m=new Set(d.relationshipTypes||[]);h.forEach(v=>m.add(v)),d.relationshipTypes=Array.from(m)}r&&d.defaultComponents.description&&delete d.defaultComponents.description,await Rn.saveWorld(c)},async executeBuild(e,s,o,r,c="Standard",d,h,g){let m=0;r({stage:"Initialization",message:`Creating world: ${e.worldName}...`,progress:5});const v=await Rn.createWorld(e.worldName,e.genre);e.description&&await Rn.updateWorldConfig(v.id,e.worldName,{...v.config,loreContext:e.description});const b=e.pools.length;let S=0;for(const E of e.pools){const T=10+Math.floor(S/b*80);r({stage:"Infrastructure",message:`Architecting schema for: ${E.name}...`,progress:T});const R=await this.buildPoolInfrastructure(v.id,E,o,d,g);R&&(m+=R.tokens,h&&h(m));const _=(R==null?void 0:R.componentId)||null,M=(R==null?void 0:R.componentDef)||null,k=(R==null?void 0:R.relationshipTypes)||[];r({stage:"Content Generation",message:`Forging ${c} entities for ${E.name}...`,progress:T+5});const{seeds:I,tokens:j}=await this.generatePoolSeeds(E,_&&M?{id:_,def:M}:null,o,s,c,k,d,g);m+=j,h&&h(m),I.length>0&&await this.persistSeeds(v.id,E.name,I,_),S++}return r({stage:"Complete",message:`World Ready. Total Cost: ${m} tokens.`,progress:100}),v.id}}}const fc={gemini:[{id:"gemini-3-pro",name:"Gemini 3 Pro",description:"Latest flagship model, most capable for complex tasks",tier:"premium",contextWindow:1e6,badges:["latest","multi"]},{id:"gemini-3-pro-image",name:"Gemini 3 Pro Image",description:"Latest model with enhanced image understanding",tier:"premium",contextWindow:1e6,badges:["latest","multi"]},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Advanced reasoning, best for complex generation",tier:"premium",contextWindow:1e6,badges:["multi"]},{id:"gemini-2.5-pro-tts",name:"Gemini 2.5 Pro TTS",description:"Pro model with text-to-speech capabilities",tier:"premium",contextWindow:1e6,badges:["multi","tts"]},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & cost-effective, great for most tasks",tier:"standard",contextWindow:1e6,badges:["multi"]},{id:"gemini-2.5-flash-preview-image",name:"Gemini 2.5 Flash Image",description:"Fast model with image generation preview",tier:"standard",contextWindow:65536,badges:["multi"]},{id:"gemini-2.5-flash-tts",name:"Gemini 2.5 Flash TTS",description:"Fast model with text-to-speech",tier:"standard",contextWindow:1e6,badges:["multi","tts"]},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",description:"Fastest & most cost-efficient, high throughput",tier:"budget",contextWindow:1e6,badges:["fast"]},{id:"gemini-2.5-flash-native-audio-dialog",name:"Gemini 2.5 Flash Live",description:"Real-time conversational with streaming audio",tier:"standard",contextWindow:1e6,badges:["multi","realtime"]},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Previous gen flash model",tier:"budget",contextWindow:1e6,badges:[]},{id:"gemini-2.0-flash-exp",name:"Gemini 2.0 Flash Exp",description:"Experimental version of 2.0 Flash",tier:"budget",contextWindow:1e6,badges:[]},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash Lite",description:"Previous gen lite model",tier:"budget",contextWindow:1e6,badges:[]},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",description:"Legacy fast model",tier:"budget",contextWindow:1e6,badges:["legacy"]},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",description:"Legacy pro model with 2M context window",tier:"standard",contextWindow:2e6,badges:["legacy","long"]}],openai:[{id:"gpt-5.2",name:"GPT-5.2",description:"Latest flagship model with improved capabilities",tier:"premium",contextWindow:128e3,badges:["latest"]},{id:"gpt-5.2-chat",name:"GPT-5.2 Chat",description:"Latest chat-optimized model",tier:"premium",contextWindow:128e3,badges:["latest"]},{id:"gpt-5.2-pro",name:"GPT-5.2 Pro",description:"Latest professional model",tier:"premium",contextWindow:128e3,badges:["latest"]},{id:"gpt-5",name:"GPT-5",description:"Multimodal flagship model combining reasoning capabilities",tier:"premium",contextWindow:128e3,badges:["multi"]},{id:"gpt-5-chat",name:"GPT-5 Chat",description:"Chat-optimized GPT-5 model",tier:"premium",contextWindow:128e3,badges:["multi"]},{id:"gpt-5-pro",name:"GPT-5 Pro",description:"Professional GPT-5 variant",tier:"premium",contextWindow:128e3,badges:["multi"]},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"Faster, cost-efficient GPT-5 variant",tier:"budget",contextWindow:128e3,badges:["fast"]},{id:"gpt-5-nano",name:"GPT-5 Nano",description:"Fastest and most cost-efficient GPT-5",tier:"budget",contextWindow:128e3,badges:["fast"]},{id:"gpt-5-codex",name:"GPT-5 Codex",description:"GPT-5 optimized for coding tasks",tier:"premium",contextWindow:128e3,badges:["code"]},{id:"gpt-5.1",name:"GPT-5.1",description:"Flagship model optimized for coding and agentic tasks",tier:"premium",contextWindow:4e5,badges:["code"]},{id:"gpt-5.1-chat",name:"GPT-5.1 Chat",description:"Chat-optimized GPT-5.1",tier:"premium",contextWindow:4e5,badges:["code"]},{id:"gpt-5.1-codex",name:"GPT-5.1 Codex",description:"Optimized for agentic coding tasks",tier:"premium",contextWindow:4e5,badges:["code"]},{id:"gpt-5.1-codex-mini",name:"GPT-5.1 Codex Mini",description:"Smaller Codex variant for faster coding",tier:"standard",contextWindow:4e5,badges:["code"]},{id:"gpt-5.1-codex-max",name:"GPT-5.1 Codex Max",description:"For long-duration coding tasks and refactors",tier:"premium",contextWindow:4e5,badges:["code","long"]},{id:"gpt-4.1",name:"GPT-4.1",description:"Enhanced GPT-4 with improved coding and long-context",tier:"premium",contextWindow:128e3,badges:[]},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini",description:"Smaller, faster GPT-4.1 variant",tier:"standard",contextWindow:128e3,badges:[]},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano",description:"Most cost-efficient GPT-4.1 variant",tier:"budget",contextWindow:128e3,badges:[]},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Enhanced GPT-4, more cost-effective",tier:"standard",contextWindow:128e3,badges:[]},{id:"gpt-4-turbo-preview",name:"GPT-4 Turbo Preview",description:"Preview version of GPT-4 Turbo",tier:"standard",contextWindow:128e3,badges:[]},{id:"gpt-4",name:"GPT-4",description:"Standard GPT-4 model",tier:"premium",contextWindow:8192,badges:[]},{id:"gpt-4o",name:"GPT-4o",description:"Multimodal model, accepts text and image inputs",tier:"premium",contextWindow:128e3,badges:["multi"]},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable multimodal model",tier:"budget",contextWindow:128e3,badges:["multi"]},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",description:"Legacy model, very affordable",tier:"budget",contextWindow:16385,badges:["legacy"]},{id:"gpt-3.5-turbo-16k",name:"GPT-3.5 Turbo 16K",description:"Legacy model with extended context",tier:"budget",contextWindow:16385,badges:["legacy"]},{id:"gpt-3.5-turbo-instruct",name:"GPT-3.5 Turbo Instruct",description:"Legacy instruction-optimized model",tier:"budget",contextWindow:4096,badges:["legacy"]}],deepseek:[{id:"deepseek-chat",name:"DeepSeek Chat",description:"DeepSeek-V3.2 non-thinking mode, supports JSON output and tool calls",tier:"budget",contextWindow:128e3,badges:["latest"]},{id:"deepseek-reasoner",name:"DeepSeek Reasoner",description:"DeepSeek-V3.2 thinking mode with advanced reasoning",tier:"standard",contextWindow:128e3,badges:["latest"]}],claude:[{id:"claude-sonnet-4-5",name:"Claude Sonnet 4.5",description:"Smart model for complex agents and coding",tier:"standard",contextWindow:2e5,badges:["latest"]},{id:"claude-haiku-4-5",name:"Claude Haiku 4.5",description:"Fastest model with near-frontier intelligence",tier:"budget",contextWindow:2e5,badges:["latest","fast"]},{id:"claude-opus-4-5",name:"Claude Opus 4.5",description:"Premium model combining maximum intelligence with practical performance",tier:"premium",contextWindow:2e5,badges:["latest"]},{id:"claude-opus-4-1",name:"Claude Opus 4.1",description:"Previous generation flagship model",tier:"premium",contextWindow:2e5,badges:[]},{id:"claude-sonnet-4",name:"Claude Sonnet 4",description:"Balanced model for general tasks",tier:"standard",contextWindow:2e5,badges:[]},{id:"claude-3-7-sonnet",name:"Claude 3.7 Sonnet",description:"Previous Sonnet model",tier:"standard",contextWindow:2e5,badges:["legacy"]},{id:"claude-opus-4",name:"Claude Opus 4",description:"Previous Opus model",tier:"premium",contextWindow:2e5,badges:["legacy"]},{id:"claude-3-5-haiku",name:"Claude 3.5 Haiku",description:"Fast and efficient legacy model",tier:"budget",contextWindow:2e5,badges:["legacy","fast"]},{id:"claude-3-haiku",name:"Claude 3 Haiku",description:"Oldest fast model",tier:"budget",contextWindow:2e5,badges:["legacy","fast"]}]},OC={latest:{label:"LATEST",className:"text-amber-400 bg-amber-500/10 border-amber-500/30"},legacy:{label:"LEGACY",className:"text-slate-400 bg-slate-500/10 border-slate-500/30"},multi:{label:"MULTI",className:"text-cyan-400 bg-cyan-500/10 border-cyan-500/30"},code:{label:"CODE",className:"text-yellow-400 bg-yellow-500/10 border-yellow-500/30"},tts:{label:"TTS",className:"text-pink-400 bg-pink-500/10 border-pink-500/30"},realtime:{label:"REALTIME",className:"text-indigo-400 bg-indigo-500/10 border-indigo-500/30"},fast:{label:"FAST",className:"text-emerald-400 bg-emerald-500/10 border-emerald-500/30"},long:{label:"LONG",className:"text-blue-400 bg-blue-500/10 border-blue-500/30"}},GC={budget:"text-green-400 bg-green-500/10 border-green-500/30",standard:"text-blue-400 bg-blue-500/10 border-blue-500/30",premium:"text-purple-400 bg-purple-500/10 border-purple-500/30"},bp={gemini:fc.gemini||[],openai:fc.openai||[],deepseek:fc.deepseek||[],claude:fc.claude||[]},ji={gemini:{name:"Google Gemini",description:"Google's multimodal AI models",envKey:"GEMINI_API_KEY"},openai:{name:"OpenAI",description:"ChatGPT & GPT models",envKey:"OPENAI_API_KEY"},deepseek:{name:"DeepSeek",description:"DeepSeek AI models with reasoning capabilities",envKey:"DEEPSEEK_API_KEY"},claude:{name:"Anthropic Claude",description:"Claude AI models by Anthropic",envKey:"ANTHROPIC_API_KEY"}},Cp={gemini:{model:"gemini-2.5-flash",rateLimit:{maxRequests:14,windowMs:6e4}},openai:{model:"gpt-4o-mini",rateLimit:{maxRequests:50,windowMs:6e4}},deepseek:{model:"deepseek-chat",rateLimit:{maxRequests:50,windowMs:6e4}},claude:{model:"claude-sonnet-4-5",rateLimit:{maxRequests:50,windowMs:6e4}}},Nx={provider:"gemini",apiKey:"",model:"gemini-2.5-flash",useCustomKey:!1};function Sp(n){var e;return((e=Cp[n])==null?void 0:e.model)||bp[n][0].id}var eM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let tM,nM;function sM(){return{geminiUrl:tM,vertexUrl:nM}}function iM(n,e,s,o){var r,c;if(!(n!=null&&n.baseUrl)){const d=sM();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:s:(c=d.geminiUrl)!==null&&c!==void 0?c:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class si{}function Ne(n,e){const s=/\{([^}]+)\}/g;return n.replace(s,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const c=e[r];return c!=null?String(c):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(n,e,s){for(let c=0;c<e.length-1;c++){const d=e[c];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(s))n[h]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(s))for(let m=0;m<g.length;m++){const v=g[m];y(v,e.slice(c+1),s[m])}else for(const m of g)y(m,e.slice(c+1),s)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];y(g[0],e.slice(c+1),s);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===r)return;if(typeof r=="object"&&typeof s=="object"&&r!==null&&s!==null)Object.assign(r,s);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(n,s):n[o]=s}function p(n,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return s;const r=e[o];if(r.endsWith("[]")){const c=r.slice(0,-2);if(c in n){const d=n[c];return Array.isArray(d)?d.map(h=>p(h,e.slice(o+1),s)):s}else return s}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return s;throw o}}function oM(n,e){for(const[s,o]of Object.entries(e)){const r=s.split("."),c=o.split("."),d=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&c.length>h)for(let g=h;g<c.length;g++){const m=c[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&d.add(m)}Ph(n,r,c,0,d)}}function Ph(n,e,s,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const c=e[o];if(c.endsWith("[]")){const d=c.slice(0,-2),h=n;if(d in h&&Array.isArray(h[d]))for(const g of h[d])Ph(g,e,s,o+1,r)}else if(c==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const d=n,h=Object.keys(d).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of h)g[m]=d[m];for(const[m,v]of Object.entries(g)){const b=[];for(const S of s.slice(o))S==="*"?b.push(m):b.push(S);y(d,b,v)}for(const m of h)delete d[m]}}else{const d=n;c in d&&Ph(d[c],e,s,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(n){const e={},s=p(n,["operationName"]);s!=null&&y(e,["operationName"],s);const o=p(n,["resourceName"]);return o!=null&&y(e,["_url","resourceName"],o),e}function rM(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response","generateVideoResponse"]);return d!=null&&y(e,["response"],cM(d)),e}function lM(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response"]);return d!=null&&y(e,["response"],uM(d)),e}function cM(n){const e={},s=p(n,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>dM(d))),y(e,["generatedVideos"],c)}const o=p(n,["raiMediaFilteredCount"]);o!=null&&y(e,["raiMediaFilteredCount"],o);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function uM(n){const e={},s=p(n,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>fM(d))),y(e,["generatedVideos"],c)}const o=p(n,["raiMediaFilteredCount"]);o!=null&&y(e,["raiMediaFilteredCount"],o);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function dM(n){const e={},s=p(n,["video"]);return s!=null&&y(e,["video"],xM(s)),e}function fM(n){const e={},s=p(n,["_self"]);return s!=null&&y(e,["video"],vM(s)),e}function hM(n){const e={},s=p(n,["operationName"]);return s!=null&&y(e,["_url","operationName"],s),e}function pM(n){const e={},s=p(n,["operationName"]);return s!=null&&y(e,["_url","operationName"],s),e}function mM(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response"]);return d!=null&&y(e,["response"],gM(d)),e}function gM(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["parent"]);o!=null&&y(e,["parent"],o);const r=p(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function zC(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response"]);return d!=null&&y(e,["response"],yM(d)),e}function yM(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["parent"]);o!=null&&y(e,["parent"],o);const r=p(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function xM(n){const e={},s=p(n,["uri"]);s!=null&&y(e,["uri"],s);const o=p(n,["encodedVideo"]);o!=null&&y(e,["videoBytes"],wp(o));const r=p(n,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function vM(n){const e={},s=p(n,["gcsUri"]);s!=null&&y(e,["uri"],s);const o=p(n,["bytesBase64Encoded"]);o!=null&&y(e,["videoBytes"],wp(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ax;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ax||(Ax={}));var Rx;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Rx||(Rx={}));var Mx;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Mx||(Mx={}));var It;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(It||(It={}));var Ix;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ix||(Ix={}));var kx;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kx||(kx={}));var Dx;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Dx||(Dx={}));var Px;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Px||(Px={}));var Lx;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Lx||(Lx={}));var jx;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(jx||(jx={}));var Ux;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ux||(Ux={}));var Ox;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ox||(Ox={}));var Gx;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Gx||(Gx={}));var zx;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(zx||(zx={}));var Fx;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Fx||(Fx={}));var Bx;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bx||(Bx={}));var $x;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($x||($x={}));var Hx;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Hx||(Hx={}));var qx;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qx||(qx={}));var Jc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Jc||(Jc={}));var Vx;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Vx||(Vx={}));var Jx;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Jx||(Jx={}));var Wx;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wx||(Wx={}));var Lh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lh||(Lh={}));var Yx;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Yx||(Yx={}));var Kx;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Kx||(Kx={}));var Xx;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Xx||(Xx={}));var Qx;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Qx||(Qx={}));var Zx;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Zx||(Zx={}));var ev;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ev||(ev={}));var tv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(tv||(tv={}));var nv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(nv||(nv={}));var sv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(sv||(sv={}));var iv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(iv||(iv={}));var ov;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ov||(ov={}));var av;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(av||(av={}));var rv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rv||(rv={}));var lv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lv||(lv={}));var cv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cv||(cv={}));var uv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(uv||(uv={}));var dv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(dv||(dv={}));var fv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(fv||(fv={}));var hv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(hv||(hv={}));var pv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(pv||(pv={}));var mv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(mv||(mv={}));var gv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(gv||(gv={}));var yv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(yv||(yv={}));var xv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xv||(xv={}));var vv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(vv||(vv={}));var bv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(bv||(bv={}));var Cv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Cv||(Cv={}));var Sv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Sv||(Sv={}));var wv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wv||(wv={}));var Ev;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ev||(Ev={}));var _v;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(_v||(_v={}));var da;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(da||(da={}));class jh{constructor(e){const s={};for(const o of e.headers.entries())s[o[0]]=o[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sr{get text(){var e,s,o,r,c,d,h,g;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const b=[];for(const S of(g=(h=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,T]of Object.entries(S))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(T!==null||T!==void 0)&&b.push(E);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,s,o,r,c,d,h,g;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const b of(g=(h=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,E]of Object.entries(b))S!=="inlineData"&&(E!==null||E!==void 0)&&v.push(S);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,s,o,r,c,d,h,g;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,s,o,r,c,d,h,g,m;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,s,o,r,c,d,h,g,m;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Tv{}class Nv{}class bM{}class CM{}class SM{}class wM{}class Av{}class Rv{}class Mv{}class EM{}class Wc{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new Wc;let r;const c=e;return s?r=lM(c):r=rM(c),Object.assign(o,r),o}}class Iv{}class kv{}class Dv{}class Pv{}class _M{}class TM{}class NM{}class Ep{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new Ep,c=mM(e);return Object.assign(o,c),o}}class AM{}class RM{}class MM{}class Lv{}class IM{get text(){var e,s,o;let r="",c=!1;const d=[];for(const h of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,r+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?r:void 0}get data(){var e,s,o;let r="";const c=[];for(const d of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&g!==null&&c.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class kM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class _p{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new _p,c=zC(e);return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ot(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FC(n,e){const s=ot(n,e);return s?s.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}`:s.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${s}`:s:""}function BC(n){return Array.isArray(n)?n.map(e=>Yc(e)):[Yc(n)]}function Yc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function $C(n){const e=Yc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function HC(n){const e=Yc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function qC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>jv(e)):[jv(n)]}function Uh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Uv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Ov(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function hn(n){if(n==null)throw new Error("ContentUnion is required");return Uh(n)?n:{role:"user",parts:qC(n)}}function Tp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const o=hn(s);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const s=hn(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>hn(s)):[hn(e)]}function is(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Uv(n)||Ov(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(n)]}const e=[],s=[],o=Uh(n[0]);for(const r of n){const c=Uh(r);if(c!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(r);else{if(Uv(r)||Ov(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(r)}}return o||e.push({role:"user",parts:qC(s)}),e}function DM(n,e){n.includes("null")&&(e.nullable=!0);const s=n.filter(o=>o!=="null");if(s.length===1)e.type=Object.values(It).includes(s[0].toUpperCase())?s[0].toUpperCase():It.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of s)e.anyOf.push({type:Object.values(It).includes(o.toUpperCase())?o.toUpperCase():It.TYPE_UNSPECIFIED})}}function pa(n){const e={},s=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=n.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,n=c[1]):c[1].type==="null"&&(e.nullable=!0,n=c[0])),n.type instanceof Array&&DM(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(It).includes(h.toUpperCase())?h.toUpperCase():It.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=pa(h);else if(o.includes(d)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(pa(m))}e[d]=g}else if(r.includes(d)){const g={};for(const[m,v]of Object.entries(h))g[m]=pa(v);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Np(n){return pa(n)}function Ap(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Rp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Sa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=pa(e.response));return n}function wa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of n)e.push(s);return e}function PM(n,e,s,o=1){const r=!e.startsWith(`${s}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${s}/${e}`:e:r?`${s}/${e}`:e}function ii(n,e){if(typeof e!="string")throw new Error("name must be a string");return PM(n,e,"cachedContents")}function VC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Gi(n){return wp(n)}function LM(n){return n!=null&&typeof n=="object"&&"name"in n}function jM(n){return n!=null&&typeof n=="object"&&"video"in n}function UM(n){return n!=null&&typeof n=="object"&&"uri"in n}function JC(n){var e;let s;if(LM(n)&&(s=n.name),!(UM(n)&&(s=n.uri,s===void 0))&&!(jM(n)&&(s=(e=n.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof n=="string"&&(s=n),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const r=s.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${s}`);s=r[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function WC(n,e){let s;return n.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function YC(n){for(const e of["models","tunedModels","publisherModels"])if(OM(n,e))return n[e];return[]}function OM(n,e){return n!==null&&typeof n=="object"&&e in n}function GM(n,e={}){const s=n,o={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(o.responseJsonSchema=s.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function zM(n,e={}){const s=[],o=new Set;for(const r of n){const c=r.name;if(o.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);o.add(c);const d=GM(r,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function KC(n,e){let s;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const o=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,r=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function FM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function XC(n){if(typeof n!="object"||n===null)return{};const e=n,s=e.inlinedResponses;if(typeof s!="object"||s===null)return n;const r=s.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let c=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const g=d.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ea(n,e){const s=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function QC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BM(n){const e={},s=p(n,["responsesFile"]);s!=null&&y(e,["fileName"],s);const o=p(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>SI(d))),y(e,["inlinedResponses"],c)}const r=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["inlinedEmbedContentResponses"],c)}return e}function $M(n){const e={},s=p(n,["predictionsFormat"]);s!=null&&y(e,["format"],s);const o=p(n,["gcsDestination","outputUriPrefix"]);o!=null&&y(e,["gcsUri"],o);const r=p(n,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function HM(n){const e={},s=p(n,["format"]);s!=null&&y(e,["predictionsFormat"],s);const o=p(n,["gcsUri"]);o!=null&&y(e,["gcsDestination","outputUriPrefix"],o);const r=p(n,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Nc(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata","displayName"]);o!=null&&y(e,["displayName"],o);const r=p(n,["metadata","state"]);r!=null&&y(e,["state"],QC(r));const c=p(n,["metadata","createTime"]);c!=null&&y(e,["createTime"],c);const d=p(n,["metadata","endTime"]);d!=null&&y(e,["endTime"],d);const h=p(n,["metadata","updateTime"]);h!=null&&y(e,["updateTime"],h);const g=p(n,["metadata","model"]);g!=null&&y(e,["model"],g);const m=p(n,["metadata","output"]);return m!=null&&y(e,["dest"],BM(XC(m))),e}function Oh(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["displayName"]);o!=null&&y(e,["displayName"],o);const r=p(n,["state"]);r!=null&&y(e,["state"],QC(r));const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["createTime"]);d!=null&&y(e,["createTime"],d);const h=p(n,["startTime"]);h!=null&&y(e,["startTime"],h);const g=p(n,["endTime"]);g!=null&&y(e,["endTime"],g);const m=p(n,["updateTime"]);m!=null&&y(e,["updateTime"],m);const v=p(n,["model"]);v!=null&&y(e,["model"],v);const b=p(n,["inputConfig"]);b!=null&&y(e,["src"],qM(b));const S=p(n,["outputConfig"]);S!=null&&y(e,["dest"],$M(XC(S)));const E=p(n,["completionStats"]);return E!=null&&y(e,["completionStats"],E),e}function qM(n){const e={},s=p(n,["instancesFormat"]);s!=null&&y(e,["format"],s);const o=p(n,["gcsSource","uris"]);o!=null&&y(e,["gcsUri"],o);const r=p(n,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function VM(n,e){const s={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=p(e,["fileName"]);o!=null&&y(s,["fileName"],o);const r=p(e,["inlinedRequests"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>CI(n,d))),y(s,["requests","requests"],c)}return s}function JM(n){const e={},s=p(n,["format"]);s!=null&&y(e,["instancesFormat"],s);const o=p(n,["gcsUri"]);o!=null&&y(e,["gcsSource","uris"],o);const r=p(n,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function WM(n){const e={},s=p(n,["data"]);if(s!=null&&y(e,["data"],s),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function YM(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function KM(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function XM(n){const e={},s=p(n,["content"]);s!=null&&y(e,["content"],s);const o=p(n,["citationMetadata"]);o!=null&&y(e,["citationMetadata"],QM(o));const r=p(n,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const c=p(n,["finishReason"]);c!=null&&y(e,["finishReason"],c);const d=p(n,["avgLogprobs"]);d!=null&&y(e,["avgLogprobs"],d);const h=p(n,["groundingMetadata"]);h!=null&&y(e,["groundingMetadata"],h);const g=p(n,["index"]);g!=null&&y(e,["index"],g);const m=p(n,["logprobsResult"]);m!=null&&y(e,["logprobsResult"],m);const v=p(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>E)),y(e,["safetyRatings"],S)}const b=p(n,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function QM(n){const e={},s=p(n,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),y(e,["citations"],o)}return e}function ZC(n){const e={},s=p(n,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>RI(c))),y(e,["parts"],r)}const o=p(n,["role"]);return o!=null&&y(e,["role"],o),e}function ZM(n,e){const s={},o=p(n,["displayName"]);if(e!==void 0&&o!=null&&y(e,["batch","displayName"],o),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function eI(n,e){const s={},o=p(n,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const r=p(n,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],HM(FM(r))),s}function Gv(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["src"]);r!=null&&y(s,["batch","inputConfig"],VM(n,KC(n,r)));const c=p(e,["config"]);return c!=null&&ZM(c,s),s}function tI(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["model"],ot(n,o));const r=p(e,["src"]);r!=null&&y(s,["inputConfig"],JM(KC(n,r)));const c=p(e,["config"]);return c!=null&&eI(c,s),s}function nI(n,e){const s={},o=p(n,["displayName"]);return e!==void 0&&o!=null&&y(e,["batch","displayName"],o),s}function sI(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["src"]);r!=null&&y(s,["batch","inputConfig"],uI(n,r));const c=p(e,["config"]);return c!=null&&nI(c,s),s}function iI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function oI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function aI(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["name"]);o!=null&&y(e,["name"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);return c!=null&&y(e,["error"],c),e}function rI(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["name"]);o!=null&&y(e,["name"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);return c!=null&&y(e,["error"],c),e}function lI(n,e){const s={},o=p(e,["contents"]);if(o!=null){let c=Tp(n,o);Array.isArray(c)&&(c=c.map(d=>d)),y(s,["requests[]","request","content"],c)}const r=p(e,["config"]);return r!=null&&(y(s,["_self"],cI(r,s)),oM(s,{"requests[].*":"requests[].request.*"})),s}function cI(n,e){const s={},o=p(n,["taskType"]);e!==void 0&&o!=null&&y(e,["requests[]","taskType"],o);const r=p(n,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const c=p(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&y(e,["requests[]","outputDimensionality"],c),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function uI(n,e){const s={},o=p(e,["fileName"]);o!=null&&y(s,["file_name"],o);const r=p(e,["inlinedRequests"]);return r!=null&&y(s,["requests"],lI(n,r)),s}function dI(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function fI(n){const e={},s=p(n,["id"]);s!=null&&y(e,["id"],s);const o=p(n,["args"]);o!=null&&y(e,["args"],o);const r=p(n,["name"]);if(r!=null&&y(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hI(n){const e={},s=p(n,["mode"]);s!=null&&y(e,["mode"],s);const o=p(n,["allowedFunctionNames"]);if(o!=null&&y(e,["allowedFunctionNames"],o),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pI(n,e,s){const o={},r=p(e,["systemInstruction"]);s!==void 0&&r!=null&&y(s,["systemInstruction"],ZC(hn(r)));const c=p(e,["temperature"]);c!=null&&y(o,["temperature"],c);const d=p(e,["topP"]);d!=null&&y(o,["topP"],d);const h=p(e,["topK"]);h!=null&&y(o,["topK"],h);const g=p(e,["candidateCount"]);g!=null&&y(o,["candidateCount"],g);const m=p(e,["maxOutputTokens"]);m!=null&&y(o,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&y(o,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(o,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&y(o,["presencePenalty"],E);const T=p(e,["frequencyPenalty"]);T!=null&&y(o,["frequencyPenalty"],T);const R=p(e,["seed"]);R!=null&&y(o,["seed"],R);const _=p(e,["responseMimeType"]);_!=null&&y(o,["responseMimeType"],_);const M=p(e,["responseSchema"]);M!=null&&y(o,["responseSchema"],Np(M));const k=p(e,["responseJsonSchema"]);if(k!=null&&y(o,["responseJsonSchema"],k),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=p(e,["safetySettings"]);if(s!==void 0&&I!=null){let H=I;Array.isArray(H)&&(H=H.map(ve=>MI(ve))),y(s,["safetySettings"],H)}const j=p(e,["tools"]);if(s!==void 0&&j!=null){let H=wa(j);Array.isArray(H)&&(H=H.map(ve=>kI(Sa(ve)))),y(s,["tools"],H)}const J=p(e,["toolConfig"]);if(s!==void 0&&J!=null&&y(s,["toolConfig"],II(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=p(e,["cachedContent"]);s!==void 0&&Z!=null&&y(s,["cachedContent"],ii(n,Z));const $=p(e,["responseModalities"]);$!=null&&y(o,["responseModalities"],$);const ce=p(e,["mediaResolution"]);ce!=null&&y(o,["mediaResolution"],ce);const V=p(e,["speechConfig"]);if(V!=null&&y(o,["speechConfig"],Ap(V)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=p(e,["thinkingConfig"]);le!=null&&y(o,["thinkingConfig"],le);const ie=p(e,["imageConfig"]);ie!=null&&y(o,["imageConfig"],bI(ie));const pe=p(e,["enableEnhancedCivicAnswers"]);return pe!=null&&y(o,["enableEnhancedCivicAnswers"],pe),o}function mI(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>XM(m))),y(e,["candidates"],g)}const r=p(n,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const c=p(n,["promptFeedback"]);c!=null&&y(e,["promptFeedback"],c);const d=p(n,["responseId"]);d!=null&&y(e,["responseId"],d);const h=p(n,["usageMetadata"]);return h!=null&&y(e,["usageMetadata"],h),e}function gI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function yI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],Ea(n,o)),s}function xI(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function vI(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(n,["timeRangeFilter"]);return s!=null&&y(e,["timeRangeFilter"],s),e}function bI(n){const e={},s=p(n,["aspectRatio"]);s!=null&&y(e,["aspectRatio"],s);const o=p(n,["imageSize"]);if(o!=null&&y(e,["imageSize"],o),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function CI(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["request","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let h=is(r);Array.isArray(h)&&(h=h.map(g=>ZC(g))),y(s,["request","contents"],h)}const c=p(e,["metadata"]);c!=null&&y(s,["metadata"],c);const d=p(e,["config"]);return d!=null&&y(s,["request","generationConfig"],pI(n,d,p(s,["request"],{}))),s}function SI(n){const e={},s=p(n,["response"]);s!=null&&y(e,["response"],mI(s));const o=p(n,["error"]);return o!=null&&y(e,["error"],o),e}function wI(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function EI(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const c=p(n,["filter"]);return e!==void 0&&c!=null&&y(e,["_query","filter"],c),s}function _I(n){const e={},s=p(n,["config"]);return s!=null&&wI(s,e),e}function TI(n){const e={},s=p(n,["config"]);return s!=null&&EI(s,e),e}function NI(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["operations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>Nc(d))),y(e,["batchJobs"],c)}return e}function AI(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["batchPredictionJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>Oh(d))),y(e,["batchJobs"],c)}return e}function RI(n){const e={},s=p(n,["mediaResolution"]);s!=null&&y(e,["mediaResolution"],s);const o=p(n,["codeExecutionResult"]);o!=null&&y(e,["codeExecutionResult"],o);const r=p(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const c=p(n,["fileData"]);c!=null&&y(e,["fileData"],dI(c));const d=p(n,["functionCall"]);d!=null&&y(e,["functionCall"],fI(d));const h=p(n,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const g=p(n,["inlineData"]);g!=null&&y(e,["inlineData"],WM(g));const m=p(n,["text"]);m!=null&&y(e,["text"],m);const v=p(n,["thought"]);v!=null&&y(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function MI(n){const e={},s=p(n,["category"]);if(s!=null&&y(e,["category"],s),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=p(n,["threshold"]);return o!=null&&y(e,["threshold"],o),e}function II(n){const e={},s=p(n,["functionCallingConfig"]);s!=null&&y(e,["functionCallingConfig"],hI(s));const o=p(n,["retrievalConfig"]);return o!=null&&y(e,["retrievalConfig"],o),e}function kI(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const r=p(n,["computerUse"]);r!=null&&y(e,["computerUse"],r);const c=p(n,["fileSearch"]);c!=null&&y(e,["fileSearch"],c);const d=p(n,["codeExecution"]);if(d!=null&&y(e,["codeExecution"],d),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(n,["googleMaps"]);h!=null&&y(e,["googleMaps"],xI(h));const g=p(n,["googleSearch"]);g!=null&&y(e,["googleSearch"],vI(g));const m=p(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ti;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ti||(ti={}));class xo{constructor(e,s,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,o,r)}init(e,s,o){var r,c;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s==null?void 0:s.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!o||Object.keys(o).length===0?d={config:{}}:typeof o=="object"?d=Object.assign({},o):d=o,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(c=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DI=class extends si{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(ti.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=Gv(this.apiClient,e),o=s._url,r=Ne("{model}:batchGenerateContent",o),h=s.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const b=Object.assign({},v);if(b.systemInstruction){const S=b.systemInstruction;delete b.systemInstruction;const E=b.request;E.systemInstruction=S,b.request=E}m.push(b)}return h.requests=m,delete s.config,delete s._url,delete s._query,{path:r,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const o=s?Object.assign({},s):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const c=this.getGcsUri(e),d=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?o.dest=`${c.slice(0,-6)}/dest`:o.dest=`${c}_dest_${r}`;else if(d)o.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=tI(this.apiClient,e);return h=Ne("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>Oh(v))}else{const m=Gv(this.apiClient,e);return h=Ne("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async createEmbeddingsInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sI(this.apiClient,e);return c=Ne("{model}:asyncBatchEmbedContent",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Nc(g))}}async get(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=yI(this.apiClient,e);return h=Ne("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>Oh(v))}else{const m=gI(this.apiClient,e);return h=Ne("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>Nc(v))}}async cancel(e){var s,o,r,c;let d="",h={};if(this.apiClient.isVertexAI()){const g=KM(this.apiClient,e);d=Ne("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=YM(this.apiClient,e);d=Ne("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=TI(e);return h=Ne("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=AI(v),S=new Lv;return Object.assign(S,b),S})}else{const m=_I(e);return h=Ne("batches",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=NI(v),S=new Lv;return Object.assign(S,b),S})}}async delete(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=oI(this.apiClient,e);return h=Ne("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>rI(v))}else{const m=iI(this.apiClient,e);return h=Ne("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>aI(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PI(n){const e={},s=p(n,["data"]);if(s!=null&&y(e,["data"],s),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function zv(n){const e={},s=p(n,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>sk(c))),y(e,["parts"],r)}const o=p(n,["role"]);return o!=null&&y(e,["role"],o),e}function LI(n,e){const s={},o=p(n,["ttl"]);e!==void 0&&o!=null&&y(e,["ttl"],o);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const c=p(n,["displayName"]);e!==void 0&&c!=null&&y(e,["displayName"],c);const d=p(n,["contents"]);if(e!==void 0&&d!=null){let v=is(d);Array.isArray(v)&&(v=v.map(b=>zv(b))),y(e,["contents"],v)}const h=p(n,["systemInstruction"]);e!==void 0&&h!=null&&y(e,["systemInstruction"],zv(hn(h)));const g=p(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(b=>ok(b))),y(e,["tools"],v)}const m=p(n,["toolConfig"]);if(e!==void 0&&m!=null&&y(e,["toolConfig"],ik(m)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function jI(n,e){const s={},o=p(n,["ttl"]);e!==void 0&&o!=null&&y(e,["ttl"],o);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const c=p(n,["displayName"]);e!==void 0&&c!=null&&y(e,["displayName"],c);const d=p(n,["contents"]);if(e!==void 0&&d!=null){let b=is(d);Array.isArray(b)&&(b=b.map(S=>S)),y(e,["contents"],b)}const h=p(n,["systemInstruction"]);e!==void 0&&h!=null&&y(e,["systemInstruction"],hn(h));const g=p(n,["tools"]);if(e!==void 0&&g!=null){let b=g;Array.isArray(b)&&(b=b.map(S=>ak(S))),y(e,["tools"],b)}const m=p(n,["toolConfig"]);e!==void 0&&m!=null&&y(e,["toolConfig"],m);const v=p(n,["kmsKeyName"]);return e!==void 0&&v!=null&&y(e,["encryption_spec","kmsKeyName"],v),s}function UI(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["model"],FC(n,o));const r=p(e,["config"]);return r!=null&&LI(r,s),s}function OI(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["model"],FC(n,o));const r=p(e,["config"]);return r!=null&&jI(r,s),s}function GI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],ii(n,o)),s}function zI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],ii(n,o)),s}function FI(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function BI(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function $I(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function HI(n){const e={},s=p(n,["id"]);s!=null&&y(e,["id"],s);const o=p(n,["args"]);o!=null&&y(e,["args"],o);const r=p(n,["name"]);if(r!=null&&y(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qI(n){const e={},s=p(n,["mode"]);s!=null&&y(e,["mode"],s);const o=p(n,["allowedFunctionNames"]);if(o!=null&&y(e,["allowedFunctionNames"],o),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function VI(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(n,["description"]);s!=null&&y(e,["description"],s);const o=p(n,["name"]);o!=null&&y(e,["name"],o);const r=p(n,["parameters"]);r!=null&&y(e,["parameters"],r);const c=p(n,["parametersJsonSchema"]);c!=null&&y(e,["parametersJsonSchema"],c);const d=p(n,["response"]);d!=null&&y(e,["response"],d);const h=p(n,["responseJsonSchema"]);return h!=null&&y(e,["responseJsonSchema"],h),e}function JI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],ii(n,o)),s}function WI(n,e){const s={},o=p(e,["name"]);return o!=null&&y(s,["_url","name"],ii(n,o)),s}function YI(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function KI(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(n,["timeRangeFilter"]);return s!=null&&y(e,["timeRangeFilter"],s),e}function XI(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),s}function QI(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),s}function ZI(n){const e={},s=p(n,["config"]);return s!=null&&XI(s,e),e}function ek(n){const e={},s=p(n,["config"]);return s!=null&&QI(s,e),e}function tk(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["cachedContents"],c)}return e}function nk(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["cachedContents"],c)}return e}function sk(n){const e={},s=p(n,["mediaResolution"]);s!=null&&y(e,["mediaResolution"],s);const o=p(n,["codeExecutionResult"]);o!=null&&y(e,["codeExecutionResult"],o);const r=p(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const c=p(n,["fileData"]);c!=null&&y(e,["fileData"],$I(c));const d=p(n,["functionCall"]);d!=null&&y(e,["functionCall"],HI(d));const h=p(n,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const g=p(n,["inlineData"]);g!=null&&y(e,["inlineData"],PI(g));const m=p(n,["text"]);m!=null&&y(e,["text"],m);const v=p(n,["thought"]);v!=null&&y(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function ik(n){const e={},s=p(n,["functionCallingConfig"]);s!=null&&y(e,["functionCallingConfig"],qI(s));const o=p(n,["retrievalConfig"]);return o!=null&&y(e,["retrievalConfig"],o),e}function ok(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const r=p(n,["computerUse"]);r!=null&&y(e,["computerUse"],r);const c=p(n,["fileSearch"]);c!=null&&y(e,["fileSearch"],c);const d=p(n,["codeExecution"]);if(d!=null&&y(e,["codeExecution"],d),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(n,["googleMaps"]);h!=null&&y(e,["googleMaps"],YI(h));const g=p(n,["googleSearch"]);g!=null&&y(e,["googleSearch"],KI(g));const m=p(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function ak(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(S=>VI(S))),y(e,["functionDeclarations"],b)}const o=p(n,["retrieval"]);o!=null&&y(e,["retrieval"],o);const r=p(n,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const c=p(n,["computerUse"]);if(c!=null&&y(e,["computerUse"],c),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const h=p(n,["enterpriseWebSearch"]);h!=null&&y(e,["enterpriseWebSearch"],h);const g=p(n,["googleMaps"]);g!=null&&y(e,["googleMaps"],g);const m=p(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function rk(n,e){const s={},o=p(n,["ttl"]);e!==void 0&&o!=null&&y(e,["ttl"],o);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),s}function lk(n,e){const s={},o=p(n,["ttl"]);e!==void 0&&o!=null&&y(e,["ttl"],o);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),s}function ck(n,e){const s={},o=p(e,["name"]);o!=null&&y(s,["_url","name"],ii(n,o));const r=p(e,["config"]);return r!=null&&rk(r,s),s}function uk(n,e){const s={},o=p(e,["name"]);o!=null&&y(s,["_url","name"],ii(n,o));const r=p(e,["config"]);return r!=null&&lk(r,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dk extends si{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(ti.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(s),s)}async create(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=OI(this.apiClient,e);return h=Ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=UI(this.apiClient,e);return h=Ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async get(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=WI(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=JI(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async delete(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=zI(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=BI(v),S=new Dv;return Object.assign(S,b),S})}else{const m=GI(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=FI(v),S=new Dv;return Object.assign(S,b),S})}}async update(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=uk(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=ck(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async listInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=ek(e);return h=Ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=nk(v),S=new Pv;return Object.assign(S,b),S})}else{const m=ZI(e);return h=Ne("cachedContents",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=tk(v),S=new Pv;return Object.assign(S,b),S})}}}function Kc(n,e){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(s[o[r]]=n[o[r]]);return s}function Fv(n){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&n[e],o=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(n){return this instanceof He?(this.v=n,this):new He(n)}function ms(n,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(n,e||[]),r,c=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(E){return function(T){return Promise.resolve(T).then(E,b)}}function h(E,T){o[E]&&(r[E]=function(R){return new Promise(function(_,M){c.push([E,R,_,M])>1||g(E,R)})},T&&(r[E]=T(r[E])))}function g(E,T){try{m(o[E](T))}catch(R){S(c[0][3],R)}}function m(E){E.value instanceof He?Promise.resolve(E.value.v).then(v,b):S(c[0][2],E)}function v(E){g("next",E)}function b(E){g("throw",E)}function S(E,T){E(T),c.shift(),c.length&&g(c[0][0],c[0][1])}}function gs(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],s;return e?e.call(n):(n=typeof Fv=="function"?Fv(n):n[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(c){s[c]=n[c]&&function(d){return new Promise(function(h,g){d=n[c](d),r(h,g,d.done,d.value)})}}function r(c,d,h,g){Promise.resolve(g).then(function(m){c({value:m,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const s=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:eS(s)}function eS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function hk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bv(n){if(n===void 0||n.length===0)return[];const e=[],s=n.length;let o=0;for(;o<s;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let c=!0;for(;o<s&&n[o].role==="model";)r.push(n[o]),c&&!eS(n[o])&&(c=!1),o++;c?e.push(...r):e.pop()}return e}class pk{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new mk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let mk=class{constructor(e,s,o,r={},c=[]){this.apiClient=e,this.modelsModule=s,this.model=o,this.config=r,this.history=c,this.sendPromise=Promise.resolve(),hk(c)}async sendMessage(e){var s;await this.sendPromise;const o=hn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var c,d,h;const g=await r,m=(d=(c=g.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content,v=g.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(b))!==null&&h!==void 0?h:[]);const E=m?[m]:[];this.recordHistory(o,E,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var s;await this.sendPromise;const o=hn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const c=await r;return this.processStreamResponse(c,o)}getHistory(e=!1){const s=e?Bv(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return ms(this,arguments,function*(){var r,c,d,h,g,m;const v=[];try{for(var b=!0,S=gs(e),E;E=yield He(S.next()),r=E.done,!r;b=!0){h=E.value,b=!1;const T=h;if(fk(T)){const R=(m=(g=T.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;R!==void 0&&v.push(R)}yield yield He(T)}}catch(T){c={error:T}}finally{try{!b&&!r&&(d=S.return)&&(yield He(d.call(S)))}finally{if(c)throw c.error}}this.recordHistory(s,v)})}recordHistory(e,s,o){let r=[];s.length>0&&s.every(c=>c.role!==void 0)?r=s:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Bv(o)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(n){const e={},s=p(n,["file"]);return s!=null&&y(e,["file"],s),e}function yk(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function xk(n){const e={},s=p(n,["name"]);return s!=null&&y(e,["_url","file"],JC(s)),e}function vk(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function bk(n){const e={},s=p(n,["name"]);return s!=null&&y(e,["_url","file"],JC(s)),e}function Ck(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),s}function Sk(n){const e={},s=p(n,["config"]);return s!=null&&Ck(s,e),e}function wk(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["files"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ek=class extends si{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(ti.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Sk(e);return c=Ne("files",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=wk(g),v=new AM;return Object.assign(v,m),v})}}async createInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gk(e);return c=Ne("upload/v1beta/files",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=yk(g),v=new RM;return Object.assign(v,m),v})}}async get(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bk(e);return c=Ne("files/{file}",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xk(e);return c=Ne("files/{file}",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=vk(g),v=new MM;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ac(n){const e={},s=p(n,["data"]);if(s!=null&&y(e,["data"],s),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function _k(n){const e={},s=p(n,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>Fk(c))),y(e,["parts"],r)}const o=p(n,["role"]);return o!=null&&y(e,["role"],o),e}function Tk(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Nk(n){const e={},s=p(n,["id"]);s!=null&&y(e,["id"],s);const o=p(n,["args"]);o!=null&&y(e,["args"],o);const r=p(n,["name"]);if(r!=null&&y(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ak(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(n,["description"]);s!=null&&y(e,["description"],s);const o=p(n,["name"]);o!=null&&y(e,["name"],o);const r=p(n,["parameters"]);r!=null&&y(e,["parameters"],r);const c=p(n,["parametersJsonSchema"]);c!=null&&y(e,["parametersJsonSchema"],c);const d=p(n,["response"]);d!=null&&y(e,["response"],d);const h=p(n,["responseJsonSchema"]);return h!=null&&y(e,["responseJsonSchema"],h),e}function Rk(n){const e={},s=p(n,["modelSelectionConfig"]);s!=null&&y(e,["modelConfig"],s);const o=p(n,["responseJsonSchema"]);o!=null&&y(e,["responseJsonSchema"],o);const r=p(n,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const c=p(n,["candidateCount"]);c!=null&&y(e,["candidateCount"],c);const d=p(n,["enableAffectiveDialog"]);d!=null&&y(e,["enableAffectiveDialog"],d);const h=p(n,["frequencyPenalty"]);h!=null&&y(e,["frequencyPenalty"],h);const g=p(n,["logprobs"]);g!=null&&y(e,["logprobs"],g);const m=p(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const v=p(n,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(n,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const S=p(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const E=p(n,["responseMimeType"]);E!=null&&y(e,["responseMimeType"],E);const T=p(n,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const R=p(n,["responseSchema"]);R!=null&&y(e,["responseSchema"],R);const _=p(n,["routingConfig"]);_!=null&&y(e,["routingConfig"],_);const M=p(n,["seed"]);M!=null&&y(e,["seed"],M);const k=p(n,["speechConfig"]);k!=null&&y(e,["speechConfig"],tS(k));const I=p(n,["stopSequences"]);I!=null&&y(e,["stopSequences"],I);const j=p(n,["temperature"]);j!=null&&y(e,["temperature"],j);const J=p(n,["thinkingConfig"]);J!=null&&y(e,["thinkingConfig"],J);const Z=p(n,["topK"]);Z!=null&&y(e,["topK"],Z);const $=p(n,["topP"]);if($!=null&&y(e,["topP"],$),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mk(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function Ik(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(n,["timeRangeFilter"]);return s!=null&&y(e,["timeRangeFilter"],s),e}function kk(n,e){const s={},o=p(n,["generationConfig"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig"],o);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const c=p(n,["temperature"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","temperature"],c);const d=p(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const h=p(n,["topK"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","topK"],h);const g=p(n,["maxOutputTokens"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","maxOutputTokens"],g);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Rp(b));const S=p(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],E);const T=p(n,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],_k(hn(T)));const R=p(n,["tools"]);if(e!==void 0&&R!=null){let Z=wa(R);Array.isArray(Z)&&(Z=Z.map($=>$k(Sa($)))),y(e,["setup","tools"],Z)}const _=p(n,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],Bk(_));const M=p(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&y(e,["setup","inputAudioTranscription"],M);const k=p(n,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&y(e,["setup","realtimeInputConfig"],I);const j=p(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&y(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function Dk(n,e){const s={},o=p(n,["generationConfig"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig"],Rk(o));const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const c=p(n,["temperature"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","temperature"],c);const d=p(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const h=p(n,["topK"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","topK"],h);const g=p(n,["maxOutputTokens"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","maxOutputTokens"],g);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],tS(Rp(b)));const S=p(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],E);const T=p(n,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],hn(T));const R=p(n,["tools"]);if(e!==void 0&&R!=null){let $=wa(R);Array.isArray($)&&($=$.map(ce=>Hk(Sa(ce)))),y(e,["setup","tools"],$)}const _=p(n,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],_);const M=p(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&y(e,["setup","inputAudioTranscription"],M);const k=p(n,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&y(e,["setup","realtimeInputConfig"],I);const j=p(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const J=p(n,["proactivity"]);e!==void 0&&J!=null&&y(e,["setup","proactivity"],J);const Z=p(n,["explicitVadSignal"]);return e!==void 0&&Z!=null&&y(e,["setup","explicitVadSignal"],Z),s}function Pk(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["setup","model"],ot(n,o));const r=p(e,["config"]);return r!=null&&y(s,["config"],kk(r,s)),s}function Lk(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["setup","model"],ot(n,o));const r=p(e,["config"]);return r!=null&&y(s,["config"],Dk(r,s)),s}function jk(n){const e={},s=p(n,["musicGenerationConfig"]);return s!=null&&y(e,["musicGenerationConfig"],s),e}function Uk(n){const e={},s=p(n,["weightedPrompts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),y(e,["weightedPrompts"],o)}return e}function Ok(n){const e={},s=p(n,["media"]);if(s!=null){let m=BC(s);Array.isArray(m)&&(m=m.map(v=>Ac(v))),y(e,["mediaChunks"],m)}const o=p(n,["audio"]);o!=null&&y(e,["audio"],Ac(HC(o)));const r=p(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const c=p(n,["video"]);c!=null&&y(e,["video"],Ac($C(c)));const d=p(n,["text"]);d!=null&&y(e,["text"],d);const h=p(n,["activityStart"]);h!=null&&y(e,["activityStart"],h);const g=p(n,["activityEnd"]);return g!=null&&y(e,["activityEnd"],g),e}function Gk(n){const e={},s=p(n,["media"]);if(s!=null){let m=BC(s);Array.isArray(m)&&(m=m.map(v=>v)),y(e,["mediaChunks"],m)}const o=p(n,["audio"]);o!=null&&y(e,["audio"],HC(o));const r=p(n,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const c=p(n,["video"]);c!=null&&y(e,["video"],$C(c));const d=p(n,["text"]);d!=null&&y(e,["text"],d);const h=p(n,["activityStart"]);h!=null&&y(e,["activityStart"],h);const g=p(n,["activityEnd"]);return g!=null&&y(e,["activityEnd"],g),e}function zk(n){const e={},s=p(n,["setupComplete"]);s!=null&&y(e,["setupComplete"],s);const o=p(n,["serverContent"]);o!=null&&y(e,["serverContent"],o);const r=p(n,["toolCall"]);r!=null&&y(e,["toolCall"],r);const c=p(n,["toolCallCancellation"]);c!=null&&y(e,["toolCallCancellation"],c);const d=p(n,["usageMetadata"]);d!=null&&y(e,["usageMetadata"],qk(d));const h=p(n,["goAway"]);h!=null&&y(e,["goAway"],h);const g=p(n,["sessionResumptionUpdate"]);g!=null&&y(e,["sessionResumptionUpdate"],g);const m=p(n,["voiceActivityDetectionSignal"]);return m!=null&&y(e,["voiceActivityDetectionSignal"],m),e}function Fk(n){const e={},s=p(n,["mediaResolution"]);s!=null&&y(e,["mediaResolution"],s);const o=p(n,["codeExecutionResult"]);o!=null&&y(e,["codeExecutionResult"],o);const r=p(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const c=p(n,["fileData"]);c!=null&&y(e,["fileData"],Tk(c));const d=p(n,["functionCall"]);d!=null&&y(e,["functionCall"],Nk(d));const h=p(n,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const g=p(n,["inlineData"]);g!=null&&y(e,["inlineData"],Ac(g));const m=p(n,["text"]);m!=null&&y(e,["text"],m);const v=p(n,["thought"]);v!=null&&y(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function Bk(n){const e={},s=p(n,["handle"]);if(s!=null&&y(e,["handle"],s),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tS(n){const e={},s=p(n,["voiceConfig"]);s!=null&&y(e,["voiceConfig"],s);const o=p(n,["languageCode"]);if(o!=null&&y(e,["languageCode"],o),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $k(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const r=p(n,["computerUse"]);r!=null&&y(e,["computerUse"],r);const c=p(n,["fileSearch"]);c!=null&&y(e,["fileSearch"],c);const d=p(n,["codeExecution"]);if(d!=null&&y(e,["codeExecution"],d),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(n,["googleMaps"]);h!=null&&y(e,["googleMaps"],Mk(h));const g=p(n,["googleSearch"]);g!=null&&y(e,["googleSearch"],Ik(g));const m=p(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function Hk(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(S=>Ak(S))),y(e,["functionDeclarations"],b)}const o=p(n,["retrieval"]);o!=null&&y(e,["retrieval"],o);const r=p(n,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const c=p(n,["computerUse"]);if(c!=null&&y(e,["computerUse"],c),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const h=p(n,["enterpriseWebSearch"]);h!=null&&y(e,["enterpriseWebSearch"],h);const g=p(n,["googleMaps"]);g!=null&&y(e,["googleMaps"],g);const m=p(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function qk(n){const e={},s=p(n,["promptTokenCount"]);s!=null&&y(e,["promptTokenCount"],s);const o=p(n,["cachedContentTokenCount"]);o!=null&&y(e,["cachedContentTokenCount"],o);const r=p(n,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const c=p(n,["toolUsePromptTokenCount"]);c!=null&&y(e,["toolUsePromptTokenCount"],c);const d=p(n,["thoughtsTokenCount"]);d!=null&&y(e,["thoughtsTokenCount"],d);const h=p(n,["totalTokenCount"]);h!=null&&y(e,["totalTokenCount"],h);const g=p(n,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["promptTokensDetails"],E)}const m=p(n,["cacheTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["cacheTokensDetails"],E)}const v=p(n,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["responseTokensDetails"],E)}const b=p(n,["toolUsePromptTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(T=>T)),y(e,["toolUsePromptTokensDetails"],E)}const S=p(n,["trafficType"]);return S!=null&&y(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vk(n){const e={},s=p(n,["data"]);if(s!=null&&y(e,["data"],s),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function Jk(n){const e={},s=p(n,["content"]);s!=null&&y(e,["content"],s);const o=p(n,["citationMetadata"]);o!=null&&y(e,["citationMetadata"],Wk(o));const r=p(n,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const c=p(n,["finishReason"]);c!=null&&y(e,["finishReason"],c);const d=p(n,["avgLogprobs"]);d!=null&&y(e,["avgLogprobs"],d);const h=p(n,["groundingMetadata"]);h!=null&&y(e,["groundingMetadata"],h);const g=p(n,["index"]);g!=null&&y(e,["index"],g);const m=p(n,["logprobsResult"]);m!=null&&y(e,["logprobsResult"],m);const v=p(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(E=>E)),y(e,["safetyRatings"],S)}const b=p(n,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function Wk(n){const e={},s=p(n,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),y(e,["citations"],o)}return e}function Yk(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let c=is(r);Array.isArray(c)&&(c=c.map(d=>d)),y(s,["contents"],c)}return s}function Kk(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["tokensInfo"],r)}return e}function Xk(n){const e={},s=p(n,["values"]);s!=null&&y(e,["values"],s);const o=p(n,["statistics"]);return o!=null&&y(e,["statistics"],Qk(o)),e}function Qk(n){const e={},s=p(n,["truncated"]);s!=null&&y(e,["truncated"],s);const o=p(n,["token_count"]);return o!=null&&y(e,["tokenCount"],o),e}function vu(n){const e={},s=p(n,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>r4(c))),y(e,["parts"],r)}const o=p(n,["role"]);return o!=null&&y(e,["role"],o),e}function Zk(n){const e={},s=p(n,["controlType"]);s!=null&&y(e,["controlType"],s);const o=p(n,["enableControlImageComputation"]);return o!=null&&y(e,["computeControl"],o),e}function eD(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tD(n,e){const s={},o=p(n,["systemInstruction"]);e!==void 0&&o!=null&&y(e,["systemInstruction"],hn(o));const r=p(n,["tools"]);if(e!==void 0&&r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>aS(h))),y(e,["tools"],d)}const c=p(n,["generationConfig"]);return e!==void 0&&c!=null&&y(e,["generationConfig"],VD(c)),s}function nD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let d=is(r);Array.isArray(d)&&(d=d.map(h=>vu(h))),y(s,["contents"],d)}const c=p(e,["config"]);return c!=null&&eD(c),s}function sD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let d=is(r);Array.isArray(d)&&(d=d.map(h=>h)),y(s,["contents"],d)}const c=p(e,["config"]);return c!=null&&tD(c,s),s}function iD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["totalTokens"]);o!=null&&y(e,["totalTokens"],o);const r=p(n,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function oD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["totalTokens"]);return o!=null&&y(e,["totalTokens"],o),e}function aD(n,e){const s={},o=p(e,["model"]);return o!=null&&y(s,["_url","name"],ot(n,o)),s}function rD(n,e){const s={},o=p(e,["model"]);return o!=null&&y(s,["_url","name"],ot(n,o)),s}function lD(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function cD(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}function uD(n,e){const s={},o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const c=p(n,["numberOfImages"]);e!==void 0&&c!=null&&y(e,["parameters","sampleCount"],c);const d=p(n,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&y(e,["parameters","guidanceScale"],h);const g=p(n,["seed"]);e!==void 0&&g!=null&&y(e,["parameters","seed"],g);const m=p(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&y(e,["parameters","safetySetting"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const S=p(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const E=p(n,["language"]);e!==void 0&&E!=null&&y(e,["parameters","language"],E);const T=p(n,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const R=p(n,["outputCompressionQuality"]);e!==void 0&&R!=null&&y(e,["parameters","outputOptions","compressionQuality"],R);const _=p(n,["addWatermark"]);e!==void 0&&_!=null&&y(e,["parameters","addWatermark"],_);const M=p(n,["labels"]);e!==void 0&&M!=null&&y(e,["labels"],M);const k=p(n,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const I=p(n,["baseSteps"]);return e!==void 0&&I!=null&&y(e,["parameters","editConfig","baseSteps"],I),s}function dD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["prompt"]);r!=null&&y(s,["instances[0]","prompt"],r);const c=p(e,["referenceImages"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>h4(g))),y(s,["instances[0]","referenceImages"],h)}const d=p(e,["config"]);return d!=null&&uD(d,s),s}function fD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>bu(c))),y(e,["generatedImages"],r)}return e}function hD(n,e){const s={},o=p(n,["taskType"]);e!==void 0&&o!=null&&y(e,["requests[]","taskType"],o);const r=p(n,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const c=p(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&y(e,["requests[]","outputDimensionality"],c),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function pD(n,e){const s={},o=p(n,["taskType"]);e!==void 0&&o!=null&&y(e,["instances[]","task_type"],o);const r=p(n,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const c=p(n,["outputDimensionality"]);e!==void 0&&c!=null&&y(e,["parameters","outputDimensionality"],c);const d=p(n,["mimeType"]);e!==void 0&&d!=null&&y(e,["instances[]","mimeType"],d);const h=p(n,["autoTruncate"]);return e!==void 0&&h!=null&&y(e,["parameters","autoTruncate"],h),s}function mD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let h=Tp(n,r);Array.isArray(h)&&(h=h.map(g=>g)),y(s,["requests[]","content"],h)}const c=p(e,["config"]);c!=null&&hD(c,s);const d=p(e,["model"]);return d!==void 0&&y(s,["requests[]","model"],ot(n,d)),s}function gD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let d=Tp(n,r);Array.isArray(d)&&(d=d.map(h=>h)),y(s,["instances[]","content"],d)}const c=p(e,["config"]);return c!=null&&pD(c,s),s}function yD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["embeddings"],c)}const r=p(n,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function xD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["predictions[]","embeddings"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>Xk(d))),y(e,["embeddings"],c)}const r=p(n,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function vD(n){const e={},s=p(n,["endpoint"]);s!=null&&y(e,["name"],s);const o=p(n,["deployedModelId"]);return o!=null&&y(e,["deployedModelId"],o),e}function bD(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function CD(n){const e={},s=p(n,["id"]);s!=null&&y(e,["id"],s);const o=p(n,["args"]);o!=null&&y(e,["args"],o);const r=p(n,["name"]);if(r!=null&&y(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SD(n){const e={},s=p(n,["mode"]);s!=null&&y(e,["mode"],s);const o=p(n,["allowedFunctionNames"]);if(o!=null&&y(e,["allowedFunctionNames"],o),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wD(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(n,["description"]);s!=null&&y(e,["description"],s);const o=p(n,["name"]);o!=null&&y(e,["name"],o);const r=p(n,["parameters"]);r!=null&&y(e,["parameters"],r);const c=p(n,["parametersJsonSchema"]);c!=null&&y(e,["parametersJsonSchema"],c);const d=p(n,["response"]);d!=null&&y(e,["response"],d);const h=p(n,["responseJsonSchema"]);return h!=null&&y(e,["responseJsonSchema"],h),e}function ED(n,e,s){const o={},r=p(e,["systemInstruction"]);s!==void 0&&r!=null&&y(s,["systemInstruction"],vu(hn(r)));const c=p(e,["temperature"]);c!=null&&y(o,["temperature"],c);const d=p(e,["topP"]);d!=null&&y(o,["topP"],d);const h=p(e,["topK"]);h!=null&&y(o,["topK"],h);const g=p(e,["candidateCount"]);g!=null&&y(o,["candidateCount"],g);const m=p(e,["maxOutputTokens"]);m!=null&&y(o,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&y(o,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(o,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&y(o,["presencePenalty"],E);const T=p(e,["frequencyPenalty"]);T!=null&&y(o,["frequencyPenalty"],T);const R=p(e,["seed"]);R!=null&&y(o,["seed"],R);const _=p(e,["responseMimeType"]);_!=null&&y(o,["responseMimeType"],_);const M=p(e,["responseSchema"]);M!=null&&y(o,["responseSchema"],Np(M));const k=p(e,["responseJsonSchema"]);if(k!=null&&y(o,["responseJsonSchema"],k),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=p(e,["safetySettings"]);if(s!==void 0&&I!=null){let H=I;Array.isArray(H)&&(H=H.map(ve=>p4(ve))),y(s,["safetySettings"],H)}const j=p(e,["tools"]);if(s!==void 0&&j!=null){let H=wa(j);Array.isArray(H)&&(H=H.map(ve=>C4(Sa(ve)))),y(s,["tools"],H)}const J=p(e,["toolConfig"]);if(s!==void 0&&J!=null&&y(s,["toolConfig"],b4(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=p(e,["cachedContent"]);s!==void 0&&Z!=null&&y(s,["cachedContent"],ii(n,Z));const $=p(e,["responseModalities"]);$!=null&&y(o,["responseModalities"],$);const ce=p(e,["mediaResolution"]);ce!=null&&y(o,["mediaResolution"],ce);const V=p(e,["speechConfig"]);if(V!=null&&y(o,["speechConfig"],Ap(V)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=p(e,["thinkingConfig"]);le!=null&&y(o,["thinkingConfig"],le);const ie=p(e,["imageConfig"]);ie!=null&&y(o,["imageConfig"],XD(ie));const pe=p(e,["enableEnhancedCivicAnswers"]);return pe!=null&&y(o,["enableEnhancedCivicAnswers"],pe),o}function _D(n,e,s){const o={},r=p(e,["systemInstruction"]);s!==void 0&&r!=null&&y(s,["systemInstruction"],hn(r));const c=p(e,["temperature"]);c!=null&&y(o,["temperature"],c);const d=p(e,["topP"]);d!=null&&y(o,["topP"],d);const h=p(e,["topK"]);h!=null&&y(o,["topK"],h);const g=p(e,["candidateCount"]);g!=null&&y(o,["candidateCount"],g);const m=p(e,["maxOutputTokens"]);m!=null&&y(o,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&y(o,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(o,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(o,["logprobs"],S);const E=p(e,["presencePenalty"]);E!=null&&y(o,["presencePenalty"],E);const T=p(e,["frequencyPenalty"]);T!=null&&y(o,["frequencyPenalty"],T);const R=p(e,["seed"]);R!=null&&y(o,["seed"],R);const _=p(e,["responseMimeType"]);_!=null&&y(o,["responseMimeType"],_);const M=p(e,["responseSchema"]);M!=null&&y(o,["responseSchema"],Np(M));const k=p(e,["responseJsonSchema"]);k!=null&&y(o,["responseJsonSchema"],k);const I=p(e,["routingConfig"]);I!=null&&y(o,["routingConfig"],I);const j=p(e,["modelSelectionConfig"]);j!=null&&y(o,["modelConfig"],j);const J=p(e,["safetySettings"]);if(s!==void 0&&J!=null){let U=J;Array.isArray(U)&&(U=U.map(ne=>ne)),y(s,["safetySettings"],U)}const Z=p(e,["tools"]);if(s!==void 0&&Z!=null){let U=wa(Z);Array.isArray(U)&&(U=U.map(ne=>aS(Sa(ne)))),y(s,["tools"],U)}const $=p(e,["toolConfig"]);s!==void 0&&$!=null&&y(s,["toolConfig"],$);const ce=p(e,["labels"]);s!==void 0&&ce!=null&&y(s,["labels"],ce);const V=p(e,["cachedContent"]);s!==void 0&&V!=null&&y(s,["cachedContent"],ii(n,V));const le=p(e,["responseModalities"]);le!=null&&y(o,["responseModalities"],le);const ie=p(e,["mediaResolution"]);ie!=null&&y(o,["mediaResolution"],ie);const pe=p(e,["speechConfig"]);pe!=null&&y(o,["speechConfig"],oS(Ap(pe)));const H=p(e,["audioTimestamp"]);H!=null&&y(o,["audioTimestamp"],H);const ve=p(e,["thinkingConfig"]);ve!=null&&y(o,["thinkingConfig"],ve);const Ce=p(e,["imageConfig"]);if(Ce!=null&&y(o,["imageConfig"],QD(Ce)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function $v(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let d=is(r);Array.isArray(d)&&(d=d.map(h=>vu(h))),y(s,["contents"],d)}const c=p(e,["config"]);return c!=null&&y(s,["generationConfig"],ED(n,c,s)),s}function Hv(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["contents"]);if(r!=null){let d=is(r);Array.isArray(d)&&(d=d.map(h=>h)),y(s,["contents"],d)}const c=p(e,["config"]);return c!=null&&y(s,["generationConfig"],_D(n,c,s)),s}function qv(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>Jk(m))),y(e,["candidates"],g)}const r=p(n,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const c=p(n,["promptFeedback"]);c!=null&&y(e,["promptFeedback"],c);const d=p(n,["responseId"]);d!=null&&y(e,["responseId"],d);const h=p(n,["usageMetadata"]);return h!=null&&y(e,["usageMetadata"],h),e}function Vv(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),y(e,["candidates"],m)}const r=p(n,["createTime"]);r!=null&&y(e,["createTime"],r);const c=p(n,["modelVersion"]);c!=null&&y(e,["modelVersion"],c);const d=p(n,["promptFeedback"]);d!=null&&y(e,["promptFeedback"],d);const h=p(n,["responseId"]);h!=null&&y(e,["responseId"],h);const g=p(n,["usageMetadata"]);return g!=null&&y(e,["usageMetadata"],g),e}function TD(n,e){const s={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=p(n,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const r=p(n,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const c=p(n,["guidanceScale"]);if(e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&y(e,["parameters","personGeneration"],h);const g=p(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&y(e,["parameters","includeSafetyAttributes"],g);const m=p(n,["includeRaiReason"]);e!==void 0&&m!=null&&y(e,["parameters","includeRaiReason"],m);const v=p(n,["language"]);e!==void 0&&v!=null&&y(e,["parameters","language"],v);const b=p(n,["outputMimeType"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","mimeType"],b);const S=p(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=p(n,["imageSize"]);if(e!==void 0&&E!=null&&y(e,["parameters","sampleImageSize"],E),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function ND(n,e){const s={},o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const c=p(n,["numberOfImages"]);e!==void 0&&c!=null&&y(e,["parameters","sampleCount"],c);const d=p(n,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&y(e,["parameters","guidanceScale"],h);const g=p(n,["seed"]);e!==void 0&&g!=null&&y(e,["parameters","seed"],g);const m=p(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&y(e,["parameters","safetySetting"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const S=p(n,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const E=p(n,["language"]);e!==void 0&&E!=null&&y(e,["parameters","language"],E);const T=p(n,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const R=p(n,["outputCompressionQuality"]);e!==void 0&&R!=null&&y(e,["parameters","outputOptions","compressionQuality"],R);const _=p(n,["addWatermark"]);e!==void 0&&_!=null&&y(e,["parameters","addWatermark"],_);const M=p(n,["labels"]);e!==void 0&&M!=null&&y(e,["labels"],M);const k=p(n,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const I=p(n,["enhancePrompt"]);return e!==void 0&&I!=null&&y(e,["parameters","enhancePrompt"],I),s}function AD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["prompt"]);r!=null&&y(s,["instances[0]","prompt"],r);const c=p(e,["config"]);return c!=null&&TD(c,s),s}function RD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["prompt"]);r!=null&&y(s,["instances[0]","prompt"],r);const c=p(e,["config"]);return c!=null&&ND(c,s),s}function MD(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>BD(d))),y(e,["generatedImages"],c)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],sS(r)),e}function ID(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["predictions"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>bu(d))),y(e,["generatedImages"],c)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],iS(r)),e}function kD(n,e){const s={},o=p(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(n,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const d=p(n,["resolution"]);e!==void 0&&d!=null&&y(e,["parameters","resolution"],d);const h=p(n,["personGeneration"]);if(e!==void 0&&h!=null&&y(e,["parameters","personGeneration"],h),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=p(n,["negativePrompt"]);e!==void 0&&g!=null&&y(e,["parameters","negativePrompt"],g);const m=p(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&y(e,["parameters","enhancePrompt"],m),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(n,["lastFrame"]);e!==void 0&&v!=null&&y(e,["instances[0]","lastFrame"],Cu(v));const b=p(n,["referenceImages"]);if(e!==void 0&&b!=null){let S=b;Array.isArray(S)&&(S=S.map(E=>P4(E))),y(e,["instances[0]","referenceImages"],S)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function DD(n,e){const s={},o=p(n,["numberOfVideos"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const c=p(n,["fps"]);e!==void 0&&c!=null&&y(e,["parameters","fps"],c);const d=p(n,["durationSeconds"]);e!==void 0&&d!=null&&y(e,["parameters","durationSeconds"],d);const h=p(n,["seed"]);e!==void 0&&h!=null&&y(e,["parameters","seed"],h);const g=p(n,["aspectRatio"]);e!==void 0&&g!=null&&y(e,["parameters","aspectRatio"],g);const m=p(n,["resolution"]);e!==void 0&&m!=null&&y(e,["parameters","resolution"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(n,["pubsubTopic"]);e!==void 0&&b!=null&&y(e,["parameters","pubsubTopic"],b);const S=p(n,["negativePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","negativePrompt"],S);const E=p(n,["enhancePrompt"]);e!==void 0&&E!=null&&y(e,["parameters","enhancePrompt"],E);const T=p(n,["generateAudio"]);e!==void 0&&T!=null&&y(e,["parameters","generateAudio"],T);const R=p(n,["lastFrame"]);e!==void 0&&R!=null&&y(e,["instances[0]","lastFrame"],ys(R));const _=p(n,["referenceImages"]);if(e!==void 0&&_!=null){let I=_;Array.isArray(I)&&(I=I.map(j=>L4(j))),y(e,["instances[0]","referenceImages"],I)}const M=p(n,["mask"]);e!==void 0&&M!=null&&y(e,["instances[0]","mask"],D4(M));const k=p(n,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),s}function PD(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response","generateVideoResponse"]);return d!=null&&y(e,["response"],OD(d)),e}function LD(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response"]);return d!=null&&y(e,["response"],GD(d)),e}function jD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["prompt"]);r!=null&&y(s,["instances[0]","prompt"],r);const c=p(e,["image"]);c!=null&&y(s,["instances[0]","image"],Cu(c));const d=p(e,["video"]);d!=null&&y(s,["instances[0]","video"],rS(d));const h=p(e,["source"]);h!=null&&zD(h,s);const g=p(e,["config"]);return g!=null&&kD(g,s),s}function UD(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["prompt"]);r!=null&&y(s,["instances[0]","prompt"],r);const c=p(e,["image"]);c!=null&&y(s,["instances[0]","image"],ys(c));const d=p(e,["video"]);d!=null&&y(s,["instances[0]","video"],lS(d));const h=p(e,["source"]);h!=null&&FD(h,s);const g=p(e,["config"]);return g!=null&&DD(g,s),s}function OD(n){const e={},s=p(n,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>HD(d))),y(e,["generatedVideos"],c)}const o=p(n,["raiMediaFilteredCount"]);o!=null&&y(e,["raiMediaFilteredCount"],o);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function GD(n){const e={},s=p(n,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>qD(d))),y(e,["generatedVideos"],c)}const o=p(n,["raiMediaFilteredCount"]);o!=null&&y(e,["raiMediaFilteredCount"],o);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function zD(n,e){const s={},o=p(n,["prompt"]);e!==void 0&&o!=null&&y(e,["instances[0]","prompt"],o);const r=p(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Cu(r));const c=p(n,["video"]);return e!==void 0&&c!=null&&y(e,["instances[0]","video"],rS(c)),s}function FD(n,e){const s={},o=p(n,["prompt"]);e!==void 0&&o!=null&&y(e,["instances[0]","prompt"],o);const r=p(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],ys(r));const c=p(n,["video"]);return e!==void 0&&c!=null&&y(e,["instances[0]","video"],lS(c)),s}function BD(n){const e={},s=p(n,["_self"]);s!=null&&y(e,["image"],ZD(s));const o=p(n,["raiFilteredReason"]);o!=null&&y(e,["raiFilteredReason"],o);const r=p(n,["_self"]);return r!=null&&y(e,["safetyAttributes"],sS(r)),e}function bu(n){const e={},s=p(n,["_self"]);s!=null&&y(e,["image"],nS(s));const o=p(n,["raiFilteredReason"]);o!=null&&y(e,["raiFilteredReason"],o);const r=p(n,["_self"]);r!=null&&y(e,["safetyAttributes"],iS(r));const c=p(n,["prompt"]);return c!=null&&y(e,["enhancedPrompt"],c),e}function $D(n){const e={},s=p(n,["_self"]);s!=null&&y(e,["mask"],nS(s));const o=p(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["labels"],r)}return e}function HD(n){const e={},s=p(n,["video"]);return s!=null&&y(e,["video"],I4(s)),e}function qD(n){const e={},s=p(n,["_self"]);return s!=null&&y(e,["video"],k4(s)),e}function VD(n){const e={},s=p(n,["modelSelectionConfig"]);s!=null&&y(e,["modelConfig"],s);const o=p(n,["responseJsonSchema"]);o!=null&&y(e,["responseJsonSchema"],o);const r=p(n,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const c=p(n,["candidateCount"]);c!=null&&y(e,["candidateCount"],c);const d=p(n,["enableAffectiveDialog"]);d!=null&&y(e,["enableAffectiveDialog"],d);const h=p(n,["frequencyPenalty"]);h!=null&&y(e,["frequencyPenalty"],h);const g=p(n,["logprobs"]);g!=null&&y(e,["logprobs"],g);const m=p(n,["maxOutputTokens"]);m!=null&&y(e,["maxOutputTokens"],m);const v=p(n,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(n,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const S=p(n,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const E=p(n,["responseMimeType"]);E!=null&&y(e,["responseMimeType"],E);const T=p(n,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const R=p(n,["responseSchema"]);R!=null&&y(e,["responseSchema"],R);const _=p(n,["routingConfig"]);_!=null&&y(e,["routingConfig"],_);const M=p(n,["seed"]);M!=null&&y(e,["seed"],M);const k=p(n,["speechConfig"]);k!=null&&y(e,["speechConfig"],oS(k));const I=p(n,["stopSequences"]);I!=null&&y(e,["stopSequences"],I);const j=p(n,["temperature"]);j!=null&&y(e,["temperature"],j);const J=p(n,["thinkingConfig"]);J!=null&&y(e,["thinkingConfig"],J);const Z=p(n,["topK"]);Z!=null&&y(e,["topK"],Z);const $=p(n,["topP"]);if($!=null&&y(e,["topP"],$),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function JD(n,e){const s={},o=p(e,["model"]);return o!=null&&y(s,["_url","name"],ot(n,o)),s}function WD(n,e){const s={},o=p(e,["model"]);return o!=null&&y(s,["_url","name"],ot(n,o)),s}function YD(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function KD(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(n,["timeRangeFilter"]);return s!=null&&y(e,["timeRangeFilter"],s),e}function XD(n){const e={},s=p(n,["aspectRatio"]);s!=null&&y(e,["aspectRatio"],s);const o=p(n,["imageSize"]);if(o!=null&&y(e,["imageSize"],o),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QD(n){const e={},s=p(n,["aspectRatio"]);s!=null&&y(e,["aspectRatio"],s);const o=p(n,["imageSize"]);o!=null&&y(e,["imageSize"],o);const r=p(n,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const c=p(n,["outputCompressionQuality"]);return c!=null&&y(e,["imageOutputOptions","compressionQuality"],c),e}function ZD(n){const e={},s=p(n,["bytesBase64Encoded"]);s!=null&&y(e,["imageBytes"],Gi(s));const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function nS(n){const e={},s=p(n,["gcsUri"]);s!=null&&y(e,["gcsUri"],s);const o=p(n,["bytesBase64Encoded"]);o!=null&&y(e,["imageBytes"],Gi(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Cu(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=p(n,["imageBytes"]);s!=null&&y(e,["bytesBase64Encoded"],Gi(s));const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function ys(n){const e={},s=p(n,["gcsUri"]);s!=null&&y(e,["gcsUri"],s);const o=p(n,["imageBytes"]);o!=null&&y(e,["bytesBase64Encoded"],Gi(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function e4(n,e,s){const o={},r=p(e,["pageSize"]);s!==void 0&&r!=null&&y(s,["_query","pageSize"],r);const c=p(e,["pageToken"]);s!==void 0&&c!=null&&y(s,["_query","pageToken"],c);const d=p(e,["filter"]);s!==void 0&&d!=null&&y(s,["_query","filter"],d);const h=p(e,["queryBase"]);return s!==void 0&&h!=null&&y(s,["_url","models_url"],WC(n,h)),o}function t4(n,e,s){const o={},r=p(e,["pageSize"]);s!==void 0&&r!=null&&y(s,["_query","pageSize"],r);const c=p(e,["pageToken"]);s!==void 0&&c!=null&&y(s,["_query","pageToken"],c);const d=p(e,["filter"]);s!==void 0&&d!=null&&y(s,["_query","filter"],d);const h=p(e,["queryBase"]);return s!==void 0&&h!=null&&y(s,["_url","models_url"],WC(n,h)),o}function n4(n,e){const s={},o=p(e,["config"]);return o!=null&&e4(n,o,s),s}function s4(n,e){const s={},o=p(e,["config"]);return o!=null&&t4(n,o,s),s}function i4(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["_self"]);if(r!=null){let c=YC(r);Array.isArray(c)&&(c=c.map(d=>Gh(d))),y(e,["models"],c)}return e}function o4(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["_self"]);if(r!=null){let c=YC(r);Array.isArray(c)&&(c=c.map(d=>zh(d))),y(e,["models"],c)}return e}function a4(n){const e={},s=p(n,["maskMode"]);s!=null&&y(e,["maskMode"],s);const o=p(n,["segmentationClasses"]);o!=null&&y(e,["maskClasses"],o);const r=p(n,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function Gh(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["displayName"]);o!=null&&y(e,["displayName"],o);const r=p(n,["description"]);r!=null&&y(e,["description"],r);const c=p(n,["version"]);c!=null&&y(e,["version"],c);const d=p(n,["_self"]);d!=null&&y(e,["tunedModelInfo"],S4(d));const h=p(n,["inputTokenLimit"]);h!=null&&y(e,["inputTokenLimit"],h);const g=p(n,["outputTokenLimit"]);g!=null&&y(e,["outputTokenLimit"],g);const m=p(n,["supportedGenerationMethods"]);m!=null&&y(e,["supportedActions"],m);const v=p(n,["temperature"]);v!=null&&y(e,["temperature"],v);const b=p(n,["maxTemperature"]);b!=null&&y(e,["maxTemperature"],b);const S=p(n,["topP"]);S!=null&&y(e,["topP"],S);const E=p(n,["topK"]);E!=null&&y(e,["topK"],E);const T=p(n,["thinking"]);return T!=null&&y(e,["thinking"],T),e}function zh(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["displayName"]);o!=null&&y(e,["displayName"],o);const r=p(n,["description"]);r!=null&&y(e,["description"],r);const c=p(n,["versionId"]);c!=null&&y(e,["version"],c);const d=p(n,["deployedModels"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(S=>vD(S))),y(e,["endpoints"],b)}const h=p(n,["labels"]);h!=null&&y(e,["labels"],h);const g=p(n,["_self"]);g!=null&&y(e,["tunedModelInfo"],w4(g));const m=p(n,["defaultCheckpointId"]);m!=null&&y(e,["defaultCheckpointId"],m);const v=p(n,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(S=>S)),y(e,["checkpoints"],b)}return e}function r4(n){const e={},s=p(n,["mediaResolution"]);s!=null&&y(e,["mediaResolution"],s);const o=p(n,["codeExecutionResult"]);o!=null&&y(e,["codeExecutionResult"],o);const r=p(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const c=p(n,["fileData"]);c!=null&&y(e,["fileData"],bD(c));const d=p(n,["functionCall"]);d!=null&&y(e,["functionCall"],CD(d));const h=p(n,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const g=p(n,["inlineData"]);g!=null&&y(e,["inlineData"],Vk(g));const m=p(n,["text"]);m!=null&&y(e,["text"],m);const v=p(n,["thought"]);v!=null&&y(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function l4(n){const e={},s=p(n,["productImage"]);return s!=null&&y(e,["image"],ys(s)),e}function c4(n,e){const s={},o=p(n,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const r=p(n,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const c=p(n,["outputGcsUri"]);e!==void 0&&c!=null&&y(e,["parameters","storageUri"],c);const d=p(n,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const g=p(n,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const m=p(n,["addWatermark"]);e!==void 0&&m!=null&&y(e,["parameters","addWatermark"],m);const v=p(n,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const b=p(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const S=p(n,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const E=p(n,["labels"]);return e!==void 0&&E!=null&&y(e,["labels"],E),s}function u4(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["source"]);r!=null&&f4(r,s);const c=p(e,["config"]);return c!=null&&c4(c,s),s}function d4(n){const e={},s=p(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>bu(r))),y(e,["generatedImages"],o)}return e}function f4(n,e){const s={},o=p(n,["prompt"]);e!==void 0&&o!=null&&y(e,["instances[0]","prompt"],o);const r=p(n,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],ys(r));const c=p(n,["productImages"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>l4(h))),y(e,["instances[0]","productImages"],d)}return s}function h4(n){const e={},s=p(n,["referenceImage"]);s!=null&&y(e,["referenceImage"],ys(s));const o=p(n,["referenceId"]);o!=null&&y(e,["referenceId"],o);const r=p(n,["referenceType"]);r!=null&&y(e,["referenceType"],r);const c=p(n,["maskImageConfig"]);c!=null&&y(e,["maskImageConfig"],a4(c));const d=p(n,["controlImageConfig"]);d!=null&&y(e,["controlImageConfig"],Zk(d));const h=p(n,["styleImageConfig"]);h!=null&&y(e,["styleImageConfig"],h);const g=p(n,["subjectImageConfig"]);return g!=null&&y(e,["subjectImageConfig"],g),e}function sS(n){const e={},s=p(n,["safetyAttributes","categories"]);s!=null&&y(e,["categories"],s);const o=p(n,["safetyAttributes","scores"]);o!=null&&y(e,["scores"],o);const r=p(n,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function iS(n){const e={},s=p(n,["safetyAttributes","categories"]);s!=null&&y(e,["categories"],s);const o=p(n,["safetyAttributes","scores"]);o!=null&&y(e,["scores"],o);const r=p(n,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function p4(n){const e={},s=p(n,["category"]);if(s!=null&&y(e,["category"],s),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=p(n,["threshold"]);return o!=null&&y(e,["threshold"],o),e}function m4(n){const e={},s=p(n,["image"]);return s!=null&&y(e,["image"],ys(s)),e}function g4(n,e){const s={},o=p(n,["mode"]);e!==void 0&&o!=null&&y(e,["parameters","mode"],o);const r=p(n,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const c=p(n,["confidenceThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","confidenceThreshold"],c);const d=p(n,["maskDilation"]);e!==void 0&&d!=null&&y(e,["parameters","maskDilation"],d);const h=p(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&y(e,["parameters","binaryColorThreshold"],h);const g=p(n,["labels"]);return e!==void 0&&g!=null&&y(e,["labels"],g),s}function y4(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["source"]);r!=null&&v4(r,s);const c=p(e,["config"]);return c!=null&&g4(c,s),s}function x4(n){const e={},s=p(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>$D(r))),y(e,["generatedMasks"],o)}return e}function v4(n,e){const s={},o=p(n,["prompt"]);e!==void 0&&o!=null&&y(e,["instances[0]","prompt"],o);const r=p(n,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],ys(r));const c=p(n,["scribbleImage"]);return e!==void 0&&c!=null&&y(e,["instances[0]","scribble"],m4(c)),s}function oS(n){const e={},s=p(n,["voiceConfig"]);s!=null&&y(e,["voiceConfig"],s);const o=p(n,["languageCode"]);if(o!=null&&y(e,["languageCode"],o),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function b4(n){const e={},s=p(n,["functionCallingConfig"]);s!=null&&y(e,["functionCallingConfig"],SD(s));const o=p(n,["retrievalConfig"]);return o!=null&&y(e,["retrievalConfig"],o),e}function C4(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const r=p(n,["computerUse"]);r!=null&&y(e,["computerUse"],r);const c=p(n,["fileSearch"]);c!=null&&y(e,["fileSearch"],c);const d=p(n,["codeExecution"]);if(d!=null&&y(e,["codeExecution"],d),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(n,["googleMaps"]);h!=null&&y(e,["googleMaps"],YD(h));const g=p(n,["googleSearch"]);g!=null&&y(e,["googleSearch"],KD(g));const m=p(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}function aS(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let b=s;Array.isArray(b)&&(b=b.map(S=>wD(S))),y(e,["functionDeclarations"],b)}const o=p(n,["retrieval"]);o!=null&&y(e,["retrieval"],o);const r=p(n,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const c=p(n,["computerUse"]);if(c!=null&&y(e,["computerUse"],c),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(n,["codeExecution"]);d!=null&&y(e,["codeExecution"],d);const h=p(n,["enterpriseWebSearch"]);h!=null&&y(e,["enterpriseWebSearch"],h);const g=p(n,["googleMaps"]);g!=null&&y(e,["googleMaps"],g);const m=p(n,["googleSearch"]);m!=null&&y(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function S4(n){const e={},s=p(n,["baseModel"]);s!=null&&y(e,["baseModel"],s);const o=p(n,["createTime"]);o!=null&&y(e,["createTime"],o);const r=p(n,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function w4(n){const e={},s=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&y(e,["baseModel"],s);const o=p(n,["createTime"]);o!=null&&y(e,["createTime"],o);const r=p(n,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function E4(n,e){const s={},o=p(n,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const r=p(n,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const c=p(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&y(e,["defaultCheckpointId"],c),s}function _4(n,e){const s={},o=p(n,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const r=p(n,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const c=p(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&y(e,["defaultCheckpointId"],c),s}function T4(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","name"],ot(n,o));const r=p(e,["config"]);return r!=null&&E4(r,s),s}function N4(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["config"]);return r!=null&&_4(r,s),s}function A4(n,e){const s={},o=p(n,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const r=p(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const c=p(n,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=p(n,["includeRaiReason"]);e!==void 0&&d!=null&&y(e,["parameters","includeRaiReason"],d);const h=p(n,["outputMimeType"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","mimeType"],h);const g=p(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","compressionQuality"],g);const m=p(n,["enhanceInputImage"]);e!==void 0&&m!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=p(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const b=p(n,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const S=p(n,["numberOfImages"]);e!==void 0&&S!=null&&y(e,["parameters","sampleCount"],S);const E=p(n,["mode"]);return e!==void 0&&E!=null&&y(e,["parameters","mode"],E),s}function R4(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["_url","model"],ot(n,o));const r=p(e,["image"]);r!=null&&y(s,["instances[0]","image"],ys(r));const c=p(e,["upscaleFactor"]);c!=null&&y(s,["parameters","upscaleConfig","upscaleFactor"],c);const d=p(e,["config"]);return d!=null&&A4(d,s),s}function M4(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>bu(c))),y(e,["generatedImages"],r)}return e}function I4(n){const e={},s=p(n,["uri"]);s!=null&&y(e,["uri"],s);const o=p(n,["encodedVideo"]);o!=null&&y(e,["videoBytes"],Gi(o));const r=p(n,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function k4(n){const e={},s=p(n,["gcsUri"]);s!=null&&y(e,["uri"],s);const o=p(n,["bytesBase64Encoded"]);o!=null&&y(e,["videoBytes"],Gi(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function D4(n){const e={},s=p(n,["image"]);s!=null&&y(e,["_self"],ys(s));const o=p(n,["maskMode"]);return o!=null&&y(e,["maskMode"],o),e}function P4(n){const e={},s=p(n,["image"]);s!=null&&y(e,["image"],Cu(s));const o=p(n,["referenceType"]);return o!=null&&y(e,["referenceType"],o),e}function L4(n){const e={},s=p(n,["image"]);s!=null&&y(e,["image"],ys(s));const o=p(n,["referenceType"]);return o!=null&&y(e,["referenceType"],o),e}function rS(n){const e={},s=p(n,["uri"]);s!=null&&y(e,["uri"],s);const o=p(n,["videoBytes"]);o!=null&&y(e,["encodedVideo"],Gi(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function lS(n){const e={},s=p(n,["uri"]);s!=null&&y(e,["gcsUri"],s);const o=p(n,["videoBytes"]);o!=null&&y(e,["bytesBase64Encoded"],Gi(o));const r=p(n,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(n,e){const s={},o=p(n,["displayName"]);return e!==void 0&&o!=null&&y(e,["displayName"],o),s}function U4(n){const e={},s=p(n,["config"]);return s!=null&&j4(s,e),e}function O4(n,e){const s={},o=p(n,["force"]);return e!==void 0&&o!=null&&y(e,["_query","force"],o),s}function G4(n){const e={},s=p(n,["name"]);s!=null&&y(e,["_url","name"],s);const o=p(n,["config"]);return o!=null&&O4(o,e),e}function z4(n){const e={},s=p(n,["name"]);return s!=null&&y(e,["_url","name"],s),e}function F4(n,e){const s={},o=p(n,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const r=p(n,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),s}function B4(n){const e={},s=p(n,["name"]);s!=null&&y(e,["name"],s);const o=p(n,["metadata"]);o!=null&&y(e,["metadata"],o);const r=p(n,["done"]);r!=null&&y(e,["done"],r);const c=p(n,["error"]);c!=null&&y(e,["error"],c);const d=p(n,["response"]);return d!=null&&y(e,["response"],H4(d)),e}function $4(n){const e={},s=p(n,["fileSearchStoreName"]);s!=null&&y(e,["_url","file_search_store_name"],s);const o=p(n,["fileName"]);o!=null&&y(e,["fileName"],o);const r=p(n,["config"]);return r!=null&&F4(r,e),e}function H4(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["parent"]);o!=null&&y(e,["parent"],o);const r=p(n,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function q4(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),s}function V4(n){const e={},s=p(n,["config"]);return s!=null&&q4(s,e),e}function J4(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["fileSearchStores"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["fileSearchStores"],c)}return e}function cS(n,e){const s={},o=p(n,["mimeType"]);e!==void 0&&o!=null&&y(e,["mimeType"],o);const r=p(n,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const c=p(n,["customMetadata"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),y(e,["customMetadata"],h)}const d=p(n,["chunkingConfig"]);return e!==void 0&&d!=null&&y(e,["chunkingConfig"],d),s}function W4(n){const e={},s=p(n,["fileSearchStoreName"]);s!=null&&y(e,["_url","file_search_store_name"],s);const o=p(n,["config"]);return o!=null&&cS(o,e),e}function Y4(n){const e={},s=p(n,["sdkHttpResponse"]);return s!=null&&y(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K4="Content-Type",X4="X-Server-Timeout",Q4="User-Agent",Fh="x-goog-api-client",Z4="1.33.0",e5=`google-genai-sdk/${Z4}`,t5="v1beta1",n5="v1beta";class s5{constructor(e){var s,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:t5,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:n5,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,o){const r=[this.getRequestUrlInternal(s)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,s,o);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))r.searchParams.append(d,String(h));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,s,r.toString(),e.abortSignal),this.unaryApiCall(r,c,e.httpMethod)}patchHttpOptions(e,s){const o=JSON.parse(JSON.stringify(e));for(const[r,c]of Object.entries(s))typeof c=="object"?o[r]=Object.assign(Object.assign({},o[r]),c):c!==void 0&&(o[r]=c);return o}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,s,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,s,r.toString(),e.abortSignal),this.streamApiCall(r,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,o,r){if(s&&s.timeout||r){const c=new AbortController,d=c.signal;if(s.timeout&&(s==null?void 0:s.timeout)>0){const h=setTimeout(()=>c.abort(),s.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{c.abort()}),e.signal=d}return s&&s.extraBody!==null&&i5(e,s.extraBody),e.headers=await this.getHeadersInternal(s,o),e}async unaryApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await Jv(r),new jh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await Jv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ms(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),c=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield He(r.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=c.decode(v,{stream:!0});try{const T=JSON.parse(b);if("error"in T){const R=JSON.parse(JSON.stringify(T.error)),_=R.status,M=R.code,k=`got status: ${_}. ${JSON.stringify(T)}`;if(M>=400&&M<600)throw new xu({message:k,status:M})}}catch(T){if(T.name==="ApiError")throw T}d+=b;let S=-1,E=0;for(;;){S=-1,E=0;for(const _ of g){const M=d.indexOf(_);M!==-1&&(S===-1||M<S)&&(S=M,E=_.length)}if(S===-1)break;const T=d.substring(0,S);d=d.substring(S+E);const R=T.trim();if(R.startsWith(h)){const _=R.substring(h.length).trim();try{const M=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield He(new jh(M))}catch(M){throw new Error(`exception parsing stream chunk ${_}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},s=e5+" "+this.clientOptions.userAgentExtra;return e[Q4]=s,e[Fh]=s,e[K4]="application/json",e}async getHeadersInternal(e,s){const o=new Headers;if(e&&e.headers){for(const[r,c]of Object.entries(e.headers))o.append(r,c);e.timeout&&e.timeout>0&&o.append(X4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,s),o}getFileName(e){var s;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(s=o.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),o}async uploadFile(e,s){var o;const r={};s!=null&&(r.mimeType=s.mimeType,r.name=s.name,r.displayName=s.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const c=this.clientOptions.uploader,d=await c.stat(e);r.sizeBytes=String(d.size);const h=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},m=this.getFileName(e),v=Ne("upload/v1beta/files",g._url),b=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,g,s==null?void 0:s.httpOptions);return c.upload(e,b,this)}async uploadFileToFileSearchStore(e,s,o){var r;const c=this.clientOptions.uploader,d=await c.stat(s),h=String(d.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:d.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(s),b={};o!=null&&cS(o,b);const S=await this.fetchUploadUrl(m,h,g,v,b,o==null?void 0:o.httpOptions);return c.uploadToFileSearchStore(s,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,o,r,c,d){var h;let g={};d?g=d:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Jv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const s=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw s>=400&&s<600?new xu({message:r,status:s}):new Error(r)}}function i5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof n.body=="string"&&n.body.length>0)try{const c=JSON.parse(n.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))s=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(c,d){const h=Object.assign({},c);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const m=d[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=o(s,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o5="mcp_used/unknown";let a5=!1;function uS(n){for(const e of n)if(r5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return a5}function dS(n){var e;const s=(e=n[Fh])!==null&&e!==void 0?e:"";n[Fh]=(s+` ${o5}`).trimStart()}function r5(n){return n!==null&&typeof n=="object"&&n instanceof Mp}function l5(n){return ms(this,arguments,function*(s,o=100){let r,c=0;for(;c<o;){const d=yield He(s.listTools({cursor:r}));for(const h of d.tools)yield yield He(h),c++;if(!d.nextCursor)break;r=d.nextCursor}})}class Mp{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Mp(e,s)}async initialize(){var e,s,o,r;if(this.mcpTools.length>0)return;const c={},d=[];for(const v of this.mcpClients)try{for(var h=!0,g=(s=void 0,gs(l5(v))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const b=r;d.push(b);const S=b.name;if(c[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);c[S]=v}}catch(b){s={error:b}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),zM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const d=await r.callTool({name:o.name,arguments:o.args},void 0,c);s.push({functionResponse:{name:o.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function c5(n,e,s){const o=new kM;let r;s.data instanceof Blob?r=JSON.parse(await s.data.text()):r=JSON.parse(s.data),Object.assign(o,r),e(o)}class u5{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o}async connect(e){var s,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d=h5(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(I=>{m=I}),b=e.callbacks,S=function(){m({})},E=this.apiClient,T={onopen:S,onmessage:I=>{c5(E,b.onmessage,I)},onerror:(s=b==null?void 0:b.onerror)!==null&&s!==void 0?s:function(I){},onclose:(o=b==null?void 0:b.onclose)!==null&&o!==void 0?o:function(I){}},R=this.webSocketFactory.create(g,f5(d),T);R.connect(),await v;const k={setup:{model:ot(this.apiClient,e.model)}};return R.send(JSON.stringify(k)),new d5(R,this.apiClient)}}class d5{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=Uk(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=jk(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(da.PLAY)}pause(){this.sendPlaybackControl(da.PAUSE)}stop(){this.sendPlaybackControl(da.STOP)}resetContext(){this.sendPlaybackControl(da.RESET_CONTEXT)}close(){this.conn.close()}}function f5(n){const e={};return n.forEach((s,o)=>{e[o]=s}),e}function h5(n){const e=new Headers;for(const[s,o]of Object.entries(n))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function m5(n,e,s){const o=new IM;let r;s.data instanceof Blob?r=await s.data.text():s.data instanceof ArrayBuffer?r=new TextDecoder().decode(s.data):r=s.data;const c=JSON.parse(r);if(n.isVertexAI()){const d=zk(c);Object.assign(o,d)}else Object.assign(o,c);e(o)}class g5{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o,this.music=new u5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,o,r,c,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&uS(e.config.tools)&&dS(b);const S=b5(b);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const V=this.apiClient.getApiKey();let le="BidiGenerateContent",ie="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",ie="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${le}?${ie}=${V}`}let E=()=>{};const T=new Promise(V=>{E=V}),R=e.callbacks,_=function(){var V;(V=R==null?void 0:R.onopen)===null||V===void 0||V.call(R),E({})},M=this.apiClient,k={onopen:_,onmessage:V=>{m5(M,R.onmessage,V)},onerror:(s=R==null?void 0:R.onerror)!==null&&s!==void 0?s:function(V){},onclose:(o=R==null?void 0:R.onclose)!==null&&o!==void 0?o:function(V){}},I=this.webSocketFactory.create(v,v5(S),k);I.connect(),await T;let j=ot(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const V=this.apiClient.getProject(),le=this.apiClient.getLocation();j=`projects/${V}/locations/${le}/`+j}let J={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jc.AUDIO]}:e.config.responseModalities=[Jc.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],$=[];for(const V of Z)if(this.isCallableTool(V)){const le=V;$.push(await le.tool())}else $.push(V);$.length>0&&(e.config.tools=$);const ce={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=Lk(this.apiClient,ce):J=Pk(this.apiClient,ce),delete J.config,I.send(JSON.stringify(J)),new x5(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const y5={turnComplete:!0};class x5{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let o=[];try{o=is(s.turns),e.isVertexAI()||(o=o.map(r=>vu(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:o,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let o=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?o=s.functionResponses:o=[s.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const c of o){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(p5)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},y5),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:Gk(e)}:s={realtimeInput:Ok(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function v5(n){const e={};return n.forEach((s,o)=>{e[o]=s}),e}function b5(n){const e=new Headers;for(const[s,o]of Object.entries(n))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wv=10;function Yv(n){var e,s,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(s=n==null?void 0:n.tools)!==null&&s!==void 0?s:[])if(ma(d)){r=!0;break}if(!r)return!0;const c=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function ma(n){return"callTool"in n&&typeof n.callTool=="function"}function C5(n){var e,s,o;return(o=(s=(e=n.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(r=>ma(r)))!==null&&o!==void 0?o:!1}function Kv(n){var e;const s=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(ma(o))return;const c=o;c.functionDeclarations&&c.functionDeclarations.length>0&&s.push(r)}),s}function Xv(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let S5=class extends si{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var o,r,c,d,h;const g=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!C5(s)||Yv(s.config))return await this.generateContentInternal(g);const m=Kv(s);if(m.length>0){const R=m.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let v,b;const S=is(g.contents),E=(c=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:Wv;let T=0;for(;T<E&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const R=v.candidates[0].content,_=[];for(const M of(h=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(ma(M)){const I=await M.callTool(v.functionCalls);_.push(...I)}T++,b={role:"user",parts:_},g.contents=is(g.contents),g.contents.push(R),g.contents.push(b),Xv(g.config)&&(S.push(R),S.push(b))}return Xv(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async s=>{var o,r,c,d,h;if(this.maybeMoveToResponseJsonSchem(s),Yv(s.config)){const b=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(b)}const g=Kv(s);if(g.length>0){const b=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(c=(r=(o=s==null?void 0:s.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,v=(h=(d=s==null?void 0:s.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(o=>{var r;let c;const d=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?c=g==null?void 0:g.safetyAttributes:d.push(g);let h;return c?h={generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async s=>{var o;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((o=d.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new xo(ti.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async s=>{const o={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(o.referenceImages=s.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async s=>{let o={numberOfImages:1,mode:"upscale"};s.config&&(o=Object.assign(Object.assign({},o),s.config));const r={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async s=>{var o,r,c,d,h,g;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=s.video)===null||o===void 0)&&o.uri&&(!((r=s.video)===null||r===void 0)&&r.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(c=s.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.uri&&(!((g=(h=s.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,o,r;const c=(s=e.config)===null||s===void 0?void 0:s.tools;if(!c)return e;const d=await Promise.all(c.map(async g=>ma(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&uS(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),dS(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var s,o,r;const c=new Map;for(const d of(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(ma(d)){const h=d,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(c.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);c.set(m.name,h)}}return c}async processAfcStream(e){var s,o,r;const c=(r=(o=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Wv;let d=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,b){return ms(this,arguments,function*(){for(var S,E,T,R,_,M;h<c;){d&&(h++,d=!1);const J=yield He(m.processParamsMaybeAddMcpUsage(b)),Z=yield He(m.generateContentStreamInternal(J)),$=[],ce=[];try{for(var k=!0,I=(E=void 0,gs(Z)),j;j=yield He(I.next()),S=j.done,!S;k=!0){R=j.value,k=!1;const V=R;if(yield yield He(V),V.candidates&&(!((_=V.candidates[0])===null||_===void 0)&&_.content)){ce.push(V.candidates[0].content);for(const le of(M=V.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(h<c&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(le.functionCall.name)){const ie=yield He(v.get(le.functionCall.name).callTool([le.functionCall]));$.push(...ie)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(V){E={error:V}}finally{try{!k&&!S&&(T=I.return)&&(yield He(T.call(I)))}finally{if(E)throw E.error}}if($.length>0){d=!0;const V=new Sr;V.candidates=[{content:{role:"user",parts:$}}],yield yield He(V);const le=[];le.push(...ce),le.push({role:"user",parts:$});const ie=is(b.contents).concat(le);b.contents=ie}else break}})})(this,g,e)}async generateContentInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=Hv(this.apiClient,e);return h=Ne("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=Vv(v),S=new Sr;return Object.assign(S,b),S})}else{const m=$v(this.apiClient,e);return h=Ne("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=qv(v),S=new Sr;return Object.assign(S,b),S})}}async generateContentStreamInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=Hv(this.apiClient,e);return h=Ne("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(b){return ms(this,arguments,function*(){var S,E,T,R;try{for(var _=!0,M=gs(b),k;k=yield He(M.next()),S=k.done,!S;_=!0){R=k.value,_=!1;const I=R,j=Vv(yield He(I.json()));j.sdkHttpResponse={headers:I.headers};const J=new Sr;Object.assign(J,j),yield yield He(J)}}catch(I){E={error:I}}finally{try{!_&&!S&&(T=M.return)&&(yield He(T.call(M)))}finally{if(E)throw E.error}}})})}else{const m=$v(this.apiClient,e);return h=Ne("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),d.then(function(b){return ms(this,arguments,function*(){var S,E,T,R;try{for(var _=!0,M=gs(b),k;k=yield He(M.next()),S=k.done,!S;_=!0){R=k.value,_=!1;const I=R,j=qv(yield He(I.json()));j.sdkHttpResponse={headers:I.headers};const J=new Sr;Object.assign(J,j),yield yield He(J)}}catch(I){E={error:I}}finally{try{!_&&!S&&(T=M.return)&&(yield He(T.call(M)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=gD(this.apiClient,e);return h=Ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=xD(v),S=new Tv;return Object.assign(S,b),S})}else{const m=mD(this.apiClient,e);return h=Ne("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=yD(v),S=new Tv;return Object.assign(S,b),S})}}async generateImagesInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=RD(this.apiClient,e);return h=Ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=ID(v),S=new Nv;return Object.assign(S,b),S})}else{const m=AD(this.apiClient,e);return h=Ne("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=MD(v),S=new Nv;return Object.assign(S,b),S})}}async editImageInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=dD(this.apiClient,e);return c=Ne("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=fD(g),v=new bM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=R4(this.apiClient,e);return c=Ne("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=M4(g),v=new CM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=u4(this.apiClient,e);return c=Ne("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=d4(g),v=new SM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=y4(this.apiClient,e);return c=Ne("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=x4(g),v=new wM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=WD(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>zh(v))}else{const m=JD(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>Gh(v))}}async listInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=s4(this.apiClient,e);return h=Ne("{models_url}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=o4(v),S=new Av;return Object.assign(S,b),S})}else{const m=n4(this.apiClient,e);return h=Ne("{models_url}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=i4(v),S=new Av;return Object.assign(S,b),S})}}async update(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=N4(this.apiClient,e);return h=Ne("{model}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>zh(v))}else{const m=T4(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>Gh(v))}}async delete(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=rD(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=cD(v),S=new Rv;return Object.assign(S,b),S})}else{const m=aD(this.apiClient,e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=lD(v),S=new Rv;return Object.assign(S,b),S})}}async countTokens(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=sD(this.apiClient,e);return h=Ne("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=oD(v),S=new Mv;return Object.assign(S,b),S})}else{const m=nD(this.apiClient,e);return h=Ne("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=iD(v),S=new Mv;return Object.assign(S,b),S})}}async computeTokens(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=Yk(this.apiClient,e);return c=Ne("{model}:computeTokens",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=Kk(g),v=new EM;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=UD(this.apiClient,e);return h=Ne("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d.then(v=>{const b=LD(v),S=new Wc;return Object.assign(S,b),S})}else{const m=jD(this.apiClient,e);return h=Ne("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d.then(v=>{const b=PD(v),S=new Wc;return Object.assign(S,b),S})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w5 extends si{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let c;o&&"httpOptions"in o&&(c=o.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=pM(e);return h=Ne("{operationName}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),d}else{const m=hM(e);return h=Ne("{operationName}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=aM(e);return c=Ne("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E5(n){const e={},s=p(n,["data"]);if(s!=null&&y(e,["data"],s),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function _5(n){const e={},s=p(n,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>P5(c))),y(e,["parts"],r)}const o=p(n,["role"]);return o!=null&&y(e,["role"],o),e}function T5(n,e,s){const o={},r=p(e,["expireTime"]);s!==void 0&&r!=null&&y(s,["expireTime"],r);const c=p(e,["newSessionExpireTime"]);s!==void 0&&c!=null&&y(s,["newSessionExpireTime"],c);const d=p(e,["uses"]);s!==void 0&&d!=null&&y(s,["uses"],d);const h=p(e,["liveConnectConstraints"]);s!==void 0&&h!=null&&y(s,["bidiGenerateContentSetup"],D5(n,h));const g=p(e,["lockAdditionalFields"]);return s!==void 0&&g!=null&&y(s,["fieldMask"],g),o}function N5(n,e){const s={},o=p(e,["config"]);return o!=null&&y(s,["config"],T5(n,o,s)),s}function A5(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["fileUri"]);s!=null&&y(e,["fileUri"],s);const o=p(n,["mimeType"]);return o!=null&&y(e,["mimeType"],o),e}function R5(n){const e={},s=p(n,["id"]);s!=null&&y(e,["id"],s);const o=p(n,["args"]);o!=null&&y(e,["args"],o);const r=p(n,["name"]);if(r!=null&&y(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function M5(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(n,["enableWidget"]);return s!=null&&y(e,["enableWidget"],s),e}function I5(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(n,["timeRangeFilter"]);return s!=null&&y(e,["timeRangeFilter"],s),e}function k5(n,e){const s={},o=p(n,["generationConfig"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig"],o);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const c=p(n,["temperature"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","temperature"],c);const d=p(n,["topP"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topP"],d);const h=p(n,["topK"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","topK"],h);const g=p(n,["maxOutputTokens"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","maxOutputTokens"],g);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&y(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],Rp(b));const S=p(n,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const E=p(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],E);const T=p(n,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],_5(hn(T)));const R=p(n,["tools"]);if(e!==void 0&&R!=null){let Z=wa(R);Array.isArray(Z)&&(Z=Z.map($=>j5(Sa($)))),y(e,["setup","tools"],Z)}const _=p(n,["sessionResumption"]);e!==void 0&&_!=null&&y(e,["setup","sessionResumption"],L5(_));const M=p(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&y(e,["setup","inputAudioTranscription"],M);const k=p(n,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const I=p(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&y(e,["setup","realtimeInputConfig"],I);const j=p(n,["contextWindowCompression"]);e!==void 0&&j!=null&&y(e,["setup","contextWindowCompression"],j);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&y(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function D5(n,e){const s={},o=p(e,["model"]);o!=null&&y(s,["setup","model"],ot(n,o));const r=p(e,["config"]);return r!=null&&y(s,["config"],k5(r,s)),s}function P5(n){const e={},s=p(n,["mediaResolution"]);s!=null&&y(e,["mediaResolution"],s);const o=p(n,["codeExecutionResult"]);o!=null&&y(e,["codeExecutionResult"],o);const r=p(n,["executableCode"]);r!=null&&y(e,["executableCode"],r);const c=p(n,["fileData"]);c!=null&&y(e,["fileData"],A5(c));const d=p(n,["functionCall"]);d!=null&&y(e,["functionCall"],R5(d));const h=p(n,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const g=p(n,["inlineData"]);g!=null&&y(e,["inlineData"],E5(g));const m=p(n,["text"]);m!=null&&y(e,["text"],m);const v=p(n,["thought"]);v!=null&&y(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(n,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function L5(n){const e={},s=p(n,["handle"]);if(s!=null&&y(e,["handle"],s),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function j5(n){const e={},s=p(n,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=p(n,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],o);const r=p(n,["computerUse"]);r!=null&&y(e,["computerUse"],r);const c=p(n,["fileSearch"]);c!=null&&y(e,["fileSearch"],c);const d=p(n,["codeExecution"]);if(d!=null&&y(e,["codeExecution"],d),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(n,["googleMaps"]);h!=null&&y(e,["googleMaps"],M5(h));const g=p(n,["googleSearch"]);g!=null&&y(e,["googleSearch"],I5(g));const m=p(n,["urlContext"]);return m!=null&&y(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U5(n){const e=[];for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const o=n[s];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(c=>`${s}.${c}`);e.push(...r)}else e.push(s)}return e.join(",")}function O5(n,e){let s=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const c=o.setup;typeof c=="object"&&c!==null?(n.bidiGenerateContentSetup=c,s=c):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(s){const c=U5(s);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)c?n.fieldMask=c:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>d.includes(m)?`generationConfig.${m}`:m));const g=[];c&&g.push(c),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class G5 extends si{constructor(e){super(),this.apiClient=e}async create(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=N5(this.apiClient,e);c=Ne("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const g=O5(h,e.config);return r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z5(n,e){const s={},o=p(n,["force"]);return e!==void 0&&o!=null&&y(e,["_query","force"],o),s}function F5(n){const e={},s=p(n,["name"]);s!=null&&y(e,["_url","name"],s);const o=p(n,["config"]);return o!=null&&z5(o,e),e}function B5(n){const e={},s=p(n,["name"]);return s!=null&&y(e,["_url","name"],s),e}function $5(n,e){const s={},o=p(n,["pageSize"]);e!==void 0&&o!=null&&y(e,["_query","pageSize"],o);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),s}function H5(n){const e={},s=p(n,["parent"]);s!=null&&y(e,["_url","parent"],s);const o=p(n,["config"]);return o!=null&&$5(o,e),e}function q5(n){const e={},s=p(n,["sdkHttpResponse"]);s!=null&&y(e,["sdkHttpResponse"],s);const o=p(n,["nextPageToken"]);o!=null&&y(e,["nextPageToken"],o);const r=p(n,["documents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V5 extends si{constructor(e){super(),this.apiClient=e,this.list=async s=>new xo(ti.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:s.parent,config:o.config}),await this.listInternal(s),s)}async get(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=B5(e);return c=Ne("{name}",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var s,o;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F5(e);r=Ne("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=H5(e);return c=Ne("{parent}/documents",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=q5(g),v=new _M;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J5 extends si{constructor(e,s=new V5(e)){super(),this.apiClient=e,this.documents=s,this.list=async(o={})=>new xo(ti.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=U4(e);return c=Ne("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=z4(e);return c=Ne("{name}",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var s,o;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=G4(e);r=Ne("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=V4(e);return c=Ne("fileSearchStores",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=J4(g),v=new TM;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=W4(e);return c=Ne("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=Y4(g),v=new NM;return Object.assign(v,m),v})}}async importFile(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$4(e);return c=Ne("{file_search_store_name}:importFile",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=B4(g),v=new Ep;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return fS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),s=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^s()&15>>+o/4).toString(16))};const W5=()=>fS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const $h=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class os extends Error{}let rs=class Hh extends os{constructor(e,s,o,r){super(`${Hh.makeMessage(e,s,o)}`),this.status=e,this.headers=r,this.error=s}static makeMessage(e,s,o){const r=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,o,r){if(!e||!r)return new Su({message:o,cause:$h(s)});const c=s;return e===400?new pS(e,c,o,r):e===401?new mS(e,c,o,r):e===403?new gS(e,c,o,r):e===404?new yS(e,c,o,r):e===409?new xS(e,c,o,r):e===422?new vS(e,c,o,r):e===429?new bS(e,c,o,r):e>=500?new CS(e,c,o,r):new Hh(e,c,o,r)}},qh=class extends rs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Su=class extends rs{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}},hS=class extends Su{constructor({message:e}={}){super({message:e??"Request timed out."})}},pS=class extends rs{},mS=class extends rs{},gS=class extends rs{},yS=class extends rs{},xS=class extends rs{},vS=class extends rs{},bS=class extends rs{},CS=class extends rs{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y5=/^[a-z][a-z0-9+.-]*:/i,K5=n=>Y5.test(n);let Vh=n=>(Vh=Array.isArray,Vh(n));const X5=Vh;let Q5=X5;const Qv=Q5;function Z5(n){if(!n)return!0;for(const e in n)return!1;return!0}function eP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const tP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new os(`${n} must be an integer`);if(e<0)throw new os(`${n} must be a positive integer`);return e},nP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ra="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oP=()=>{var n,e,s,o,r;const c=iP();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":eb(Deno.build.os),"X-Stainless-Arch":Zv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":eb((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":Zv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=aP();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function aP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of n){const o=s.exec(navigator.userAgent);if(o){const r=o[1]||0,c=o[2]||0,d=o[3]||0;return{browser:e,version:`${r}.${c}.${d}`}}}return null}const Zv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",eb=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let hc;const rP=()=>hc??(hc=oP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function SS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function cP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return SS({start(){},async pull(s){const{done:o,value:r}=await e.next();o?s.close():s.enqueue(r)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function wS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uP(n){var e,s;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((s=(e=n[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ih(n,e,s){return ES(),new File(n,e??"unknown_file",s)}function fP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const hP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _S=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",pP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&_S(n),mP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function gP(n,e,s){if(ES(),n=await n,pP(n))return n instanceof File?n:ih([await n.arrayBuffer()],n.name);if(mP(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ih(await Jh(r),e,s)}const o=await Jh(n);if(e||(e=fP(n)),!(s!=null&&s.type)){const r=o.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof r=="string"&&(s=Object.assign(Object.assign({},s),{type:r}))}return ih(o,e,s)}async function Jh(n){var e,s,o,r,c;let d=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)d.push(n);else if(_S(n))d.push(n instanceof Blob?n:await n.arrayBuffer());else if(hP(n))try{for(var h=!0,g=gs(n),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const v=r;d.push(...await Jh(v))}}catch(v){s={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(s)throw s.error}}else{const v=(c=n==null?void 0:n.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${yP(n)}`)}return d}function yP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TS=class{constructor(e){this._client=e}};TS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const tb=Object.freeze(Object.create(null)),xP=(n=NS)=>(function(s,...o){if(s.length===1)return s[0];let r=!1;const c=[],d=s.reduce((v,b,S)=>{var E,T,R;/[?#]/.test(b)&&(r=!0);const _=o[S];let M=(r?encodeURIComponent:n)(""+_);return S!==o.length&&(_==null||typeof _=="object"&&_.toString===((R=Object.getPrototypeOf((T=Object.getPrototypeOf((E=_.hasOwnProperty)!==null&&E!==void 0?E:tb))!==null&&T!==void 0?T:tb))===null||R===void 0?void 0:R.toString))&&(M=_+"",c.push({start:v.length+b.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),v+b+(S===o.length?"":M)},""),h=d.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)c.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(c.sort((v,b)=>v.start-b.start),c.length>0){let v=0;const b=c.reduce((S,E)=>{const T=" ".repeat(E.start-v),R="^".repeat(E.length);return v=E.start+E.length,S+T+R},"");throw new os(`Path parameters result in path with invalid segments:
${c.map(S=>S.error).join(`
`)}
${d}
${b}`)}return d}),pc=xP(NS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AS extends TS{create(e,s){var o;const{api_version:r=this._client.apiVersion}=e,c=Kc(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new os("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new os("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(pc`/${r}/interactions`,Object.assign(Object.assign({body:c},s),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.delete(pc`/${r}/interactions/${e}`,o)}cancel(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.post(pc`/${r}/interactions/${e}/cancel`,o)}get(e,s={},o){var r;const c=s??{},{api_version:d=this._client.apiVersion}=c,h=Kc(c,["api_version"]);return this._client.get(pc`/${d}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=s==null?void 0:s.stream)!==null&&r!==void 0?r:!1}))}}AS._key=Object.freeze(["interactions"]);class RS extends AS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vP(n){let e=0;for(const r of n)e+=r.length;const s=new Uint8Array(e);let o=0;for(const r of n)s.set(r,o),o+=r.length;return s}let mc;function Ip(n){let e;return(mc??(e=new globalThis.TextEncoder,mc=e.encode.bind(e)))(n)}let gc;function nb(n){let e;return(gc??(e=new globalThis.TextDecoder,gc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wu=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ip(e):e;this.buffer=vP([this.buffer,s]);const o=[];let r;for(;(r=bP(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(nb(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=nb(this.buffer.subarray(0,c));o.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};wu.NEWLINE_CHARS=new Set([`
`,"\r"]);wu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bP(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function CP(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xc={off:0,error:200,warn:300,info:400,debug:500},sb=(n,e,s)=>{if(n){if(eP(Xc,n))return n;yn(s).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Xc))}`)}};function Er(){}function yc(n,e,s){return!e||Xc[n]>Xc[s]?Er:e[n].bind(e)}const SP={error:Er,warn:Er,info:Er,debug:Er};let ib=new WeakMap;function yn(n){var e;const s=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!s)return SP;const r=ib.get(s);if(r&&r[0]===o)return r[1];const c={error:yc("error",s,o),warn:yc("warn",s,o),info:yc("info",s,o),debug:yc("debug",s,o)};return ib.set(s,[o,c]),c}const ro=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wP=class _r{constructor(e,s,o){this.iterator=e,this.controller=s,this.client=o}static fromSSEResponse(e,s,o){let r=!1;const c=o?yn(o):console;function d(){return ms(this,arguments,function*(){var g,m,v,b;if(r)throw new os("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,T=gs(EP(e,s)),R;R=yield He(T.next()),g=R.done,!g;E=!0){b=R.value,E=!1;const _=b;if(!S)if(_.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield He(JSON.parse(_.data))}catch(M){throw c.error("Could not parse message into JSON:",_.data),c.error("From chunk:",_.raw),M}}}catch(_){m={error:_}}finally{try{!E&&!g&&(v=T.return)&&(yield He(v.call(T)))}finally{if(m)throw m.error}}S=!0}catch(_){if(Bh(_))return yield He(void 0);throw _}finally{S||s.abort()}})}return new _r(d,s,o)}static fromReadableStream(e,s,o){let r=!1;function c(){return ms(this,arguments,function*(){var g,m,v,b;const S=new wu,E=wS(e);try{for(var T=!0,R=gs(E),_;_=yield He(R.next()),g=_.done,!g;T=!0){b=_.value,T=!1;const M=b;for(const k of S.decode(M))yield yield He(k)}}catch(M){m={error:M}}finally{try{!T&&!g&&(v=R.return)&&(yield He(v.call(R)))}finally{if(m)throw m.error}}for(const M of S.flush())yield yield He(M)})}function d(){return ms(this,arguments,function*(){var g,m,v,b;if(r)throw new os("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var E=!0,T=gs(c()),R;R=yield He(T.next()),g=R.done,!g;E=!0){b=R.value,E=!1;const _=b;S||_&&(yield yield He(JSON.parse(_)))}}catch(_){m={error:_}}finally{try{!E&&!g&&(v=T.return)&&(yield He(v.call(T)))}finally{if(m)throw m.error}}S=!0}catch(_){if(Bh(_))return yield He(void 0);throw _}finally{S||s.abort()}})}return new _r(d,s,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),r=c=>({next:()=>{if(c.length===0){const d=o.next();e.push(d),s.push(d)}return c.shift()}});return[new _r(()=>r(e),this.controller,this.client),new _r(()=>r(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return SS({async start(){s=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:c}=await s.next();if(c)return o.close();const d=Ip(JSON.stringify(r)+`
`);o.enqueue(d)}catch(r){o.error(r)}},async cancel(){var o;await((o=s.return)===null||o===void 0?void 0:o.call(s))}})}};function EP(n,e){return ms(this,arguments,function*(){var o,r,c,d;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new os("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new os("Attempted to iterate over a response with no body");const h=new TP,g=new wu,m=wS(n.body);try{for(var v=!0,b=gs(_P(m)),S;S=yield He(b.next()),o=S.done,!o;v=!0){d=S.value,v=!1;const E=d;for(const T of g.decode(E)){const R=h.decode(T);R&&(yield yield He(R))}}}catch(E){r={error:E}}finally{try{!v&&!o&&(c=b.return)&&(yield He(c.call(b)))}finally{if(r)throw r.error}}for(const E of g.flush()){const T=h.decode(E);T&&(yield yield He(T))}})}function _P(n){return ms(this,arguments,function*(){var s,o,r,c;let d=new Uint8Array;try{for(var h=!0,g=gs(n),m;m=yield He(g.next()),s=m.done,!s;h=!0){c=m.value,h=!1;const v=c;if(v==null)continue;const b=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Ip(v):v;let S=new Uint8Array(d.length+b.length);S.set(d),S.set(b,d.length),d=S;let E;for(;(E=CP(d))!==-1;)yield yield He(d.slice(0,E)),d=d.slice(E)}}catch(v){o={error:v}}finally{try{!h&&!s&&(r=g.return)&&(yield He(r.call(g)))}finally{if(o)throw o.error}}d.length>0&&(yield yield He(d))})}let TP=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,r]=NP(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}};function NP(n,e){const s=n.indexOf(e);return s!==-1?[n.substring(0,s),e,n.substring(s+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AP(n,e){const{response:s,requestLogID:o,retryOfRequestLogID:r,startTime:c}=e,d=await(async()=>{var h;if(e.options.stream)return yn(n).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,n):wP.fromSSEResponse(s,e.controller,n);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const g=s.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await s.json():await s.text()})();return yn(n).debug(`[${o}] response parsed`,ro({retryOfRequestLogID:r,url:s.url,status:s.status,body:d,durationMs:Date.now()-c})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RP=class MS extends Promise{constructor(e,s,o=AP){super(r=>{r(null)}),this.responsePromise=s,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new MS(this.client,this.responsePromise,async(s,o)=>e(await this.parseResponse(s,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IS=Symbol("brand.privateNullableHeaders");function*MP(n){if(!n)return;if(IS in n){const{values:o,nulls:r}=n;yield*o.entries();for(const c of r)yield[c,null];return}let e=!1,s;n instanceof Headers?s=n.entries():Qv(n)?s=n:(e=!0,s=Object.entries(n??{}));for(let o of s){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const c=Qv(o[1])?o[1]:[o[1]];let d=!1;for(const h of c)h!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,h])}}const oh=n=>{const e=new Headers,s=new Set;for(const o of n){const r=new Set;for(const[c,d]of MP(o)){const h=c.toLowerCase();r.has(h)||(e.delete(c),r.add(h)),d===null?(e.delete(c),s.add(h)):(e.append(c,d),s.delete(h))}}return{[IS]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ah=n=>{var e,s,o,r,c,d;if(typeof globalThis.process<"u")return(o=(s=(e=eM)===null||e===void 0?void 0:e[n])===null||s===void 0?void 0:s.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(d=(c=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||c===void 0?void 0:c.call(r,n))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kS;class Eu{constructor(e){var s,o,r,c,d,h,g,m=e===void 0?{}:e,{baseURL:v=ah("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:b=(s=ah("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:S="v1beta"}=m,E=Kc(m,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:b,apiVersion:S},E),{baseURL:v||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(o=T.timeout)!==null&&o!==void 0?o:Eu.DEFAULT_TIMEOUT,this.logger=(r=T.logger)!==null&&r!==void 0?r:console;const R="warn";this.logLevel=R,this.logLevel=(d=(c=sb(T.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:sb(ah("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:R,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:lP(),this.encoder=dP,this._options=T,this.apiKey=b,this.apiVersion=S}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return oh([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([s,o])=>typeof o<"u").map(([s,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(s)}=`;throw new os(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${W5()}`}makeStatusError(e,s,o,r){return rs.generate(e,s,o,r)}buildURL(e,s,o){const r=!this.baseURLOverridden()&&o||this.baseURL,c=K5(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return Z5(d)||(s=Object.assign(Object.assign({},d),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(c.search=this.stringifyQuery(s)),c.toString()}async prepareOptions(e){}async prepareRequest(e,{url:s,options:o}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:s},r)))}request(e,s=null){return new RP(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,o){var r,c,d;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s==null&&(s=g),await this.prepareOptions(h);const{req:m,url:v,timeout:b}=await this.buildRequest(h,{retryCount:g-s});await this.prepareRequest(m,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=o===void 0?"":`, retryOf: ${o}`,T=Date.now();if(yn(this).debug(`[${S}] sending request`,ro({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:m.headers})),!((c=h.signal)===null||c===void 0)&&c.aborted)throw new qh;const R=new AbortController,_=await this.fetchWithTimeout(v,m,b,R).catch($h),M=Date.now();if(_ instanceof globalThis.Error){const I=`retrying, ${s} attempts remaining`;if(!((d=h.signal)===null||d===void 0)&&d.aborted)throw new qh;const j=Bh(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(s)return yn(this).info(`[${S}] connection ${j?"timed out":"failed"} - ${I}`),yn(this).debug(`[${S}] connection ${j?"timed out":"failed"} (${I})`,ro({retryOfRequestLogID:o,url:v,durationMs:M-T,message:_.message})),this.retryRequest(h,s,o??S);throw yn(this).info(`[${S}] connection ${j?"timed out":"failed"} - error; no more retries left`),yn(this).debug(`[${S}] connection ${j?"timed out":"failed"} (error; no more retries left)`,ro({retryOfRequestLogID:o,url:v,durationMs:M-T,message:_.message})),j?new hS:new Su({cause:_})}const k=`[${S}${E}] ${m.method} ${v} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${M-T}ms`;if(!_.ok){const I=await this.shouldRetry(_);if(s&&I){const V=`retrying, ${s} attempts remaining`;return await uP(_.body),yn(this).info(`${k} - ${V}`),yn(this).debug(`[${S}] response error (${V})`,ro({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:M-T})),this.retryRequest(h,s,o??S,_.headers)}const j=I?"error; no more retries left":"error; not retryable";yn(this).info(`${k} - ${j}`);const J=await _.text().catch(V=>$h(V).message),Z=nP(J),$=Z?void 0:J;throw yn(this).debug(`[${S}] response error (${j})`,ro({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,message:$,durationMs:Date.now()-T})),this.makeStatusError(_.status,Z,$,_.headers)}return yn(this).info(k),yn(this).debug(`[${S}] response start`,ro({retryOfRequestLogID:o,url:_.url,status:_.status,headers:_.headers,durationMs:M-T})),{response:_,options:h,controller:R,requestLogID:S,retryOfRequestLogID:o,startTime:T}}async fetchWithTimeout(e,s,o,r){const c=s||{},{signal:d,method:h}=c,g=Kc(c,["signal","method"]);d&&d.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(b.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(m)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o,r){var c;let d;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(d=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!d){const m=parseFloat(g);Number.isNaN(m)?d=Date.parse(g)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(s,m)}return await sP(d),this.makeRequest(e,s-1,o)}calculateDefaultRetryTimeoutMillis(e,s){const c=s-e,d=Math.min(.5*Math.pow(2,c),8),h=1-Math.random()*.25;return d*h*1e3}async buildRequest(e,{retryCount:s=0}={}){var o,r,c;const d=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:v}=d,b=this.buildURL(g,m,v);"timeout"in d&&tP("timeout",d.timeout),d.timeout=(o=d.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:E}=this.buildBody({options:d}),T=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:T},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(c=d.fetchOptions)!==null&&c!==void 0?c:{}),url:b,timeout:d.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:o,retryCount:r}){let c={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const d=oh([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rP()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=oh([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cP(e)}:this.encoder({body:e,headers:o})}}Eu.DEFAULT_TIMEOUT=6e4;class en extends Eu{constructor(){super(...arguments),this.interactions=new RS(this)}}kS=en;en.GeminiNextGenAPIClient=kS;en.GeminiNextGenAPIClientError=os;en.APIError=rs;en.APIConnectionError=Su;en.APIConnectionTimeoutError=hS;en.APIUserAbortError=qh;en.NotFoundError=yS;en.ConflictError=xS;en.RateLimitError=bS;en.BadRequestError=pS;en.AuthenticationError=mS;en.InternalServerError=CS;en.PermissionDeniedError=gS;en.UnprocessableEntityError=vS;en.toFile=gP;en.Interactions=RS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IP(n,e){const s={},o=p(n,["name"]);return o!=null&&y(s,["_url","name"],o),s}function kP(n,e){const s={},o=p(n,["name"]);return o!=null&&y(s,["_url","name"],o),s}function DP(n,e){const s={},o=p(n,["sdkHttpResponse"]);return o!=null&&y(s,["sdkHttpResponse"],o),s}function PP(n,e){const s={},o=p(n,["sdkHttpResponse"]);return o!=null&&y(s,["sdkHttpResponse"],o),s}function LP(n,e,s){const o={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=p(n,["epochCount"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","epochCount"],c);const d=p(n,["learningRateMultiplier"]);if(d!=null&&y(o,["tuningTask","hyperparameters","learningRateMultiplier"],d),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=p(n,["batchSize"]);e!==void 0&&h!=null&&y(e,["tuningTask","hyperparameters","batchSize"],h);const g=p(n,["learningRate"]);if(e!==void 0&&g!=null&&y(e,["tuningTask","hyperparameters","learningRate"],g),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function jP(n,e,s){const o={};let r=p(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=p(n,["validationDataset"]);e!==void 0&&E!=null&&y(e,["supervisedTuningSpec"],ob(E))}else if(r==="PREFERENCE_TUNING"){const E=p(n,["validationDataset"]);e!==void 0&&E!=null&&y(e,["preferenceOptimizationSpec"],ob(E))}const c=p(n,["tunedModelDisplayName"]);e!==void 0&&c!=null&&y(e,["tunedModelDisplayName"],c);const d=p(n,["description"]);e!==void 0&&d!=null&&y(e,["description"],d);let h=p(s,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=p(n,["epochCount"]);e!==void 0&&E!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(h==="PREFERENCE_TUNING"){const E=p(n,["epochCount"]);e!==void 0&&E!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let g=p(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const E=p(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(g==="PREFERENCE_TUNING"){const E=p(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let m=p(s,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=p(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(m==="PREFERENCE_TUNING"){const E=p(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let v=p(s,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const E=p(n,["adapterSize"]);e!==void 0&&E!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(v==="PREFERENCE_TUNING"){const E=p(n,["adapterSize"]);e!==void 0&&E!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=p(n,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const S=p(n,["beta"]);return e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function UP(n,e){const s={},o=p(n,["baseModel"]);o!=null&&y(s,["baseModel"],o);const r=p(n,["preTunedModel"]);r!=null&&y(s,["preTunedModel"],r);const c=p(n,["trainingDataset"]);c!=null&&WP(c);const d=p(n,["config"]);return d!=null&&LP(d,s),s}function OP(n,e){const s={},o=p(n,["baseModel"]);o!=null&&y(s,["baseModel"],o);const r=p(n,["preTunedModel"]);r!=null&&y(s,["preTunedModel"],r);const c=p(n,["trainingDataset"]);c!=null&&YP(c,s,e);const d=p(n,["config"]);return d!=null&&jP(d,s,e),s}function GP(n,e){const s={},o=p(n,["name"]);return o!=null&&y(s,["_url","name"],o),s}function zP(n,e){const s={},o=p(n,["name"]);return o!=null&&y(s,["_url","name"],o),s}function FP(n,e,s){const o={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const c=p(n,["pageToken"]);e!==void 0&&c!=null&&y(e,["_query","pageToken"],c);const d=p(n,["filter"]);return e!==void 0&&d!=null&&y(e,["_query","filter"],d),o}function BP(n,e,s){const o={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const c=p(n,["pageToken"]);e!==void 0&&c!=null&&y(e,["_query","pageToken"],c);const d=p(n,["filter"]);return e!==void 0&&d!=null&&y(e,["_query","filter"],d),o}function $P(n,e){const s={},o=p(n,["config"]);return o!=null&&FP(o,s),s}function HP(n,e){const s={},o=p(n,["config"]);return o!=null&&BP(o,s),s}function qP(n,e){const s={},o=p(n,["sdkHttpResponse"]);o!=null&&y(s,["sdkHttpResponse"],o);const r=p(n,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const c=p(n,["tunedModels"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>DS(h))),y(s,["tuningJobs"],d)}return s}function VP(n,e){const s={},o=p(n,["sdkHttpResponse"]);o!=null&&y(s,["sdkHttpResponse"],o);const r=p(n,["nextPageToken"]);r!=null&&y(s,["nextPageToken"],r);const c=p(n,["tuningJobs"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>Wh(h))),y(s,["tuningJobs"],d)}return s}function JP(n,e){const s={},o=p(n,["name"]);o!=null&&y(s,["model"],o);const r=p(n,["name"]);return r!=null&&y(s,["endpoint"],r),s}function WP(n,e){const s={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=p(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>c)),y(s,["examples","examples"],r)}return s}function YP(n,e,s){const o={};let r=p(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=p(n,["gcsUri"]);e!==void 0&&d!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=p(n,["gcsUri"]);e!==void 0&&d!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let c=p(s,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const d=p(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(c==="PREFERENCE_TUNING"){const d=p(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function DS(n,e){const s={},o=p(n,["sdkHttpResponse"]);o!=null&&y(s,["sdkHttpResponse"],o);const r=p(n,["name"]);r!=null&&y(s,["name"],r);const c=p(n,["state"]);c!=null&&y(s,["state"],VC(c));const d=p(n,["createTime"]);d!=null&&y(s,["createTime"],d);const h=p(n,["tuningTask","startTime"]);h!=null&&y(s,["startTime"],h);const g=p(n,["tuningTask","completeTime"]);g!=null&&y(s,["endTime"],g);const m=p(n,["updateTime"]);m!=null&&y(s,["updateTime"],m);const v=p(n,["description"]);v!=null&&y(s,["description"],v);const b=p(n,["baseModel"]);b!=null&&y(s,["baseModel"],b);const S=p(n,["_self"]);return S!=null&&y(s,["tunedModel"],JP(S)),s}function Wh(n,e){const s={},o=p(n,["sdkHttpResponse"]);o!=null&&y(s,["sdkHttpResponse"],o);const r=p(n,["name"]);r!=null&&y(s,["name"],r);const c=p(n,["state"]);c!=null&&y(s,["state"],VC(c));const d=p(n,["createTime"]);d!=null&&y(s,["createTime"],d);const h=p(n,["startTime"]);h!=null&&y(s,["startTime"],h);const g=p(n,["endTime"]);g!=null&&y(s,["endTime"],g);const m=p(n,["updateTime"]);m!=null&&y(s,["updateTime"],m);const v=p(n,["error"]);v!=null&&y(s,["error"],v);const b=p(n,["description"]);b!=null&&y(s,["description"],b);const S=p(n,["baseModel"]);S!=null&&y(s,["baseModel"],S);const E=p(n,["tunedModel"]);E!=null&&y(s,["tunedModel"],E);const T=p(n,["preTunedModel"]);T!=null&&y(s,["preTunedModel"],T);const R=p(n,["supervisedTuningSpec"]);R!=null&&y(s,["supervisedTuningSpec"],R);const _=p(n,["preferenceOptimizationSpec"]);_!=null&&y(s,["preferenceOptimizationSpec"],_);const M=p(n,["tuningDataStats"]);M!=null&&y(s,["tuningDataStats"],M);const k=p(n,["encryptionSpec"]);k!=null&&y(s,["encryptionSpec"],k);const I=p(n,["partnerModelTuningSpec"]);I!=null&&y(s,["partnerModelTuningSpec"],I);const j=p(n,["customBaseModel"]);j!=null&&y(s,["customBaseModel"],j);const J=p(n,["experiment"]);J!=null&&y(s,["experiment"],J);const Z=p(n,["labels"]);Z!=null&&y(s,["labels"],Z);const $=p(n,["outputUri"]);$!=null&&y(s,["outputUri"],$);const ce=p(n,["pipelineJob"]);ce!=null&&y(s,["pipelineJob"],ce);const V=p(n,["serviceAccount"]);V!=null&&y(s,["serviceAccount"],V);const le=p(n,["tunedModelDisplayName"]);le!=null&&y(s,["tunedModelDisplayName"],le);const ie=p(n,["veoTuningSpec"]);return ie!=null&&y(s,["veoTuningSpec"],ie),s}function KP(n,e){const s={},o=p(n,["sdkHttpResponse"]);o!=null&&y(s,["sdkHttpResponse"],o);const r=p(n,["name"]);r!=null&&y(s,["name"],r);const c=p(n,["metadata"]);c!=null&&y(s,["metadata"],c);const d=p(n,["done"]);d!=null&&y(s,["done"],d);const h=p(n,["error"]);return h!=null&&y(s,["error"],h),s}function ob(n,e){const s={},o=p(n,["gcsUri"]);o!=null&&y(s,["validationDatasetUri"],o);const r=p(n,["vertexDatasetResource"]);return r!=null&&y(s,["validationDatasetUri"],r),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XP extends si{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new xo(ti.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var o;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const r={tunedModelName:s.baseModel};!((o=s.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=s.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},s),{preTunedModel:r});return c.baseModel=void 0,await this.tuneInternal(c)}else{const r=Object.assign({},s);return await this.tuneInternal(r)}else{const r=Object.assign({},s),c=await this.tuneMldevInternal(r);let d="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?d=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:Lh.JOB_STATE_QUEUED}}}}async getInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=zP(e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>Wh(v))}else{const m=GP(e);return h=Ne("{name}",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>DS(v))}}async listInternal(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=HP(e);return h=Ne("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=VP(v),S=new Iv;return Object.assign(S,b),S})}else{const m=$P(e);return h=Ne("tunedModels",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=qP(v),S=new Iv;return Object.assign(S,b),S})}}async cancel(e){var s,o,r,c;let d,h="",g={};if(this.apiClient.isVertexAI()){const m=kP(e);return h=Ne("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=PP(v),S=new kv;return Object.assign(S,b),S})}else{const m=IP(e);return h=Ne("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const b=DP(v),S=new kv;return Object.assign(S,b),S})}}async tuneInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI()){const h=OP(e,e);return c=Ne("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>Wh(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,o;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=UP(e);return c=Ne("tunedModels",h._url),d=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>KP(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QP{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ZP=1024*1024*8,eL=3,tL=1e3,nL=2,Qc="x-goog-upload-status";async function sL(n,e,s){var o;const r=await PS(n,e,s),c=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Qc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function iL(n,e,s){var o;const r=await PS(n,e,s),c=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Qc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=zC(c),h=new _p;return Object.assign(h,d),h}async function PS(n,e,s){var o,r;let c=0,d=0,h=new jh(new Response),g="upload";for(c=n.size;d<c;){const m=Math.min(ZP,c-d),v=n.slice(d,d+m);d+m>=c&&(g+=", finalize");let b=0,S=tL;for(;b<eL&&(h=await s.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(d),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Qc]));)b++,await aL(S),S=S*nL;if(d+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[Qc])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function oL(n){return{size:n.size,type:n.type}}function aL(n){return new Promise(e=>setTimeout(e,n))}class rL{async upload(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sL(e,s,o)}async uploadToFileSearchStore(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iL(e,s,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lL{create(e,s,o){return new cL(e,s,o)}}class cL{constructor(e,s,o){this.url=e,this.headers=s,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ab="x-goog-api-key";class uL{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(ab)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ab,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dL="gl-node/";class rb{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new en({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=s.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const o=iM(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new uL(this.apiKey);this.apiClient=new s5({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:dL+"web",uploader:new rL,downloader:new QP}),this.models=new S5(this.apiClient),this.live=new g5(this.apiClient,r,new lL),this.batches=new DI(this.apiClient),this.chats=new pk(this.models,this.apiClient),this.caches=new dk(this.apiClient),this.files=new Ek(this.apiClient),this.operations=new w5(this.apiClient),this.authTokens=new G5(this.apiClient),this.tunings=new XP(this.apiClient),this.fileSearchStores=new J5(this.apiClient)}}const fL={string:It.STRING,number:It.NUMBER,integer:It.INTEGER,boolean:It.BOOLEAN,array:It.ARRAY,object:It.OBJECT,null:It.STRING};function Zc(n){const e={type:fL[n.type]||It.STRING};if(n.description&&(e.description=n.description),n.nullable&&(e.nullable=!0),n.enum&&n.enum.length>0&&(e.enum=n.enum),n.type==="object"&&n.properties){e.properties={};for(const[s,o]of Object.entries(n.properties))e.properties[s]=Zc(o);n.required&&n.required.length>0&&(e.required=n.required)}return n.type==="array"&&n.items&&(e.items=Zc(n.items)),e}It.STRING+"",It.NUMBER+"",It.INTEGER+"",It.BOOLEAN+"",It.ARRAY+"",It.OBJECT+"";function eu(n){const e={type:n.type};if(n.description&&(e.description=n.description),n.enum&&n.enum.length>0&&(e.enum=n.enum),n.type==="object"&&n.properties){e.properties={};for(const[s,o]of Object.entries(n.properties))e.properties[s]=eu(o);n.required&&n.required.length>0&&(e.required=n.required),e.additionalProperties=!1}return n.type==="array"&&n.items&&(e.items=eu(n.items)),e}class hL{constructor(e,s){this.requestHistory=[],this.name=e,this.maxRequests=s.maxRequests,this.windowMs=s.windowMs,this.safetyBufferMs=s.safetyBufferMs??3e3}async enforce(){const e=Date.now();if(this.requestHistory=this.requestHistory.filter(s=>e-s<this.windowMs),this.requestHistory.length>=this.maxRequests){const o=this.requestHistory[0]+this.windowMs,r=Math.max(0,o-e+this.safetyBufferMs);r>0&&(console.log(`[${this.name} Rate Limiter] Quota hit (${this.requestHistory.length}/${this.maxRequests}). Waiting ${Math.ceil(r)}ms...`),await new Promise(c=>setTimeout(c,r)))}this.requestHistory.push(Date.now())}getStats(){const e=Date.now();return this.requestHistory=this.requestHistory.filter(s=>e-s<this.windowMs),{current:this.requestHistory.length,max:this.maxRequests,windowMs:this.windowMs}}reset(){this.requestHistory=[]}}const rh=new Map;function LS(n,e){const s=`${n}-${e.maxRequests}-${e.windowMs}`;return rh.has(s)||rh.set(s,new hL(n,e)),rh.get(s)}const pL={type:"array",items:{type:"object",properties:{name:{type:"string"},tags:{type:"array",items:{type:"string"}},components:{type:"object",description:"Map of component IDs to their data objects",nullable:!0}},required:["name","tags","components"]}};class lb{constructor(e){this.name="gemini",this.ai=null;const s=Cp.gemini;this.apiKey=(e==null?void 0:e.apiKey)||"PLACEHOLDER_API_KEY",this.modelName=(e==null?void 0:e.model)||s.model;const o=(e==null?void 0:e.rateLimit)||s.rateLimit;this.rateLimiter=LS("Gemini",{maxRequests:o.maxRequests,windowMs:o.windowMs}),this.apiKey&&(this.ai=new rb({apiKey:this.apiKey}))}configure(e,s){this.apiKey=e,s&&(this.modelName=s),e?this.ai=new rb({apiKey:e}):this.ai=null}isConfigured(){return!!this.apiKey&&!!this.ai}async generateStructuredData(e,s,o,r=.3){var v;if(!this.ai)throw new Error("Gemini API not configured. Please provide an API key.");await this.rateLimiter.enforce();const c=Zc(o),d=await this.ai.models.generateContent({model:this.modelName,contents:s,config:{systemInstruction:e,responseMimeType:"application/json",responseSchema:c,temperature:r}}),h=d.text||"{}",g=((v=d.usageMetadata)==null?void 0:v.totalTokenCount)||0,m=this.cleanJsonOutput(h);return{data:JSON.parse(m),tokens:g,raw:h}}async generateBatch(e,s,o,r,c,d,h,g=.9){if(!this.ai)throw new Error("Gemini API not configured. Please provide an API key.");const m=this.buildSystemPrompt(e,o,r,c,!!d),v=Zc(d||pL),b=3;let S=0,E;for(;S<b;)try{S++,await this.rateLimiter.enforce();const R=(await this.ai.models.generateContent({model:this.modelName,contents:s,config:{systemInstruction:m,responseMimeType:"application/json",responseSchema:v,temperature:g}})).text||"[]",_=this.cleanJsonOutput(R);let M=this.parseJsonWithSalvage(_);if(!Array.isArray(M))throw new Error("Model returned object instead of array.");const k=h?new Set(h):void 0;return M.map(I=>this.normalizeEntity(I,k))}catch(T){if(console.warn(`Gemini Generation Attempt ${S} Failed:`,T.message),E=T,S<b){const R=1e3*Math.pow(2,S-1);await new Promise(_=>setTimeout(_,R))}}throw new Error(`Generation failed after ${b} attempts. Last error: ${E==null?void 0:E.message}`)}cleanJsonOutput(e){let s=e.trim();return s=s.replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/,""),s.trim()}parseJsonWithSalvage(e){try{return JSON.parse(e)}catch(s){console.warn("JSON Parse Failed. Attempting salvage...");const o=this.trySalvageJson(e);if(o)return o;throw s}}trySalvageJson(e){try{if(e.lastIndexOf("},")===-1)return null;const o=e.lastIndexOf("}");if(o===-1)return null;const c=e.substring(0,o+1)+"]";return JSON.parse(c)}catch{return null}}normalizeEntity(e,s){var d;const o=e.components||{},r={},c=["metadata","lore","rarity","relations"];return Object.keys(o).forEach(h=>{s?(s.has(h)||c.includes(h))&&(r[h]=o[h]):r[h]=o[h]}),{id:crypto.randomUUID(),name:e.name||"Unnamed Entity",tags:Array.isArray(e.tags)?e.tags:[],components:{...r,metadata:{id:crypto.randomUUID(),created:Date.now(),rarity:((d=o.rarity)==null?void 0:d.value)||"Common",...r.metadata||{}}}}}buildSystemPrompt(e,s,o,r,c){const d=c?"STRICTLY FOLLOW the provided JSON schema. Do not invent fields.":"Follow the standard Entity Component System structure.";let h="";return r.language==="Chinese"?(h=`- 'tags': Return tags as an array of strings in SIMPLIFIED CHINESE characters. Do NOT use English.
`,h+="- TAG FORMAT: You SHOULD include a brief description for new tags using the format 'TagLabel|Description'."):(h=`- 'tags': Normalize tags to Title Case IDs.
`,h+="- TAG FORMAT: You SHOULD include a brief description for new tags using the format 'TagLabel|Description'."),`
            You are the 'Nexus Forge' Database Architect.
            
            WORLD CONTEXT:
            ${o}
            
            TASK:
            Generate ${s} distinct Entities for the pool '${e}'.
            
            ${this.buildCommonPromptSections(r)}
            
            CRITICAL INSTRUCTIONS:
            - ${d}
            - Output RAW JSON only. No markdown formatting, no conversational text.
            ${h}
            - Ensure all required fields are present.
        `}buildCommonPromptSections(e){var h,g,m;const s=e.toneInstruction?`WRITING STYLE: ${e.toneInstruction}`:"WRITING STYLE: Standard RPG description.",o=e.language==="Chinese"?"OUTPUT LANGUAGE: Chinese (Simplified). Names, Descriptions, and Tags must be in Chinese.":"OUTPUT LANGUAGE: English.",r=e.lengthInstruction?`LENGTH CONSTRAINT: ${e.lengthInstruction} ${e.lengthPerField?"(Apply to EACH field)":"(Total budget)"}`:"";let c="";if(e.allowedTags&&e.allowedTags.length>0){const v=e.allowedTags.join(", ");c=e.strictTags?`TAGS: STRICTLY use ONLY these tags: [${v}].`:`TAGS: Select from: [${v}]. You may invent others if necessary.`}else c="TAGS: Assign relevant semantic tags.";let d="";return e.contextItems&&e.contextItems.length>0&&(d=`RELATIONSHIPS: ${e.contextItems.map(v=>`Must match "${v.name}" (${v.relationType})`).join(", ")}`),`
            ${s}
            ${r}
            ${e.rarity&&e.rarity!=="Any"?`- Rarity: ${e.rarity}`:""}
            ${(h=e.attributes)!=null&&h.length?`- Concepts: ${e.attributes.join(", ")}`:""}
            ${(g=e.negativeConstraints)!=null&&g.length?`- Avoid: ${e.negativeConstraints.join(", ")}`:""}
            ${c}
            ${d}
            ${(m=e.tagDefinitions)!=null&&m.length?`GLOSSARY:
${e.tagDefinitions.join(`
`)}`:""}
            ${o}
            NOTE: Where applicable, populate the 'relations' component with connections to other entities.
        `}}function Fe(n,e,s,o,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,s),s}function Q(n,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(n):o?o.value:e.get(n)}let jS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return jS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),s=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^s()&15>>+o/4).toString(16))};function Yh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Kh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class je extends Error{}class un extends je{constructor(e,s,o,r){super(`${un.makeMessage(e,s,o)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=s;const c=s;this.code=c==null?void 0:c.code,this.param=c==null?void 0:c.param,this.type=c==null?void 0:c.type}static makeMessage(e,s,o){const r=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,o,r){if(!e||!r)return new _u({message:o,cause:Kh(s)});const c=s==null?void 0:s.error;return e===400?new US(e,c,o,r):e===401?new OS(e,c,o,r):e===403?new GS(e,c,o,r):e===404?new zS(e,c,o,r):e===409?new FS(e,c,o,r):e===422?new BS(e,c,o,r):e===429?new $S(e,c,o,r):e>=500?new HS(e,c,o,r):new un(e,c,o,r)}}class ns extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _u extends un{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class kp extends _u{constructor({message:e}={}){super({message:e??"Request timed out."})}}class US extends un{}class OS extends un{}class GS extends un{}class zS extends un{}class FS extends un{}class BS extends un{}class $S extends un{}class HS extends un{}class qS extends je{constructor(){super("Could not parse response content as the length limit was reached")}}class VS extends je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Tr extends Error{constructor(e){super(e)}}const mL=/^[a-z][a-z0-9+.-]*:/i,gL=n=>mL.test(n);let In=n=>(In=Array.isArray,In(n)),cb=In;function JS(n){return typeof n!="object"?{}:n??{}}function yL(n){if(!n)return!0;for(const e in n)return!1;return!0}function xL(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function lh(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const vL=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new je(`${n} must be an integer`);if(e<0)throw new je(`${n} must be a positive integer`);return e},bL=n=>{try{return JSON.parse(n)}catch{return}},Jr=n=>new Promise(e=>setTimeout(e,n)),la="6.10.0",CL=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function SL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wL=()=>{var s;const n=SL();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":db(Deno.build.os),"X-Stainless-Arch":ub(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((s=Deno.version)==null?void 0:s.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":db(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ub(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=EL();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":la,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function EL(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of n){const o=s.exec(navigator.userAgent);if(o){const r=o[1]||0,c=o[2]||0,d=o[3]||0;return{browser:e,version:`${r}.${c}.${d}`}}}return null}const ub=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",db=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let fb;const _L=()=>fb??(fb=wL());function TL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function WS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function YS(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return WS({start(){},async pull(s){const{done:o,value:r}=await e.next();o?s.close():s.enqueue(r)},async cancel(){var s;await((s=e.return)==null?void 0:s.call(e))}})}function KS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function NL(n){var o,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(o=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(o));return}const e=n.getReader(),s=e.cancel();e.releaseLock(),await s}const AL=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),XS="RFC3986",QS=n=>String(n),hb={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:QS},RL="RFC1738";let Xh=(n,e)=>(Xh=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Xh(n,e));const ws=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),ch=1024,ML=(n,e,s,o,r)=>{if(n.length===0)return n;let c=n;if(typeof n=="symbol"?c=Symbol.prototype.toString.call(n):typeof n!="string"&&(c=String(n)),s==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let d="";for(let h=0;h<c.length;h+=ch){const g=c.length>=ch?c.slice(h,h+ch):c,m=[];for(let v=0;v<g.length;++v){let b=g.charCodeAt(v);if(b===45||b===46||b===95||b===126||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122||r===RL&&(b===40||b===41)){m[m.length]=g.charAt(v);continue}if(b<128){m[m.length]=ws[b];continue}if(b<2048){m[m.length]=ws[192|b>>6]+ws[128|b&63];continue}if(b<55296||b>=57344){m[m.length]=ws[224|b>>12]+ws[128|b>>6&63]+ws[128|b&63];continue}v+=1,b=65536+((b&1023)<<10|g.charCodeAt(v)&1023),m[m.length]=ws[240|b>>18]+ws[128|b>>12&63]+ws[128|b>>6&63]+ws[128|b&63]}d+=m.join("")}return d};function IL(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function pb(n,e){if(In(n)){const s=[];for(let o=0;o<n.length;o+=1)s.push(e(n[o]));return s}return e(n)}const ZS={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},ew=function(n,e){Array.prototype.push.apply(n,In(e)?e:[e])};let mb;const Jt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ML,encodeValuesOnly:!1,format:XS,formatter:QS,indices:!1,serializeDate(n){return(mb??(mb=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function kL(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const uh={};function tw(n,e,s,o,r,c,d,h,g,m,v,b,S,E,T,R,_,M){let k=n,I=M,j=0,J=!1;for(;(I=I.get(uh))!==void 0&&!J;){const le=I.get(n);if(j+=1,typeof le<"u"){if(le===j)throw new RangeError("Cyclic object value");J=!0}typeof I.get(uh)>"u"&&(j=0)}if(typeof m=="function"?k=m(e,k):k instanceof Date?k=S==null?void 0:S(k):s==="comma"&&In(k)&&(k=pb(k,function(le){return le instanceof Date?S==null?void 0:S(le):le})),k===null){if(c)return g&&!R?g(e,Jt.encoder,_,"key",E):e;k=""}if(kL(k)||IL(k)){if(g){const le=R?e:g(e,Jt.encoder,_,"key",E);return[(T==null?void 0:T(le))+"="+(T==null?void 0:T(g(k,Jt.encoder,_,"value",E)))]}return[(T==null?void 0:T(e))+"="+(T==null?void 0:T(String(k)))]}const Z=[];if(typeof k>"u")return Z;let $;if(s==="comma"&&In(k))R&&g&&(k=pb(k,g)),$=[{value:k.length>0?k.join(",")||null:void 0}];else if(In(m))$=m;else{const le=Object.keys(k);$=v?le.sort(v):le}const ce=h?String(e).replace(/\./g,"%2E"):String(e),V=o&&In(k)&&k.length===1?ce+"[]":ce;if(r&&In(k)&&k.length===0)return V+"[]";for(let le=0;le<$.length;++le){const ie=$[le],pe=typeof ie=="object"&&typeof ie.value<"u"?ie.value:k[ie];if(d&&pe===null)continue;const H=b&&h?ie.replace(/\./g,"%2E"):ie,ve=In(k)?typeof s=="function"?s(V,H):V:V+(b?"."+H:"["+H+"]");M.set(n,j);const Ce=new WeakMap;Ce.set(uh,M),ew(Z,tw(pe,ve,s,o,r,c,d,h,s==="comma"&&R&&In(k)?null:g,m,v,b,S,E,T,R,_,Ce))}return Z}function DL(n=Jt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Jt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let s=XS;if(typeof n.format<"u"){if(!Xh(hb,n.format))throw new TypeError("Unknown format option provided.");s=n.format}const o=hb[s];let r=Jt.filter;(typeof n.filter=="function"||In(n.filter))&&(r=n.filter);let c;if(n.arrayFormat&&n.arrayFormat in ZS?c=n.arrayFormat:"indices"in n?c=n.indices?"indices":"repeat":c=Jt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const d=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Jt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Jt.addQueryPrefix,allowDots:d,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Jt.allowEmptyArrays,arrayFormat:c,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Jt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Jt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Jt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Jt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Jt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Jt.encodeValuesOnly,filter:r,format:s,formatter:o,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Jt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Jt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Jt.strictNullHandling}}function PL(n,e={}){let s=n;const o=DL(e);let r,c;typeof o.filter=="function"?(c=o.filter,s=c("",s)):In(o.filter)&&(c=o.filter,r=c);const d=[];if(typeof s!="object"||s===null)return"";const h=ZS[o.arrayFormat],g=h==="comma"&&o.commaRoundTrip;r||(r=Object.keys(s)),o.sort&&r.sort(o.sort);const m=new WeakMap;for(let S=0;S<r.length;++S){const E=r[S];o.skipNulls&&s[E]===null||ew(d,tw(s[E],E,h,g,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,m))}const v=d.join(o.delimiter);let b=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),v.length>0?b+v:""}function LL(n){let e=0;for(const r of n)e+=r.length;const s=new Uint8Array(e);let o=0;for(const r of n)s.set(r,o),o+=r.length;return s}let gb;function Dp(n){let e;return(gb??(e=new globalThis.TextEncoder,gb=e.encode.bind(e)))(n)}let yb;function xb(n){let e;return(yb??(e=new globalThis.TextDecoder,yb=e.decode.bind(e)))(n)}var zn,Fn;class Tu{constructor(){zn.set(this,void 0),Fn.set(this,void 0),Fe(this,zn,new Uint8Array),Fe(this,Fn,null)}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Dp(e):e;Fe(this,zn,LL([Q(this,zn,"f"),s]));const o=[];let r;for(;(r=jL(Q(this,zn,"f"),Q(this,Fn,"f")))!=null;){if(r.carriage&&Q(this,Fn,"f")==null){Fe(this,Fn,r.index);continue}if(Q(this,Fn,"f")!=null&&(r.index!==Q(this,Fn,"f")+1||r.carriage)){o.push(xb(Q(this,zn,"f").subarray(0,Q(this,Fn,"f")-1))),Fe(this,zn,Q(this,zn,"f").subarray(Q(this,Fn,"f"))),Fe(this,Fn,null);continue}const c=Q(this,Fn,"f")!==null?r.preceding-1:r.preceding,d=xb(Q(this,zn,"f").subarray(0,c));o.push(d),Fe(this,zn,Q(this,zn,"f").subarray(r.index)),Fe(this,Fn,null)}return o}flush(){return Q(this,zn,"f").length?this.decode(`
`):[]}}zn=new WeakMap,Fn=new WeakMap;Tu.NEWLINE_CHARS=new Set([`
`,"\r"]);Tu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function jL(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function UL(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}const tu={off:0,error:200,warn:300,info:400,debug:500},vb=(n,e,s)=>{if(n){if(xL(tu,n))return n;rn(s).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(tu))}`)}};function Nr(){}function xc(n,e,s){return!e||tu[n]>tu[s]?Nr:e[n].bind(e)}const OL={error:Nr,warn:Nr,info:Nr,debug:Nr};let bb=new WeakMap;function rn(n){const e=n.logger,s=n.logLevel??"off";if(!e)return OL;const o=bb.get(e);if(o&&o[0]===s)return o[1];const r={error:xc("error",e,s),warn:xc("warn",e,s),info:xc("info",e,s),debug:xc("debug",e,s)};return bb.set(e,[s,r]),r}const lo=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,s])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var wr;class _s{constructor(e,s,o){this.iterator=e,wr.set(this,void 0),this.controller=s,Fe(this,wr,o)}static fromSSEResponse(e,s,o){let r=!1;const c=o?rn(o):console;async function*d(){if(r)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{for await(const g of GL(e,s))if(!h){if(g.data.startsWith("[DONE]")){h=!0;continue}if(g.event===null||!g.event.startsWith("thread.")){let m;try{m=JSON.parse(g.data)}catch(v){throw c.error("Could not parse message into JSON:",g.data),c.error("From chunk:",g.raw),v}if(m&&m.error)throw new un(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(g.data)}catch(v){throw console.error("Could not parse message into JSON:",g.data),console.error("From chunk:",g.raw),v}if(g.event=="error")throw new un(void 0,m.error,m.message,void 0);yield{event:g.event,data:m}}}h=!0}catch(g){if(Yh(g))return;throw g}finally{h||s.abort()}}return new _s(d,s,o)}static fromReadableStream(e,s,o){let r=!1;async function*c(){const h=new Tu,g=KS(e);for await(const m of g)for(const v of h.decode(m))yield v;for(const m of h.flush())yield m}async function*d(){if(r)throw new je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{for await(const g of c())h||g&&(yield JSON.parse(g));h=!0}catch(g){if(Yh(g))return;throw g}finally{h||s.abort()}}return new _s(d,s,o)}[(wr=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),r=c=>({next:()=>{if(c.length===0){const d=o.next();e.push(d),s.push(d)}return c.shift()}});return[new _s(()=>r(e),this.controller,Q(this,wr,"f")),new _s(()=>r(s),this.controller,Q(this,wr,"f"))]}toReadableStream(){const e=this;let s;return WS({async start(){s=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:c}=await s.next();if(c)return o.close();const d=Dp(JSON.stringify(r)+`
`);o.enqueue(d)}catch(r){o.error(r)}},async cancel(){var o;await((o=s.return)==null?void 0:o.call(s))}})}}async function*GL(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new je("Attempted to iterate over a response with no body");const s=new FL,o=new Tu,r=KS(n.body);for await(const c of zL(r))for(const d of o.decode(c)){const h=s.decode(d);h&&(yield h)}for(const c of o.flush()){const d=s.decode(c);d&&(yield d)}}async function*zL(n){let e=new Uint8Array;for await(const s of n){if(s==null)continue;const o=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?Dp(s):s;let r=new Uint8Array(e.length+o.length);r.set(e),r.set(o,e.length),e=r;let c;for(;(c=UL(e))!==-1;)yield e.slice(0,c),e=e.slice(c)}e.length>0&&(yield e)}class FL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,r]=BL(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}function BL(n,e){const s=n.indexOf(e);return s!==-1?[n.substring(0,s),e,n.substring(s+e.length)]:[n,"",""]}async function nw(n,e){const{response:s,requestLogID:o,retryOfRequestLogID:r,startTime:c}=e,d=await(async()=>{var b;if(e.options.stream)return rn(n).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,n):_s.fromSSEResponse(s,e.controller,n);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const h=s.headers.get("content-type"),g=(b=h==null?void 0:h.split(";")[0])==null?void 0:b.trim();if((g==null?void 0:g.includes("application/json"))||(g==null?void 0:g.endsWith("+json"))){const S=await s.json();return sw(S,s)}return await s.text()})();return rn(n).debug(`[${o}] response parsed`,lo({retryOfRequestLogID:r,url:s.url,status:s.status,body:d,durationMs:Date.now()-c})),d}function sw(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ar;class Nu extends Promise{constructor(e,s,o=nw){super(r=>{r(null)}),this.responsePromise=s,this.parseResponse=o,Ar.set(this,void 0),Fe(this,Ar,e)}_thenUnwrap(e){return new Nu(Q(this,Ar,"f"),this.responsePromise,async(s,o)=>sw(e(await this.parseResponse(s,o),o),o.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s,request_id:s.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Q(this,Ar,"f"),e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ar=new WeakMap;var vc;class Pp{constructor(e,s,o,r){vc.set(this,void 0),Fe(this,vc,e),this.options=r,this.response=s,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Q(this,vc,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(vc=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const s of e.getPaginatedItems())yield s}}class $L extends Nu{constructor(e,s,o){super(e,s,async(r,c)=>new o(r,c.response,await nw(r,c),c.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const s of e)yield s}}class Au extends Pp{constructor(e,s,o,r){super(e,s,o,r),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Bt extends Pp{constructor(e,s,o,r){super(e,s,o,r),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var o;const e=this.getPaginatedItems(),s=(o=e[e.length-1])==null?void 0:o.id;return s?{...this.options,query:{...JS(this.options.query),after:s}}:null}}class nu extends Pp{constructor(e,s,o,r){super(e,s,o,r),this.data=o.data||[],this.has_more=o.has_more||!1,this.last_id=o.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...JS(this.options.query),after:e}}:null}}const iw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Lr(n,e,s){return iw(),new File(n,e??"unknown_file",s)}function Rc(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Lp=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",Cb=async(n,e)=>Qh(n.body)?{...n,body:await ow(n.body,e)}:n,mo=async(n,e)=>({...n,body:await ow(n.body,e)}),Sb=new WeakMap;function HL(n){const e=typeof n=="function"?n:n.fetch,s=Sb.get(e);if(s)return s;const o=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,c=new FormData;return c.toString()!==await new r(c).text()}catch{return!0}})();return Sb.set(e,o),o}const ow=async(n,e)=>{if(!await HL(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const s=new FormData;return await Promise.all(Object.entries(n||{}).map(([o,r])=>Zh(s,o,r))),s},aw=n=>n instanceof Blob&&"name"in n,qL=n=>typeof n=="object"&&n!==null&&(n instanceof Response||Lp(n)||aw(n)),Qh=n=>{if(qL(n))return!0;if(Array.isArray(n))return n.some(Qh);if(n&&typeof n=="object"){for(const e in n)if(Qh(n[e]))return!0}return!1},Zh=async(n,e,s)=>{if(s!==void 0){if(s==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")n.append(e,String(s));else if(s instanceof Response)n.append(e,Lr([await s.blob()],Rc(s)));else if(Lp(s))n.append(e,Lr([await new Response(YS(s)).blob()],Rc(s)));else if(aw(s))n.append(e,s,Rc(s));else if(Array.isArray(s))await Promise.all(s.map(o=>Zh(n,e+"[]",o)));else if(typeof s=="object")await Promise.all(Object.entries(s).map(([o,r])=>Zh(n,`${e}[${o}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}},rw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",VL=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&rw(n),JL=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function WL(n,e,s){if(iw(),n=await n,VL(n))return n instanceof File?n:Lr([await n.arrayBuffer()],n.name);if(JL(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Lr(await ep(r),e,s)}const o=await ep(n);if(e||(e=Rc(n)),!(s!=null&&s.type)){const r=o.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof r=="string"&&(s={...s,type:r})}return Lr(o,e,s)}async function ep(n){var s;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(rw(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(Lp(n))for await(const o of n)e.push(...await ep(o));else{const o=(s=n==null?void 0:n.constructor)==null?void 0:s.name;throw new Error(`Unexpected data type: ${typeof n}${o?`; constructor: ${o}`:""}${YL(n)}`)}return e}function YL(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(s=>`"${s}"`).join(", ")}]`}class Pe{constructor(e){this._client=e}}function lw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const wb=Object.freeze(Object.create(null)),KL=(n=lw)=>function(s,...o){if(s.length===1)return s[0];let r=!1;const c=[],d=s.reduce((v,b,S)=>{var R;/[?#]/.test(b)&&(r=!0);const E=o[S];let T=(r?encodeURIComponent:n)(""+E);return S!==o.length&&(E==null||typeof E=="object"&&E.toString===((R=Object.getPrototypeOf(Object.getPrototypeOf(E.hasOwnProperty??wb)??wb))==null?void 0:R.toString))&&(T=E+"",c.push({start:v.length+b.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),v+b+(S===o.length?"":T)},""),h=d.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)c.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(c.sort((v,b)=>v.start-b.start),c.length>0){let v=0;const b=c.reduce((S,E)=>{const T=" ".repeat(E.start-v),R="^".repeat(E.length);return v=E.start+E.length,S+T+R},"");throw new je(`Path parameters result in path with invalid segments:
${c.map(S=>S.error).join(`
`)}
${d}
${b}`)}return d},xe=KL(lw);let cw=class extends Pe{list(e,s={},o){return this._client.getAPIList(xe`/chat/completions/${e}/messages`,Bt,{query:s,...o})}};function su(n){return n!==void 0&&"function"in n&&n.function!==void 0}function jp(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Wr(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function XL(n,e){return!e||!uw(e)?{...n,choices:n.choices.map(s=>(dw(s.message.tool_calls),{...s,message:{...s.message,parsed:null,...s.message.tool_calls?{tool_calls:s.message.tool_calls}:void 0}}))}:Up(n,e)}function Up(n,e){const s=n.choices.map(o=>{var r;if(o.finish_reason==="length")throw new qS;if(o.finish_reason==="content_filter")throw new VS;return dw(o.message.tool_calls),{...o,message:{...o.message,...o.message.tool_calls?{tool_calls:((r=o.message.tool_calls)==null?void 0:r.map(c=>ZL(e,c)))??void 0}:void 0,parsed:o.message.content&&!o.message.refusal?QL(e,o.message.content):null}}});return{...n,choices:s}}function QL(n,e){var s,o;return((s=n.response_format)==null?void 0:s.type)!=="json_schema"?null:((o=n.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function ZL(n,e){var o;const s=(o=n.tools)==null?void 0:o.find(r=>{var c;return su(r)&&((c=r.function)==null?void 0:c.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Wr(s)?s.$parseRaw(e.function.arguments):s!=null&&s.function.strict?JSON.parse(e.function.arguments):null}}}function e3(n,e){var o;if(!n||!("tools"in n)||!n.tools)return!1;const s=(o=n.tools)==null?void 0:o.find(r=>{var c;return su(r)&&((c=r.function)==null?void 0:c.name)===e.function.name});return su(s)&&(Wr(s)||(s==null?void 0:s.function.strict)||!1)}function uw(n){var e;return jp(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(s=>Wr(s)||s.type==="function"&&s.function.strict===!0))??!1}function dw(n){for(const e of n||[])if(e.type!=="function")throw new je(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function t3(n){for(const e of n??[]){if(e.type!=="function")throw new je(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new je(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const iu=n=>(n==null?void 0:n.role)==="assistant",fw=n=>(n==null?void 0:n.role)==="tool";var tp,Mc,Ic,Rr,Mr,kc,Ir,Xs,kr,ou,au,ca,hw;class Op{constructor(){tp.add(this),this.controller=new AbortController,Mc.set(this,void 0),Ic.set(this,()=>{}),Rr.set(this,()=>{}),Mr.set(this,void 0),kc.set(this,()=>{}),Ir.set(this,()=>{}),Xs.set(this,{}),kr.set(this,!1),ou.set(this,!1),au.set(this,!1),ca.set(this,!1),Fe(this,Mc,new Promise((e,s)=>{Fe(this,Ic,e,"f"),Fe(this,Rr,s,"f")})),Fe(this,Mr,new Promise((e,s)=>{Fe(this,kc,e,"f"),Fe(this,Ir,s,"f")})),Q(this,Mc,"f").catch(()=>{}),Q(this,Mr,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Q(this,tp,"m",hw).bind(this))},0)}_connected(){this.ended||(Q(this,Ic,"f").call(this),this._emit("connect"))}get ended(){return Q(this,kr,"f")}get errored(){return Q(this,ou,"f")}get aborted(){return Q(this,au,"f")}abort(){this.controller.abort()}on(e,s){return(Q(this,Xs,"f")[e]||(Q(this,Xs,"f")[e]=[])).push({listener:s}),this}off(e,s){const o=Q(this,Xs,"f")[e];if(!o)return this;const r=o.findIndex(c=>c.listener===s);return r>=0&&o.splice(r,1),this}once(e,s){return(Q(this,Xs,"f")[e]||(Q(this,Xs,"f")[e]=[])).push({listener:s,once:!0}),this}emitted(e){return new Promise((s,o)=>{Fe(this,ca,!0),e!=="error"&&this.once("error",o),this.once(e,s)})}async done(){Fe(this,ca,!0),await Q(this,Mr,"f")}_emit(e,...s){if(Q(this,kr,"f"))return;e==="end"&&(Fe(this,kr,!0),Q(this,kc,"f").call(this));const o=Q(this,Xs,"f")[e];if(o&&(Q(this,Xs,"f")[e]=o.filter(r=>!r.once),o.forEach(({listener:r})=>r(...s))),e==="abort"){const r=s[0];!Q(this,ca,"f")&&!(o!=null&&o.length)&&Promise.reject(r),Q(this,Rr,"f").call(this,r),Q(this,Ir,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=s[0];!Q(this,ca,"f")&&!(o!=null&&o.length)&&Promise.reject(r),Q(this,Rr,"f").call(this,r),Q(this,Ir,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Mc=new WeakMap,Ic=new WeakMap,Rr=new WeakMap,Mr=new WeakMap,kc=new WeakMap,Ir=new WeakMap,Xs=new WeakMap,kr=new WeakMap,ou=new WeakMap,au=new WeakMap,ca=new WeakMap,tp=new WeakSet,hw=function(e){if(Fe(this,ou,!0),e instanceof Error&&e.name==="AbortError"&&(e=new ns),e instanceof ns)return Fe(this,au,!0),this._emit("abort",e);if(e instanceof je)return this._emit("error",e);if(e instanceof Error){const s=new je(e.message);return s.cause=e,this._emit("error",s)}return this._emit("error",new je(String(e)))};function n3(n){return typeof n.parse=="function"}var gn,np,ru,sp,ip,op,pw,mw;const s3=10;class gw extends Op{constructor(){super(...arguments),gn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var o;this._chatCompletions.push(e),this._emit("chatCompletion",e);const s=(o=e.choices[0])==null?void 0:o.message;return s&&this._addMessage(s),e}_addMessage(e,s=!0){if("content"in e||(e.content=null),this.messages.push(e),s){if(this._emit("message",e),fw(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(iu(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionToolCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new je("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Q(this,gn,"m",np).call(this)}async finalMessage(){return await this.done(),Q(this,gn,"m",ru).call(this)}async finalFunctionToolCall(){return await this.done(),Q(this,gn,"m",sp).call(this)}async finalFunctionToolCallResult(){return await this.done(),Q(this,gn,"m",ip).call(this)}async totalUsage(){return await this.done(),Q(this,gn,"m",op).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const s=Q(this,gn,"m",ru).call(this);s&&this._emit("finalMessage",s);const o=Q(this,gn,"m",np).call(this);o&&this._emit("finalContent",o);const r=Q(this,gn,"m",sp).call(this);r&&this._emit("finalFunctionToolCall",r);const c=Q(this,gn,"m",ip).call(this);c!=null&&this._emit("finalFunctionToolCallResult",c),this._chatCompletions.some(d=>d.usage)&&this._emit("totalUsage",Q(this,gn,"m",op).call(this))}async _createChatCompletion(e,s,o){const r=o==null?void 0:o.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,gn,"m",pw).call(this,s);const c=await e.chat.completions.create({...s,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Up(c,s))}async _runChatCompletion(e,s,o){for(const r of s.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,s,o)}async _runTools(e,s,o){var E,T,R;const r="tool",{tool_choice:c="auto",stream:d,...h}=s,g=typeof c!="string"&&c.type==="function"&&((E=c==null?void 0:c.function)==null?void 0:E.name),{maxChatCompletions:m=s3}=o||{},v=s.tools.map(_=>{if(Wr(_)){if(!_.$callback)throw new je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),b={};for(const _ of v)_.type==="function"&&(b[_.function.name||_.function.function.name]=_.function);const S="tools"in s?v.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of s.messages)this._addMessage(_,!1);for(let _=0;_<m;++_){const k=(T=(await this._createChatCompletion(e,{...h,tool_choice:c,tools:S,messages:[...this.messages]},o)).choices[0])==null?void 0:T.message;if(!k)throw new je("missing message in ChatCompletion response");if(!((R=k.tool_calls)!=null&&R.length))return;for(const I of k.tool_calls){if(I.type!=="function")continue;const j=I.id,{name:J,arguments:Z}=I.function,$=b[J];if($){if(g&&g!==J){const ie=`Invalid tool_call: ${JSON.stringify(J)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:r,tool_call_id:j,content:ie});continue}}else{const ie=`Invalid tool_call: ${JSON.stringify(J)}. Available options are: ${Object.keys(b).map(pe=>JSON.stringify(pe)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:j,content:ie});continue}let ce;try{ce=n3($)?await $.parse(Z):Z}catch(ie){const pe=ie instanceof Error?ie.message:String(ie);this._addMessage({role:r,tool_call_id:j,content:pe});continue}const V=await $.function(ce,this),le=Q(this,gn,"m",mw).call(this,V);if(this._addMessage({role:r,tool_call_id:j,content:le}),g)return}}}}gn=new WeakSet,np=function(){return Q(this,gn,"m",ru).call(this).content??null},ru=function(){let e=this.messages.length;for(;e-- >0;){const s=this.messages[e];if(iu(s))return{...s,content:s.content??null,refusal:s.refusal??null}}throw new je("stream ended without producing a ChatCompletionMessage with role=assistant")},sp=function(){var e,s;for(let o=this.messages.length-1;o>=0;o--){const r=this.messages[o];if(iu(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(s=r.tool_calls.filter(c=>c.type==="function").at(-1))==null?void 0:s.function}},ip=function(){for(let e=this.messages.length-1;e>=0;e--){const s=this.messages[e];if(fw(s)&&s.content!=null&&typeof s.content=="string"&&this.messages.some(o=>{var r;return o.role==="assistant"&&((r=o.tool_calls)==null?void 0:r.some(c=>c.type==="function"&&c.id===s.tool_call_id))}))return s.content}},op=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:s}of this._chatCompletions)s&&(e.completion_tokens+=s.completion_tokens,e.prompt_tokens+=s.prompt_tokens,e.total_tokens+=s.total_tokens);return e},pw=function(e){if(e.n!=null&&e.n>1)throw new je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},mw=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Gp extends gw{static runTools(e,s,o){const r=new Gp,c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,c)),r}_addMessage(e,s=!0){super._addMessage(e,s),iu(e)&&e.content&&this._emit("content",e.content)}}const yw=1,xw=2,vw=4,bw=8,Cw=16,Sw=32,ww=64,Ew=128,_w=256,Tw=Ew|_w,Nw=Cw|Sw|Tw|ww,Aw=yw|xw|Nw,Rw=vw|bw,i3=Aw|Rw,Xt={STR:yw,NUM:xw,ARR:vw,OBJ:bw,NULL:Cw,BOOL:Sw,NAN:ww,INFINITY:Ew,MINUS_INFINITY:_w,INF:Tw,SPECIAL:Nw,ATOM:Aw,COLLECTION:Rw,ALL:i3};class o3 extends Error{}class a3 extends Error{}function r3(n,e=Xt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return l3(n.trim(),e)}const l3=(n,e)=>{const s=n.length;let o=0;const r=S=>{throw new o3(`${S} at position ${o}`)},c=S=>{throw new a3(`${S} at position ${o}`)},d=()=>(b(),o>=s&&r("Unexpected end of input"),n[o]==='"'?h():n[o]==="{"?g():n[o]==="["?m():n.substring(o,o+4)==="null"||Xt.NULL&e&&s-o<4&&"null".startsWith(n.substring(o))?(o+=4,null):n.substring(o,o+4)==="true"||Xt.BOOL&e&&s-o<4&&"true".startsWith(n.substring(o))?(o+=4,!0):n.substring(o,o+5)==="false"||Xt.BOOL&e&&s-o<5&&"false".startsWith(n.substring(o))?(o+=5,!1):n.substring(o,o+8)==="Infinity"||Xt.INFINITY&e&&s-o<8&&"Infinity".startsWith(n.substring(o))?(o+=8,1/0):n.substring(o,o+9)==="-Infinity"||Xt.MINUS_INFINITY&e&&1<s-o&&s-o<9&&"-Infinity".startsWith(n.substring(o))?(o+=9,-1/0):n.substring(o,o+3)==="NaN"||Xt.NAN&e&&s-o<3&&"NaN".startsWith(n.substring(o))?(o+=3,NaN):v()),h=()=>{const S=o;let E=!1;for(o++;o<s&&(n[o]!=='"'||E&&n[o-1]==="\\");)E=n[o]==="\\"?!E:!1,o++;if(n.charAt(o)=='"')try{return JSON.parse(n.substring(S,++o-Number(E)))}catch(T){c(String(T))}else if(Xt.STR&e)try{return JSON.parse(n.substring(S,o-Number(E))+'"')}catch{return JSON.parse(n.substring(S,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},g=()=>{o++,b();const S={};try{for(;n[o]!=="}";){if(b(),o>=s&&Xt.OBJ&e)return S;const E=h();b(),o++;try{const T=d();Object.defineProperty(S,E,{value:T,writable:!0,enumerable:!0,configurable:!0})}catch(T){if(Xt.OBJ&e)return S;throw T}b(),n[o]===","&&o++}}catch{if(Xt.OBJ&e)return S;r("Expected '}' at end of object")}return o++,S},m=()=>{o++;const S=[];try{for(;n[o]!=="]";)S.push(d()),b(),n[o]===","&&o++}catch{if(Xt.ARR&e)return S;r("Expected ']' at end of array")}return o++,S},v=()=>{if(o===0){n==="-"&&Xt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(E){if(Xt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}c(String(E))}}const S=o;for(n[o]==="-"&&o++;n[o]&&!",]}".includes(n[o]);)o++;o==s&&!(Xt.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(S,o))}catch{n.substring(S,o)==="-"&&Xt.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(S,n.lastIndexOf("e")))}catch(T){c(String(T))}}},b=()=>{for(;o<s&&` 
\r	`.includes(n[o]);)o++};return d()},Eb=n=>r3(n,Xt.ALL^Xt.NUM);var Vt,Ks,ia,Ii,dh,bc,fh,hh,ph,Cc,mh,_b;class Hr extends gw{constructor(e){super(),Vt.add(this),Ks.set(this,void 0),ia.set(this,void 0),Ii.set(this,void 0),Fe(this,Ks,e),Fe(this,ia,[])}get currentChatCompletionSnapshot(){return Q(this,Ii,"f")}static fromReadableStream(e){const s=new Hr(null);return s._run(()=>s._fromReadableStream(e)),s}static createChatCompletion(e,s,o){const r=new Hr(s);return r._run(()=>r._runChatCompletion(e,{...s,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,s,o){var d;super._createChatCompletion;const r=o==null?void 0:o.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Vt,"m",dh).call(this);const c=await e.chat.completions.create({...s,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const h of c)Q(this,Vt,"m",fh).call(this,h);if((d=c.controller.signal)!=null&&d.aborted)throw new ns;return this._addChatCompletion(Q(this,Vt,"m",Cc).call(this))}async _fromReadableStream(e,s){var d;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Q(this,Vt,"m",dh).call(this),this._connected();const r=_s.fromReadableStream(e,this.controller);let c;for await(const h of r)c&&c!==h.id&&this._addChatCompletion(Q(this,Vt,"m",Cc).call(this)),Q(this,Vt,"m",fh).call(this,h),c=h.id;if((d=r.controller.signal)!=null&&d.aborted)throw new ns;return this._addChatCompletion(Q(this,Vt,"m",Cc).call(this))}[(Ks=new WeakMap,ia=new WeakMap,Ii=new WeakMap,Vt=new WeakSet,dh=function(){this.ended||Fe(this,Ii,void 0)},bc=function(s){let o=Q(this,ia,"f")[s.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Q(this,ia,"f")[s.index]=o,o)},fh=function(s){var r,c,d,h,g,m,v,b,S,E,T,R,_,M,k;if(this.ended)return;const o=Q(this,Vt,"m",_b).call(this,s);this._emit("chunk",s,o);for(const I of s.choices){const j=o.choices[I.index];I.delta.content!=null&&((r=j.message)==null?void 0:r.role)==="assistant"&&((c=j.message)!=null&&c.content)&&(this._emit("content",I.delta.content,j.message.content),this._emit("content.delta",{delta:I.delta.content,snapshot:j.message.content,parsed:j.message.parsed})),I.delta.refusal!=null&&((d=j.message)==null?void 0:d.role)==="assistant"&&((h=j.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:I.delta.refusal,snapshot:j.message.refusal}),((g=I.logprobs)==null?void 0:g.content)!=null&&((m=j.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=I.logprobs)==null?void 0:v.content,snapshot:((b=j.logprobs)==null?void 0:b.content)??[]}),((S=I.logprobs)==null?void 0:S.refusal)!=null&&((E=j.message)==null?void 0:E.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(T=I.logprobs)==null?void 0:T.refusal,snapshot:((R=j.logprobs)==null?void 0:R.refusal)??[]});const J=Q(this,Vt,"m",bc).call(this,j);j.finish_reason&&(Q(this,Vt,"m",ph).call(this,j),J.current_tool_call_index!=null&&Q(this,Vt,"m",hh).call(this,j,J.current_tool_call_index));for(const Z of I.delta.tool_calls??[])J.current_tool_call_index!==Z.index&&(Q(this,Vt,"m",ph).call(this,j),J.current_tool_call_index!=null&&Q(this,Vt,"m",hh).call(this,j,J.current_tool_call_index)),J.current_tool_call_index=Z.index;for(const Z of I.delta.tool_calls??[]){const $=(_=j.message.tool_calls)==null?void 0:_[Z.index];$!=null&&$.type&&(($==null?void 0:$.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(M=$.function)==null?void 0:M.name,index:Z.index,arguments:$.function.arguments,parsed_arguments:$.function.parsed_arguments,arguments_delta:((k=Z.function)==null?void 0:k.arguments)??""}):($==null||$.type,void 0))}}},hh=function(s,o){var d,h,g;if(Q(this,Vt,"m",bc).call(this,s).done_tool_calls.has(o))return;const c=(d=s.message.tool_calls)==null?void 0:d[o];if(!c)throw new Error("no tool call snapshot");if(!c.type)throw new Error("tool call snapshot missing `type`");if(c.type==="function"){const m=(g=(h=Q(this,Ks,"f"))==null?void 0:h.tools)==null?void 0:g.find(v=>su(v)&&v.function.name===c.function.name);this._emit("tool_calls.function.arguments.done",{name:c.function.name,index:o,arguments:c.function.arguments,parsed_arguments:Wr(m)?m.$parseRaw(c.function.arguments):m!=null&&m.function.strict?JSON.parse(c.function.arguments):null})}else c.type},ph=function(s){var r,c;const o=Q(this,Vt,"m",bc).call(this,s);if(s.message.content&&!o.content_done){o.content_done=!0;const d=Q(this,Vt,"m",mh).call(this);this._emit("content.done",{content:s.message.content,parsed:d?d.$parseRaw(s.message.content):null})}s.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),(r=s.logprobs)!=null&&r.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),(c=s.logprobs)!=null&&c.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},Cc=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const s=Q(this,Ii,"f");if(!s)throw new je("request ended without sending any chunks");return Fe(this,Ii,void 0),Fe(this,ia,[]),c3(s,Q(this,Ks,"f"))},mh=function(){var o;const s=(o=Q(this,Ks,"f"))==null?void 0:o.response_format;return jp(s)?s:null},_b=function(s){var o,r,c,d;let h=Q(this,Ii,"f");const{choices:g,...m}=s;h?Object.assign(h,m):h=Fe(this,Ii,{...m,choices:[]});for(const{delta:v,finish_reason:b,index:S,logprobs:E=null,...T}of s.choices){let R=h.choices[S];if(R||(R=h.choices[S]={finish_reason:b,index:S,message:{},logprobs:E,...T}),E)if(!R.logprobs)R.logprobs=Object.assign({},E);else{const{content:Z,refusal:$,...ce}=E;Object.assign(R.logprobs,ce),Z&&((o=R.logprobs).content??(o.content=[]),R.logprobs.content.push(...Z)),$&&((r=R.logprobs).refusal??(r.refusal=[]),R.logprobs.refusal.push(...$))}if(b&&(R.finish_reason=b,Q(this,Ks,"f")&&uw(Q(this,Ks,"f")))){if(b==="length")throw new qS;if(b==="content_filter")throw new VS}if(Object.assign(R,T),!v)continue;const{content:_,refusal:M,function_call:k,role:I,tool_calls:j,...J}=v;if(Object.assign(R.message,J),M&&(R.message.refusal=(R.message.refusal||"")+M),I&&(R.message.role=I),k&&(R.message.function_call?(k.name&&(R.message.function_call.name=k.name),k.arguments&&((c=R.message.function_call).arguments??(c.arguments=""),R.message.function_call.arguments+=k.arguments)):R.message.function_call=k),_&&(R.message.content=(R.message.content||"")+_,!R.message.refusal&&Q(this,Vt,"m",mh).call(this)&&(R.message.parsed=Eb(R.message.content))),j){R.message.tool_calls||(R.message.tool_calls=[]);for(const{index:Z,id:$,type:ce,function:V,...le}of j){const ie=(d=R.message.tool_calls)[Z]??(d[Z]={});Object.assign(ie,le),$&&(ie.id=$),ce&&(ie.type=ce),V&&(ie.function??(ie.function={name:V.name??"",arguments:""})),V!=null&&V.name&&(ie.function.name=V.name),V!=null&&V.arguments&&(ie.function.arguments+=V.arguments,e3(Q(this,Ks,"f"),ie)&&(ie.function.parsed_arguments=Eb(ie.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],s=[];let o=!1;return this.on("chunk",r=>{const c=s.shift();c?c.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),this.on("error",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((c,d)=>s.push({resolve:c,reject:d})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _s(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function c3(n,e){const{id:s,choices:o,created:r,model:c,system_fingerprint:d,...h}=n,g={...h,id:s,choices:o.map(({message:m,finish_reason:v,index:b,logprobs:S,...E})=>{if(!v)throw new je(`missing finish_reason for choice ${b}`);const{content:T=null,function_call:R,tool_calls:_,...M}=m,k=m.role;if(!k)throw new je(`missing role for choice ${b}`);if(R){const{arguments:I,name:j}=R;if(I==null)throw new je(`missing function_call.arguments for choice ${b}`);if(!j)throw new je(`missing function_call.name for choice ${b}`);return{...E,message:{content:T,function_call:{arguments:I,name:j},role:k,refusal:m.refusal??null},finish_reason:v,index:b,logprobs:S}}return _?{...E,index:b,finish_reason:v,logprobs:S,message:{...M,role:k,content:T,refusal:m.refusal??null,tool_calls:_.map((I,j)=>{const{function:J,type:Z,id:$,...ce}=I,{arguments:V,name:le,...ie}=J||{};if($==null)throw new je(`missing choices[${b}].tool_calls[${j}].id
${Sc(n)}`);if(Z==null)throw new je(`missing choices[${b}].tool_calls[${j}].type
${Sc(n)}`);if(le==null)throw new je(`missing choices[${b}].tool_calls[${j}].function.name
${Sc(n)}`);if(V==null)throw new je(`missing choices[${b}].tool_calls[${j}].function.arguments
${Sc(n)}`);return{...ce,id:$,type:Z,function:{...ie,name:le,arguments:V}}})}}:{...E,message:{...M,content:T,role:k,refusal:m.refusal??null},finish_reason:v,index:b,logprobs:S}}),created:r,model:c,object:"chat.completion",...d?{system_fingerprint:d}:{}};return XL(g,e)}function Sc(n){return JSON.stringify(n)}class lu extends Hr{static fromReadableStream(e){const s=new lu(null);return s._run(()=>s._fromReadableStream(e)),s}static runTools(e,s,o){const r=new lu(s),c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,s,c)),r}}let zp=class extends Pe{constructor(){super(...arguments),this.messages=new cw(this._client)}create(e,s){return this._client.post("/chat/completions",{body:e,...s,stream:e.stream??!1})}retrieve(e,s){return this._client.get(xe`/chat/completions/${e}`,s)}update(e,s,o){return this._client.post(xe`/chat/completions/${e}`,{body:s,...o})}list(e={},s){return this._client.getAPIList("/chat/completions",Bt,{query:e,...s})}delete(e,s){return this._client.delete(xe`/chat/completions/${e}`,s)}parse(e,s){return t3(e.tools),this._client.chat.completions.create(e,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(o=>Up(o,e))}runTools(e,s){return e.stream?lu.runTools(this._client,e,s):Gp.runTools(this._client,e,s)}stream(e,s){return Hr.createChatCompletion(this._client,e,s)}};zp.Messages=cw;class Fp extends Pe{constructor(){super(...arguments),this.completions=new zp(this._client)}}Fp.Completions=zp;const Mw=Symbol("brand.privateNullableHeaders");function*u3(n){if(!n)return;if(Mw in n){const{values:o,nulls:r}=n;yield*o.entries();for(const c of r)yield[c,null];return}let e=!1,s;n instanceof Headers?s=n.entries():cb(n)?s=n:(e=!0,s=Object.entries(n??{}));for(let o of s){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const c=cb(o[1])?o[1]:[o[1]];let d=!1;for(const h of c)h!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,h])}}const Me=n=>{const e=new Headers,s=new Set;for(const o of n){const r=new Set;for(const[c,d]of u3(o)){const h=c.toLowerCase();r.has(h)||(e.delete(c),r.add(h)),d===null?(e.delete(c),s.add(h)):(e.append(c,d),s.delete(h))}}return{[Mw]:!0,values:e,nulls:s}};class Iw extends Pe{create(e,s){return this._client.post("/audio/speech",{body:e,...s,headers:Me([{Accept:"application/octet-stream"},s==null?void 0:s.headers]),__binaryResponse:!0})}}class kw extends Pe{create(e,s){return this._client.post("/audio/transcriptions",mo({body:e,...s,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Dw extends Pe{create(e,s){return this._client.post("/audio/translations",mo({body:e,...s,__metadata:{model:e.model}},this._client))}}class Yr extends Pe{constructor(){super(...arguments),this.transcriptions=new kw(this._client),this.translations=new Dw(this._client),this.speech=new Iw(this._client)}}Yr.Transcriptions=kw;Yr.Translations=Dw;Yr.Speech=Iw;class Pw extends Pe{create(e,s){return this._client.post("/batches",{body:e,...s})}retrieve(e,s){return this._client.get(xe`/batches/${e}`,s)}list(e={},s){return this._client.getAPIList("/batches",Bt,{query:e,...s})}cancel(e,s){return this._client.post(xe`/batches/${e}/cancel`,s)}}class Lw extends Pe{create(e,s){return this._client.post("/assistants",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,s){return this._client.get(xe`/assistants/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,s,o){return this._client.post(xe`/assistants/${e}`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},s){return this._client.getAPIList("/assistants",Bt,{query:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,s){return this._client.delete(xe`/assistants/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}let jw=class extends Pe{create(e,s){return this._client.post("/realtime/sessions",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}};class Uw extends Pe{create(e,s){return this._client.post("/realtime/transcription_sessions",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}let Ru=class extends Pe{constructor(){super(...arguments),this.sessions=new jw(this._client),this.transcriptionSessions=new Uw(this._client)}};Ru.Sessions=jw;Ru.TranscriptionSessions=Uw;class Ow extends Pe{create(e,s){return this._client.post("/chatkit/sessions",{body:e,...s,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}cancel(e,s){return this._client.post(xe`/chatkit/sessions/${e}/cancel`,{...s,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}}let Gw=class extends Pe{retrieve(e,s){return this._client.get(xe`/chatkit/threads/${e}`,{...s,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}list(e={},s){return this._client.getAPIList("/chatkit/threads",nu,{query:e,...s,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}delete(e,s){return this._client.delete(xe`/chatkit/threads/${e}`,{...s,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}listItems(e,s={},o){return this._client.getAPIList(xe`/chatkit/threads/${e}/items`,nu,{query:s,...o,headers:Me([{"OpenAI-Beta":"chatkit_beta=v1"},o==null?void 0:o.headers])})}};class Mu extends Pe{constructor(){super(...arguments),this.sessions=new Ow(this._client),this.threads=new Gw(this._client)}}Mu.Sessions=Ow;Mu.Threads=Gw;class zw extends Pe{create(e,s,o){return this._client.post(xe`/threads/${e}/messages`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,s,o){const{thread_id:r}=s;return this._client.get(xe`/threads/${r}/messages/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,s,o){const{thread_id:r,...c}=s;return this._client.post(xe`/threads/${r}/messages/${e}`,{body:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,s={},o){return this._client.getAPIList(xe`/threads/${e}/messages`,Bt,{query:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,s,o){const{thread_id:r}=s;return this._client.delete(xe`/threads/${r}/messages/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class Fw extends Pe{retrieve(e,s,o){const{thread_id:r,run_id:c,...d}=s;return this._client.get(xe`/threads/${r}/runs/${c}/steps/${e}`,{query:d,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,s,o){const{thread_id:r,...c}=s;return this._client.getAPIList(xe`/threads/${r}/runs/${e}/steps`,Bt,{query:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}const d3=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),s=e.length,o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=e.charCodeAt(r);return Array.from(new Float32Array(o.buffer))}};var gh={};const oa=n=>{var e,s,o,r;if(typeof globalThis.process<"u")return((e=gh==null?void 0:gh[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(o=(s=globalThis.Deno.env)==null?void 0:s.get)==null?void 0:o.call(s,n))==null?void 0:r.trim()};var ln,fo,ap,Es,Dc,ps,ho,fa,co,cu,Bn,Pc,Lc,jr,Dr,Pr,Tb,Nb,Ab,Rb,Mb,Ib,kb;class Ur extends Op{constructor(){super(...arguments),ln.add(this),ap.set(this,[]),Es.set(this,{}),Dc.set(this,{}),ps.set(this,void 0),ho.set(this,void 0),fa.set(this,void 0),co.set(this,void 0),cu.set(this,void 0),Bn.set(this,void 0),Pc.set(this,void 0),Lc.set(this,void 0),jr.set(this,void 0)}[(ap=new WeakMap,Es=new WeakMap,Dc=new WeakMap,ps=new WeakMap,ho=new WeakMap,fa=new WeakMap,co=new WeakMap,cu=new WeakMap,Bn=new WeakMap,Pc=new WeakMap,Lc=new WeakMap,jr=new WeakMap,ln=new WeakSet,Symbol.asyncIterator)](){const e=[],s=[];let o=!1;return this.on("event",r=>{const c=s.shift();c?c.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),this.on("error",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((c,d)=>s.push({resolve:c,reject:d})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const s=new fo;return s._run(()=>s._fromReadableStream(e)),s}async _fromReadableStream(e,s){var c;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=_s.fromReadableStream(e,this.controller);for await(const d of r)Q(this,ln,"m",Dr).call(this,d);if((c=r.controller.signal)!=null&&c.aborted)throw new ns;return this._addRun(Q(this,ln,"m",Pr).call(this))}toReadableStream(){return new _s(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,s,o,r){const c=new fo;return c._run(()=>c._runToolAssistantStream(e,s,o,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),c}async _createToolAssistantStream(e,s,o,r){var g;const c=r==null?void 0:r.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const d={...o,stream:!0},h=await e.submitToolOutputs(s,d,{...r,signal:this.controller.signal});this._connected();for await(const m of h)Q(this,ln,"m",Dr).call(this,m);if((g=h.controller.signal)!=null&&g.aborted)throw new ns;return this._addRun(Q(this,ln,"m",Pr).call(this))}static createThreadAssistantStream(e,s,o){const r=new fo;return r._run(()=>r._threadAssistantStream(e,s,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,s,o,r){const c=new fo;return c._run(()=>c._runAssistantStream(e,s,o,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),c}currentEvent(){return Q(this,Pc,"f")}currentRun(){return Q(this,Lc,"f")}currentMessageSnapshot(){return Q(this,ps,"f")}currentRunStepSnapshot(){return Q(this,jr,"f")}async finalRunSteps(){return await this.done(),Object.values(Q(this,Es,"f"))}async finalMessages(){return await this.done(),Object.values(Q(this,Dc,"f"))}async finalRun(){if(await this.done(),!Q(this,ho,"f"))throw Error("Final run was not received.");return Q(this,ho,"f")}async _createThreadAssistantStream(e,s,o){var h;const r=o==null?void 0:o.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.createAndRun(c,{...o,signal:this.controller.signal});this._connected();for await(const g of d)Q(this,ln,"m",Dr).call(this,g);if((h=d.controller.signal)!=null&&h.aborted)throw new ns;return this._addRun(Q(this,ln,"m",Pr).call(this))}async _createAssistantStream(e,s,o,r){var g;const c=r==null?void 0:r.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const d={...o,stream:!0},h=await e.create(s,d,{...r,signal:this.controller.signal});this._connected();for await(const m of h)Q(this,ln,"m",Dr).call(this,m);if((g=h.controller.signal)!=null&&g.aborted)throw new ns;return this._addRun(Q(this,ln,"m",Pr).call(this))}static accumulateDelta(e,s){for(const[o,r]of Object.entries(s)){if(!e.hasOwnProperty(o)){e[o]=r;continue}let c=e[o];if(c==null){e[o]=r;continue}if(o==="index"||o==="type"){e[o]=r;continue}if(typeof c=="string"&&typeof r=="string")c+=r;else if(typeof c=="number"&&typeof r=="number")c+=r;else if(lh(c)&&lh(r))c=this.accumulateDelta(c,r);else if(Array.isArray(c)&&Array.isArray(r)){if(c.every(d=>typeof d=="string"||typeof d=="number")){c.push(...r);continue}for(const d of r){if(!lh(d))throw new Error(`Expected array delta entry to be an object but got: ${d}`);const h=d.index;if(h==null)throw console.error(d),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const g=c[h];g==null?c.push(d):c[h]=this.accumulateDelta(g,d)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${r}, accValue: ${c}`);e[o]=c}return e}_addRun(e){return e}async _threadAssistantStream(e,s,o){return await this._createThreadAssistantStream(s,e,o)}async _runAssistantStream(e,s,o,r){return await this._createAssistantStream(s,e,o,r)}async _runToolAssistantStream(e,s,o,r){return await this._createToolAssistantStream(s,e,o,r)}}fo=Ur,Dr=function(e){if(!this.ended)switch(Fe(this,Pc,e),Q(this,ln,"m",Ab).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Q(this,ln,"m",kb).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Q(this,ln,"m",Nb).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Q(this,ln,"m",Tb).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Pr=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");if(!Q(this,ho,"f"))throw Error("Final run has not been received");return Q(this,ho,"f")},Tb=function(e){const[s,o]=Q(this,ln,"m",Mb).call(this,e,Q(this,ps,"f"));Fe(this,ps,s),Q(this,Dc,"f")[s.id]=s;for(const r of o){const c=s.content[r.index];(c==null?void 0:c.type)=="text"&&this._emit("textCreated",c.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,s),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let c=r.text,d=s.content[r.index];if(d&&d.type=="text")this._emit("textDelta",c,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=Q(this,fa,"f")){if(Q(this,co,"f"))switch(Q(this,co,"f").type){case"text":this._emit("textDone",Q(this,co,"f").text,Q(this,ps,"f"));break;case"image_file":this._emit("imageFileDone",Q(this,co,"f").image_file,Q(this,ps,"f"));break}Fe(this,fa,r.index)}Fe(this,co,s.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Q(this,fa,"f")!==void 0){const r=e.data.content[Q(this,fa,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,Q(this,ps,"f"));break;case"text":this._emit("textDone",r.text,Q(this,ps,"f"));break}}Q(this,ps,"f")&&this._emit("messageDone",e.data),Fe(this,ps,void 0)}},Nb=function(e){const s=Q(this,ln,"m",Rb).call(this,e);switch(Fe(this,jr,s),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&s.step_details.type=="tool_calls")for(const c of o.step_details.tool_calls)c.index==Q(this,cu,"f")?this._emit("toolCallDelta",c,s.step_details.tool_calls[c.index]):(Q(this,Bn,"f")&&this._emit("toolCallDone",Q(this,Bn,"f")),Fe(this,cu,c.index),Fe(this,Bn,s.step_details.tool_calls[c.index]),Q(this,Bn,"f")&&this._emit("toolCallCreated",Q(this,Bn,"f")));this._emit("runStepDelta",e.data.delta,s);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Fe(this,jr,void 0),e.data.step_details.type=="tool_calls"&&Q(this,Bn,"f")&&(this._emit("toolCallDone",Q(this,Bn,"f")),Fe(this,Bn,void 0)),this._emit("runStepDone",e.data,s);break}},Ab=function(e){Q(this,ap,"f").push(e),this._emit("event",e)},Rb=function(e){switch(e.event){case"thread.run.step.created":return Q(this,Es,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let s=Q(this,Es,"f")[e.data.id];if(!s)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const r=fo.accumulateDelta(s,o.delta);Q(this,Es,"f")[e.data.id]=r}return Q(this,Es,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Q(this,Es,"f")[e.data.id]=e.data;break}if(Q(this,Es,"f")[e.data.id])return Q(this,Es,"f")[e.data.id];throw new Error("No snapshot available")},Mb=function(e,s){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!s)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const c of r.delta.content)if(c.index in s.content){let d=s.content[c.index];s.content[c.index]=Q(this,ln,"m",Ib).call(this,c,d)}else s.content[c.index]=c,o.push(c);return[s,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(s)return[s,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Ib=function(e,s){return fo.accumulateDelta(s,e)},kb=function(e){switch(Fe(this,Lc,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Fe(this,ho,e.data),Q(this,Bn,"f")&&(this._emit("toolCallDone",Q(this,Bn,"f")),Fe(this,Bn,void 0));break}};let Bp=class extends Pe{constructor(){super(...arguments),this.steps=new Fw(this._client)}create(e,s,o){const{include:r,...c}=s;return this._client.post(xe`/threads/${e}/runs`,{query:{include:r},body:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:s.stream??!1})}retrieve(e,s,o){const{thread_id:r}=s;return this._client.get(xe`/threads/${r}/runs/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,s,o){const{thread_id:r,...c}=s;return this._client.post(xe`/threads/${r}/runs/${e}`,{body:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,s={},o){return this._client.getAPIList(xe`/threads/${e}/runs`,Bt,{query:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,s,o){const{thread_id:r}=s;return this._client.post(xe`/threads/${r}/runs/${e}/cancel`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,s,o){const r=await this.create(e,s,o);return await this.poll(r.id,{thread_id:e},o)}createAndStream(e,s,o){return Ur.createAssistantStream(e,this._client.beta.threads.runs,s,o)}async poll(e,s,o){var c;const r=Me([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((c=o==null?void 0:o.pollIntervalMs)==null?void 0:c.toString())??void 0}]);for(;;){const{data:d,response:h}=await this.retrieve(e,s,{...o,headers:{...o==null?void 0:o.headers,...r}}).withResponse();switch(d.status){case"queued":case"in_progress":case"cancelling":let g=5e3;if(o!=null&&o.pollIntervalMs)g=o.pollIntervalMs;else{const m=h.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(g=v)}}await Jr(g);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return d}}}stream(e,s,o){return Ur.createAssistantStream(e,this._client.beta.threads.runs,s,o)}submitToolOutputs(e,s,o){const{thread_id:r,...c}=s;return this._client.post(xe`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:s.stream??!1})}async submitToolOutputsAndPoll(e,s,o){const r=await this.submitToolOutputs(e,s,o);return await this.poll(r.id,s,o)}submitToolOutputsStream(e,s,o){return Ur.createToolAssistantStream(e,this._client.beta.threads.runs,s,o)}};Bp.Steps=Fw;class Iu extends Pe{constructor(){super(...arguments),this.runs=new Bp(this._client),this.messages=new zw(this._client)}create(e={},s){return this._client.post("/threads",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,s){return this._client.get(xe`/threads/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,s,o){return this._client.post(xe`/threads/${e}`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,s){return this._client.delete(xe`/threads/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}createAndRun(e,s){return this._client.post("/threads/runs",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:e.stream??!1})}async createAndRunPoll(e,s){const o=await this.createAndRun(e,s);return await this.runs.poll(o.id,{thread_id:o.thread_id},s)}createAndRunStream(e,s){return Ur.createThreadAssistantStream(e,this._client.beta.threads,s)}}Iu.Runs=Bp;Iu.Messages=zw;class _a extends Pe{constructor(){super(...arguments),this.realtime=new Ru(this._client),this.chatkit=new Mu(this._client),this.assistants=new Lw(this._client),this.threads=new Iu(this._client)}}_a.Realtime=Ru;_a.ChatKit=Mu;_a.Assistants=Lw;_a.Threads=Iu;class Bw extends Pe{create(e,s){return this._client.post("/completions",{body:e,...s,stream:e.stream??!1})}}class $w extends Pe{retrieve(e,s,o){const{container_id:r}=s;return this._client.get(xe`/containers/${r}/files/${e}/content`,{...o,headers:Me([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}}let $p=class extends Pe{constructor(){super(...arguments),this.content=new $w(this._client)}create(e,s,o){return this._client.post(xe`/containers/${e}/files`,mo({body:s,...o},this._client))}retrieve(e,s,o){const{container_id:r}=s;return this._client.get(xe`/containers/${r}/files/${e}`,o)}list(e,s={},o){return this._client.getAPIList(xe`/containers/${e}/files`,Bt,{query:s,...o})}delete(e,s,o){const{container_id:r}=s;return this._client.delete(xe`/containers/${r}/files/${e}`,{...o,headers:Me([{Accept:"*/*"},o==null?void 0:o.headers])})}};$p.Content=$w;class Hp extends Pe{constructor(){super(...arguments),this.files=new $p(this._client)}create(e,s){return this._client.post("/containers",{body:e,...s})}retrieve(e,s){return this._client.get(xe`/containers/${e}`,s)}list(e={},s){return this._client.getAPIList("/containers",Bt,{query:e,...s})}delete(e,s){return this._client.delete(xe`/containers/${e}`,{...s,headers:Me([{Accept:"*/*"},s==null?void 0:s.headers])})}}Hp.Files=$p;class Hw extends Pe{create(e,s,o){const{include:r,...c}=s;return this._client.post(xe`/conversations/${e}/items`,{query:{include:r},body:c,...o})}retrieve(e,s,o){const{conversation_id:r,...c}=s;return this._client.get(xe`/conversations/${r}/items/${e}`,{query:c,...o})}list(e,s={},o){return this._client.getAPIList(xe`/conversations/${e}/items`,nu,{query:s,...o})}delete(e,s,o){const{conversation_id:r}=s;return this._client.delete(xe`/conversations/${r}/items/${e}`,o)}}class qp extends Pe{constructor(){super(...arguments),this.items=new Hw(this._client)}create(e={},s){return this._client.post("/conversations",{body:e,...s})}retrieve(e,s){return this._client.get(xe`/conversations/${e}`,s)}update(e,s,o){return this._client.post(xe`/conversations/${e}`,{body:s,...o})}delete(e,s){return this._client.delete(xe`/conversations/${e}`,s)}}qp.Items=Hw;class qw extends Pe{create(e,s){const o=!!e.encoding_format;let r=o?e.encoding_format:"base64";o&&rn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const c=this._client.post("/embeddings",{body:{...e,encoding_format:r},...s});return o?c:(rn(this._client).debug("embeddings/decoding base64 embeddings from base64"),c._thenUnwrap(d=>(d&&d.data&&d.data.forEach(h=>{const g=h.embedding;h.embedding=d3(g)}),d)))}}class Vw extends Pe{retrieve(e,s,o){const{eval_id:r,run_id:c}=s;return this._client.get(xe`/evals/${r}/runs/${c}/output_items/${e}`,o)}list(e,s,o){const{eval_id:r,...c}=s;return this._client.getAPIList(xe`/evals/${r}/runs/${e}/output_items`,Bt,{query:c,...o})}}class Vp extends Pe{constructor(){super(...arguments),this.outputItems=new Vw(this._client)}create(e,s,o){return this._client.post(xe`/evals/${e}/runs`,{body:s,...o})}retrieve(e,s,o){const{eval_id:r}=s;return this._client.get(xe`/evals/${r}/runs/${e}`,o)}list(e,s={},o){return this._client.getAPIList(xe`/evals/${e}/runs`,Bt,{query:s,...o})}delete(e,s,o){const{eval_id:r}=s;return this._client.delete(xe`/evals/${r}/runs/${e}`,o)}cancel(e,s,o){const{eval_id:r}=s;return this._client.post(xe`/evals/${r}/runs/${e}`,o)}}Vp.OutputItems=Vw;class Jp extends Pe{constructor(){super(...arguments),this.runs=new Vp(this._client)}create(e,s){return this._client.post("/evals",{body:e,...s})}retrieve(e,s){return this._client.get(xe`/evals/${e}`,s)}update(e,s,o){return this._client.post(xe`/evals/${e}`,{body:s,...o})}list(e={},s){return this._client.getAPIList("/evals",Bt,{query:e,...s})}delete(e,s){return this._client.delete(xe`/evals/${e}`,s)}}Jp.Runs=Vp;let Jw=class extends Pe{create(e,s){return this._client.post("/files",mo({body:e,...s},this._client))}retrieve(e,s){return this._client.get(xe`/files/${e}`,s)}list(e={},s){return this._client.getAPIList("/files",Bt,{query:e,...s})}delete(e,s){return this._client.delete(xe`/files/${e}`,s)}content(e,s){return this._client.get(xe`/files/${e}/content`,{...s,headers:Me([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:s=5e3,maxWait:o=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),c=Date.now();let d=await this.retrieve(e);for(;!d.status||!r.has(d.status);)if(await Jr(s),d=await this.retrieve(e),Date.now()-c>o)throw new kp({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return d}};class Ww extends Pe{}let Yw=class extends Pe{run(e,s){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...s})}validate(e,s){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...s})}};class Wp extends Pe{constructor(){super(...arguments),this.graders=new Yw(this._client)}}Wp.Graders=Yw;class Kw extends Pe{create(e,s,o){return this._client.getAPIList(xe`/fine_tuning/checkpoints/${e}/permissions`,Au,{body:s,method:"post",...o})}retrieve(e,s={},o){return this._client.get(xe`/fine_tuning/checkpoints/${e}/permissions`,{query:s,...o})}delete(e,s,o){const{fine_tuned_model_checkpoint:r}=s;return this._client.delete(xe`/fine_tuning/checkpoints/${r}/permissions/${e}`,o)}}let Yp=class extends Pe{constructor(){super(...arguments),this.permissions=new Kw(this._client)}};Yp.Permissions=Kw;class Xw extends Pe{list(e,s={},o){return this._client.getAPIList(xe`/fine_tuning/jobs/${e}/checkpoints`,Bt,{query:s,...o})}}class Kp extends Pe{constructor(){super(...arguments),this.checkpoints=new Xw(this._client)}create(e,s){return this._client.post("/fine_tuning/jobs",{body:e,...s})}retrieve(e,s){return this._client.get(xe`/fine_tuning/jobs/${e}`,s)}list(e={},s){return this._client.getAPIList("/fine_tuning/jobs",Bt,{query:e,...s})}cancel(e,s){return this._client.post(xe`/fine_tuning/jobs/${e}/cancel`,s)}listEvents(e,s={},o){return this._client.getAPIList(xe`/fine_tuning/jobs/${e}/events`,Bt,{query:s,...o})}pause(e,s){return this._client.post(xe`/fine_tuning/jobs/${e}/pause`,s)}resume(e,s){return this._client.post(xe`/fine_tuning/jobs/${e}/resume`,s)}}Kp.Checkpoints=Xw;class Ta extends Pe{constructor(){super(...arguments),this.methods=new Ww(this._client),this.jobs=new Kp(this._client),this.checkpoints=new Yp(this._client),this.alpha=new Wp(this._client)}}Ta.Methods=Ww;Ta.Jobs=Kp;Ta.Checkpoints=Yp;Ta.Alpha=Wp;class Qw extends Pe{}class Xp extends Pe{constructor(){super(...arguments),this.graderModels=new Qw(this._client)}}Xp.GraderModels=Qw;class Zw extends Pe{createVariation(e,s){return this._client.post("/images/variations",mo({body:e,...s},this._client))}edit(e,s){return this._client.post("/images/edits",mo({body:e,...s,stream:e.stream??!1},this._client))}generate(e,s){return this._client.post("/images/generations",{body:e,...s,stream:e.stream??!1})}}class eE extends Pe{retrieve(e,s){return this._client.get(xe`/models/${e}`,s)}list(e){return this._client.getAPIList("/models",Au,e)}delete(e,s){return this._client.delete(xe`/models/${e}`,s)}}class tE extends Pe{create(e,s){return this._client.post("/moderations",{body:e,...s})}}class nE extends Pe{accept(e,s,o){return this._client.post(xe`/realtime/calls/${e}/accept`,{body:s,...o,headers:Me([{Accept:"*/*"},o==null?void 0:o.headers])})}hangup(e,s){return this._client.post(xe`/realtime/calls/${e}/hangup`,{...s,headers:Me([{Accept:"*/*"},s==null?void 0:s.headers])})}refer(e,s,o){return this._client.post(xe`/realtime/calls/${e}/refer`,{body:s,...o,headers:Me([{Accept:"*/*"},o==null?void 0:o.headers])})}reject(e,s={},o){return this._client.post(xe`/realtime/calls/${e}/reject`,{body:s,...o,headers:Me([{Accept:"*/*"},o==null?void 0:o.headers])})}}class sE extends Pe{create(e,s){return this._client.post("/realtime/client_secrets",{body:e,...s})}}class ku extends Pe{constructor(){super(...arguments),this.clientSecrets=new sE(this._client),this.calls=new nE(this._client)}}ku.ClientSecrets=sE;ku.Calls=nE;function f3(n,e){return!e||!p3(e)?{...n,output_parsed:null,output:n.output.map(s=>s.type==="function_call"?{...s,parsed_arguments:null}:s.type==="message"?{...s,content:s.content.map(o=>({...o,parsed:null}))}:s)}:iE(n,e)}function iE(n,e){const s=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:y3(e,r)};if(r.type==="message"){const c=r.content.map(d=>d.type==="output_text"?{...d,parsed:h3(e,d.text)}:d);return{...r,content:c}}return r}),o=Object.assign({},n,{output:s});return Object.getOwnPropertyDescriptor(n,"output_text")||rp(o),Object.defineProperty(o,"output_parsed",{enumerable:!0,get(){for(const r of o.output)if(r.type==="message"){for(const c of r.content)if(c.type==="output_text"&&c.parsed!==null)return c.parsed}return null}}),o}function h3(n,e){var s,o,r,c;return((o=(s=n.text)==null?void 0:s.format)==null?void 0:o.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((c=n.text)==null?void 0:c.format).$parseRaw(e):JSON.parse(e)}function p3(n){var e;return!!jp((e=n.text)==null?void 0:e.format)}function m3(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function g3(n,e){return n.find(s=>s.type==="function"&&s.name===e)}function y3(n,e){const s=g3(n.tools??[],e.name);return{...e,...e,parsed_arguments:m3(s)?s.$parseRaw(e.arguments):s!=null&&s.strict?JSON.parse(e.arguments):null}}function rp(n){const e=[];for(const s of n.output)if(s.type==="message")for(const o of s.content)o.type==="output_text"&&e.push(o.text);n.output_text=e.join("")}var aa,wc,ki,Ec,Db,Pb,Lb,jb;class Qp extends Op{constructor(e){super(),aa.add(this),wc.set(this,void 0),ki.set(this,void 0),Ec.set(this,void 0),Fe(this,wc,e)}static createResponse(e,s,o){const r=new Qp(s);return r._run(()=>r._createOrRetrieveResponse(e,s,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,s,o){var h;const r=o==null?void 0:o.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,aa,"m",Db).call(this);let c,d=null;"response_id"in s?(c=await e.responses.retrieve(s.response_id,{stream:!0},{...o,signal:this.controller.signal,stream:!0}),d=s.starting_after??null):c=await e.responses.create({...s,stream:!0},{...o,signal:this.controller.signal}),this._connected();for await(const g of c)Q(this,aa,"m",Pb).call(this,g,d);if((h=c.controller.signal)!=null&&h.aborted)throw new ns;return Q(this,aa,"m",Lb).call(this)}[(wc=new WeakMap,ki=new WeakMap,Ec=new WeakMap,aa=new WeakSet,Db=function(){this.ended||Fe(this,ki,void 0)},Pb=function(s,o){if(this.ended)return;const r=(d,h)=>{(o==null||h.sequence_number>o)&&this._emit(d,h)},c=Q(this,aa,"m",jb).call(this,s);switch(r("event",s),s.type){case"response.output_text.delta":{const d=c.output[s.output_index];if(!d)throw new je(`missing output at index ${s.output_index}`);if(d.type==="message"){const h=d.content[s.content_index];if(!h)throw new je(`missing content at index ${s.content_index}`);if(h.type!=="output_text")throw new je(`expected content to be 'output_text', got ${h.type}`);r("response.output_text.delta",{...s,snapshot:h.text})}break}case"response.function_call_arguments.delta":{const d=c.output[s.output_index];if(!d)throw new je(`missing output at index ${s.output_index}`);d.type==="function_call"&&r("response.function_call_arguments.delta",{...s,snapshot:d.arguments});break}default:r(s.type,s);break}},Lb=function(){if(this.ended)throw new je("stream has ended, this shouldn't happen");const s=Q(this,ki,"f");if(!s)throw new je("request ended without sending any events");Fe(this,ki,void 0);const o=x3(s,Q(this,wc,"f"));return Fe(this,Ec,o),o},jb=function(s){var r;let o=Q(this,ki,"f");if(!o){if(s.type!=="response.created")throw new je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${s.type}`);return o=Fe(this,ki,s.response),o}switch(s.type){case"response.output_item.added":{o.output.push(s.item);break}case"response.content_part.added":{const c=o.output[s.output_index];if(!c)throw new je(`missing output at index ${s.output_index}`);const d=c.type,h=s.part;d==="message"&&h.type!=="reasoning_text"?c.content.push(h):d==="reasoning"&&h.type==="reasoning_text"&&(c.content||(c.content=[]),c.content.push(h));break}case"response.output_text.delta":{const c=o.output[s.output_index];if(!c)throw new je(`missing output at index ${s.output_index}`);if(c.type==="message"){const d=c.content[s.content_index];if(!d)throw new je(`missing content at index ${s.content_index}`);if(d.type!=="output_text")throw new je(`expected content to be 'output_text', got ${d.type}`);d.text+=s.delta}break}case"response.function_call_arguments.delta":{const c=o.output[s.output_index];if(!c)throw new je(`missing output at index ${s.output_index}`);c.type==="function_call"&&(c.arguments+=s.delta);break}case"response.reasoning_text.delta":{const c=o.output[s.output_index];if(!c)throw new je(`missing output at index ${s.output_index}`);if(c.type==="reasoning"){const d=(r=c.content)==null?void 0:r[s.content_index];if(!d)throw new je(`missing content at index ${s.content_index}`);if(d.type!=="reasoning_text")throw new je(`expected content to be 'reasoning_text', got ${d.type}`);d.text+=s.delta}break}case"response.completed":{Fe(this,ki,s.response);break}}return o},Symbol.asyncIterator)](){const e=[],s=[];let o=!1;return this.on("event",r=>{const c=s.shift();c?c.resolve(r):e.push(r)}),this.on("end",()=>{o=!0;for(const r of s)r.resolve(void 0);s.length=0}),this.on("abort",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),this.on("error",r=>{o=!0;for(const c of s)c.reject(r);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((c,d)=>s.push({resolve:c,reject:d})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Q(this,Ec,"f");if(!e)throw new je("stream ended without producing a ChatCompletion");return e}}function x3(n,e){return f3(n,e)}class oE extends Pe{list(e,s={},o){return this._client.getAPIList(xe`/responses/${e}/input_items`,Bt,{query:s,...o})}}class aE extends Pe{count(e={},s){return this._client.post("/responses/input_tokens",{body:e,...s})}}class Du extends Pe{constructor(){super(...arguments),this.inputItems=new oE(this._client),this.inputTokens=new aE(this._client)}create(e,s){return this._client.post("/responses",{body:e,...s,stream:e.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&rp(o),o))}retrieve(e,s={},o){return this._client.get(xe`/responses/${e}`,{query:s,...o,stream:(s==null?void 0:s.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&rp(r),r))}delete(e,s){return this._client.delete(xe`/responses/${e}`,{...s,headers:Me([{Accept:"*/*"},s==null?void 0:s.headers])})}parse(e,s){return this._client.responses.create(e,s)._thenUnwrap(o=>iE(o,e))}stream(e,s){return Qp.createResponse(this._client,e,s)}cancel(e,s){return this._client.post(xe`/responses/${e}/cancel`,s)}compact(e={},s){return this._client.post("/responses/compact",{body:e,...s})}}Du.InputItems=oE;Du.InputTokens=aE;class rE extends Pe{create(e,s,o){return this._client.post(xe`/uploads/${e}/parts`,mo({body:s,...o},this._client))}}class Zp extends Pe{constructor(){super(...arguments),this.parts=new rE(this._client)}create(e,s){return this._client.post("/uploads",{body:e,...s})}cancel(e,s){return this._client.post(xe`/uploads/${e}/cancel`,s)}complete(e,s,o){return this._client.post(xe`/uploads/${e}/complete`,{body:s,...o})}}Zp.Parts=rE;const v3=async n=>{const e=await Promise.allSettled(n),s=e.filter(r=>r.status==="rejected");if(s.length){for(const r of s)console.error(r.reason);throw new Error(`${s.length} promise(s) failed - see the above errors`)}const o=[];for(const r of e)r.status==="fulfilled"&&o.push(r.value);return o};class lE extends Pe{create(e,s,o){return this._client.post(xe`/vector_stores/${e}/file_batches`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,s,o){const{vector_store_id:r}=s;return this._client.get(xe`/vector_stores/${r}/file_batches/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,s,o){const{vector_store_id:r}=s;return this._client.post(xe`/vector_stores/${r}/file_batches/${e}/cancel`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,s,o){const r=await this.create(e,s);return await this.poll(e,r.id,o)}listFiles(e,s,o){const{vector_store_id:r,...c}=s;return this._client.getAPIList(xe`/vector_stores/${r}/file_batches/${e}/files`,Bt,{query:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async poll(e,s,o){var c;const r=Me([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((c=o==null?void 0:o.pollIntervalMs)==null?void 0:c.toString())??void 0}]);for(;;){const{data:d,response:h}=await this.retrieve(s,{vector_store_id:e},{...o,headers:r}).withResponse();switch(d.status){case"in_progress":let g=5e3;if(o!=null&&o.pollIntervalMs)g=o.pollIntervalMs;else{const m=h.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(g=v)}}await Jr(g);break;case"failed":case"cancelled":case"completed":return d}}}async uploadAndPoll(e,{files:s,fileIds:o=[]},r){if(s==null||s.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const c=(r==null?void 0:r.maxConcurrency)??5,d=Math.min(c,s.length),h=this._client,g=s.values(),m=[...o];async function v(S){for(let E of S){const T=await h.files.create({file:E,purpose:"assistants"},r);m.push(T.id)}}const b=Array(d).fill(g).map(v);return await v3(b),await this.createAndPoll(e,{file_ids:m})}}class cE extends Pe{create(e,s,o){return this._client.post(xe`/vector_stores/${e}/files`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,s,o){const{vector_store_id:r}=s;return this._client.get(xe`/vector_stores/${r}/files/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,s,o){const{vector_store_id:r,...c}=s;return this._client.post(xe`/vector_stores/${r}/files/${e}`,{body:c,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,s={},o){return this._client.getAPIList(xe`/vector_stores/${e}/files`,Bt,{query:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,s,o){const{vector_store_id:r}=s;return this._client.delete(xe`/vector_stores/${r}/files/${e}`,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,s,o){const r=await this.create(e,s,o);return await this.poll(e,r.id,o)}async poll(e,s,o){var c;const r=Me([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((c=o==null?void 0:o.pollIntervalMs)==null?void 0:c.toString())??void 0}]);for(;;){const d=await this.retrieve(s,{vector_store_id:e},{...o,headers:r}).withResponse(),h=d.data;switch(h.status){case"in_progress":let g=5e3;if(o!=null&&o.pollIntervalMs)g=o.pollIntervalMs;else{const m=d.response.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(g=v)}}await Jr(g);break;case"failed":case"completed":return h}}}async upload(e,s,o){const r=await this._client.files.create({file:s,purpose:"assistants"},o);return this.create(e,{file_id:r.id},o)}async uploadAndPoll(e,s,o){const r=await this.upload(e,s,o);return await this.poll(e,r.id,o)}content(e,s,o){const{vector_store_id:r}=s;return this._client.getAPIList(xe`/vector_stores/${r}/files/${e}/content`,Au,{...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class Pu extends Pe{constructor(){super(...arguments),this.files=new cE(this._client),this.fileBatches=new lE(this._client)}create(e,s){return this._client.post("/vector_stores",{body:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,s){return this._client.get(xe`/vector_stores/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,s,o){return this._client.post(xe`/vector_stores/${e}`,{body:s,...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},s){return this._client.getAPIList("/vector_stores",Bt,{query:e,...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,s){return this._client.delete(xe`/vector_stores/${e}`,{...s,headers:Me([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}search(e,s,o){return this._client.getAPIList(xe`/vector_stores/${e}/search`,Au,{body:s,method:"post",...o,headers:Me([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}Pu.Files=cE;Pu.FileBatches=lE;class uE extends Pe{create(e,s){return this._client.post("/videos",Cb({body:e,...s},this._client))}retrieve(e,s){return this._client.get(xe`/videos/${e}`,s)}list(e={},s){return this._client.getAPIList("/videos",nu,{query:e,...s})}delete(e,s){return this._client.delete(xe`/videos/${e}`,s)}downloadContent(e,s={},o){return this._client.get(xe`/videos/${e}/content`,{query:s,...o,headers:Me([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}remix(e,s,o){return this._client.post(xe`/videos/${e}/remix`,Cb({body:s,...o},this._client))}}var ua,dE,jc;class fE extends Pe{constructor(){super(...arguments),ua.add(this)}async unwrap(e,s,o=this._client.webhookSecret,r=300){return await this.verifySignature(e,s,o,r),JSON.parse(e)}async verifySignature(e,s,o=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Q(this,ua,"m",dE).call(this,o);const c=Me([s]).values,d=Q(this,ua,"m",jc).call(this,c,"webhook-signature"),h=Q(this,ua,"m",jc).call(this,c,"webhook-timestamp"),g=Q(this,ua,"m",jc).call(this,c,"webhook-id"),m=parseInt(h,10);if(isNaN(m))throw new Tr("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>r)throw new Tr("Webhook timestamp is too old");if(m>v+r)throw new Tr("Webhook timestamp is too new");const b=d.split(" ").map(R=>R.startsWith("v1,")?R.substring(3):R),S=o.startsWith("whsec_")?Buffer.from(o.replace("whsec_",""),"base64"):Buffer.from(o,"utf-8"),E=g?`${g}.${h}.${e}`:`${h}.${e}`,T=await crypto.subtle.importKey("raw",S,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const R of b)try{const _=Buffer.from(R,"base64");if(await crypto.subtle.verify("HMAC",T,_,new TextEncoder().encode(E)))return}catch{continue}throw new Tr("The given webhook signature does not match the expected signature")}}ua=new WeakSet,dE=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},jc=function(e,s){if(!e)throw new Error("Headers are required");const o=e.get(s);if(o==null)throw new Error(`Missing required header: ${s}`);return o};var lp,em,Uc,hE;class Ye{constructor({baseURL:e=oa("OPENAI_BASE_URL"),apiKey:s=oa("OPENAI_API_KEY"),organization:o=oa("OPENAI_ORG_ID")??null,project:r=oa("OPENAI_PROJECT_ID")??null,webhookSecret:c=oa("OPENAI_WEBHOOK_SECRET")??null,...d}={}){if(lp.add(this),Uc.set(this,void 0),this.completions=new Bw(this),this.chat=new Fp(this),this.embeddings=new qw(this),this.files=new Jw(this),this.images=new Zw(this),this.audio=new Yr(this),this.moderations=new tE(this),this.models=new eE(this),this.fineTuning=new Ta(this),this.graders=new Xp(this),this.vectorStores=new Pu(this),this.webhooks=new fE(this),this.beta=new _a(this),this.batches=new Pw(this),this.uploads=new Zp(this),this.responses=new Du(this),this.realtime=new ku(this),this.conversations=new qp(this),this.evals=new Jp(this),this.containers=new Hp(this),this.videos=new uE(this),s===void 0)throw new je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const h={apiKey:s,organization:o,project:r,webhookSecret:c,...d,baseURL:e||"https://api.openai.com/v1"};if(!h.dangerouslyAllowBrowser&&CL())throw new je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=h.baseURL,this.timeout=h.timeout??em.DEFAULT_TIMEOUT,this.logger=h.logger??console;const g="warn";this.logLevel=g,this.logLevel=vb(h.logLevel,"ClientOptions.logLevel",this)??vb(oa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??g,this.fetchOptions=h.fetchOptions,this.maxRetries=h.maxRetries??2,this.fetch=h.fetch??TL(),Fe(this,Uc,AL),this._options=h,this.apiKey=typeof s=="string"?s:"Missing Key",this.organization=o,this.project=r,this.webhookSecret=c}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){}async authHeaders(e){return Me([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return PL(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${la}`}defaultIdempotencyKey(){return`stainless-node-retry-${jS()}`}makeStatusError(e,s,o,r){return un.generate(e,s,o,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let s;try{s=await e()}catch(o){throw o instanceof je?o:new je(`Failed to get token from 'apiKey' function: ${o.message}`,{cause:o})}if(typeof s!="string"||!s)throw new je(`Expected 'apiKey' function argument to return a string but it returned ${s}`);return this.apiKey=s,!0}buildURL(e,s,o){const r=!Q(this,lp,"m",hE).call(this)&&o||this.baseURL,c=gL(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return yL(d)||(s={...d,...s}),typeof s=="object"&&s&&!Array.isArray(s)&&(c.search=this.stringifyQuery(s)),c.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:s,options:o}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(r=>({method:e,path:s,...r})))}request(e,s=null){return new Nu(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,o){var M,k;const r=await e,c=r.maxRetries??this.maxRetries;s==null&&(s=c),await this.prepareOptions(r);const{req:d,url:h,timeout:g}=await this.buildRequest(r,{retryCount:c-s});await this.prepareRequest(d,{url:h,options:r});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=o===void 0?"":`, retryOf: ${o}`,b=Date.now();if(rn(this).debug(`[${m}] sending request`,lo({retryOfRequestLogID:o,method:r.method,url:h,options:r,headers:d.headers})),(M=r.signal)!=null&&M.aborted)throw new ns;const S=new AbortController,E=await this.fetchWithTimeout(h,d,g,S).catch(Kh),T=Date.now();if(E instanceof globalThis.Error){const I=`retrying, ${s} attempts remaining`;if((k=r.signal)!=null&&k.aborted)throw new ns;const j=Yh(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(s)return rn(this).info(`[${m}] connection ${j?"timed out":"failed"} - ${I}`),rn(this).debug(`[${m}] connection ${j?"timed out":"failed"} (${I})`,lo({retryOfRequestLogID:o,url:h,durationMs:T-b,message:E.message})),this.retryRequest(r,s,o??m);throw rn(this).info(`[${m}] connection ${j?"timed out":"failed"} - error; no more retries left`),rn(this).debug(`[${m}] connection ${j?"timed out":"failed"} (error; no more retries left)`,lo({retryOfRequestLogID:o,url:h,durationMs:T-b,message:E.message})),j?new kp:new _u({cause:E})}const R=[...E.headers.entries()].filter(([I])=>I==="x-request-id").map(([I,j])=>", "+I+": "+JSON.stringify(j)).join(""),_=`[${m}${v}${R}] ${d.method} ${h} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${T-b}ms`;if(!E.ok){const I=await this.shouldRetry(E);if(s&&I){const V=`retrying, ${s} attempts remaining`;return await NL(E.body),rn(this).info(`${_} - ${V}`),rn(this).debug(`[${m}] response error (${V})`,lo({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:T-b})),this.retryRequest(r,s,o??m,E.headers)}const j=I?"error; no more retries left":"error; not retryable";rn(this).info(`${_} - ${j}`);const J=await E.text().catch(V=>Kh(V).message),Z=bL(J),$=Z?void 0:J;throw rn(this).debug(`[${m}] response error (${j})`,lo({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,message:$,durationMs:Date.now()-b})),this.makeStatusError(E.status,Z,$,E.headers)}return rn(this).info(_),rn(this).debug(`[${m}] response start`,lo({retryOfRequestLogID:o,url:E.url,status:E.status,headers:E.headers,durationMs:T-b})),{response:E,options:r,controller:S,requestLogID:m,retryOfRequestLogID:o,startTime:b}}getAPIList(e,s,o){return this.requestAPIList(s,{method:"get",path:e,...o})}requestAPIList(e,s){const o=this.makeRequest(s,null,void 0);return new $L(this,o,e)}async fetchWithTimeout(e,s,o,r){const{signal:c,method:d,...h}=s||{};c&&c.addEventListener("abort",()=>r.abort());const g=setTimeout(()=>r.abort(),o),m=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v={signal:r.signal,...m?{duplex:"half"}:{},method:"GET",...h};d&&(v.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(g)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o,r){let c;const d=r==null?void 0:r.get("retry-after-ms");if(d){const g=parseFloat(d);Number.isNaN(g)||(c=g)}const h=r==null?void 0:r.get("retry-after");if(h&&!c){const g=parseFloat(h);Number.isNaN(g)?c=Date.parse(h)-Date.now():c=g*1e3}if(!(c&&0<=c&&c<60*1e3)){const g=e.maxRetries??this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(s,g)}return await Jr(c),this.makeRequest(e,s-1,o)}calculateDefaultRetryTimeoutMillis(e,s){const c=s-e,d=Math.min(.5*Math.pow(2,c),8),h=1-Math.random()*.25;return d*h*1e3}async buildRequest(e,{retryCount:s=0}={}){const o={...e},{method:r,path:c,query:d,defaultBaseURL:h}=o,g=this.buildURL(c,d,h);"timeout"in o&&vL("timeout",o.timeout),o.timeout=o.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:o}),b=await this.buildHeaders({options:e,method:r,bodyHeaders:m,retryCount:s});return{req:{method:r,headers:b,...o.signal&&{signal:o.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...o.fetchOptions??{}},url:g,timeout:o.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:o,retryCount:r}){let c={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const d=Me([c,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},..._L(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Me([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:YS(e)}:Q(this,Uc,"f").call(this,{body:e,headers:o})}}em=Ye,Uc=new WeakMap,lp=new WeakSet,hE=function(){return this.baseURL!=="https://api.openai.com/v1"};Ye.OpenAI=em;Ye.DEFAULT_TIMEOUT=6e5;Ye.OpenAIError=je;Ye.APIError=un;Ye.APIConnectionError=_u;Ye.APIConnectionTimeoutError=kp;Ye.APIUserAbortError=ns;Ye.NotFoundError=zS;Ye.ConflictError=FS;Ye.RateLimitError=$S;Ye.BadRequestError=US;Ye.AuthenticationError=OS;Ye.InternalServerError=HS;Ye.PermissionDeniedError=GS;Ye.UnprocessableEntityError=BS;Ye.InvalidWebhookSignatureError=Tr;Ye.toFile=WL;Ye.Completions=Bw;Ye.Chat=Fp;Ye.Embeddings=qw;Ye.Files=Jw;Ye.Images=Zw;Ye.Audio=Yr;Ye.Moderations=tE;Ye.Models=eE;Ye.FineTuning=Ta;Ye.Graders=Xp;Ye.VectorStores=Pu;Ye.Webhooks=fE;Ye.Beta=_a;Ye.Batches=Pw;Ye.Uploads=Zp;Ye.Responses=Du;Ye.Realtime=ku;Ye.Conversations=qp;Ye.Evals=Jp;Ye.Containers=Hp;Ye.Videos=uE;var b3={};const C3={type:"array",items:{type:"object",properties:{name:{type:"string"},tags:{type:"array",items:{type:"string"}},components:{type:"object",description:"Map of component IDs to their data objects",nullable:!0}},required:["name","tags","components"]}};class S3{constructor(e){this.name="openai",this.client=null;const s=Cp.openai;this.apiKey=(e==null?void 0:e.apiKey)||b3.OPENAI_API_KEY||"",this.modelName=(e==null?void 0:e.model)||s.model;const o=(e==null?void 0:e.rateLimit)||s.rateLimit;this.rateLimiter=LS("OpenAI",{maxRequests:o.maxRequests,windowMs:o.windowMs}),this.apiKey&&(this.client=new Ye({apiKey:this.apiKey,dangerouslyAllowBrowser:!0}))}configure(e,s){this.apiKey=e,s&&(this.modelName=s),e?this.client=new Ye({apiKey:e,dangerouslyAllowBrowser:!0}):this.client=null}isConfigured(){return!!this.apiKey&&!!this.client}async generateStructuredData(e,s,o,r=.3){var m,v,b;if(!this.client)throw new Error("OpenAI API not configured. Please provide an API key.");await this.rateLimiter.enforce();const c=eu(o),d=await this.client.chat.completions.create({model:this.modelName,messages:[{role:"system",content:e},{role:"user",content:s}],response_format:{type:"json_schema",json_schema:{name:"structured_response",strict:!0,schema:c}},temperature:r}),h=((v=(m=d.choices[0])==null?void 0:m.message)==null?void 0:v.content)||"{}",g=((b=d.usage)==null?void 0:b.total_tokens)||0;return{data:JSON.parse(h),tokens:g,raw:h}}async generateBatch(e,s,o,r,c,d,h,g=.9){var T,R;if(!this.client)throw new Error("OpenAI API not configured. Please provide an API key.");const m=this.buildSystemPrompt(e,o,r,c,!!d),v=eu(d||C3),b=3;let S=0,E;for(;S<b;)try{S++,await this.rateLimiter.enforce();const M=((R=(T=(await this.client.chat.completions.create({model:this.modelName,messages:[{role:"system",content:m},{role:"user",content:s}],response_format:{type:"json_schema",json_schema:{name:"entity_batch",strict:!0,schema:v}},temperature:g})).choices[0])==null?void 0:T.message)==null?void 0:R.content)||"[]";let k=this.parseJsonWithSalvage(M);if(!Array.isArray(k))throw new Error("Model returned object instead of array.");const I=h?new Set(h):void 0;return k.map(j=>this.normalizeEntity(j,I))}catch(_){if(console.warn(`OpenAI Generation Attempt ${S} Failed:`,_.message),E=_,S<b){const M=1e3*Math.pow(2,S-1);await new Promise(k=>setTimeout(k,M))}}throw new Error(`Generation failed after ${b} attempts. Last error: ${E==null?void 0:E.message}`)}parseJsonWithSalvage(e){try{return JSON.parse(e)}catch(s){console.warn("JSON Parse Failed. Attempting salvage...");const o=this.trySalvageJson(e);if(o)return o;throw s}}trySalvageJson(e){try{if(e.lastIndexOf("},")===-1)return null;const o=e.lastIndexOf("}");if(o===-1)return null;const c=e.substring(0,o+1)+"]";return JSON.parse(c)}catch{return null}}normalizeEntity(e,s){var d;const o=e.components||{},r={},c=["metadata","lore","rarity","relations"];return Object.keys(o).forEach(h=>{s?(s.has(h)||c.includes(h))&&(r[h]=o[h]):r[h]=o[h]}),{id:crypto.randomUUID(),name:e.name||"Unnamed Entity",tags:Array.isArray(e.tags)?e.tags:[],components:{...r,metadata:{id:crypto.randomUUID(),created:Date.now(),rarity:((d=o.rarity)==null?void 0:d.value)||"Common",...r.metadata||{}}}}}buildSystemPrompt(e,s,o,r,c){const d=c?"STRICTLY FOLLOW the provided JSON schema. Do not invent fields.":"Follow the standard Entity Component System structure.";let h="";return r.language==="Chinese"?(h=`- 'tags': Return tags as an array of strings in SIMPLIFIED CHINESE characters. Do NOT use English.
`,h+="- TAG FORMAT: You SHOULD include a brief description for new tags using the format 'TagLabel|Description'."):(h=`- 'tags': Normalize tags to Title Case IDs.
`,h+="- TAG FORMAT: You SHOULD include a brief description for new tags using the format 'TagLabel|Description'."),`
            You are the 'Nexus Forge' Database Architect.
            
            WORLD CONTEXT:
            ${o}
            
            TASK:
            Generate ${s} distinct Entities for the pool '${e}'.
            
            ${this.buildCommonPromptSections(r)}
            
            CRITICAL INSTRUCTIONS:
            - ${d}
            - Output RAW JSON only. No markdown formatting, no conversational text.
            ${h}
            - Ensure all required fields are present.
        `}buildCommonPromptSections(e){var h,g,m;const s=e.toneInstruction?`WRITING STYLE: ${e.toneInstruction}`:"WRITING STYLE: Standard RPG description.",o=e.language==="Chinese"?"OUTPUT LANGUAGE: Chinese (Simplified). Names, Descriptions, and Tags must be in Chinese.":"OUTPUT LANGUAGE: English.",r=e.lengthInstruction?`LENGTH CONSTRAINT: ${e.lengthInstruction} ${e.lengthPerField?"(Apply to EACH field)":"(Total budget)"}`:"";let c="";if(e.allowedTags&&e.allowedTags.length>0){const v=e.allowedTags.join(", ");c=e.strictTags?`TAGS: STRICTLY use ONLY these tags: [${v}].`:`TAGS: Select from: [${v}]. You may invent others if necessary.`}else c="TAGS: Assign relevant semantic tags.";let d="";return e.contextItems&&e.contextItems.length>0&&(d=`RELATIONSHIPS: ${e.contextItems.map(v=>`Must match "${v.name}" (${v.relationType})`).join(", ")}`),`
            ${s}
            ${r}
            ${e.rarity&&e.rarity!=="Any"?`- Rarity: ${e.rarity}`:""}
            ${(h=e.attributes)!=null&&h.length?`- Concepts: ${e.attributes.join(", ")}`:""}
            ${(g=e.negativeConstraints)!=null&&g.length?`- Avoid: ${e.negativeConstraints.join(", ")}`:""}
            ${c}
            ${d}
            ${(m=e.tagDefinitions)!=null&&m.length?`GLOSSARY:
${e.tagDefinitions.join(`
`)}`:""}
            ${o}
            NOTE: Where applicable, populate the 'relations' component with connections to other entities.
        `}}const w3=new Map;function E3(){w3.clear()}var _3={};const pE=N.createContext(null),Ub="nexus_ai_settings";function T3(n){return n==="openai"?_3.OPENAI_API_KEY||"":"PLACEHOLDER_API_KEY"}const N3=({children:n})=>{const[e,s]=N.useState(()=>{try{const m=localStorage.getItem(Ub);if(m){const v=JSON.parse(m);return v.model||(v.model=Sp(v.provider||"gemini")),{...Nx,...v}}}catch(m){console.warn("Failed to load AI settings",m)}return Nx}),[o,r]=N.useState(null),c=N.useMemo(()=>{r(null);try{let m="";switch(e.useCustomKey&&e.apiKey?m=e.apiKey:m=T3(e.provider),e.provider){case"openai":return new S3({apiKey:m,model:e.model});case"gemini":default:return new lb({apiKey:m,model:e.model})}}catch(m){return r(m.message),new lb({apiKey:""})}},[e]),d=N.useCallback(m=>{s(m);const v={...m,apiKey:m.useCustomKey?m.apiKey:""};localStorage.setItem(Ub,JSON.stringify(v)),E3()},[]),h=c.isConfigured(),g=N.useMemo(()=>({provider:c,settings:e,updateSettings:d,isConfigured:h,error:o}),[c,e,d,h,o]);return u.jsx(pE.Provider,{value:g,children:n})},Lu=()=>{const n=N.useContext(pE);if(!n)throw new Error("useAIService must be used within AIServiceProvider");return n},A3=({isOpen:n,onClose:e,onSuccess:s})=>{const{toast:o}=as(),{settings:r}=ba(),{provider:c,isConfigured:d}=Lu(),{s:h}=kn(),g=N.useMemo(()=>ZR(c),[c]),[m,v]=N.useState("IDEATION"),[b,S]=N.useState(""),[E,T]=N.useState("English"),[R,_]=N.useState(""),[M,k]=N.useState(null),[I,j]=N.useState(""),[J,Z]=N.useState(""),[$,ce]=N.useState(!1),[V,le]=N.useState(null),[ie,pe]=N.useState(!1),[H,ve]=N.useState([]),[Ce,U]=N.useState("Standard"),[ne,me]=N.useState(null),[Ee,Ae]=N.useState(0),D=()=>{if(!R)return;const O=r.tones.find(W=>W.id===R);return O?O.instruction:void 0},q=async()=>{if(b.trim()){if(!d){o({title:h("worldForge.toast.aiNotConfigured.title"),message:h("worldForge.toast.aiNotConfigured.message"),type:"error"});return}ce(!0);try{const O=D(),{data:W,tokens:ae}=await g.generateTitleGenreOptions(E,b,r.globalPromptPrefix,O);Ae(te=>te+ae),k(W),W.titles.length>0&&j(W.titles[0]),W.genres.length>0&&Z(W.genres[0])}catch{o({title:h("worldForge.toast.error.title"),message:h("worldForge.toast.generateOptionsFailed"),type:"error"})}finally{ce(!1)}}},oe=async()=>{if(!b.trim()){o({title:h("worldForge.toast.inputRequired.title"),message:h("worldForge.toast.inputRequired.message"),type:"warning"});return}if(!d){o({title:h("worldForge.toast.aiNotConfigured.title"),message:h("worldForge.toast.aiNotConfigured.message"),type:"error"});return}pe(!0);try{const O=D(),{data:W,tokens:ae}=await g.analyzeStory(b,E,r.globalPromptPrefix,O);Ae(te=>te+ae),le(W),ve(W.dynamicSchema.map(te=>te.categoryName)),v("ANALYSIS")}catch{o({title:h("worldForge.toast.analysisFailed.title"),message:h("worldForge.toast.analysisFailed.message"),type:"error"})}finally{pe(!1)}},fe=async()=>{if(V){v("BUILDING"),me({stage:"Architecting",message:"Designing blueprints...",progress:0});try{const O=D(),{data:W,tokens:ae}=await g.createBlueprint(b,V,H,I,J,E,r.globalPromptPrefix,O);Ae(Te=>Te+ae);const te=await g.executeBuild(W,b,E,Te=>me(Te),Ce,r.globalPromptPrefix,Te=>Ae(ze=>ze+Te),O);setTimeout(()=>{s(te),F()},1e3)}catch{o({title:h("worldForge.toast.genesisFailed.title"),message:h("worldForge.toast.genesisFailed.message"),type:"error"})}}},F=()=>{v("IDEATION"),S(""),k(null),le(null),me(null),Ae(0),_(""),e()},ge=()=>u.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[u.jsxs("div",{className:"bg-blue-900/10 border border-blue-500/20 p-4 rounded-lg flex gap-3",children:[u.jsx(TA,{className:"text-blue-400 shrink-0",size:20}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h4",{className:"text-sm font-bold text-blue-200",children:h("worldForge.engineTitle")}),u.jsx("p",{className:"text-xs text-blue-300/70 leading-relaxed",children:h("worldForge.step1")})]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("div",{className:"w-1/3",children:u.jsxs(xn,{label:h("worldForge.label.language"),value:E,onChange:O=>T(O.target.value),children:[u.jsx("option",{value:"English",children:"English"}),u.jsx("option",{value:"Chinese",children:"Chinese ()"})]})}),u.jsx("div",{className:"w-1/3",children:u.jsxs(xn,{label:h("worldForge.label.narrativeTone"),value:R,onChange:O=>_(O.target.value),children:[u.jsx("option",{value:"",children:h("worldForge.defaultStyle")}),r.tones.map(O=>u.jsx("option",{value:O.id,children:O.name},O.id))]})}),u.jsx("div",{className:"flex-1 flex items-end",children:u.jsx(Se,{onClick:q,disabled:$||!b.trim(),icon:u.jsx(gC,{className:$?"animate-spin":"",size:16}),className:b.trim()?"":"opacity-50 cursor-not-allowed",children:h($?"worldForge.brainstorming":"worldForge.generateOptions")})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:h("worldForge.worldTitle")}),u.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar bg-nexus-900 p-2 rounded border border-slate-700",children:[M==null?void 0:M.titles.map(O=>u.jsx("button",{onClick:()=>j(O),className:`w-full text-left px-3 py-2 rounded text-xs transition-colors ${I===O?"bg-nexus-accent text-white font-bold":"text-slate-400 hover:bg-slate-800"}`,children:O},O)),!M&&u.jsx("div",{className:"text-xs text-slate-600 italic text-center py-4",children:h("worldForge.noOptionsGenerated")})]}),u.jsx(nt,{value:I,onChange:O=>j(O.target.value),placeholder:h("worldForge.manualTitle")})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:h("worldForge.richGenre")}),u.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar bg-nexus-900 p-2 rounded border border-slate-700",children:[M==null?void 0:M.genres.map(O=>u.jsx("button",{onClick:()=>Z(O),className:`w-full text-left px-3 py-2 rounded text-xs transition-colors border-l-2 ${J===O?"bg-nexus-accent/10 border-nexus-accent text-white":"border-transparent text-slate-400 hover:bg-slate-800"}`,children:O},O)),!M&&u.jsx("div",{className:"text-xs text-slate-600 italic text-center py-4",children:h("worldForge.noOptionsGenerated")})]}),u.jsx(cn,{value:J,onChange:O=>Z(O.target.value),placeholder:h("worldForge.manualGenre"),className:"h-10 min-h-0"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"flex justify-between items-end mb-1",children:[u.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold tracking-wide",children:h("worldForge.storyPrompt")}),u.jsxs("span",{className:`text-xs font-mono ${b.length>2900?"text-red-400":"text-slate-500"}`,children:[b.length," / 3000"]})]}),u.jsx(cn,{value:b,onChange:O=>S(O.target.value.substring(0,3e3)),placeholder:h("worldForge.storyPlaceholder"),className:"h-32",maxLength:3e3})]})]}),_e=()=>u.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-nexus-accent",children:[u.jsx(lN,{size:20}),u.jsx("h3",{className:"font-bold",children:h("worldForge.decomposerResults")})]}),u.jsxs("div",{className:"bg-nexus-900 p-4 rounded border border-slate-700",children:[u.jsx("div",{className:"text-xs uppercase font-bold text-slate-500 mb-1",children:h("worldForge.aiSummary")}),u.jsxs("p",{className:"text-sm text-slate-300 italic",children:['"',V==null?void 0:V.genreSummary.summary,'"']}),u.jsx("div",{className:"mt-2 flex gap-2",children:V==null?void 0:V.genreSummary.detectedGenres.map(O=>u.jsx("span",{className:"text-xs bg-slate-800 text-slate-400 px-2 py-0.5 rounded border border-slate-700",children:O},O))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:h("worldForge.proposedCategories")}),u.jsx("span",{className:"text-xs text-slate-500",children:h("worldForge.selectedCount",{count:H.length})})]}),u.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:V==null?void 0:V.dynamicSchema.map(O=>{const W=H.includes(O.categoryName);return u.jsxs("div",{onClick:()=>{ve(W?ae=>ae.filter(te=>te!==O.categoryName):ae=>[...ae,O.categoryName])},className:`p-3 rounded border cursor-pointer transition-all ${W?"bg-nexus-accent/10 border-nexus-accent":"bg-nexus-900 border-slate-700 hover:border-slate-500"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${W?"bg-nexus-accent border-nexus-accent":"border-slate-500"}`,children:W&&u.jsx(Li,{size:12,className:"text-white"})}),u.jsx("span",{className:`font-bold text-sm ${W?"text-white":"text-slate-400"}`,children:O.categoryName})]}),u.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:O.description})]},O.categoryName)})})]}),u.jsxs("div",{className:"space-y-4 border-l border-slate-700 pl-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-purple-400 mb-2",children:[u.jsx(xp,{size:16}),u.jsx("span",{className:"font-bold text-sm uppercase",children:h("worldForge.generationEngine")})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold",children:h("worldForge.complexityLevel")}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>U("Standard"),className:`flex-1 py-3 px-2 rounded border text-xs font-bold transition-all ${Ce==="Standard"?"bg-nexus-accent text-white border-nexus-accent":"bg-nexus-900 text-slate-500 border-slate-700 hover:border-slate-500"}`,children:h("worldForge.standard")}),u.jsx("button",{onClick:()=>U("Deep Lore"),className:`flex-1 py-3 px-2 rounded border text-xs font-bold transition-all ${Ce==="Deep Lore"?"bg-purple-600 text-white border-purple-500":"bg-nexus-900 text-slate-500 border-slate-700 hover:border-slate-500"}`,children:h("worldForge.deepLore")})]}),u.jsx("p",{className:"text-xs text-slate-400 italic",children:h(Ce==="Deep Lore"?"worldForge.deepLoreDesc":"worldForge.standardDesc")})]})]})]})]}),X=()=>u.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-center space-y-6 animate-in zoom-in-95",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-24 h-24 border-4 border-slate-800 rounded-full"}),u.jsx("div",{className:"absolute inset-0 w-24 h-24 border-4 border-nexus-accent border-r-transparent rounded-full animate-spin"}),u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold text-white",children:[ne==null?void 0:ne.progress,"%"]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:ne==null?void 0:ne.stage}),u.jsx("p",{className:"text-slate-400 text-sm animate-pulse",children:ne==null?void 0:ne.message})]})]});return u.jsx(Zt,{isOpen:n,onClose:m==="BUILDING"?()=>{}:F,title:u.jsxs(u.Fragment,{children:[u.jsx($r,{size:18,className:"text-nexus-accent"})," ",h("worldForge.title")]}),maxWidth:"max-w-4xl",footer:u.jsxs("div",{className:"w-full flex justify-between items-center",children:[u.jsx("div",{className:"text-xs font-mono text-slate-500 flex items-center gap-2",children:Ee>0&&u.jsxs(u.Fragment,{children:[u.jsx(wN,{size:12,className:"text-yellow-500"}),u.jsx("span",{children:h("worldForge.tokenCost",{count:Ee.toLocaleString()})})]})}),m!=="BUILDING"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:F,children:h("worldForge.cancel")}),m==="IDEATION"&&u.jsx(Se,{onClick:oe,disabled:ie,children:ie?h("worldForge.decomposing"):u.jsxs(u.Fragment,{children:[h("worldForge.nextAnalyze")," ",u.jsx(sC,{size:14})]})}),m==="ANALYSIS"&&u.jsxs(Se,{onClick:fe,disabled:H.length===0,children:[u.jsx(dC,{size:14})," ",h("worldForge.confirmBuild")]})]})]}),children:u.jsxs("div",{className:"min-h-[400px]",children:[m==="IDEATION"&&ge(),m==="ANALYSIS"&&_e(),m==="BUILDING"&&X()]})})},R3=()=>{const n=xa(),e=va(),{setActiveWorldId:s}=Oi(),{toast:o}=as(),{settings:r,updateSettings:c}=ba(),{settings:d,updateSettings:h,isConfigured:g}=Lu(),m=Vr(),{s:v}=kn(),[b,S]=N.useState([]),[E,T]=N.useState(!0),[R,_]=N.useState(!1),[M,k]=N.useState(!1),[I,j]=N.useState(""),[J,Z]=N.useState(""),[$,ce]=N.useState(),[V,le]=N.useState(!1),ie=P=>{if(!P.trim())return m.common.validation.required;if(P.trim().length<2)return m.common.validation.minLength;if(P.trim().length>50)return m.common.validation.maxLength},pe=P=>{const he=P.target.value;j(he),V&&ce(ie(he))},H=()=>{le(!0),ce(ie(I))};N.useEffect(()=>{R||(j(""),Z(""),ce(void 0),le(!1))},[R]);const[ve,Ce]=N.useState(!1),[U,ne]=N.useState("interface"),[me,Ee]=N.useState(null),[Ae,D]=N.useState(!1),[q,oe]=N.useState(d.apiKey||""),[fe,F]=N.useState(d.provider),[ge,_e]=N.useState(d.model);N.useEffect(()=>{oe(d.apiKey||""),F(d.provider),_e(d.model)},[d]);const X=N.useRef(null),O=N.useRef(null),W=async()=>{T(!0);try{const he=(await e.listWorlds()).filter(ye=>!ye.type||ye.type==="Rulebook");S(he)}catch(P){console.error("Failed to list worlds",P),o({title:v("home.toast.systemError.title"),message:v("home.toast.systemError.message"),type:"error"})}finally{T(!1)}};N.useEffect(()=>{W()},[e]);const ae=P=>{s(P),n(`/world/${P}/edit`)},te=async()=>{const P=ie(I);if(ce(P),le(!0),!P)try{const he=await e.createWorld(I,J);s(he.id),_(!1),o({title:v("home.toast.worldInitialized.title"),message:v("home.toast.worldInitialized.message",{name:he.name}),type:"success"}),n(`/world/${he.id}/edit`)}catch{o({title:v("home.toast.creationFailed.title"),message:v("home.toast.creationFailed.message"),type:"error"})}},Te=async(P,he)=>{try{const ye=await e.exportWorldToJson(P);if(!ye)throw new Error("Export failed");const Ie=new Blob([ye],{type:"application/json"}),Oe=URL.createObjectURL(Ie),ut=document.createElement("a");ut.href=Oe,ut.download=`Nexus_${he.replace(/\s+/g,"_")}_${Date.now()}.json`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),URL.revokeObjectURL(Oe),o({title:v("home.toast.exportComplete.title"),message:v("home.toast.exportComplete.message"),type:"success"})}catch{o({title:v("home.toast.exportFailed.title"),message:v("home.toast.exportFailed.message"),type:"error"})}},ze=P=>{var Ie;const he=(Ie=P.target.files)==null?void 0:Ie[0];if(!he)return;const ye=new FileReader;ye.onload=async Oe=>{var Be;const ut=(Be=Oe.target)==null?void 0:Be.result;if(ut)try{const $e=await e.importWorldFromJson(ut);if($e)W(),o({title:v("home.toast.importSuccessful.title"),message:v("home.toast.importSuccessful.message",{name:$e.name}),type:"success"});else throw new Error("Invalid Format")}catch{o({title:v("home.toast.importFailed.title"),message:v("home.toast.importFailed.message"),type:"error"})}},ye.readAsText(he),P.target.value=""},rt=()=>{const P={globalPromptPrefix:r.globalPromptPrefix,tones:r.tones},he=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),ye=URL.createObjectURL(he),Ie=document.createElement("a");Ie.href=ye,Ie.download=`nexus_style_config_${Date.now()}.json`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(ye),o({title:v("home.toast.styleExported.title"),message:v("home.toast.styleExported.message"),type:"success"})},mt=P=>{var Ie;const he=(Ie=P.target.files)==null?void 0:Ie[0];if(!he)return;const ye=new FileReader;ye.onload=Oe=>{var ut;try{const Be=(ut=Oe.target)==null?void 0:ut.result,$e=JSON.parse(Be);if(Array.isArray($e.tones))c({...r,globalPromptPrefix:$e.globalPromptPrefix||r.globalPromptPrefix,tones:$e.tones}),o({title:v("home.toast.styleImported.title"),message:v("home.toast.styleImported.message",{count:$e.tones.length}),type:"success"});else throw new Error("Invalid format")}catch{o({title:v("home.toast.invalidConfig.title"),message:v("home.toast.invalidConfig.message"),type:"error"})}},ye.readAsText(he),P.target.value=""},tt=P=>{c({...r,uiScale:P}),o({title:v("home.toast.interfaceScaled.title"),message:v("home.toast.interfaceScaled.message",{scale:P}),type:"success"})},St=P=>{c({...r,defaultLanguage:P})},yt=()=>{if(!me||!me.name||!me.instruction)return;const P=[...r.tones];if(me.id){const he=P.findIndex(ye=>ye.id===me.id);he!==-1&&(P[he]=me)}else P.push({...me,id:crypto.randomUUID(),description:me.description||""});c({...r,tones:P}),Ee(null),o({title:v("home.toast.rolesUpdated.title"),message:v("home.toast.rolesUpdated.message"),type:"success"})},$t=P=>{const he=r.tones.filter(ye=>ye.id!==P);c({...r,tones:he})},ls=P=>{F(P),_e(Sp(P))},wt=()=>{h({...d,provider:fe,model:ge,apiKey:q}),o({title:v("home.toast.aiConfigSaved.title"),message:v("home.toast.aiConfigSaved.message",{provider:ji[fe].name,model:ge}),type:"success"})},Wt=bp[fe]||[],Tt=ji[fe],Hn=()=>u.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-2",children:u.jsxs("div",{className:"bg-nexus-900 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-200 mb-4 flex items-center gap-2",children:[u.jsx(Eh,{size:18,className:"text-nexus-accent"})," UI Scaling"]}),u.jsx("div",{className:"grid grid-cols-3 gap-4",children:["Small","Medium","Large"].map(P=>u.jsxs("button",{onClick:()=>tt(P),className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${(r.uiScale||"Small")===P?"border-nexus-accent bg-nexus-accent/10 text-white":"border-slate-700 bg-nexus-800 text-slate-500 hover:border-slate-500"}`,children:[u.jsx("span",{className:`font-bold mb-1 ${P==="Large"?"text-lg":P==="Medium"?"text-base":"text-sm"}`,children:"Aa"}),u.jsx("span",{className:"text-xs uppercase font-bold",children:P})]},P))}),u.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"Adjusts the global font size and density of the Nexus interface."})]})}),pn=()=>u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-2 h-[400px] flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center bg-nexus-900 p-3 rounded-lg border border-slate-700",children:[u.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Style Config"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"file",ref:O,onChange:mt,accept:".json",className:"hidden"}),u.jsx(Se,{size:"sm",variant:"ghost",onClick:()=>{var P;return(P=O.current)==null?void 0:P.click()},icon:u.jsx(_h,{size:14}),children:"Import Style"}),u.jsx(Se,{size:"sm",variant:"ghost",onClick:rt,icon:u.jsx(Bc,{size:14}),children:"Export Style"})]})]}),u.jsxs("div",{className:"shrink-0",children:[u.jsxs("h3",{className:"font-bold text-slate-200 mb-2 flex items-center gap-2",children:[u.jsx(pC,{size:16,className:"text-blue-400"})," Global AI Prefix"]}),u.jsx(cn,{value:r.globalPromptPrefix||"",onChange:P=>c({...r,globalPromptPrefix:P.target.value}),placeholder:"System instructions injected into every AI call (e.g. 'Be succinct', 'No modern tech')...",className:"h-64 text-xs font-mono"})]}),u.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 mt-4",children:[u.jsxs("h3",{className:"font-bold text-slate-200 flex items-center gap-2",children:[u.jsx($r,{size:16,className:"text-purple-400"})," Narrative Roles"]}),u.jsxs("button",{onClick:()=>Ee({name:"",description:"",instruction:""}),className:"text-xs flex items-center gap-1 text-nexus-accent hover:text-white",children:[u.jsx(Ft,{size:12})," Add Role"]})]}),me?u.jsxs("div",{className:"bg-nexus-900 p-3 rounded border border-slate-700 space-y-3 animate-in zoom-in-95",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-2",children:[u.jsx("span",{className:"text-xs font-bold text-purple-400 uppercase",children:"Editing Role"}),u.jsx("button",{onClick:()=>Ee(null),className:"text-slate-500 hover:text-white",children:u.jsx(Qs,{size:12})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx(nt,{value:me.name,onChange:P=>Ee({...me,name:P.target.value}),placeholder:"Role Name"}),u.jsx(nt,{value:me.description,onChange:P=>Ee({...me,description:P.target.value}),placeholder:"Short Desc"})]}),u.jsx(cn,{value:me.instruction,onChange:P=>Ee({...me,instruction:P.target.value}),placeholder:"System Instruction (e.g. 'You are a gritty narrator...')",className:"h-20 text-xs"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{size:"sm",variant:"ghost",onClick:()=>Ee(null),children:m.common.cancel}),u.jsx(Se,{size:"sm",onClick:yt,icon:u.jsx($n,{size:12}),children:m.common.save})]})]}):u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 border border-slate-700 rounded bg-nexus-900 p-2",children:r.tones.map(P=>u.jsxs("div",{className:"bg-nexus-800 p-2 rounded border border-slate-700 flex justify-between items-center group",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx("div",{className:"text-xs font-bold text-slate-200",children:P.name}),u.jsx("div",{className:"text-xs text-slate-500 whitespace-normal leading-relaxed",children:P.description})]}),u.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:[u.jsx("button",{onClick:()=>Ee(P),className:"p-1 text-slate-400 hover:text-white",children:u.jsx(Br,{size:12})}),u.jsx("button",{onClick:()=>$t(P.id),className:"p-1 text-slate-400 hover:text-red-400",children:u.jsx(Qt,{size:12})})]})]},P.id))})]})]}),z=()=>u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-2",children:[u.jsxs("div",{className:"bg-nexus-900 p-4 rounded-lg border border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(iC,{size:20,className:"text-yellow-400"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-200 text-sm",children:"AI Provider Configuration"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Choose your AI provider and model for content generation."})]})]}),u.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${g?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:[g?u.jsx(oC,{size:14}):u.jsx(rC,{size:14}),g?"Connected":"Not Configured"]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(ji).map(P=>{const he=ji[P],ye=fe===P;return u.jsxs("button",{onClick:()=>ls(P),className:`flex flex-col items-start p-3 rounded-lg border transition-all text-left ${ye?"bg-nexus-accent/10 border-nexus-accent":"bg-nexus-950 border-slate-700 hover:border-slate-500"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:`font-bold text-xs ${ye?"text-nexus-accent":"text-slate-300"}`,children:he.name}),ye&&u.jsx(Li,{size:12,className:"text-nexus-accent"})]}),u.jsx("span",{className:"text-xs text-slate-500",children:he.description})]},P)})}),u.jsxs("div",{className:"bg-nexus-950 p-3 rounded-lg border border-slate-700",children:[u.jsxs("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-2 tracking-wide flex items-center gap-2",children:[u.jsx(xp,{size:10})," Select Model"]}),u.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-64 overflow-y-auto custom-scrollbar",children:Wt.map(P=>{var ye;const he=ge===P.id;return u.jsxs("button",{onClick:()=>_e(P.id),className:`flex items-center justify-between p-2.5 rounded border transition-all ${he?"bg-nexus-accent/10 border-nexus-accent":"bg-nexus-900 border-slate-700 hover:border-slate-500"}`,children:[u.jsxs("div",{className:"flex flex-col items-start min-w-0 flex-1 pr-2",children:[u.jsx("span",{className:`font-bold text-xs ${he?"text-nexus-accent":"text-slate-300"}`,children:P.name}),u.jsx("span",{className:"text-xs text-slate-500 truncate min-w-0",title:P.description,children:P.description})]}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0 flex-wrap justify-end",children:[u.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded border font-bold uppercase ${GC[P.tier]}`,children:P.tier}),(ye=P.badges)==null?void 0:ye.map(Ie=>{const Oe=OC[Ie];return Oe?u.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded border font-bold uppercase ${Oe.className}`,title:Oe.label,children:Oe.label},Ie):null}),he&&u.jsx(Li,{size:12,className:"text-nexus-accent shrink-0"})]})]},P.id)})})]}),u.jsxs("div",{className:"flex items-center justify-between bg-nexus-950 p-3 rounded-lg border border-slate-700",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-200 text-xs",children:"Use Custom API Key"}),u.jsx("p",{className:"text-xs text-slate-500",children:d.useCustomKey?"Using your personal API key (stored locally)":`Using environment variable (${Tt.envKey})`})]}),u.jsxs("button",{onClick:()=>{const P={...d,useCustomKey:!d.useCustomKey};h(P),o({title:v("home.toast.apiModeChanged.title"),message:P.useCustomKey?v("home.toast.apiModeChanged.custom"):v("home.toast.apiModeChanged.env"),type:"info"})},className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full border transition-all text-xs font-bold ${d.useCustomKey?"bg-yellow-500/10 border-yellow-500 text-yellow-400":"bg-slate-800 border-slate-600 text-slate-500"}`,children:[d.useCustomKey?u.jsx(qc,{size:16}):u.jsx(Hc,{size:16}),d.useCustomKey?"Custom":"Env"]})]}),d.useCustomKey&&u.jsxs("div",{className:"bg-nexus-950 p-3 rounded-lg border border-slate-700 animate-in slide-in-from-top-2",children:[u.jsxs("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-2 tracking-wide flex items-center gap-2",children:[u.jsx(hC,{size:10})," ",Tt.name," API Key"]}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(nt,{type:Ae?"text":"password",value:q,onChange:P=>oe(P.target.value),placeholder:fe==="openai"?"sk-...":"AIza...",className:"text-xs font-mono pr-10"}),u.jsx("button",{onClick:()=>D(!Ae),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300",children:Ae?u.jsx(lC,{size:14}):u.jsx(cC,{size:14})})]})}),u.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[fe==="gemini"&&u.jsxs(u.Fragment,{children:["Get your API key from ",u.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-nexus-accent hover:underline",children:"Google AI Studio"}),"."]}),fe==="openai"&&u.jsxs(u.Fragment,{children:["Get your API key from ",u.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-nexus-accent hover:underline",children:"OpenAI Dashboard"}),"."]})," ","Your key is stored locally and never sent to any server."]})]}),u.jsx("div",{className:"flex justify-end pt-1",children:u.jsx(Se,{size:"sm",onClick:wt,icon:u.jsx($n,{size:12}),children:"Save AI Configuration"})})]})]}),u.jsxs("div",{className:"bg-nexus-900 p-4 rounded-lg border border-slate-700 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(eA,{size:20,className:"text-orange-400"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-200 text-sm",children:"Default Language"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Output language for AI generation."})]})]}),u.jsx("div",{className:"flex bg-nexus-950 rounded p-1 border border-slate-800",children:["English","Chinese"].map(P=>u.jsx("button",{onClick:()=>St(P),className:`px-3 py-1.5 rounded text-xs font-bold transition-all ${r.defaultLanguage===P?"bg-nexus-accent text-white shadow":"text-slate-500 hover:text-slate-300"}`,children:P==="Chinese"?"":"EN"},P))})]}),u.jsxs("div",{className:"bg-nexus-900/50 p-4 rounded-lg border border-slate-800 flex items-center justify-between opacity-75 grayscale",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(uC,{size:20,className:"text-slate-500"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-slate-400 text-sm flex items-center gap-2",children:["Image Generation",u.jsx("span",{className:"bg-slate-800 text-slate-500 text-xs px-1.5 py-0.5 rounded uppercase tracking-wider",children:"Coming Soon"})]}),u.jsx("p",{className:"text-xs text-slate-600",children:"Visual asset generation is currently disabled."})]})]}),u.jsxs("button",{disabled:!0,className:"flex items-center gap-2 px-3 py-1.5 rounded-full border border-slate-700 bg-slate-800/50 text-slate-600 text-xs font-bold cursor-not-allowed",children:[u.jsx(cA,{size:14}),"Unavailable"]})]})]});return u.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-4 min-h-screen flex flex-col",children:[u.jsxs("header",{className:"text-center mb-16 space-y-4 relative animate-fade-in",children:[u.jsx("h1",{className:"text-6xl font-black bg-gradient-to-r from-nexus-accent via-purple-500 to-nexus-accent bg-clip-text text-transparent tracking-tight drop-shadow-lg",children:m.home.hero.title}),u.jsx("p",{className:"text-slate-400 text-lg max-w-2xl mx-auto whitespace-pre-wrap",children:m.home.hero.subtitle}),u.jsxs("div",{className:"absolute top-0 right-0 flex gap-3",children:[u.jsxs("button",{onClick:()=>Ce(!0),className:"flex items-center gap-2 text-slate-400 hover:text-white bg-nexus-800 border border-slate-700 hover:border-nexus-accent px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg group",children:[u.jsx(Qs,{size:16,className:"group-hover:rotate-90 transition-transform duration-500"}),m.home.buttons.globalConfig]}),u.jsx("input",{type:"file",ref:X,onChange:ze,accept:".json",className:"hidden"}),u.jsxs("button",{onClick:()=>{var P;return(P=X.current)==null?void 0:P.click()},className:"flex items-center gap-2 text-slate-500 hover:text-nexus-accent border border-slate-700 hover:border-nexus-accent px-3 py-1.5 rounded text-xs font-bold transition-colors",children:[u.jsx(_h,{size:14})," ",m.home.buttons.import]})]})]}),u.jsxs("div",{className:"flex-1 animate-fade-in delay-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 pb-2 border-b border-slate-700",children:[u.jsxs("h2",{className:"text-2xl font-bold text-slate-200 flex items-center gap-3",children:[u.jsx(ss,{className:"text-nexus-accent"})," ",m.home.headers.availableWorlds]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Se,{variant:"secondary",onClick:()=>k(!0),icon:u.jsx($r,{size:18,className:"text-purple-400"}),className:"border-purple-500/30 hover:border-purple-500/60",children:m.home.buttons.aiGenesis}),u.jsx(Se,{onClick:()=>_(!0),icon:u.jsx(dx,{size:18}),children:m.home.buttons.newWorld})]})]}),E?u.jsxs("div",{className:"text-center py-20 opacity-50",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-nexus-accent mx-auto mb-4"}),u.jsx("p",{className:"text-slate-500 text-sm font-mono uppercase",children:m.common.loading})]}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(P=>u.jsxs("div",{className:"group bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden hover:border-nexus-accent hover:shadow-2xl transition-all duration-300 flex flex-col relative",children:[u.jsxs("div",{className:"p-6 flex-1 relative z-10",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-nexus-accent transition-colors truncate pr-8",children:P.name}),u.jsx("button",{onClick:he=>{he.stopPropagation(),Te(P.id,P.name)},className:"text-slate-500 hover:text-white p-1.5 rounded hover:bg-slate-700 transition-colors",title:m.sidebar.export,children:u.jsx(Bc,{size:16})})]}),u.jsxs("div",{className:"inline-block bg-nexus-900 px-3 py-1 rounded-full text-xs font-bold text-purple-400 border border-purple-500/20 mb-4 font-mono",children:["ID: ",P.id.substring(0,8),"..."]}),u.jsxs("p",{className:"text-slate-500 text-sm flex items-center gap-2",children:[u.jsx(gp,{size:14})," ",P.type||"Rulebook"]})]}),u.jsx("div",{className:"bg-nexus-900/50 p-4 border-t border-slate-700 group-hover:bg-nexus-900 transition-colors",children:u.jsxs("button",{onClick:()=>ae(P.id),className:"w-full flex items-center justify-center gap-2 bg-nexus-800 hover:bg-nexus-accent text-slate-300 hover:text-white py-3 rounded-lg border border-slate-600 hover:border-nexus-accent font-bold transition-all shadow-lg",children:[u.jsx(Br,{size:16})," ",m.home.buttons.openEditor]})}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-black/40 pointer-events-none"})]},P.id)),b.length===0&&u.jsx("div",{className:"col-span-3 bg-nexus-800/30 border-2 border-dashed border-slate-700 rounded-xl",children:u.jsx(LC,{icon:ON,title:m.home.emptyState.title,description:m.home.emptyState.desc,actionLabel:m.home.buttons.createFirst,onAction:()=>_(!0),secondaryLabel:m.home.buttons.aiGenesis,onSecondaryAction:()=>k(!0),size:"lg"})})]})]}),u.jsx(Zt,{isOpen:ve,onClose:()=>Ce(!1),title:u.jsxs(u.Fragment,{children:[u.jsx(Qs,{size:18,className:"text-nexus-accent"})," ",m.home.modals.config.title]}),maxWidth:"max-w-4xl",footer:u.jsx("div",{className:"flex justify-end w-full",children:u.jsx(Se,{onClick:()=>Ce(!1),children:m.common.close})}),children:u.jsxs("div",{className:"h-[700px] flex flex-col",children:[u.jsx("div",{className:"flex gap-1 bg-nexus-900 p-1 rounded-lg mb-6 shrink-0 border border-slate-800",children:[{id:"interface",label:m.home.modals.config.tabs.interface,icon:Eh},{id:"narrative",label:m.home.modals.config.tabs.narrative,icon:ss},{id:"system",label:m.home.modals.config.tabs.system,icon:Qs}].map(P=>u.jsxs("button",{onClick:()=>ne(P.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded text-xs font-bold transition-all ${U===P.id?"bg-nexus-800 text-white shadow shadow-black/20":"text-slate-500 hover:text-slate-300"}`,children:[u.jsx(P.icon,{size:14})," ",P.label]},P.id))}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2",children:[U==="interface"&&Hn(),U==="narrative"&&pn(),U==="system"&&z()]})]})}),u.jsx(Zt,{isOpen:R,onClose:()=>_(!1),title:m.home.modals.create.title,footer:u.jsxs("div",{className:"flex w-full justify-between gap-4",children:[u.jsx(Se,{variant:"ghost",onClick:()=>_(!1),children:m.common.cancel}),u.jsx(Se,{onClick:te,icon:u.jsx(dx,{size:16}),children:m.home.modals.create.submit})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(nt,{label:m.home.modals.create.nameLabel,value:I,onChange:pe,onBlur:H,placeholder:"e.g. Neon Tokyo Core",autoFocus:!0,required:!0,error:$}),u.jsx(nt,{label:m.home.modals.create.genreLabel,value:J,onChange:P=>Z(P.target.value),placeholder:"e.g. Cyberpunk"}),u.jsxs("div",{className:"bg-blue-900/10 border border-blue-500/20 p-3 rounded text-xs text-blue-200 flex gap-2",children:[u.jsx(ss,{size:16,className:"shrink-0"}),u.jsx("p",{children:m.home.modals.create.desc})]})]})}),u.jsx(A3,{isOpen:M,onClose:()=>k(!1),onSuccess:ae})]})},M3=n=>{const[e,s]=N.useState(null),[o,r]=N.useState(!1),[c,d]=N.useState(null),h=N.useCallback(async()=>{if(!n){s(null);return}r(!0);try{const g=await De.loadWorldMeta(n);s(g||null),d(null)}catch(g){console.error("Failed to load world metadata",g),d(g.message)}finally{r(!1)}},[n]);return N.useEffect(()=>{h()},[h]),{metadata:e,loading:o,error:c,reload:h}},I3=()=>{const n=xa(),{activeWorldId:e,triggerRefresh:s,refreshSignal:o}=Oi(),r=va(),{toast:c}=as(),d=Vr(),{s:h}=kn(),{metadata:g,loading:m,reload:v}=M3(e),[b,S]=N.useState(!1),[E,T]=N.useState(""),[R,_]=N.useState(""),[M,k]=N.useState(0),[I,j]=N.useState({}),[J,Z]=N.useState([]);N.useEffect(()=>{(async()=>{if(g!=null&&g.id){const pe=await De.getPoolCounts(g.id);j(pe);const H=await De.getTopTags(g.id,50);Z(H)}})()},[g==null?void 0:g.id,o]);const $=N.useMemo(()=>{if(!g)return[];const ie=Object.values(I).reduce((pe,H)=>pe+H,0);return[{label:d.dashboard.stats.pools,value:Object.keys(g.pools||{}).length,icon:PN,color:"text-blue-400"},{label:d.dashboard.stats.entities,value:ie,icon:Fr,color:"text-orange-400"},{label:d.dashboard.stats.modules,value:Object.keys(g.componentRegistry||{}).length,icon:Qs,color:"text-purple-400"}]},[g,I,d]);if(!e)return u.jsx("div",{className:"p-12 text-center text-slate-500 font-mono",children:h("common.noWorldSelected")});if(m)return u.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-4 text-nexus-accent animate-pulse",children:[u.jsx(zc,{size:48}),u.jsx("div",{className:"text-sm font-bold uppercase tracking-widest",children:d.common.loading})]});if(!g)return u.jsxs("div",{className:"p-8 border border-red-500/50 bg-red-900/10 rounded-xl text-red-400 flex items-center gap-4",children:[u.jsx(Zs,{size:24}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold",children:h("common.loadFailure.title")}),u.jsx("p",{className:"text-sm",children:h("dashboard.loadFailure.desc",{id:e})})]})]});const ce=()=>{T(g.name),_(g.config.genre),S(!0)},V=async()=>{if(!E.trim()){c({title:h("dashboard.validationError.title"),message:h("dashboard.validationError.worldNameEmpty"),type:"warning"});return}try{await r.updateWorldConfig(g.id,E,{...g.config,genre:R}),await v(),s(),S(!1),c({title:h("dashboard.toast.configSaved.title"),message:h("dashboard.toast.configSaved.message"),type:"success"})}catch{c({title:h("dashboard.toast.saveFailed.title"),message:h("dashboard.toast.saveFailed.message"),type:"error"})}},le=async()=>{if(M===0){k(1);return}if(M===1){k(2);return}if(M===2)try{await r.deleteWorld(g.id),c({title:h("dashboard.toast.worldDeleted.title"),message:h("dashboard.toast.worldDeleted.message",{name:g.name}),type:"info"}),n("/")}catch{c({title:h("dashboard.toast.deletionFailed.title"),message:h("dashboard.toast.deletionFailed.message"),type:"error"})}};return u.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[u.jsxs("header",{className:"border-b border-slate-700 pb-6 flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 max-w-3xl",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-3 bg-nexus-800 text-nexus-accent border border-nexus-accent/30",children:[u.jsx(ss,{size:12})," ",d.dashboard.headers.coreRulebook]}),b?u.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left-2 fade-in duration-200",children:[u.jsx("input",{type:"text",value:E,onChange:ie=>T(ie.target.value),className:"w-full bg-nexus-900 border border-slate-600 rounded-lg p-3 text-3xl font-bold text-white outline-none focus:border-nexus-accent placeholder-slate-500 shadow-inner",placeholder:"World Name",autoFocus:!0}),u.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-500 font-mono",children:u.jsxs("span",{children:["ID: ",g.id]})})]}):u.jsxs("div",{className:"animate-in slide-in-from-left-2 fade-in duration-200",children:[u.jsx("h2",{className:"text-4xl font-black text-slate-100 tracking-tight",children:g.name}),u.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-mono mt-2",children:u.jsxs("span",{className:"bg-nexus-900 px-2 py-0.5 rounded border border-slate-700",children:["ID: ",g.id]})}),u.jsx("p",{className:"text-slate-400 mt-2 text-lg",children:d.dashboard.headers.subtitle})]})]}),u.jsx("div",{className:"flex items-start gap-2 pt-2",children:b?u.jsxs(u.Fragment,{children:[u.jsx(Se,{variant:"ghost",onClick:()=>S(!1),icon:u.jsx(ei,{size:18}),children:d.common.cancel}),u.jsx(Se,{onClick:V,icon:u.jsx($n,{size:18}),children:d.common.save})]}):u.jsx(Se,{variant:"secondary",onClick:ce,icon:u.jsx(Br,{size:16}),children:d.common.edit})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:$.map(ie=>u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 p-6 rounded-xl flex items-center justify-between shadow-lg hover:border-nexus-accent/50 transition-colors group",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mb-1",children:ie.label}),u.jsx("div",{className:"text-3xl font-black text-slate-100",children:ie.value})]}),u.jsx("div",{className:`bg-nexus-900 p-3 rounded-xl border border-slate-700 group-hover:border-slate-500 transition-colors ${ie.color}`,children:u.jsx(ie.icon,{size:24})})]},ie.label))}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden p-6 shadow-lg",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-200 mb-6 flex items-center gap-2",children:[u.jsx(zc,{size:20,className:"text-nexus-accent"}),d.dashboard.cards.genre]}),u.jsx("div",{className:"space-y-6",children:u.jsx("div",{children:b?u.jsx(nt,{label:d.dashboard.cards.genre,value:R,onChange:ie=>_(ie.target.value),placeholder:"e.g. Cyberpunk, High Fantasy"}):u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded p-4",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1 tracking-wide",children:d.dashboard.cards.genre}),u.jsx("div",{className:"text-lg font-medium text-white",children:g.config.genre})]})})})]}),u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden p-6 shadow-lg min-h-[200px]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-200 flex items-center gap-2",children:[u.jsx(fC,{size:20,className:"text-purple-400"}),d.dashboard.cards.tags]}),u.jsx(Se,{variant:"ghost",onClick:()=>n("../tags"),className:"h-8 text-xs",children:d.dashboard.cards.manageTags})]}),J.length===0?u.jsx("div",{className:"text-center py-8 border-2 border-dashed border-slate-700 rounded-lg",children:u.jsx("p",{className:"text-slate-500 text-sm italic",children:h("dashboard.noTagsYet")})}):u.jsx("div",{className:"flex flex-wrap gap-2",children:J.map((ie,pe)=>{const H=r.resolveRarityColor(g,ie);return u.jsxs("span",{className:"px-2.5 py-1 bg-nexus-900 border border-slate-700 rounded text-xs font-bold text-slate-300 transition-colors cursor-default select-none",style:{color:H?"#fff":void 0,backgroundColor:H?`${H}20`:void 0,borderColor:H?`${H}50`:void 0},children:["#",ie]},pe)})})]})]}),u.jsx("div",{className:"xl:col-span-1",children:u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden p-6 shadow-lg h-full flex flex-col",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-200 mb-6 flex items-center gap-2",children:[u.jsx(Fr,{size:20,className:"text-orange-400"}),d.dashboard.cards.pools]}),u.jsx("div",{className:"space-y-3 overflow-y-auto pr-2 custom-scrollbar flex-1 max-h-[500px]",children:Object.values(g.pools).map(ie=>{const pe=qR(ie.color,ie.type),H=I[ie.name]||0;return u.jsxs("div",{onClick:()=>n(`../pool/${ie.name}`),className:"group flex justify-between items-center bg-nexus-900 p-4 rounded-lg border border-slate-700 cursor-pointer transition-all hover:translate-x-1 hover:shadow-lg",style:{borderLeftColor:pe,borderLeftWidth:"4px"},children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shadow-inner",style:{backgroundColor:`${pe}20`},children:u.jsx("div",{className:"w-3 h-3 rounded-full shadow-[0_0_8px]",style:{backgroundColor:pe,boxShadow:`0 0 10px ${pe}`}})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-200 capitalize flex items-center gap-2 group-hover:text-white transition-colors text-lg",children:ie.name}),u.jsx("div",{className:"text-xs text-slate-500 mt-0.5 line-clamp-1",children:ie.description||h("dashboard.noDescriptionProvided")})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsx("span",{className:"text-xs uppercase font-bold px-2 py-0.5 rounded border tracking-wider",style:{borderColor:`${pe}40`,backgroundColor:`${pe}10`,color:pe},children:ie.type}),u.jsx("span",{className:"text-xs text-slate-600 font-mono",children:h("dashboard.itemsCount",{count:H})})]})]},ie.name)})})]})})]}),u.jsxs("div",{className:"border border-red-900/50 rounded-xl p-6 bg-gradient-to-br from-red-900/10 to-transparent mt-12",children:[u.jsxs("h3",{className:"text-xl font-bold text-red-500 mb-2 flex items-center gap-2",children:[u.jsx(Zs,{size:20})," ",d.dashboard.danger.title]}),u.jsx("p",{className:"text-slate-400 text-sm mb-6",children:d.dashboard.danger.desc}),M===0&&u.jsx(Se,{variant:"destructive",onClick:le,icon:u.jsx(Qt,{size:16}),className:"bg-red-900/20 border-red-900/50 hover:bg-red-900/40 text-red-500",children:d.dashboard.danger.buttons.delete}),M===1&&u.jsxs("div",{className:"animate-in fade-in slide-in-from-left-2 flex items-center gap-4 p-4 bg-red-900/20 rounded-lg border border-red-500/30",children:[u.jsx(Zs,{className:"text-red-400 shrink-0",size:24}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-red-200 font-bold text-sm",children:d.dashboard.danger.warnings.stage1}),u.jsx("p",{className:"text-red-300/70 text-xs",children:d.dashboard.danger.warnings.stage1Desc})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>k(0),children:d.dashboard.danger.buttons.cancel}),u.jsx(Se,{variant:"destructive",onClick:le,children:d.dashboard.danger.buttons.confirm})]})]}),M===2&&u.jsxs("div",{className:"animate-in fade-in slide-in-from-left-2 flex items-center gap-4 p-4 bg-red-500/10 rounded-lg border border-red-500",children:[u.jsx(MA,{className:"text-red-500 shrink-0",size:24}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-red-400 font-black uppercase tracking-wider text-sm",children:d.dashboard.danger.warnings.stage2}),u.jsxs("p",{className:"text-red-400/70 text-xs",children:[d.dashboard.danger.warnings.stage2Desc," ",u.jsx("strong",{children:g.name}),"."]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>k(0),children:h("common.abort")}),u.jsx(Se,{variant:"destructive",onClick:le,className:"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-900/50",children:d.dashboard.danger.buttons.finalConfirm})]})]})]})]})},k3=(n,e,s=50)=>{const[o,r]=N.useState([]),[c,d]=N.useState(!1),[h,g]=N.useState(null),[m,v]=N.useState(1),[b,S]=N.useState(0),{refreshSignal:E}=Oi(),T=N.useCallback(async j=>{if(!(!n||!e)){d(!0);try{const{items:J,total:Z}=await De.getEntitiesForPoolPaginated(n,e,j,s);r(J),S(Z),v(j)}catch(J){console.error("Failed to load pool",J),g("Database Read Failure")}finally{d(!1)}}},[n,e,s]);N.useEffect(()=>{v(1),T(1)},[n,e,T,E]);const R=()=>{m*s<b&&T(m+1)},_=()=>{m>1&&T(m-1)};return{entities:o,loading:c,error:h,addEntity:async j=>{n&&(r(J=>[j,...J].slice(0,s)),S(J=>J+1),await De.saveEntity(n,e,j))},updateEntity:async j=>{n&&(r(J=>J.map(Z=>Z.id===j.id?j:Z)),await De.saveEntity(n,e,j))},removeEntity:async j=>{n&&(r(J=>J.filter(Z=>Z.id!==j)),S(J=>J-1),await De.deleteEntity(j))},refresh:()=>T(m),pagination:{page:m,totalPages:Math.ceil(b/s),totalItems:b,nextPage:R,prevPage:_}}},zt={getDescription:n=>{var s,o,r;if((s=n.components.lore)!=null&&s.description)return n.components.lore.description;if((o=n.components.description)!=null&&o.text)return n.components.description.text;if((r=n.components.description)!=null&&r.value)return n.components.description.value;const e=["description","bio","biography","history","background","overview","summary","text"];for(const c of Object.keys(n.components)){if(c==="metadata"||c==="rarity"||c==="relations")continue;const d=n.components[c];if(!(!d||typeof d!="object")){for(const h of Object.keys(d))if(e.includes(h.toLowerCase())){const g=d[h];if(typeof g=="string"&&g.length>5)return g}}}return""},getRarity:n=>{var e;return((e=n.components.rarity)==null?void 0:e.value)||"Common"},getDisplayAttributes:n=>{var r;const e={},s=["lore","visual","metadata","rarity","legacy","description","relations"],o=["description","bio","biography","history","background","rumor","secret"];return n.components&&(Object.keys(n.components).forEach(c=>{if(s.includes(c))return;const d=n.components[c];!d||typeof d!="object"||Object.keys(d).forEach(h=>{if(o.includes(h.toLowerCase()))return;const g=d[h];if(Array.isArray(g)){const m=h.charAt(0).toUpperCase()+h.slice(1);e[m]=g.join(", ")}else if(typeof g!="object"&&g!==null){const m=h.charAt(0).toUpperCase()+h.slice(1);e[m]=g}})}),(r=n.components.metadata)!=null&&r.role&&(e.Role=n.components.metadata.role)),e}},mE=N.createContext(null),D3=({children:n})=>{const{activeWorldId:e,setActiveWorldId:s,refreshSignal:o}=Oi(),r=va(),[c,d]=N.useState(null),[h,g]=N.useState(!1),[m,v]=N.useState(null),[b,S]=N.useState(0),E=N.useCallback(()=>{S(R=>R+1)},[]);N.useEffect(()=>{(async()=>{if(!e){try{const _=await r.listWorlds();_.length>0?s(_[0].id):d(null)}catch(_){console.error("Failed to boot world list",_),v("Failed to load worlds")}return}g(!0),v(null);try{const _=await r.loadWorld(e,!0);_?d(_):(d(null),v("World not found"))}catch(_){console.error(`Failed to load world ${e}`,_),v("Failed to load world"),d(null)}finally{g(!1)}})()},[e,o,b,r,s]);const T=N.useMemo(()=>({currentWorld:c,loading:h,error:m,refreshWorld:E}),[c,h,m,E]);return u.jsx(mE.Provider,{value:T,children:n})},P3=()=>{const n=N.useContext(mE);if(!n)throw new Error("useWorldData must be used within WorldDataProvider");return n},gE=N.createContext(null),L3=({children:n})=>{const[e,s]=N.useState({}),o=N.useCallback((h,g)=>{s(m=>({...m,[h]:g}))},[]),r=N.useCallback(h=>e[h],[e]),c=N.useCallback(h=>{s(g=>{const m={...g};return delete m[h],m})},[]),d=N.useMemo(()=>({forgeState:e,setForgeState:o,getForgeState:r,clearForgeState:c}),[e,o,r,c]);return u.jsx(gE.Provider,{value:d,children:n})},j3=()=>{const n=N.useContext(gE);if(!n)throw new Error("useForgeState must be used within ForgeStateProvider");return n},zi=()=>{const{setActiveWorldId:n}=Oi(),{currentWorld:e,refreshWorld:s}=P3(),{forgeState:o,setForgeState:r}=j3(),{settings:c,updateSettings:d}=ba(),h=va();return{currentWorld:e,refreshWorld:s,setWorldId:n,worldManager:h,appSettings:c,updateAppSettings:d,forgeState:o,setForgeState:r}},yE=({sources:n,selectedSource:e,onSourceSelect:s,children:o,searchQuery:r,onSearchChange:c,searchPlaceholder:d,className:h="h-[500px]",actions:g})=>{const{s:m}=kn();return u.jsxs("div",{className:`flex gap-4 -m-2 ${h}`,children:[u.jsxs("div",{className:"w-48 border-r border-slate-700 p-2 space-y-1 overflow-y-auto custom-scrollbar flex-shrink-0",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2 px-2",children:m("sourceLayout.sources")}),n.map(v=>u.jsxs("button",{onClick:()=>s(v.id),className:`w-full flex items-center gap-2 px-3 py-2 rounded text-xs font-medium transition-colors ${e===v.id?"bg-nexus-accent/20 text-nexus-accent border border-nexus-accent/30":"text-slate-400 hover:bg-nexus-800 hover:text-slate-200"}`,children:[v.icon&&u.jsx(v.icon,{size:14}),u.jsx("span",{className:"truncate flex-1 text-left",children:v.label}),v.count!==void 0&&u.jsx("span",{className:"text-xs bg-black/20 px-1.5 py-0.5 rounded text-slate-500",children:v.count}),v.color&&u.jsx("span",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:v.color}})]},v.id))]}),u.jsxs("div",{className:"flex-1 flex flex-col p-2 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c&&u.jsx("div",{className:"flex-1",children:u.jsx(nt,{value:r||"",onChange:v=>c(v.target.value),placeholder:d||m("sourceLayout.search"),leftIcon:u.jsx(yp,{size:16}),autoFocus:!0})}),g]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:o})]})]})},uu=({content:n,children:e})=>{const[s,o]=N.useState(!1),[r,c]=N.useState({top:0,left:0}),d=N.useRef(null),h=()=>{if(d.current){const m=d.current.getBoundingClientRect();c({top:m.top-8,left:m.left+m.width/2}),o(!0)}},g=()=>{o(!1)};return u.jsxs("div",{ref:d,onMouseEnter:h,onMouseLeave:g,className:"inline-block",children:[e,s&&du.createPortal(u.jsxs("div",{className:"fixed z-[9999] pointer-events-none transform -translate-x-1/2 -translate-y-full px-2 py-1 bg-black/95 text-white text-xs rounded shadow-xl border border-slate-700 max-w-xs whitespace-normal break-words",style:{top:r.top,left:r.left},children:[n,u.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-black/90"})]}),document.body)]})},yh=(n,e)=>{if(!n)return`rgba(100, 116, 139, ${e})`;n.length===4&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const s=parseInt(n.slice(1,3),16),o=parseInt(n.slice(3,5),16),r=parseInt(n.slice(5,7),16);return`rgba(${s}, ${o}, ${r}, ${e})`},cp=({tagName:n,count:e,color:s,description:o,sources:r,definedIn:c,usedIn:d,isGlobal:h,icon:g,selected:m,onEdit:v,onDelete:b,onRemove:S,onClick:E,className:T})=>{const R={backgroundColor:m?s:yh(s,.15),borderColor:m?s:yh(s,.4),borderLeftColor:s,borderLeftWidth:m?"1px":"3px",color:m?"#fff":"#e2e8f0"};let _=g;_||(_=h?qr:gu);const M=u.jsxs("div",{onClick:E,className:`
                group relative flex items-center justify-between gap-2 px-3 py-1.5 rounded-md border transition-all duration-200
                hover:brightness-110 hover:shadow-md cursor-default select-none
                ${E?"cursor-pointer":""}
                ${m?"shadow-md":""}
                ${T||""}
            `,style:R,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx(_,{size:12,style:{color:m?"#fff":s},className:`shrink-0 ${m?"":"opacity-80"}`}),u.jsx("span",{className:`text-xs font-bold truncate ${m?"text-white":"text-slate-200"}`,children:n})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[e!==void 0&&u.jsx("span",{className:`
                            text-xs font-mono px-1.5 py-0.5 rounded font-bold
                            ${m?"bg-black/20 text-white":"text-white/80"}
                            ${v||b||S?"group-hover:hidden":""}
                        `,style:m?{}:{backgroundColor:yh(s,.3)},children:e}),(v||b||S)&&u.jsxs("div",{className:`flex items-center gap-1 ${S?"":"hidden group-hover:flex animate-in fade-in slide-in-from-right-2 duration-200"}`,children:[v&&u.jsx("button",{onClick:I=>{I.stopPropagation(),v(I)},className:"p-1 hover:bg-black/20 rounded text-slate-300 hover:text-white transition-colors",title:"Edit Tag",children:u.jsx(Br,{size:10})}),b&&u.jsx("button",{onClick:I=>{I.stopPropagation(),b(I)},className:"p-1 hover:bg-red-500/20 rounded text-slate-400 hover:text-red-400 transition-colors",title:"Delete Tag",children:u.jsx(Qt,{size:10})}),S&&u.jsx("button",{onClick:I=>{I.stopPropagation(),S(I)},className:`p-0.5 rounded transition-colors ${m?"hover:bg-white/20 text-white":"hover:bg-red-500/20 text-slate-400 hover:text-red-400"}`,title:"Remove Selection",children:u.jsx(ei,{size:12})})]})]})]});return o||c&&c.length>0||d&&d.length>0||r&&r.length>0?u.jsx(uu,{content:u.jsxs("div",{className:"max-w-xs",children:[u.jsxs("div",{className:"font-bold mb-2 border-b border-white/20 pb-1 flex justify-between gap-4",children:[u.jsx("span",{children:n}),e!==void 0&&u.jsxs("span",{className:"opacity-70",children:[e," uses"]})]}),o&&u.jsx("div",{className:"mb-3 italic leading-relaxed opacity-90",children:o}),c||d?u.jsxs("div",{className:"space-y-2",children:[c&&c.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400 mb-1 font-bold uppercase",children:[u.jsx(Fr,{size:10})," Defined In"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(I=>u.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-nexus-accent/20 border border-nexus-accent/30 rounded uppercase tracking-wide text-white",children:I},I))})]}),d&&d.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 mb-1 font-bold uppercase",children:[u.jsx(mu,{size:10})," Also Used In"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:d.map(I=>u.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-white/5 border border-white/10 rounded uppercase tracking-wide text-slate-400",children:I},I))})]})]}):r&&r.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(I=>u.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-white/10 rounded uppercase tracking-wide",children:I},I))})]}),children:M}):M},Or=({value:n=[],onChange:e,label:s,placeholder:o="Select...",single:r=!1,limitToPool:c,className:d,initialMode:h="tags",lockedMode:g,trigger:m})=>{const{currentWorld:v,worldManager:b}=zi(),[S,E]=N.useState(!1),[T,R]=N.useState(""),[_,M]=N.useState("All"),[k,I]=N.useState(g||h),[j,J]=N.useState(!1),[Z,$]=N.useState([]),ce=N.useRef("");if(!v)return null;N.useEffect(()=>{if(!S)return;const H=T;ce.current=H;const Ce=setTimeout(async()=>{J(!0);try{if(k==="tags"&&_==="GlobalTags"){ce.current===H&&$([]);return}const U=await De.searchEntities(v.id,H,100,_==="All"||_==="GlobalTags"?void 0:_);ce.current===H&&$(U)}catch(U){console.error("Search failed",U)}finally{ce.current===H&&J(!1)}},300);return()=>clearTimeout(Ce)},[_,T,S,v.id,k]);const V=N.useMemo(()=>{const H=Object.values(v.pools);return[{id:"All",label:"All Sources",icon:qr},{id:"GlobalTags",label:"Common Tags",icon:gu},...H.map(ve=>({id:ve.name,label:ve.name,icon:ve.type==="Character"?Th:ve.type==="World"?ss:ha,color:ve.color}))]},[v]),le=N.useMemo(()=>{const H=[];if(Z.forEach(Ce=>{const U=Ce.poolName||"Unknown";k==="entities"?H.push({id:Ce.name,label:Ce.name,type:"item",source:U}):Ce.tags.forEach(ne=>{const me=b.getTagMetadata(v.id,ne);H.push({id:ne,label:me.label,type:"tag",source:U,color:me.color})})}),k==="tags"&&(_==="GlobalTags"||H.length===0)){const Ce=b.getTagAnalytics(v.id);Object.keys(Ce).forEach(U=>{const ne=Ce[U];if(ne.label.toLowerCase().includes(T.toLowerCase())){const me=b.resolveTagColor(v.id,U);H.push({id:U,label:ne.label,type:"tag",source:"Global",color:me})}})}const ve=new Set;return H.filter(Ce=>ve.has(Ce.id)?!1:(ve.add(Ce.id),!0))},[_,T,b,k,Z,v.id]),ie=H=>{r?(e([H]),E(!1)):n.includes(H)?e(n.filter(ve=>ve!==H)):e([...n,H])},pe=()=>{T.trim()&&(ie(T.trim()),R(""))};return u.jsxs("div",{className:"w-full",children:[s&&u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:s}),m?u.jsx("div",{onClick:()=>E(!0),children:m}):u.jsxs("div",{onClick:()=>E(!0),className:`bg-nexus-900 border border-slate-600 rounded p-2 min-h-[42px] cursor-pointer hover:border-nexus-accent transition-colors flex flex-row flex-wrap gap-2 items-center ${d||""}`,children:[n.length===0&&u.jsx("span",{className:"text-slate-500 text-sm px-1",children:o}),n.map(H=>{var ne;const ve=b.getTagMetadata(v.id,H),Ce=!v.tags[H],U=Ce?"#3b82f6":b.resolveTagColor(v.id,H,c);return u.jsx(cp,{tagName:Ce?H:ve.label,color:U,description:(ne=v.tags[ve.id])==null?void 0:ne.description,isGlobal:ve.isGlobal,onRemove:()=>e(n.filter(me=>me!==H)),className:"h-7 min-h-0 px-2 text-xs",icon:Ce?ha:void 0},H)}),u.jsx("div",{className:"ml-auto opacity-50",children:u.jsx(Ft,{size:14})})]}),u.jsx(Zt,{isOpen:S,onClose:()=>E(!1),title:u.jsxs(u.Fragment,{children:[u.jsx(Fr,{size:18,className:"text-nexus-accent"})," Select ",g==="tags"?"Tag":g==="entities"?"Entity":"Entity / Tag"]}),maxWidth:"max-w-4xl",footer:u.jsxs("div",{className:"flex justify-between w-full items-center",children:[u.jsxs("div",{className:"text-xs text-slate-500",children:[n.length," selected"]}),u.jsx(Se,{onClick:()=>E(!1),children:"Done"})]}),children:u.jsxs(yE,{sources:V,selectedSource:_,onSourceSelect:M,searchQuery:T,onSearchChange:R,searchPlaceholder:`Search in ${_}...`,className:"h-[500px]",children:[!g&&u.jsx("div",{className:"w-full flex justify-center mb-4 sticky top-0 z-10 bg-nexus-900/95 backdrop-blur-sm pb-2 -mt-2 pt-2 border-b border-slate-800",children:u.jsxs("div",{className:"flex bg-nexus-950 p-1 rounded-lg border border-slate-700 w-64",children:[u.jsx("button",{className:`flex-1 py-1.5 text-xs font-bold rounded transition-all ${k==="tags"?"bg-nexus-accent text-white shadow":"text-slate-500 hover:text-slate-300"}`,onClick:()=>I("tags"),children:"Tags"}),u.jsx("button",{className:`flex-1 py-1.5 text-xs font-bold rounded transition-all ${k==="entities"?"bg-nexus-accent text-white shadow":"text-slate-500 hover:text-slate-300"}`,onClick:()=>I("entities"),children:"Entities"})]})}),j&&u.jsx("div",{className:"w-full flex justify-center py-8",children:u.jsx(_c,{className:"animate-spin text-nexus-accent"})}),!j&&u.jsxs("div",{className:"flex flex-wrap gap-2 content-start",children:[T.trim()&&!le.some(H=>H.label.toLowerCase()===T.toLowerCase())&&u.jsxs("button",{onClick:pe,className:"flex items-center gap-2 px-3 py-2 rounded border border-dashed border-nexus-accent/50 bg-nexus-accent/10 text-nexus-accent hover:bg-nexus-accent/20 text-xs font-bold text-left min-h-[40px]",children:[u.jsx(Ft,{size:14}),' Create "',T,'"']}),le.map((H,ve)=>{const Ce=n.includes(H.id)||n.includes(H.label);return u.jsx(cp,{tagName:H.label,color:H.color||"#64748b",selected:Ce,onClick:()=>ie(H.id),isGlobal:H.source==="Global",icon:H.type==="item"?ha:void 0,className:"flex-grow-0"},`${H.id}-${ve}`)}),le.length===0&&!T&&u.jsx("div",{className:"w-full text-center py-10 text-slate-500 text-xs italic",children:"Start typing to search..."})]})]})})]})},U3=()=>{const{activeWorldId:n,triggerRefresh:e}=Oi(),s=va(),o=Kb(),r=xa(),{toast:c}=as(),d=Vr(),{s:h}=kn(),g=o.poolName||"",{world:m,reload:v}=wC(n),{entities:b,addEntity:S,updateEntity:E,removeEntity:T}=k3(n||void 0,g,24),[R,_]=N.useState(""),[M,k]=N.useState(null),[I,j]=N.useState(!1),[J,Z]=N.useState(!1),[$,ce]=N.useState("blueprint"),[V,le]=N.useState(""),[ie,pe]=N.useState(!1),[H,ve]=N.useState(!1),[Ce,U]=N.useState(""),[ne,me]=N.useState(""),[Ee,Ae]=N.useState("#3b82f6"),[D,q]=N.useState(null),[oe,fe]=N.useState(!1),[F,ge]=N.useState(null),[_e,X]=N.useState("");N.useEffect(()=>{k(null),q(null),j(!1)},[g]);const O=N.useMemo(()=>m&&m.pools[g]||null,[m,g]),W=N.useMemo(()=>{if(!m)return{};const z={};return Object.values(m.componentRegistry).forEach(P=>{const he=P.category||"General";z[he]||(z[he]=[]),z[he].push(P)}),z},[m]),ae=(O==null?void 0:O.type)==="Character",te=()=>{O&&(U(O.name),me(O.description||""),Ae(O.color||"#3b82f6"),pe(!0))},Te=async()=>{if(!n||!Ce.trim())return;const z=Ce.trim();try{z!==(O==null?void 0:O.name)&&await s.renamePool(n,g,z),await s.updatePoolDetails(n,z,{description:ne,color:Ee}),e(),c({title:h("pools.toast.success.title"),message:h("pools.toast.success.message"),type:"success"}),pe(!1),z!==g?r(`/world/${n}/pool/${z}`):v()}catch(P){c({title:h("pools.toast.error.title"),message:P.message,type:"error"})}},ze=async()=>{if(n)try{await s.deletePool(n,g),e(),c({title:h("pools.toast.deleted.title"),message:h("pools.toast.poolRemoved.message"),type:"info"}),r(`/world/${n}/edit`)}catch(z){c({title:h("pools.toast.error.title"),message:z.message,type:"error"})}},rt=async(z,P)=>{if(!O||!n)return;if(z==="metadata"){c({title:h("pools.toast.actionDenied.title"),message:h("pools.toast.actionDenied.message"),type:"error"});return}const he={...O.defaultComponents};if(P)delete he[z];else{const ye=m.componentRegistry[z];if(ye){const Ie={};ye.fields.forEach(Oe=>Ie[Oe.key]=Oe.defaultValue),he[z]=Ie}}await s.updatePoolBlueprints(n,O.name,he),await v(),e()},mt=async()=>{if(!V.trim()||!O)return;const z=O.relationshipTypes||[];if(!z.includes(V)){const P=[...z,V],he={...O,relationshipTypes:P},ye={...m,pools:{...m.pools,[O.name]:he}};await s.saveWorld(ye),le(""),v()}},tt=async z=>{if(!O)return;const P=(O.relationshipTypes||[]).filter(Ie=>Ie!==z),he={...O,relationshipTypes:P},ye={...m,pools:{...m.pools,[O.name]:he}};await s.saveWorld(ye),v()},St=async()=>{const z=JSON.parse(JSON.stringify((O==null?void 0:O.defaultComponents)||{})),P=crypto.randomUUID(),he=new Date().toISOString().split("T")[0];z.metadata={id:P,created_at:he},z.relations={};const ye={id:P,name:h(ae?"pools.newCharacter":"pools.newItem"),tags:[],components:z};ae?(await S(ye),c({title:h("pools.toast.characterCreated.title"),message:h("pools.toast.characterCreated.message"),type:"success"}),k(ye.id),q(ye)):(k(null),q(ye),j(!0))},yt=async z=>{if(z.name.trim()){fe(!0);try{ae&&M!==z.id?await E(z):!ae&&!b.find(P=>P.id===z.id)?await S(z):await E(z),k(z.id),j(!1),c({title:h("pools.toast.saved.title"),message:`${z.name} updated.`,type:"success"})}catch{c({title:h("pools.toast.error.title"),message:h("pools.toast.saveFailed.message"),type:"error"})}finally{fe(!1)}}},$t=()=>{if(j(!1),M){const z=b.find(P=>P.id===M);z&&q(JSON.parse(JSON.stringify(z)))}else q(null)},ls=async()=>{F&&(await T(F),M===F&&(k(null),q(null)),ge(null),c({title:h("pools.toast.deleted.title"),message:h("pools.toast.entityRemoved.message"),type:"info"}))},wt=(z,P,he,ye,Ie=[])=>{if(!D)return;let Oe=ye;if(he==="number")if(Ie&&Ie[0]==="integer"){if(ye!==""&&ye!=="-"&&!/^-?\d*$/.test(ye))return;ye!==""&&ye!=="-"?(Oe=parseInt(ye,10),isNaN(Oe)&&(Oe=0)):Oe=ye}else{if(ye!==""&&ye!=="-"&&ye!=="."&&!/^-?\d*\.?\d*$/.test(ye))return;ye!==""&&ye!=="-"&&ye!=="."&&!/^-?\d*\.?\d*$/.test(ye)&&(Oe=ye)}he==="boolean"&&(Oe=ye==="true");const ut={...D.components[z],[P]:Oe};q({...D,components:{...D.components,[z]:ut}})},Wt=(z,P)=>{const he=z.components.relations||{},ye=Object.keys(he),Ie=((O==null?void 0:O.relationshipTypes)||[]).filter(Be=>!ye.includes(Be)),Oe=Be=>{const $e={...he};delete $e[Be],P({...z,components:{...z.components,relations:$e}})},ut=async()=>{if(!_e)return;const Be=(O==null?void 0:O.relationshipTypes)||[];if(!Be.includes(_e)){const xt=[...Be,_e],Fi={...O,relationshipTypes:xt},Ns={...m,pools:{...m.pools,[O.name]:Fi}};await s.saveWorld(Ns),v()}const $e={...he,[_e]:[]};P({...z,components:{...z.components,relations:$e}}),X("")};return u.jsxs("div",{className:"bg-nexus-900/30 border border-slate-700/50 rounded-lg p-4 space-y-4",children:[u.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-2",children:[u.jsx(fx,{size:14})," ",d.pools.modals.config.tabs.relations]}),u.jsxs("div",{className:"space-y-4",children:[ye.map(Be=>u.jsxs("div",{className:"space-y-2 animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-slate-500 uppercase",children:[u.jsxs("span",{children:[Be,"..."]}),u.jsx("button",{onClick:()=>Oe(Be),className:"text-slate-600 hover:text-red-400 p-1 rounded hover:bg-red-900/20 transition-colors",title:`Remove "${Be}" section`,children:u.jsx(Qt,{size:12})})]}),u.jsx(Or,{value:he[Be]||[],onChange:$e=>{const xt={...he,[Be]:$e};P({...z,components:{...z.components,relations:xt}})},placeholder:h("pools.relationship.selectTargets")})]},Be)),ye.length===0&&u.jsx("div",{className:"text-xs text-slate-500 italic text-center py-2 border-2 border-dashed border-slate-800 rounded",children:h("pools.relationship.noActive")})]}),u.jsxs("div",{className:"pt-2 border-t border-slate-800 mt-2",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:h("pools.relationship.addConnectionType")}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{list:"rel-types",value:_e,onChange:Be=>X(Be.target.value),className:"w-full bg-nexus-900 border border-slate-600 rounded p-2.5 text-xs text-slate-200 outline-none focus:border-nexus-accent",placeholder:h("pools.relationship.selectOrTypeNew")}),u.jsx("datalist",{id:"rel-types",children:Ie.map(Be=>u.jsx("option",{value:Be},Be))})]}),u.jsx(Se,{size:"sm",disabled:!_e,onClick:ut,className:"h-[38px]",icon:u.jsx(Ft,{size:14}),children:d.common.confirm})]})]})]})},Tt=z=>m?Object.keys(z.components).filter(P=>P!=="metadata"&&P!=="relations").map(P=>m.componentRegistry[P]||{id:P,label:P,fields:[],category:"Unknown"}).sort((P,he)=>(P.category||"").localeCompare(he.category||"")):[],Hn=(z,P,he)=>{var ye;return P.type==="boolean"?u.jsxs(xn,{value:String(he),onChange:Ie=>wt(z,P.key,"boolean",Ie.target.value),children:[u.jsx("option",{value:"false",children:h("pools.boolean.false")}),u.jsx("option",{value:"true",children:h("pools.boolean.true")})]}):P.type==="select"?u.jsxs(xn,{value:String(he??""),onChange:Ie=>wt(z,P.key,"select",Ie.target.value),children:[u.jsx("option",{value:"",children:h("pools.select.placeholder")}),(ye=P.options)==null?void 0:ye.map(Ie=>u.jsx("option",{value:Ie,children:Ie},Ie))]}):P.type==="text"?u.jsx(cn,{value:he||"",onChange:Ie=>wt(z,P.key,"text",Ie.target.value),className:"min-h-[3rem]"}):P.type==="number"?u.jsx(nt,{value:he??"",onChange:Ie=>wt(z,P.key,P.type,Ie.target.value,P.options),placeholder:"0"}):u.jsx(nt,{value:he||"",onChange:Ie=>wt(z,P.key,P.type,Ie.target.value,P.options)})},pn=N.useMemo(()=>{if(!R.trim())return b;const z=R.toLowerCase();return b.filter(P=>P.name.toLowerCase().includes(z))},[b,R]);return n?!m||!O?u.jsxs("div",{className:"p-8 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-nexus-accent border-r-transparent rounded-full animate-spin"})," ",d.common.loading]}):u.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col animate-fade-in",children:[u.jsxs("div",{className:"flex justify-between items-end border-b border-slate-700 pb-4 mb-4 shrink-0",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"uppercase text-xs font-bold px-2 py-0.5 rounded border tracking-wider bg-nexus-900 text-slate-400 border-slate-700",style:{borderColor:O.color},children:O.type}),u.jsxs("span",{className:"text-xs text-slate-500",children:[d.pools.header.id,": ",O.name]})]}),u.jsxs("h2",{className:"text-3xl font-bold text-slate-100 capitalize flex items-center gap-3",children:[u.jsx(gp,{className:"text-slate-500"})," ",O.name]}),O.description&&u.jsx("p",{className:"text-sm text-slate-400 mt-1 max-w-2xl",children:O.description})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"relative group",children:u.jsx(nt,{value:R,onChange:z=>_(z.target.value),placeholder:d.common.search,leftIcon:u.jsx(yp,{size:16}),className:"w-64"})}),u.jsx(Se,{variant:"ghost",onClick:te,icon:u.jsx($c,{size:16}),title:d.pools.actions.editSettings}),u.jsx(Se,{variant:"ghost",onClick:()=>ve(!0),className:"text-slate-500 hover:text-red-400",icon:u.jsx(Qt,{size:16}),title:d.pools.actions.deletePool}),u.jsx("div",{className:"h-8 w-px bg-slate-700 mx-1"}),u.jsx(Se,{variant:"secondary",onClick:()=>Z(!0),icon:u.jsx(Qs,{size:16}),children:d.pools.actions.config}),u.jsx(Se,{onClick:St,icon:u.jsx(Ft,{size:16}),children:d.pools.actions.newEntity})]})]}),u.jsx("div",{className:"flex-1 min-h-0 flex flex-col gap-4",children:ae?u.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[u.jsxs("div",{className:"w-72 bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden shrink-0 flex flex-col shadow-lg",children:[u.jsx("div",{className:"p-3 border-b border-slate-700 bg-nexus-900 text-xs font-bold text-slate-500 uppercase",children:d.pools.roster.title}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:pn.map(z=>u.jsx("div",{onClick:()=>{k(z.id),q(JSON.parse(JSON.stringify(z)))},className:`p-2 rounded cursor-pointer transition-colors ${M===z.id?"bg-nexus-accent text-white shadow-md":"text-slate-300 hover:bg-slate-700"}`,children:u.jsx("div",{className:"font-bold text-sm truncate",children:z.name})},z.id))})]}),u.jsx("div",{className:"flex-1 bg-nexus-800 border border-slate-700 rounded-xl p-6 overflow-y-auto custom-scrollbar shadow-lg",children:M&&D?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-4 gap-4",children:[u.jsx(nt,{value:D.name,onChange:z=>q({...D,name:z.target.value}),placeholder:h("pools.characterName"),className:"text-3xl font-bold"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Se,{variant:"destructive",onClick:()=>ge(D.id),icon:u.jsx(Qt,{size:16}),children:d.common.delete}),u.jsx(Se,{onClick:()=>yt(D),icon:u.jsx($n,{size:16}),children:d.common.save})]})]}),u.jsx("div",{className:"flex flex-col gap-6",children:Tt(D).map(z=>u.jsxs("div",{className:"bg-nexus-900/50 p-4 rounded-lg border border-slate-700/50 hover:border-nexus-accent/30 transition-colors w-full",children:[u.jsx("div",{className:"flex justify-between items-center mb-3",children:u.jsx("div",{className:"font-bold text-slate-300 uppercase text-xs tracking-wider",children:z.label})}),u.jsx("div",{className:"space-y-3",children:z.fields.map(P=>{var he;return u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold mb-1 block",children:P.key}),Hn(z.id,P,(he=D.components[z.id])==null?void 0:he[P.key])]},P.key)})})]},z.id))}),u.jsx("div",{className:"space-y-2",children:u.jsx(Or,{label:d.pools.modals.editEntity.tags,value:D.tags,onChange:z=>q({...D,tags:z}),lockedMode:"tags",placeholder:h("pools.addTags"),className:"min-h-[42px]"})}),Wt(D,q)]}):u.jsx(LC,{icon:ha,title:d.pools.roster.empty||h("pools.emptyCharacter.title"),description:h("pools.emptyCharacter.desc"),actionLabel:d.pools.actions.newEntity||h("pools.emptyCharacter.action"),onAction:St,size:"md"})})]}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 overflow-y-auto p-4 custom-scrollbar",children:pn.map(z=>{var Be;const P=zt.getDisplayAttributes(z),ye=!!z.components.rarity?zt.getRarity(z):null;let Ie=O.color||"#3b82f6";if(ye){const $e=(Be=m.config.raritySettings)==null?void 0:Be.levels.find(xt=>xt.label===ye);$e&&(Ie=$e.color)}const Oe=O.color||"#3b82f6",ut=zt.getDescription(z);return u.jsxs("div",{onClick:()=>{k(z.id),q(JSON.parse(JSON.stringify(z))),j(!0)},className:"bg-nexus-800 border p-4 rounded-xl cursor-pointer relative group flex flex-col shadow-lg transition-all h-[360px] overflow-hidden hover:shadow-xl hover:-translate-y-1",style:{"--theme-color":Oe,borderColor:"rgba(255,255,255,0.1)",backgroundColor:"rgba(15, 23, 42, 0.95)",borderLeft:`4px solid ${Oe}`},onMouseEnter:$e=>{$e.currentTarget.style.borderColor=Oe,$e.currentTarget.style.boxShadow=`0 4px 20px -5px ${Oe}60`,$e.currentTarget.style.backgroundColor=`${Oe}15`},onMouseLeave:$e=>{$e.currentTarget.style.borderColor="rgba(255,255,255,0.1)",$e.currentTarget.style.boxShadow="none",$e.currentTarget.style.backgroundColor="rgba(15, 23, 42, 0.95)"},children:[u.jsx("div",{className:"font-bold text-slate-100 text-lg mb-1 pr-6 break-words group-hover:text-[var(--theme-color)] transition-colors truncate shrink-0",children:z.name}),ye&&u.jsx("div",{className:"text-xs uppercase font-bold mb-2 tracking-wide inline-block px-2 py-0.5 rounded self-start shrink-0",style:{color:"white",backgroundColor:Ie,boxShadow:`0 0 5px ${Ie}80`},children:ye}),ut&&u.jsx("div",{className:"text-xs text-slate-400 leading-relaxed mb-3 whitespace-pre-wrap break-words shrink-0 max-h-[30%] overflow-y-auto custom-scrollbar group-hover:text-slate-300",children:ut}),u.jsx("div",{className:"bg-black/20 rounded p-2 border border-white/5 flex-1 min-h-0 overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Object.entries(P).map(([$e,xt])=>u.jsxs("div",{className:"flex flex-col border-b border-white/5 pb-1 last:border-0",children:[u.jsx("span",{className:"text-xs text-slate-500 uppercase font-bold break-all group-hover:text-[var(--theme-color)]",children:$e}),u.jsx("span",{className:"text-xs text-slate-300 font-mono break-words",children:String(xt)})]},$e)),Object.keys(P).length===0&&u.jsx("span",{className:"text-xs text-slate-600 italic",children:d.pools.emptyState.noStats})]})}),u.jsx("button",{onClick:$e=>{$e.stopPropagation(),ge(z.id)},className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-400 p-2 hover:bg-red-900/20 rounded transition-all",children:u.jsx(Qt,{size:16})})]},z.id)})})}),u.jsx(Zt,{isOpen:ie,onClose:()=>pe(!1),title:d.pools.modals.editPool.title,children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(nt,{label:d.pools.modals.editPool.name,value:Ce,onChange:z=>U(z.target.value),autoFocus:!0}),u.jsx(cn,{label:d.pools.modals.editPool.desc,value:ne,onChange:z=>me(z.target.value),className:"min-h-[6rem]"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:d.pools.modals.editPool.color}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex flex-wrap gap-2",children:jC.slice(0,6).map(z=>u.jsx("button",{type:"button",onClick:()=>Ae(z),className:`w-6 h-6 rounded-full border-2 transition-all ${Ee===z?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:z}},z))}),u.jsxs("div",{className:"flex items-center gap-1 bg-nexus-900 border border-slate-600 rounded px-1.5 py-0.5 ml-2 relative overflow-hidden",children:[u.jsx(mC,{size:14,className:"text-slate-400 absolute left-1.5 pointer-events-none"}),u.jsx("input",{type:"color",value:Ee,onChange:z=>Ae(z.target.value),className:"w-8 h-6 bg-transparent border-none cursor-pointer opacity-0 z-10",title:h("pools.customColor")}),u.jsx("div",{className:"w-4 h-4 rounded-full absolute right-1.5 pointer-events-none border border-slate-500",style:{backgroundColor:Ee}})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-700",children:[u.jsx(Se,{variant:"ghost",onClick:()=>pe(!1),children:d.common.cancel}),u.jsx(Se,{onClick:Te,children:d.common.save})]})]})}),u.jsxs(Zt,{isOpen:J,onClose:()=>Z(!1),title:u.jsxs(u.Fragment,{children:[u.jsx(Qs,{size:18,className:"text-nexus-accent"})," ",d.pools.modals.config.title]}),maxWidth:"max-w-2xl",footer:u.jsx(Se,{variant:"ghost",onClick:()=>Z(!1),children:d.common.close}),children:[u.jsxs("div",{className:"flex gap-4 border-b border-slate-700 mb-4",children:[u.jsx("button",{onClick:()=>ce("blueprint"),className:`pb-2 text-sm font-bold transition-colors ${$==="blueprint"?"text-nexus-accent border-b-2 border-nexus-accent":"text-slate-500 hover:text-white"}`,children:d.pools.modals.config.tabs.blueprint}),u.jsx("button",{onClick:()=>ce("relations"),className:`pb-2 text-sm font-bold transition-colors ${$==="relations"?"text-nexus-accent border-b-2 border-nexus-accent":"text-slate-500 hover:text-white"}`,children:d.pools.modals.config.tabs.relations})]}),$==="blueprint"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-blue-900/10 border border-blue-500/20 p-3 rounded text-xs text-blue-200 flex gap-2",children:[u.jsx(xN,{size:16,className:"shrink-0"}),u.jsx("p",{children:d.pools.modals.config.blueprintDesc})]}),u.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:Object.entries(W).map(([z,P])=>u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-widest px-1",children:[u.jsx(wh,{size:12})," ",z]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:P.map(he=>{const ye=!!O.defaultComponents[he.id],Ie=he.isCore,Oe=he.id==="metadata";return u.jsxs("div",{onClick:()=>!Oe&&rt(he.id,ye),className:`
                                                    flex items-center gap-3 p-3 rounded border transition-all select-none
                                                    ${ye?"bg-nexus-900 border-nexus-accent/50 shadow-inner":"bg-transparent border-slate-700 hover:bg-nexus-800"}
                                                    ${Oe?"cursor-not-allowed opacity-80":"cursor-pointer"}
                                                `,children:[u.jsx("div",{className:ye?"text-nexus-accent":"text-slate-600",children:ye?u.jsx(LA,{size:18}):u.jsx(UA,{size:18})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`text-sm font-bold truncate ${ye?"text-white":"text-slate-400"}`,children:he.label}),u.jsx("div",{className:"text-xs text-slate-500 font-mono truncate",children:he.id})]}),Oe&&u.jsx("span",{className:"text-xs bg-red-900/30 text-red-400 px-1.5 py-0.5 rounded uppercase font-bold border border-red-500/20",children:"Required"}),!Oe&&Ie&&u.jsx("span",{className:"text-xs bg-purple-900/30 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold border border-purple-500/20",children:"Core"})]},he.id)})})]},z))})]}),$==="relations"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-3 rounded text-xs text-purple-200 flex gap-2",children:[u.jsx(fx,{size:16,className:"shrink-0"}),u.jsx("p",{children:d.pools.modals.config.relationsDesc})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(nt,{value:V,onChange:z=>le(z.target.value),placeholder:"e.g. Is Rival Of...",onKeyDown:z=>z.key==="Enter"&&mt()}),u.jsx(Se,{onClick:mt,children:d.pools.modals.config.addVerb})]}),u.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:[((O==null?void 0:O.relationshipTypes)||[]).map(z=>u.jsxs("div",{className:"flex justify-between items-center bg-nexus-900 p-3 rounded border border-slate-700",children:[u.jsx("span",{className:"font-bold text-slate-300",children:z}),u.jsx("button",{onClick:()=>tt(z),className:"text-slate-500 hover:text-red-400",children:u.jsx(Qt,{size:14})})]},z)),((O==null?void 0:O.relationshipTypes)||[]).length===0&&u.jsx("div",{className:"text-slate-500 italic text-center py-4",children:h("pools.noRelationshipTypes")})]})]})]}),u.jsxs(Zt,{isOpen:I,onClose:$t,title:d.pools.modals.editEntity.title,maxWidth:"max-w-3xl",children:[D&&u.jsxs("div",{className:"space-y-6",children:[u.jsx(nt,{value:D.name,onChange:z=>q({...D,name:z.target.value}),className:"text-lg font-bold",placeholder:d.pools.modals.editEntity.name}),u.jsx("div",{className:"grid grid-cols-1 gap-6 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:Tt(D).map(z=>u.jsxs("div",{className:"bg-nexus-950/50 p-4 rounded border border-slate-700 h-fit",children:[u.jsx("div",{className:"font-bold text-xs text-slate-400 uppercase mb-3 border-b border-slate-800 pb-2",children:z.label}),u.jsx("div",{className:"space-y-3",children:z.fields.map(P=>{var he;return u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold mb-1 block",children:P.key}),Hn(z.id,P,(he=D.components[z.id])==null?void 0:he[P.key])]},P.key)})})]},z.id))}),u.jsx("div",{className:"space-y-2",children:u.jsx(Or,{label:d.pools.modals.editEntity.tags,value:D.tags,onChange:z=>q({...D,tags:z}),initialMode:"tags",lockedMode:"tags",placeholder:h("pools.addTags"),className:"min-h-[42px]"})}),Wt(D,q)]}),D&&u.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-slate-700 mt-6",children:[u.jsx(Se,{variant:"ghost",onClick:$t,children:d.common.cancel}),u.jsx(Se,{onClick:()=>yt(D),icon:u.jsx($n,{size:16}),children:d.common.save})]})]}),u.jsx(Zt,{isOpen:!!F,onClose:()=>ge(null),title:u.jsxs("span",{className:"text-red-400 flex items-center gap-2",children:[u.jsx(Zs,{size:20})," ",d.pools.modals.deleteEntity.title]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-slate-300",children:d.pools.modals.deleteEntity.desc}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>ge(null),children:d.common.cancel}),u.jsx(Se,{variant:"destructive",onClick:ls,children:d.common.confirm})]})]})}),u.jsx(Zt,{isOpen:H,onClose:()=>ve(!1),title:u.jsxs("span",{className:"text-red-400 flex items-center gap-2",children:[u.jsx(Qt,{size:20})," ",d.pools.modals.deletePool.title]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-slate-300",children:[d.pools.modals.deletePool.desc," ",u.jsx("strong",{children:O.name}),"?"]}),u.jsx("div",{className:"bg-red-900/10 border border-red-500/30 p-3 rounded text-xs text-red-300",children:d.pools.modals.deletePool.warning}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>ve(!1),children:d.common.cancel}),u.jsx(Se,{variant:"destructive",onClick:ze,children:d.common.confirm})]})]})})]}):null},tm=be.createContext(null),O3=({children:n})=>{const[e,s]=N.useState([]),o=N.useCallback((c,d,h,g)=>{const m=g?`${c} [${g} Tokens]`:c,v={id:crypto.randomUUID(),timestamp:Date.now(),title:m,prompt:d,response:h,collapsed:!0};s(b=>[v,...b].slice(0,50))},[]),r=N.useCallback(c=>{s(d=>d.map(h=>h.id===c?{...h,collapsed:!h.collapsed}:h))},[]);return u.jsx(tm.Provider,{value:{globalLogs:e,addGlobalLog:o,toggleGlobalLog:r},children:n})},Ob=({label:n,tags:e,setTags:s,placeholder:o,onTagAdd:r})=>{const c=d=>{r&&d.forEach(h=>{e.includes(h)||r(h)}),s(d)};return u.jsx(Or,{label:n,value:e,onChange:c,placeholder:o,lockedMode:"tags"})},xE=({logs:n,toggleLog:e})=>{if(n.length===0)return null;const{s}=kn();return u.jsxs("div",{className:"mt-8 bg-nexus-900 border border-slate-700 rounded-xl overflow-hidden shadow-lg",children:[u.jsxs("div",{className:"p-4 bg-nexus-950 border-b border-slate-700 flex justify-between items-center",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-300 flex items-center gap-2",children:[u.jsx(yC,{size:16,className:"text-nexus-accent"}),s("shared.systemLogs")]}),u.jsxs("span",{className:"text-xs text-slate-500",children:[n.length," events"]})]}),u.jsx("div",{className:"space-y-3 p-4",children:n.map(o=>u.jsxs("div",{className:"border border-slate-700 rounded bg-nexus-800",children:[u.jsx("button",{onClick:()=>e(o.id),className:"w-full flex items-center justify-between p-3 text-left hover:bg-nexus-700 transition-colors",children:u.jsxs("div",{className:"flex items-center gap-2",children:[o.collapsed?u.jsx(mp,{size:14,className:"text-slate-500"}):u.jsx(pp,{size:14,className:"text-slate-500"}),u.jsx("span",{className:"text-xs font-mono text-nexus-accent",children:new Date(o.timestamp).toLocaleTimeString()}),u.jsx("span",{className:"text-xs text-slate-300 font-bold truncate max-w-[300px]",children:o.title})]})}),!o.collapsed&&u.jsxs("div",{className:"p-3 border-t border-slate-700 bg-black/30 text-xs font-mono",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"text-slate-500 font-bold mb-1 uppercase tracking-wider",children:s("shared.systemPromptPayload")}),u.jsx("div",{className:"bg-nexus-950 p-3 rounded text-green-400 whitespace-pre-wrap border border-slate-800",children:o.prompt})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-slate-500 font-bold mb-1 uppercase tracking-wider",children:s("shared.rawJsonResponse")}),u.jsx("div",{className:"bg-nexus-950 p-3 rounded text-blue-400 whitespace-pre-wrap border border-slate-800",children:o.response})]})]})]},o.id))})]})},G3=({world:n,onSelect:e,onClose:s})=>{const{s:o}=kn(),[r,c]=N.useState("All"),[d,h]=N.useState(""),[g,m]=N.useState([]),[v,b]=N.useState(!1),[S,E]=N.useState(!1);N.useEffect(()=>(b(!0),document.body.style.overflow="hidden",T(),()=>{document.body.style.overflow="unset"}),[]),N.useEffect(()=>{const M=setTimeout(()=>{T()},300);return()=>clearTimeout(M)},[d,r]);const T=async()=>{if(n){E(!0);try{const M=r==="All"?void 0:r,k=await De.searchEntities(n.id,d,50,M);m(k)}catch(M){console.error(M)}finally{E(!1)}}};if(!v)return null;const R=M=>{const k=zt.getDisplayAttributes(M),I=zt.getDescription(M);return u.jsxs("div",{className:"max-w-xs space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-white/20 pb-1 mb-2",children:[u.jsx("strong",{className:"text-white text-sm",children:M.name}),!!M.components.rarity&&u.jsx("span",{className:"text-xs uppercase font-bold px-1.5 py-0.5 rounded bg-black/40",children:zt.getRarity(M)})]}),I&&u.jsx("p",{className:"text-xs text-slate-300 italic line-clamp-3 mb-2",children:I}),Object.keys(k).length>0&&u.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(k).slice(0,6).map(([j,J])=>u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs text-slate-500 uppercase font-bold",children:j}),u.jsx("span",{className:"text-xs text-slate-300 font-mono truncate",children:String(J)})]},j))}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2 pt-2 border-t border-white/10",children:M.tags.map(j=>u.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-white/10 rounded",children:j},j))})]})},_=u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:s}),u.jsxs("div",{className:"relative bg-nexus-800 border border-slate-600 w-full max-w-2xl rounded-xl shadow-2xl flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-200 m-4",children:[u.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-nexus-900 rounded-t-xl",children:[u.jsxs("h3",{className:"font-bold text-slate-100 flex items-center gap-2",children:[u.jsx(mu,{size:16,className:"text-nexus-accent"})," ",o("shared.selectReferenceEntity")]}),u.jsx("button",{onClick:s,className:"text-slate-400 hover:text-white transition-colors",children:u.jsx(ei,{size:20})})]}),u.jsxs("div",{className:"p-4 border-b border-slate-700 bg-nexus-900/50 flex gap-4",children:[u.jsx("div",{className:"w-1/3",children:u.jsxs("select",{value:r,onChange:M=>{c(M.target.value)},className:"w-full bg-nexus-900 border border-slate-600 rounded p-2.5 text-sm text-white outline-none focus:border-nexus-accent cursor-pointer",children:[u.jsx("option",{value:"All",children:o("shared.allPools")}),Object.keys(n.pools).map(M=>u.jsx("option",{value:M,children:M},M))]})}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(yp,{size:14,className:"absolute left-3 top-3 text-slate-500"}),u.jsx("input",{type:"text",value:d,onChange:M=>h(M.target.value),placeholder:o("shared.searchByNameOrTag"),className:"w-full bg-nexus-900 border border-slate-600 rounded p-2.5 pl-9 text-sm text-white outline-none focus:border-nexus-accent",autoFocus:!0})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:S?u.jsxs("div",{className:"text-center py-12 opacity-50",children:[u.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-nexus-accent border-r-transparent rounded-full mx-auto mb-2"}),u.jsx("p",{className:"text-xs text-slate-500",children:o("shared.searching")})]}):g.length===0?u.jsxs("div",{className:"text-center py-12 opacity-50",children:[u.jsx("p",{className:"text-slate-500 italic",children:o("shared.noMatchingEntities")}),u.jsx("p",{className:"text-xs text-slate-600 mt-1",children:o("shared.tryDifferentSearch")})]}):u.jsx("div",{className:"grid grid-cols-1 gap-2",children:g.map(M=>u.jsx(uu,{content:R(M),children:u.jsxs("button",{onClick:()=>e(M),className:"w-full text-left bg-nexus-900 border border-slate-700 hover:border-nexus-accent hover:bg-nexus-800 p-3 rounded group transition-all",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("span",{className:"font-bold text-slate-200 group-hover:text-nexus-accent transition-colors",children:M.name})}),!!M.components.rarity&&u.jsx("span",{className:`text-xs uppercase border px-1.5 py-0.5 rounded font-bold ${zt.getRarity(M)==="Legendary"?"border-amber-500/50 text-amber-500 bg-amber-900/10":zt.getRarity(M)==="Epic"?"border-purple-500/50 text-purple-500 bg-purple-900/10":"border-slate-700 text-slate-500"}`,children:zt.getRarity(M)})]}),u.jsxs("div",{className:"text-xs text-slate-500 truncate mt-1 pr-8 opacity-80 group-hover:opacity-100 flex items-center gap-2",children:[u.jsx(ha,{size:10}),u.jsxs("span",{className:"truncate",children:[zt.getDescription(M).substring(0,60)||o("shared.noDescriptionProvided"),"..."]})]})]})},M.id))})}),u.jsxs("div",{className:"p-3 bg-nexus-950 border-t border-slate-800 text-xs text-slate-500 flex justify-between rounded-b-xl",children:[u.jsx("span",{children:o("shared.foundMatches",{count:g.length})}),u.jsx("span",{className:"italic",children:o("shared.hoverForDetails")})]})]})]});return du.createPortal(_,document.body)},xh=({defaultMode:n="Asset"})=>{const{currentWorld:e,worldManager:s,refreshWorld:o,appSettings:r,forgeState:c,setForgeState:d}=zi(),{provider:h,isConfigured:g}=Lu(),m=N.useContext(tm),{toast:v}=as(),b=Vr(),{s:S}=kn();if(!e||!m)return null;const{globalLogs:E,addGlobalLog:T,toggleGlobalLog:R}=m,[_,M]=N.useState(n),I=(()=>{var he,ye;const z=`${e.id}_${_}`,P=c[z];return P||{prompt:"",count:1,targetPool:"",generatedItems:[],contextItems:[],selectedToneId:((ye=(he=r.tones)==null?void 0:he[0])==null?void 0:ye.id)||"",outputLength:r.defaultOutputLength||"Medium",strictTags:!0,requiredAttributes:[],negativeConstraints:[]}})(),[j,J]=N.useState(I.prompt||""),[Z,$]=N.useState(I.count||1),[ce,V]=N.useState(I.targetPool||""),[le,ie]=N.useState(!1),[pe,H]=N.useState(I.generatedItems||[]),[ve,Ce]=N.useState(r.defaultLanguage||"English"),[U,ne]=N.useState(I.selectedToneId||""),[me,Ee]=N.useState(I.outputLength||"Medium"),[Ae,D]=N.useState(!1),[q,oe]=N.useState(I.strictTags!==void 0?I.strictTags:!0),[fe,F]=N.useState(I.requiredAttributes||[]),[ge,_e]=N.useState(I.negativeConstraints||[]),[X,O]=N.useState(!1),[W,ae]=N.useState(I.contextItems||[]),[te,Te]=N.useState(!1),[ze,rt]=N.useState({});N.useEffect(()=>{r.defaultOutputLength&&Ee(r.defaultOutputLength)},[r.defaultOutputLength]),N.useEffect(()=>{(async()=>{const P=await De.getPoolCounts(e.id);rt(P)})()},[e.id,pe]),N.useEffect(()=>{const z=`${e.id}_${_}`,P=c[z];P?(J(P.prompt||""),$(P.count||1),V(P.targetPool||""),H(P.generatedItems||[]),ae(P.contextItems||[]),ne(P.selectedToneId||""),P.outputLength&&Ee(P.outputLength),oe(P.strictTags!==void 0?P.strictTags:!0),F(P.requiredAttributes||[]),_e(P.negativeConstraints||[])):(J(""),$(1),V(""),H([]),ae([]))},[e.id,_]),N.useEffect(()=>{const z={prompt:j,count:Z,targetPool:ce,generatedItems:pe,contextItems:W,selectedToneId:U,outputLength:me,strictTags:q,selectedRarity:"Common",requiredAttributes:fe,negativeConstraints:ge},P=`${e.id}_${_}`;d(P,z)},[j,Z,ce,pe,W,U,me,q,fe,ge,_]);const mt=N.useMemo(()=>{const z=Object.values(e.pools);return _==="Asset"?z.filter(P=>P.type==="Asset"):_==="Lore"?z.filter(P=>P.type==="World"):_==="Character"?z.filter(P=>P.type==="Character"):[]},[e,_]);N.useEffect(()=>{mt.find(P=>P.name===ce)||V("")},[_,mt]);const tt=z=>{if(!W.some(P=>P.item.id===z.id)){let P=S("forge.relationship.relatedTo");if(ce){const he=e.pools[ce];he&&he.relationshipTypes&&he.relationshipTypes.length>0&&(P=he.relationshipTypes[0])}ae([...W,{item:z,influence:P}]),v({title:S("forge.toast.contextAdded.title"),message:S("forge.toast.contextAdded.message",{name:z.name}),type:"info"})}Te(!1)},St=async()=>{if(!g){v({title:S("forge.toast.configError.title"),message:S("forge.toast.configError.message"),type:"error"});return}if(!ce){v({title:S("forge.toast.missingSelection.title"),message:S("forge.toast.missingSelection.message"),type:"warning"});return}if(!j.trim()){v({title:S("forge.toast.emptyPrompt.title"),message:S("forge.toast.emptyPrompt.message"),type:"warning"});return}ie(!0),H([]);let z=s.generateContextString(e);const P=e.pools[ce];P.relationshipTypes&&P.relationshipTypes.length>0&&(z+=`
ALLOWED RELATIONSHIP TYPES: [${P.relationshipTypes.join(", ")}]`),e.config.useGlobalPromptPrefix&&r.globalPromptPrefix&&(z=`[GLOBAL INSTRUCTION]: ${r.globalPromptPrefix}

${z}`);try{const he=W.map(Et=>({id:Et.item.id,name:Et.item.name,description:zt.getDescription(Et.item),tags:Et.item.tags,relationType:Et.influence}));let ye=P.suggestedTags||[];if(q){const Et=s.getAllTags(e.id).slice(0,50);ye=Array.from(new Set([...ye,...Et]))}else ye=P.suggestedTags||[];const Ie=ye.map(Et=>s.getTagMetadata(e.id,Et).label),Oe=r.tones.find(Et=>Et.id===U),ut=Oe?Oe.instruction:"Standard RPG style",$e=Object.keys(P.defaultComponents).map(Et=>{const Ht=e.componentRegistry[Et];return Ht?`${Ht.label}: ${Ht.description||"No specific description."}`:null}).filter(Boolean),xt={language:ve,contextItems:he,toneInstruction:ut,lengthInstruction:r.lengthDefinitions[me.toLowerCase()],lengthPerField:Ae,strictTags:q,tagDefinitions:$e,attributes:fe,negativeConstraints:ge,allowedTags:Ie.length>0?Ie:void 0},Fi=UC(P,e.componentRegistry),Ns=`${_} Forge - ${ce} - Batch: ${Z}`,qn=Object.keys(P.defaultComponents);let As=await h.generateBatch(P.name,j,Z,z,xt,Fi,qn);T(Ns,j,JSON.stringify(As,null,2));const Rs=await Promise.all(As.map(async Et=>{const Ht=[];for(const Ue of Et.tags)if(Ue.includes("|")){const[dt,Pt]=Ue.split("|"),Lt=s.ensureTag(e,dt);e.tags[Lt]&&(e.tags[Lt].description=Pt),(await De.searchEntities(e.id,dt,1)).length===0&&Ht.push(Lt)}else(await De.searchEntities(e.id,Ue,1)).length===0&&(q?e.tags[Ue]&&Ht.push(Ue):Ht.push(Ue));return await s.saveWorld(e),{...Et,tags:Ht}}));H(Rs),v({title:S("forge.toast.complete.title"),message:S("forge.toast.complete.message",{count:Rs.length}),type:"success"})}catch(he){v({title:S("forge.toast.generationFailed.title"),message:he.message||"Unknown error",type:"error"}),console.error(he)}finally{ie(!1)}},yt=async z=>{let P=!1;z.forEach(he=>{he.tags.forEach(ye=>{!q&&!e.tags[ye]&&(s.ensureTag(e,ye),P=!0)})}),P&&await s.saveWorld(e)},$t=async z=>{await yt([z]),await s.saveEntityToPool(e.id,ce,z),o(),H(P=>P.filter(he=>he.id!==z.id)),v({title:S("forge.toast.saved.title"),message:S("forge.toast.saved.message",{name:z.name,pool:ce}),type:"success"})},ls=async()=>{await yt(pe),await s.saveEntitiesToPool(e.id,ce,pe),o(),H([]),v({title:S("forge.toast.batchSaved.title"),message:S("forge.toast.batchSaved.message"),type:"success"})},Wt=(()=>{switch(_){case"Lore":return{color:"text-purple-400",icon:ss,label:b.forge.modes.lore.label,desc:b.forge.modes.lore.desc};case"Character":return{color:"text-nexus-accent",icon:Th,label:b.forge.modes.character.label,desc:b.forge.modes.character.desc};default:return{color:"text-orange-400",icon:Fc,label:b.forge.modes.asset.label,desc:b.forge.modes.asset.desc}}})(),Tt=Wt.icon,Hn=e.pools[ce],pn=(Hn==null?void 0:Hn.relationshipTypes)||[];return u.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 pb-20 animate-fade-in",children:[u.jsxs("header",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl font-bold text-slate-100 flex items-center gap-3",children:[u.jsx(Tt,{className:Wt.color,size:32}),Wt.label]}),u.jsx("p",{className:"text-slate-400 mt-2",children:Wt.desc})]}),u.jsxs("div",{className:"text-right hidden md:block",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:b.forge.header.poweredBy}),u.jsx("div",{className:"text-xs font-mono text-nexus-accent bg-nexus-900 px-2 py-1 rounded border border-nexus-accent/20",children:"Gemini 2.5 Flash"})]})]}),u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl shadow-lg overflow-hidden",children:[u.jsxs("div",{className:"flex border-b border-slate-700 bg-nexus-900/50",children:[u.jsxs("button",{onClick:()=>M("Asset"),className:`flex-1 py-4 text-sm font-bold flex items-center justify-center gap-2 transition-all ${_==="Asset"?"bg-nexus-800 text-slate-200 border-t-2 border-t-slate-400":"text-slate-500 hover:text-slate-300"}`,children:[u.jsx(Fc,{size:16})," ",b.forge.modes.asset.label]}),u.jsxs("button",{onClick:()=>M("Lore"),className:`flex-1 py-4 text-sm font-bold flex items-center justify-center gap-2 transition-all ${_==="Lore"?"bg-nexus-800 text-purple-400 border-t-2 border-t-purple-400":"text-slate-500 hover:text-slate-300"}`,children:[u.jsx(ss,{size:16})," ",b.forge.modes.lore.label]}),u.jsxs("button",{onClick:()=>M("Character"),className:`flex-1 py-4 text-sm font-bold flex items-center justify-center gap-2 transition-all ${_==="Character"?"bg-nexus-800 text-nexus-accent border-t-2 border-t-nexus-accent":"text-slate-500 hover:text-slate-300"}`,children:[u.jsx(Th,{size:16})," ",b.forge.modes.character.label]})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx("div",{children:u.jsxs(xn,{label:b.forge.controls.targetPool,value:ce,onChange:z=>V(z.target.value),children:[u.jsxs("option",{value:"",children:["-- ",b.common.search," --"]}),mt.map(z=>u.jsxs("option",{value:z.name,children:[z.name," (",ze[z.name]||0,")"]},z.name))]})}),u.jsxs("div",{className:"flex gap-4 items-end",children:[u.jsx("div",{className:"flex-1",children:u.jsxs(xn,{label:b.forge.controls.language,value:ve,onChange:z=>Ce(z.target.value),children:[u.jsx("option",{value:"English",children:"English"}),u.jsx("option",{value:"Chinese",children:"Chinese ()"})]})}),u.jsx(uu,{content:u.jsx("div",{className:"text-xs",children:b.forge.controls.strictTags.tooltip}),children:u.jsxs("button",{onClick:()=>oe(!q),className:`h-[42px] px-3 rounded border flex items-center gap-2 transition-all ${q?"bg-nexus-900 border-blue-500/50 text-blue-400":"bg-nexus-900 border-green-500/50 text-green-400"}`,children:[q?u.jsx(gu,{size:18}):u.jsx(sN,{size:18}),u.jsx("span",{className:"text-xs font-bold",children:q?b.forge.controls.strictTags.strict:b.forge.controls.strictTags.allow})]})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx("div",{children:u.jsx(xn,{label:b.forge.controls.tone,value:U,onChange:z=>ne(z.target.value),children:r.tones.map(z=>u.jsx("option",{value:z.id,children:z.name},z.id))})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:b.forge.controls.batchSize}),u.jsxs("div",{className:"flex items-center gap-2 h-[42px] bg-nexus-900 border border-slate-600 rounded px-2",children:[u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>$(Math.max(1,Z-1)),icon:u.jsx(pA,{size:14}),className:"w-8 h-8 p-0"}),u.jsx("span",{className:"flex-1 text-center font-bold text-slate-200",children:Z}),u.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>$(Math.min(10,Z+1)),icon:u.jsx(Ft,{size:14}),className:"w-8 h-8 p-0"})]})]}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold tracking-wide",children:b.forge.controls.length.label}),u.jsx(uu,{content:b.forge.controls.length.tooltip,children:u.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",id:"scope-toggle",checked:Ae,onChange:z=>D(z.target.checked),className:"accent-nexus-accent w-3 h-3 cursor-pointer"}),u.jsx("label",{htmlFor:"scope-toggle",className:"text-xs text-slate-400 font-bold uppercase cursor-pointer select-none group-hover:text-nexus-accent",children:b.forge.controls.length.scopeField}),u.jsx(aC,{size:10,className:"text-slate-600"})]})})]}),u.jsxs(xn,{value:me,onChange:z=>Ee(z.target.value),children:[u.jsx("option",{value:"Short",children:"Short"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"Long",children:"Long"})]})]})]})]}),u.jsxs("div",{className:"p-4 bg-nexus-950 border border-slate-700 rounded-lg shadow-inner",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("h4",{className:"font-bold text-slate-400 text-xs uppercase flex items-center gap-2",children:[u.jsx(mu,{size:14})," ",b.forge.controls.context.header]}),u.jsx(Se,{variant:"secondary",onClick:()=>Te(!0),icon:u.jsx(Ft,{size:12}),className:"h-7 text-xs",children:b.forge.controls.context.addLink})]}),W.length===0&&u.jsx("p",{className:"text-xs text-slate-600 italic",children:b.forge.controls.context.empty}),u.jsx("div",{className:"space-y-2",children:W.map(z=>u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded p-2 flex items-center justify-between animate-in slide-in-from-left-2",children:[u.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[u.jsx("div",{className:"w-40",children:u.jsx(xn,{value:z.influence,onChange:P=>{ae(he=>he.map(ye=>ye.item.id===z.item.id?{...ye,influence:P.target.value}:ye))},className:"h-8 py-0 text-xs",children:pn.length>0?pn.map(P=>u.jsx("option",{value:P,children:P},P)):u.jsxs(u.Fragment,{children:[u.jsx("option",{value:S("forge.relationship.relatedTo"),children:S("forge.relationship.relatedTo")}),u.jsx("option",{value:S("forge.relationship.allyOf"),children:S("forge.relationship.allyOf")}),u.jsx("option",{value:S("forge.relationship.enemyOf"),children:S("forge.relationship.enemyOf")})]})})}),u.jsx(sC,{size:10,className:"text-slate-600"}),u.jsx("span",{className:"text-xs font-bold text-slate-200",children:z.item.name})]}),u.jsx("button",{onClick:()=>ae(P=>P.filter(he=>he.item.id!==z.item.id)),className:"text-slate-600 hover:text-red-400 ml-2",children:u.jsx(ei,{size:12})})]},z.item.id))})]}),u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>O(!X),className:"flex items-center gap-2 text-xs text-nexus-accent hover:text-white mb-2 transition-colors font-bold uppercase tracking-wider",children:[u.jsx(kA,{size:14})," ",b.forge.controls.advanced.toggle]}),X&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-nexus-900/50 p-4 rounded-lg border border-slate-700/50 mb-6 animate-in slide-in-from-top-2",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx(Ob,{label:b.forge.controls.advanced.mustContain,tags:fe,setTags:F,placeholder:"e.g. fire, ancient"})}),u.jsx("div",{className:"md:col-span-2",children:u.jsx(Ob,{label:b.forge.controls.advanced.mustAvoid,tags:ge,setTags:_e,placeholder:"e.g. futuristic"})})]})]}),u.jsx("div",{children:u.jsx(cn,{label:b.forge.controls.prompt,value:j,onChange:z=>J(z.target.value),placeholder:ve==="Chinese"?`${_==="Lore"?"":_==="Character"?"":""}...`:`Describe the ${_.toLowerCase()} you want to generate...`,className:"h-28 font-medium text-base"})}),u.jsx(Se,{onClick:St,disabled:le,className:"w-full h-12 text-lg shadow-lg shadow-blue-900/20",icon:le?u.jsx(hx,{className:"animate-spin"}):u.jsx(hx,{}),children:le?b.forge.controls.buttons.generating:b.forge.controls.buttons.generate})]})]}),pe.length>0&&u.jsxs("div",{className:"space-y-4 animate-fade-in mt-6",children:[u.jsxs("div",{className:"flex justify-between items-center bg-nexus-800 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-200 text-lg",children:[b.forge.results.title," (",pe.length,")"]}),u.jsx(Se,{onClick:ls,variant:"secondary",icon:u.jsx(Li,{size:14}),children:b.forge.controls.buttons.saveAll})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:pe.map(z=>{const P=zt.getDescription(z),he=zt.getDisplayAttributes(z),ye=!!z.components.rarity;return u.jsx("div",{className:"bg-nexus-800 border border-slate-700 p-5 rounded-lg hover:border-nexus-accent transition-colors flex gap-4 group shadow-lg",children:u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-xl text-white group-hover:text-nexus-accent transition-colors",children:z.name}),u.jsxs("div",{className:"text-xs text-slate-500 uppercase font-bold mt-1 flex gap-2",children:[u.jsx("span",{className:"bg-nexus-900 px-2 py-0.5 rounded text-slate-400",children:ce}),ye&&u.jsx("span",{className:"text-nexus-accent",children:zt.getRarity(z)})]})]}),u.jsxs("div",{className:"flex gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>$t(z),className:"bg-nexus-accent hover:bg-blue-600 text-white p-2 rounded shadow-lg transform hover:scale-105 transition-all",children:u.jsx($n,{size:16})}),u.jsx("button",{onClick:()=>H(Ie=>Ie.filter(Oe=>Oe.id!==z.id)),className:"bg-slate-800 text-slate-500 hover:text-red-400 p-2 rounded border border-slate-700 hover:border-red-500",children:u.jsx(Qt,{size:16})})]})]}),u.jsx("p",{className:"text-slate-300 text-sm mb-4 leading-relaxed whitespace-pre-wrap",children:P}),u.jsxs("div",{className:"flex flex-col gap-2 text-xs text-slate-500 bg-nexus-900/50 p-3 rounded border border-slate-800/50",children:[Object.entries(he).map(([Ie,Oe])=>u.jsxs("div",{className:"flex flex-col gap-1 border-b border-slate-800/50 pb-2 last:border-0 last:pb-0",children:[u.jsx("span",{className:"capitalize opacity-60 font-bold",children:Ie}),u.jsx("span",{className:"text-slate-300 font-mono break-words whitespace-pre-wrap",children:String(Oe)})]},Ie)),Object.keys(he).length===0&&u.jsx("span",{className:"italic",children:S("forge.noStatsGenerated")})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:z.tags.map(Ie=>u.jsx("span",{className:"text-xs bg-black/40 text-slate-400 px-2 py-0.5 rounded border border-slate-800",children:Ie},Ie))})]})},z.id)})})]}),u.jsx(xE,{logs:E,toggleLog:R}),te&&u.jsx(G3,{world:e,onSelect:tt,onClose:()=>Te(!1)})]})},z3=(n,e)=>{if(!(!e||!n))return e.split(".").reduce((s,o)=>s&&s[o]!==void 0?s[o]:void 0,n)},F3=(n,e)=>{const s=z3(n,e.path),o=e.value;switch(e.operator){case"eq":return s==o;case"neq":return s!=o;case"gt":return Number(s)>Number(o);case"gte":return Number(s)>=Number(o);case"lt":return Number(s)<Number(o);case"lte":return Number(s)<=Number(o);case"contains":return Array.isArray(s)?s.includes(o):typeof s=="string"?s.toLowerCase().includes(String(o).toLowerCase()):!1;case"missing":return Array.isArray(s)?!s.includes(o):!s;case"truthy":return!!s;default:return!1}},Gb={compileRules:(n,e,s)=>({activeRules:[],activeEffects:{bans:{global:!1,tags:new Set,items:new Set},boosts:{tags:new Map,items:new Map},forcedRarity:{tags:new Map,items:new Map}}}),roll:(n,e,s=[])=>{const o=[],r=[];let c=0,d=0;for(const m of n){const v=m.original;let b=!1;for(const R of s)if(!F3(v,R)){b=!0;break}if(b){d++;continue}let S=10;switch(m.rarity){case"Common":S=50;break;case"Uncommon":S=30;break;case"Rare":S=15;break;case"Epic":S=4;break;case"Legendary":S=1;break}const T=S*1;r.push({item:v,weight:T}),c+=T}if(r.length===0){const m=d>0?`All ${n.length} candidates were filtered out (${d} by constraints).`:"Pool is empty.";return{result:null,log:[...o,m]}}let h=Math.random()*c,g=r[r.length-1].item;for(const m of r)if(h-=m.weight,h<=0){g=m.item;break}return o.push(`Rolled from ${r.length} valid candidates (Filtered ${d}).`),o.push(`Winner: ${g.name} (${zt.getRarity(g)})`),s.length>0&&o.push(`Constraints Applied: ${s.length}`),{result:g,log:o}}},B3=n=>[{label:n("roller.operator.eq"),value:"eq"},{label:n("roller.operator.neq"),value:"neq"},{label:n("roller.operator.gt"),value:"gt"},{label:n("roller.operator.gte"),value:"gte"},{label:n("roller.operator.lt"),value:"lt"},{label:n("roller.operator.lte"),value:"lte"},{label:n("roller.operator.contains"),value:"contains"},{label:n("roller.operator.missing"),value:"missing"},{label:n("roller.operator.truthy"),value:"truthy"}],$3=be.memo(({constraint:n,onRemove:e})=>u.jsxs("div",{className:"flex gap-2 items-center bg-nexus-900 p-2 rounded border border-slate-700 animate-in fade-in slide-in-from-left-2",children:[u.jsx("div",{className:"flex-1 text-xs font-mono text-nexus-accent truncate",title:n.path,children:n.path}),u.jsx("div",{className:"px-2 py-0.5 bg-slate-800 rounded text-xs font-bold uppercase text-slate-400",children:n.operator}),u.jsx("div",{className:"flex-1 text-xs text-white truncate font-bold",children:String(n.value)}),u.jsx("button",{onClick:e,className:"text-slate-500 hover:text-red-400 transition-colors",children:u.jsx(Qt,{size:14})})]})),H3=({embedded:n=!1,initialPool:e,onRollComplete:s})=>{const{currentWorld:o}=zi(),{toast:r}=as(),{s:c}=kn(),d=useMemo(()=>B3(c),[c]),[h,g]=N.useState(e||"locations"),[m,v]=N.useState([]),[b,S]=N.useState(!1),[E,T]=N.useState(null),[R,_]=N.useState([]),[M,k]=N.useState(""),[I,j]=N.useState([]),[J,Z]=N.useState("components.basic_stats.power"),[$,ce]=N.useState("gt"),[V,le]=N.useState("");if(!o)return null;N.useEffect(()=>{let H=!0;return(async()=>{if(!(!o.id||!h)){S(!0);try{const Ce=await De.getRollCandidates(o.id,h);H&&v(Ce)}catch{H&&r({title:c("roller.toast.dbError.title"),message:c("roller.toast.dbError.message"),type:"error"})}finally{H&&S(!1)}}})(),()=>{H=!1}},[o.id,h]);const ie=()=>{if(!J.trim())return;const H=!isNaN(parseFloat(V))&&isFinite(parseFloat(V));j(ve=>[...ve,{path:J.trim(),operator:$,value:H?parseFloat(V):V}]),le("")},pe=()=>{var ne;if(m.length===0){r({title:c("roller.toast.emptyPool.title"),message:c("roller.toast.emptyPool.message"),type:"warning"});return}const H=new Set(M.split(",").map(me=>me.trim().toLowerCase()).filter(Boolean)),{activeEffects:ve}=Gb.compileRules(o.rules,H,h),{result:Ce,log:U}=Gb.roll(m,ve,I);T(Ce),_(U),Ce?(r({title:((ne=o.config)==null?void 0:ne.language)==="Chinese"?`${Ce.name}`:"Rolled: "+Ce.name,message:zt.getRarity(Ce),type:"success"}),s&&s(Ce)):r({title:c("roller.toast.rollFailed.title"),message:c("roller.toast.rollFailed.message"),type:"warning"})};return u.jsxs("div",{className:`grid grid-cols-1 ${n?"gap-4":"lg:grid-cols-3 gap-8"} h-[calc(100vh-8rem)] animate-fade-in`,children:[u.jsxs("div",{className:`flex flex-col gap-4 ${n?"":"lg:col-span-1"} h-full overflow-hidden`,children:[u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 p-4 rounded-xl shadow-lg shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h3",{className:"font-bold text-slate-200 text-sm uppercase tracking-wider flex items-center gap-2",children:[u.jsx(gC,{size:14,className:b?"animate-spin":""})," Config"]}),u.jsx("span",{className:`text-xs font-mono px-2 py-0.5 rounded ${m.length>0?"bg-green-900 text-green-400":"bg-red-900 text-red-400"}`,children:c("roller.panel.candidates",{count:m.length})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(xn,{label:c("roller.label.targetPool"),value:h,onChange:H=>g(H.target.value),children:Object.keys(o.pools).map(H=>u.jsx("option",{value:H,children:H},H))}),u.jsx(nt,{label:c("roller.label.contextTags"),placeholder:c("roller.placeholder.contextTags"),value:M,onChange:H=>k(H.target.value)})]})]}),u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 p-4 rounded-xl shadow-lg flex-1 flex flex-col min-h-0",children:[u.jsxs("h3",{className:"font-bold text-slate-200 text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[u.jsx(BN,{size:14,className:"text-nexus-accent"})," ",c("roller.panel.runtimeConstraints")]}),u.jsxs("div",{className:"bg-nexus-900/50 p-3 rounded border border-slate-700/50 mb-4 space-y-2",children:[u.jsx(nt,{value:J,onChange:H=>Z(H.target.value),placeholder:c("roller.placeholder.path"),className:"text-xs font-mono"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-1/2",children:u.jsx(xn,{value:$,onChange:H=>ce(H.target.value),className:"text-xs",children:d.map(H=>u.jsx("option",{value:H.value,children:H.label},H.value))})}),u.jsx("div",{className:"flex-1",children:u.jsx(nt,{value:V,onChange:H=>le(H.target.value),placeholder:c("roller.placeholder.value"),className:"text-xs",onKeyDown:H=>H.key==="Enter"&&ie()})}),u.jsx("button",{onClick:ie,className:"bg-nexus-700 hover:bg-nexus-600 text-white px-2 rounded border border-slate-600",children:u.jsx(Ft,{size:16})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:[I.length===0&&u.jsx("div",{className:"text-center text-slate-500 text-xs italic py-4",children:c("roller.empty.noConstraints")}),I.map((H,ve)=>u.jsx($3,{constraint:H,onRemove:()=>j(Ce=>Ce.filter((U,ne)=>ne!==ve))},ve))]}),u.jsx("div",{className:"pt-4 mt-auto",children:u.jsx(Se,{onClick:pe,disabled:b||m.length===0,className:"w-full py-3 text-lg",icon:u.jsx(CA,{size:20,fill:"currentColor"}),children:c(b?"roller.loading":"roller.roll")})})]})]}),u.jsxs("div",{className:`${n?"":"lg:col-span-2"} flex flex-col gap-4 h-full overflow-hidden`,children:[u.jsx("div",{className:"flex-1 bg-nexus-800 border-2 border-slate-700 rounded-xl flex items-center justify-center relative overflow-hidden group",children:E?u.jsxs("div",{className:"w-full h-full p-8 flex flex-col items-center justify-center text-center relative z-10 animate-in zoom-in-95 duration-200",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-nexus-900 via-nexus-800 to-nexus-900 -z-10"}),u.jsx("div",{className:`absolute top-0 w-full h-2 ${zt.getRarity(E)==="Legendary"?"bg-amber-500 shadow-[0_0_20px_rgba(245,158,11,0.5)]":zt.getRarity(E)==="Epic"?"bg-purple-500 shadow-[0_0_20px_rgba(168,85,247,0.5)]":"bg-nexus-accent"}`}),u.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold uppercase mb-4 border border-white/10 bg-slate-800 text-slate-300 tracking-widest",children:zt.getRarity(E)}),u.jsx("h1",{className:"text-5xl font-black text-white mb-4 tracking-tight drop-shadow-xl",children:E.name}),u.jsxs("p",{className:"text-lg text-slate-400 italic max-w-lg leading-relaxed mb-6",children:['"',zt.getDescription(E),'"']}),u.jsx("div",{className:"flex flex-wrap gap-2 justify-center max-w-2xl",children:E.tags.map(H=>u.jsx("span",{className:"text-xs px-2 py-1 bg-black/40 text-slate-400 rounded border border-slate-700/50 uppercase font-bold",children:H},H))})]}):u.jsxs("div",{className:"text-slate-600 flex flex-col items-center animate-pulse",children:[u.jsx(zc,{size:48,className:"mb-2 opacity-50"}),u.jsx("span",{className:"text-sm font-mono uppercase tracking-widest",children:c("roller.awaitingInput")})]})}),!n&&u.jsxs("div",{className:"h-48 bg-black/80 border border-slate-800 rounded-xl p-4 font-mono text-xs text-slate-400 overflow-y-auto custom-scrollbar shadow-inner",children:[u.jsxs("div",{className:"flex items-center gap-2 text-nexus-accent font-bold uppercase mb-2 border-b border-slate-800 pb-2 sticky top-0 bg-black/80 w-full",children:[u.jsx(zc,{size:12})," ",c("roller.executionLog")]}),R.map((H,ve)=>u.jsxs("div",{className:`py-0.5 ${H.startsWith("Winner:")?"text-green-400 font-bold":""} ${H.includes("Filtered")?"text-orange-400":""}`,children:[u.jsxs("span",{className:"opacity-30 mr-2",children:["[",ve,"]"]}),H]},ve))]})]})]})},q3=()=>{var M;const{currentWorld:n,worldManager:e,refreshWorld:s}=zi(),{toast:o}=as(),{s:r}=kn(),[c,d]=N.useState(null),[h,g]=N.useState(null),[m,v]=N.useState(null);if(!n)return null;const b=k=>{d(k.id),g(JSON.parse(JSON.stringify(k)))},S=()=>{const k={id:"",name:"New Narrative Rule",content:"",references:[],created:Date.now()};g(k),d("new")},E=()=>{if(!h||!h.name.trim()){o({title:r("rules.toast.validationError.title"),message:r("rules.toast.validationError.message"),type:"warning"});return}try{e.saveRule(n.id,h),s(),d(null),g(null),o({title:r("rules.toast.saved.title"),message:r("rules.toast.saved.message"),type:"success"})}catch{o({title:r("rules.toast.saveFailed.title"),message:r("rules.toast.saveFailed.message"),type:"error"})}},T=()=>{if(m)try{e.deleteRule(n.id,m),s(),c===m&&(d(null),g(null)),o({title:r("rules.toast.deleted.title"),message:r("rules.toast.deleted.message"),type:"info"})}catch{o({title:r("rules.toast.deleteFailed.title"),message:r("rules.toast.deleteFailed.message"),type:"error"})}finally{v(null)}},R=k=>{if(!h||k.length===0)return;const I=[...h.references];let j=h.content;k.forEach(J=>{const Z=n.tags[J],$=!!Z,ce=$?Z.label:J,V={id:J,label:ce,type:$?"tag":"item"};I.find(le=>le.id===J)||I.push(V),j+=` [${$?"Tag":"Entity"}: ${ce}]`}),g({...h,references:I,content:j})},_=k=>{h&&g({...h,references:h.references.filter(I=>I.id!==k)})};return u.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col animate-fade-in",children:[u.jsxs("header",{className:"mb-6 flex justify-between items-end shrink-0",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl font-bold text-slate-100 flex items-center gap-3",children:[u.jsx(xC,{className:"text-nexus-accent"})," ",r("rules.title")]}),u.jsx("p",{className:"text-slate-400",children:r("rules.subtitle")})]}),u.jsx("div",{className:"flex gap-3",children:u.jsxs("div",{className:"text-xs text-slate-500 bg-nexus-900 border border-slate-700 px-3 py-1.5 rounded flex items-center gap-2",children:[u.jsx(jN,{size:14})," Descriptive Mode Active"]})})]}),u.jsxs("div",{className:"flex flex-1 gap-8 overflow-hidden min-h-0",children:[u.jsxs("div",{className:"w-80 bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden flex flex-col shadow-lg shrink-0",children:[u.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-nexus-900",children:[u.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:r("rules.listTitle")}),u.jsx("button",{onClick:S,className:"text-nexus-accent hover:text-white p-1 rounded hover:bg-slate-700",children:u.jsx(Ft,{size:18})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 custom-scrollbar",children:[n.rules.length===0&&u.jsx("div",{className:"text-center p-8 text-slate-500 text-sm italic",children:r("rules.none")}),n.rules.map(k=>{var I;return u.jsxs("div",{onClick:()=>b(k),className:`p-3 rounded-lg cursor-pointer border transition-all group relative ${c===k.id?"bg-nexus-accent/10 border-nexus-accent shadow-md":"bg-nexus-900 border-slate-700 hover:border-slate-500"}`,children:[u.jsx("div",{className:"flex justify-between items-start mb-1 pr-6",children:u.jsx("h4",{className:`font-bold text-sm truncate w-full ${c===k.id?"text-nexus-accent":"text-slate-300"}`,children:k.name})}),u.jsxs("span",{className:"text-xs bg-slate-800 px-1.5 py-0.5 rounded text-slate-500 font-mono",children:[((I=k.references)==null?void 0:I.length)||0," Links"]}),u.jsx("button",{onClick:j=>{j.stopPropagation(),v(k.id)},className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 text-slate-500 hover:text-red-400 p-1 rounded hover:bg-black/20 transition-all",children:u.jsx(Qt,{size:14})})]},k.id)})]})]}),u.jsx("div",{className:"flex-1 bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden shadow-lg flex flex-col",children:h?u.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[u.jsxs("div",{className:"p-6 border-b border-slate-700 bg-nexus-900 shrink-0",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:r("rules.field.ruleName")}),u.jsx(nt,{value:h.name,onChange:k=>g({...h,name:k.target.value}),placeholder:r("rules.placeholder.ruleName"),className:"text-2xl font-bold"})]}),u.jsxs("div",{className:"flex-1 p-6 flex flex-col gap-4 overflow-hidden",children:[u.jsxs("div",{className:"flex flex-wrap gap-2 items-center min-h-[42px]",children:[(M=h.references)==null?void 0:M.map((k,I)=>u.jsxs("div",{className:"bg-nexus-950 border border-slate-700 rounded-full px-3 py-1 text-xs flex items-center gap-2 group hover:border-nexus-accent transition-colors",children:[u.jsx(mu,{size:12,className:k.type==="tag"?"text-blue-400":"text-orange-400"}),u.jsx("span",{className:"text-slate-200 font-bold",children:k.label}),u.jsx("button",{onClick:()=>_(k.id),className:"text-slate-600 hover:text-red-400 ml-1",children:u.jsx(ei,{size:12})})]},I)),u.jsx(Or,{value:[],onChange:R,limitToPool:void 0,single:!1,trigger:u.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 rounded-full border border-dashed border-nexus-accent/50 text-nexus-accent text-xs font-bold hover:bg-nexus-accent/10 transition-colors",children:[u.jsx(Ft,{size:12})," ",r("rules.button.addReference")]})})]}),u.jsx("div",{className:"flex-1 relative",children:u.jsx(cn,{value:h.content,onChange:k=>g({...h,content:k.target.value}),className:"h-full w-full font-mono text-sm leading-relaxed p-4 resize-none",placeholder:r("rules.placeholder.content")})})]}),u.jsxs("div",{className:"p-4 border-t border-slate-700 bg-nexus-900 flex justify-end gap-3 shrink-0",children:[u.jsx(Se,{variant:"ghost",onClick:()=>{d(null),g(null)},children:"Cancel"}),u.jsx(Se,{onClick:E,icon:u.jsx($n,{size:18}),children:"Save Rule"})]})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 opacity-50",children:[u.jsx(ss,{size:64,className:"mb-4"}),u.jsx("p",{children:r("rules.empty.selectHint")})]})})]}),u.jsx(Zt,{isOpen:!!m,onClose:()=>v(null),title:u.jsxs("span",{className:"text-red-400 flex items-center gap-2",children:[u.jsx(Zs,{size:20})," ",r("rules.modal.deleteTitle")]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-slate-300",children:r("rules.modal.deleteQuestion")}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>v(null),children:"Cancel"}),u.jsx(Se,{variant:"destructive",onClick:T,children:"Delete"})]})]})})]})},V3=()=>{const{currentWorld:n,worldManager:e,refreshWorld:s}=zi(),{toast:o}=as(),{settings:r}=ba(),{s:c}=kn(),[d,h]=N.useState(!1),[g,m]=N.useState(""),[v,b]=N.useState([]),[S,E]=N.useState(!1),[T,R]=N.useState(!1),[_,M]=N.useState(!1);if(!n)return null;N.useEffect(()=>{m(n.config.loreContext||""),b(n.config.contextFields?[...n.config.contextFields]:[]),E(n.config.useGlobalPromptPrefix||!1),R(!1)},[n.id]);const k=async()=>{M(!0);try{const V={...n.config,loreContext:g,contextFields:v,useGlobalPromptPrefix:S};await e.updateWorldConfig(n.id,n.name,V),s(),R(!1),o({title:c("dashboard.toast.configSaved.title"),message:r.defaultLanguage==="Chinese"?"":"World context updated successfully.",type:"success"})}catch(V){console.error(V),o({title:c("dashboard.toast.saveFailed.title"),message:r.defaultLanguage==="Chinese"?"":"Could not persist changes to database.",type:"error"})}finally{M(!1)}},I=()=>{b([...v,{id:crypto.randomUUID(),key:"",value:""}]),R(!0)},j=V=>{b(v.filter(le=>le.id!==V)),R(!0)},J=(V,le)=>{b(v.map(ie=>ie.id===V?{...ie,key:le}:ie)),R(!0)},Z=(V,le)=>{b(v.map(ie=>ie.id===V?{...ie,value:le}:ie)),R(!0)},$=V=>{m(V),R(!0)},ce=()=>{E(!S),R(!0)};return u.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-12 animate-fade-in",children:[u.jsxs("header",{className:"border-b border-slate-700 pb-6 flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl font-bold text-slate-100 flex items-center gap-3",children:[u.jsx(ss,{className:"text-nexus-accent"}),c("worldSettings.title")]}),u.jsx("p",{className:"text-slate-400 mt-2",children:c("worldSettings.subtitle")})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Se,{variant:"secondary",onClick:()=>h(!0),icon:u.jsx(aC,{size:18}),children:c("worldSettings.button.guide")}),u.jsx(Se,{onClick:k,disabled:!T||_,icon:u.jsx($n,{size:18}),children:c(_?"worldSettings.saving":T?"worldSettings.saveChanges":"worldSettings.saved")})]})]}),u.jsx("section",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-nexus-accent border border-slate-700",children:u.jsx(pC,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:c("worldSettings.section.systemOverrides")}),u.jsx("p",{className:"text-xs text-slate-400",children:c("worldSettings.section.systemOverrides.desc")})]}),u.jsxs("button",{onClick:ce,className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-sm font-bold ${S?"bg-green-500/10 border-green-500 text-green-400":"bg-slate-800 border-slate-600 text-slate-500"}`,children:[S?u.jsx(qc,{size:20}):u.jsx(Hc,{size:20}),c(S?"worldSettings.prefixActive":"worldSettings.prefixDisabled")]})]}),S&&u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded p-4 text-xs font-mono text-slate-400",children:[u.jsx("strong",{className:"block text-slate-500 mb-2 uppercase",children:c("worldSettings.activeGlobalPrefix")}),r.globalPromptPrefix||u.jsx("span",{className:"italic opacity-50",children:c("worldSettings.noGlobalPrefix")})]})]})]})}),u.jsx("section",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-slate-400",children:u.jsx(ss,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:c("worldSettings.section.generalSetting")}),u.jsx("p",{className:"text-xs text-slate-400 mb-4",children:c("worldSettings.section.generalSetting.desc")}),u.jsx(cn,{value:g,onChange:V=>$(V.target.value),className:"h-48 font-medium leading-relaxed",placeholder:c("worldSettings.placeholder.sourceOfTruth")})]})]})}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white",children:c("worldSettings.section.customFields")}),u.jsx("p",{className:"text-xs text-slate-400",children:c("worldSettings.section.customFields.desc")})]}),u.jsx(Se,{variant:"secondary",onClick:I,icon:u.jsx(Ft,{size:14}),className:"h-8 text-xs",children:c("worldSettings.button.addField")})]}),u.jsxs("div",{className:"space-y-4",children:[v.length===0&&u.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-700 rounded-xl bg-nexus-800/50",children:[u.jsx("p",{className:"text-slate-500 font-bold mb-1",children:c("worldSettings.empty.noCustomFields")}),u.jsxs("button",{onClick:I,className:"text-nexus-accent text-xs hover:underline flex items-center justify-center gap-1 w-full",children:[u.jsx(Ft,{size:12})," ",c("worldSettings.empty.addOne")]})]}),v.map(V=>u.jsxs("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-4 shadow-lg animate-fade-in group hover:border-nexus-accent/50 transition-colors",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsx("div",{className:"w-1/2",children:u.jsx(nt,{value:V.key,onChange:le=>J(V.id,le.target.value),className:"text-sm font-bold uppercase tracking-wider text-nexus-accent placeholder-slate-600 border-b border-transparent focus:border-nexus-accent w-full py-1 transition-colors",placeholder:c("worldSettings.placeholder.fieldName")})}),u.jsx("button",{onClick:()=>j(V.id),className:"text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all p-1.5 hover:bg-red-900/10 rounded",title:r.defaultLanguage==="Chinese"?"":"Remove Field",children:u.jsx(Qt,{size:16})})]}),u.jsx(cn,{value:V.value,onChange:le=>Z(V.id,le.target.value),className:"h-24 resize-y",placeholder:c("worldSettings.placeholder.description")})]},V.id))]})]}),u.jsx(Zt,{isOpen:d,onClose:()=>h(!1),title:u.jsxs(u.Fragment,{children:[u.jsx(oA,{size:18,className:"text-yellow-400"})," ",c("worldSettings.guide.title")]}),maxWidth:"max-w-2xl",footer:u.jsx(Se,{onClick:()=>h(!1),children:c("worldSettings.guide.close")}),children:u.jsxs("div",{className:"space-y-6 text-sm text-slate-300",children:[u.jsxs("p",{children:["The text you provide here is injected directly into the ",u.jsx("strong",{children:"System Prompt"})," of the AI whenever you use the AI Forge. Clearer context leads to better, more consistent generations."]}),u.jsxs("div",{className:"bg-nexus-900 p-4 rounded border border-slate-700",children:[u.jsx("h4",{className:"font-bold text-white mb-2",children:c("worldSettings.guide.howItWorks")}),u.jsx("p",{className:"mb-2",children:c("worldSettings.guide.whenRequest")}),u.jsxs("ol",{className:"list-decimal pl-5 space-y-1 text-slate-400 font-mono text-xs",children:[u.jsx("li",{children:r.defaultLanguage==="Chinese"?"":"World Name & Genre"}),u.jsx("li",{children:r.defaultLanguage==="Chinese"?"":"General Setting (Your main description)"}),u.jsx("li",{children:r.defaultLanguage==="Chinese"?"":"Custom Fields (Labeled sections)"}),u.jsx("li",{children:r.defaultLanguage==="Chinese"?"":"Pool List (What categories exist)"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-white mb-3",children:c("worldSettings.guide.tips")}),u.jsxs("ul",{className:"space-y-4",children:[u.jsxs("li",{className:"flex gap-3",children:[u.jsx("div",{className:"text-nexus-accent font-bold min-w-[100px] text-xs uppercase tracking-wider bg-nexus-950 p-2 rounded text-center h-fit border border-slate-800",children:c("worldSettings.guide.magicSystem")}),u.jsx("div",{children:c("worldSettings.guide.magicDesc")})]}),u.jsxs("li",{className:"flex gap-3",children:[u.jsx("div",{className:"text-nexus-accent font-bold min-w-[100px] text-xs uppercase tracking-wider bg-nexus-950 p-2 rounded text-center h-fit border border-slate-800",children:c("worldSettings.guide.technology")}),u.jsx("div",{children:c("worldSettings.guide.techDesc")})]}),u.jsxs("li",{className:"flex gap-3",children:[u.jsx("div",{className:"text-nexus-accent font-bold min-w-[100px] text-xs uppercase tracking-wider bg-nexus-950 p-2 rounded text-center h-fit border border-slate-800",children:c("worldSettings.guide.cosmology")}),u.jsx("div",{children:c("worldSettings.guide.cosmoDesc")})]})]})]})]})})]})},J3=()=>{const{appSettings:n,updateAppSettings:e}=zi(),{settings:s,updateSettings:o,isConfigured:r}=Lu(),c=N.useContext(tm),{toast:d}=as(),{s:h}=kn(),g=N.useRef(null),[m,v]=N.useState(!1),[b,S]=N.useState(s.apiKey||""),[E,T]=N.useState(s.provider),[R,_]=N.useState(s.model),[M,k]=N.useState(!1),[I,j]=N.useState({}),[J,Z]=N.useState(null),[$,ce]=N.useState({short:"",medium:"",long:""});if(!c)return null;const{globalLogs:V,toggleGlobalLog:le}=c;N.useEffect(()=>{n.lengthDefinitions?ce(n.lengthDefinitions):ce({short:"Maximum 30 words. Concise.",medium:"Approx 60-80 words. Standard detail.",long:"Minimum 120 words. Rich detail and nuance."})},[n.lengthDefinitions]),N.useEffect(()=>{S(s.apiKey||""),T(s.provider),_(s.model)},[s]);const ie=F=>{e({...n,defaultLanguage:F}),d({title:h("home.toast.rolesUpdated.title"),message:F==="Chinese"?"":`Output set to ${F}.`,type:"success"})},pe=F=>{e({...n,defaultOutputLength:F}),d({title:h("dashboard.toast.configSaved.title"),message:n.defaultLanguage==="Chinese"?` ${F==="Short"?"":F==="Medium"?"":""}`:`Default length set to ${F}.`,type:"success"})},H=F=>{e({...n,uiScale:F}),d({title:h("home.toast.interfaceScaled.title"),message:h("home.toast.interfaceScaled.message",{scale:F}),type:"success"})},ve=()=>{const F=!n.enableImageGen;e({...n,enableImageGen:F}),d({title:h(F?"appSettings.state.enabled":"appSettings.state.disabled"),message:F?n.defaultLanguage==="Chinese"?"":"Image Generation is now active.":n.defaultLanguage==="Chinese"?"":"Image Generation is now inactive.",type:F?"success":"info"})},Ce=()=>{e({...n,lengthDefinitions:$}),d({title:h("dashboard.toast.configSaved.title"),message:n.defaultLanguage==="Chinese"?"":"Length definitions updated.",type:"success"})},U=F=>{T(F),_(Sp(F))},ne=()=>{o({...s,provider:E,model:R,apiKey:b}),d({title:h("home.toast.aiConfigSaved.title"),message:h("home.toast.aiConfigSaved.message",{provider:ji[E].name,model:R}),type:"success"})},me=()=>{const F={globalPromptPrefix:n.globalPromptPrefix,tones:n.tones},ge=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),_e=URL.createObjectURL(ge),X=document.createElement("a");X.href=_e,X.download=`nexus_style_config_${Date.now()}.json`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(_e),d({title:h("home.toast.styleExported.title"),message:n.defaultLanguage==="Chinese"?"":"Tone settings saved to file.",type:"success"})},Ee=F=>{var X;const ge=(X=F.target.files)==null?void 0:X[0];if(!ge)return;const _e=new FileReader;_e.onload=O=>{var W;try{const ae=(W=O.target)==null?void 0:W.result,te=JSON.parse(ae);if(Array.isArray(te.tones))e({...n,globalPromptPrefix:te.globalPromptPrefix||n.globalPromptPrefix,tones:te.tones}),d({title:h("home.toast.styleImported.title"),message:n.defaultLanguage==="Chinese"?` ${te.tones.length} `:`Loaded ${te.tones.length} tones and prefix.`,type:"success"});else throw new Error("Invalid format")}catch{d({title:h("home.toast.importFailed.title"),message:h("home.toast.invalidConfig.message"),type:"error"})}},_e.readAsText(ge),F.target.value=""},Ae=F=>{j(F?{...F}:{name:"",description:"",instruction:""}),k(!0)},D=()=>{if(!I.name||!I.instruction){d({title:h("dashboard.validationError.title"),message:n.defaultLanguage==="Chinese"?"":"Name and Instruction are required.",type:"warning"});return}const F=[...n.tones],ge={...I,i18n:void 0};if(ge.id){const _e=F.findIndex(X=>X.id===ge.id);_e!==-1&&(F[_e]=ge)}else F.push({...ge,id:crypto.randomUUID(),description:ge.description||""});e({...n,tones:F}),k(!1),d({title:n.defaultLanguage==="Chinese"?"":"Role Saved",message:n.defaultLanguage==="Chinese"?`${ge.name}`:`Narrative role '${ge.name}' updated.`,type:"success"})},q=()=>{if(!J)return;const F=n.tones.filter(ge=>ge.id!==J);e({...n,tones:F}),Z(null),d({title:n.defaultLanguage==="Chinese"?"":"Role Deleted",message:n.defaultLanguage==="Chinese"?"":"Narrative role removed.",type:"info"})},oe=bp[E]||[],fe=ji[E];return u.jsxs("div",{className:"max-w-4xl mx-auto py-10 pb-20 animate-fade-in",children:[u.jsxs("header",{className:"mb-10 border-b border-slate-700 pb-6 flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-3xl font-bold text-slate-100 flex items-center gap-3",children:[u.jsx(Qs,{className:"text-nexus-accent"}),h("appSettings.title")]}),u.jsx("p",{className:"text-slate-400",children:h("appSettings.subtitle")})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"file",ref:g,onChange:Ee,accept:".json",className:"hidden"}),u.jsx(Se,{variant:"secondary",onClick:()=>{var F;return(F=g.current)==null?void 0:F.click()},icon:u.jsx(_h,{size:16}),children:h("appSettings.importStyle")}),u.jsx(Se,{variant:"secondary",onClick:me,icon:u.jsx(Bc,{size:16}),children:h("appSettings.exportStyle")})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-nexus-accent border border-slate-700",children:u.jsx(qr,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-6",children:h("appSettings.section.localization")}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3",children:h("appSettings.label.targetLanguage")}),u.jsx("div",{className:"flex flex-col gap-2",children:["English","Chinese"].map(F=>u.jsxs("button",{onClick:()=>ie(F),className:`flex items-center justify-between px-4 py-3 rounded-lg border transition-all text-sm font-bold ${n.defaultLanguage===F?"bg-nexus-accent/20 border-nexus-accent text-white shadow-inner":"bg-nexus-900 border-slate-700 text-slate-400 hover:border-slate-500 hover:text-white"}`,children:[F==="Chinese"?"Chinese ()":F,n.defaultLanguage===F&&u.jsx(Li,{size:16,className:"text-nexus-accent"})]},F))}),u.jsx("p",{className:"text-xs text-slate-500 mt-2 px-1",children:h("appSettings.hint.languageSwitch")})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[u.jsx(Eh,{size:12})," ",h("appSettings.label.interfaceScale")]}),u.jsx("div",{className:"flex flex-col gap-2 bg-nexus-900 p-2 rounded-lg border border-slate-700",children:["Small","Medium","Large"].map(F=>{const ge=(n.uiScale||"Small")===F;return u.jsxs("button",{onClick:()=>H(F),className:`flex items-center justify-between px-3 py-2 rounded text-xs font-bold transition-all ${ge?"bg-nexus-accent text-white shadow":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[u.jsx("span",{className:F==="Medium"?"text-base":F==="Large"?"text-lg":"text-sm",children:F}),ge&&u.jsx(Li,{size:14})]},F)})}),u.jsx("p",{className:"text-xs text-slate-500 mt-2 px-1",children:h("appSettings.hint.scale")})]})]})]})]})}),u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-yellow-400 border border-slate-700",children:u.jsx(iC,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-2",children:h("appSettings.aiProvider.title")}),u.jsx("p",{className:"text-sm text-slate-400",children:h("appSettings.aiProvider.subtitle")})]}),u.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${r?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:[r?u.jsx(oC,{size:14}):u.jsx(rC,{size:14}),h(r?"appSettings.status.connected":"appSettings.status.notConfigured")]})]}),u.jsxs("div",{className:"space-y-5",children:[u.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.keys(ji).map(F=>{const ge=ji[F],_e=E===F;return u.jsxs("button",{onClick:()=>U(F),className:`flex flex-col items-start p-4 rounded-lg border transition-all text-left ${_e?"bg-nexus-accent/10 border-nexus-accent shadow-lg":"bg-nexus-900 border-slate-700 hover:border-slate-500"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:`font-bold ${_e?"text-nexus-accent":"text-slate-300"}`,children:ge.name}),_e&&u.jsx(Li,{size:14,className:"text-nexus-accent"})]}),u.jsx("span",{className:"text-xs text-slate-500",children:ge.description})]},F)})}),u.jsxs("div",{className:"bg-nexus-900 p-4 rounded-lg border border-slate-700",children:[u.jsxs("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-3 tracking-wide flex items-center gap-2",children:[u.jsx(xp,{size:12})," ",h("appSettings.label.selectModel")]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:oe.map(F=>{var _e;const ge=R===F.id;return u.jsxs("button",{onClick:()=>_(F.id),className:`flex items-center justify-between p-3 rounded-lg border transition-all ${ge?"bg-nexus-accent/10 border-nexus-accent":"bg-nexus-950 border-slate-700 hover:border-slate-500"}`,children:[u.jsxs("div",{className:"flex flex-col items-start flex-1 min-w-0",children:[u.jsx("span",{className:`font-bold text-sm ${ge?"text-nexus-accent":"text-slate-300"}`,children:F.name}),u.jsx("span",{className:"text-xs text-slate-500",children:F.description})]}),u.jsxs("div",{className:"flex items-center gap-1.5 shrink-0 ml-2 flex-wrap justify-end",children:[u.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-bold uppercase ${GC[F.tier]}`,children:F.tier}),(_e=F.badges)==null?void 0:_e.map(X=>{const O=OC[X];return O?u.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border font-bold uppercase ${O.className}`,title:O.label,children:O.label},X):null}),ge&&u.jsx(Li,{size:14,className:"text-nexus-accent shrink-0"})]})]},F.id)})})]}),u.jsxs("div",{className:"flex items-center justify-between bg-nexus-900 p-4 rounded-lg border border-slate-700",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:h("appSettings.label.useCustomKey")}),u.jsx("p",{className:"text-xs text-slate-500",children:s.useCustomKey?h("appSettings.hint.usingPersonalKey"):h("appSettings.hint.usingEnv",{key:fe.envKey})})]}),u.jsxs("button",{onClick:()=>{const F={...s,useCustomKey:!s.useCustomKey};o(F),d({title:"API Mode Changed",message:F.useCustomKey?"Now using custom API key":"Now using environment variable",type:"info"})},className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-sm font-bold ${s.useCustomKey?"bg-yellow-500/10 border-yellow-500 text-yellow-400":"bg-slate-800 border-slate-600 text-slate-500"}`,children:[s.useCustomKey?u.jsx(qc,{size:20}):u.jsx(Hc,{size:20}),s.useCustomKey?h("appSettings.toggle.customKey"):h("appSettings.toggle.envVar")]})]}),s.useCustomKey&&u.jsxs("div",{className:"bg-nexus-900 p-4 rounded-lg border border-slate-700 animate-in slide-in-from-top-2",children:[u.jsxs("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-2 tracking-wide flex items-center gap-2",children:[u.jsx(hC,{size:12})," ",fe.name," API Key"]}),u.jsx("div",{className:"flex gap-2",children:u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(nt,{type:m?"text":"password",value:b,onChange:F=>S(F.target.value),placeholder:E==="openai"?"sk-...":"AIza...",className:"text-sm font-mono pr-12"}),u.jsx("button",{onClick:()=>v(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300",children:m?u.jsx(lC,{size:16}):u.jsx(cC,{size:16})})]})}),u.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[E==="gemini"&&u.jsxs(u.Fragment,{children:["Get your API key from ",u.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-nexus-accent hover:underline",children:"Google AI Studio"}),"."]}),E==="openai"&&u.jsxs(u.Fragment,{children:["Get your API key from ",u.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-nexus-accent hover:underline",children:"OpenAI Dashboard"}),"."]})," ",h("appSettings.hint.keyStoredLocally")]})]}),u.jsx("div",{className:"flex justify-end pt-2",children:u.jsx(Se,{onClick:ne,icon:u.jsx($n,{size:14}),children:h("appSettings.button.saveAIConfig")})})]})]})]})}),u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-blue-400 border border-slate-700",children:u.jsx(FA,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-2",children:"Output Length Definitions"}),u.jsx("p",{className:"text-sm text-slate-400",children:"Define instruction sets for short, medium, and long generation."})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Default Setting"}),u.jsx("div",{className:"inline-flex bg-nexus-900 p-1 rounded-lg border border-slate-700",children:["Short","Medium","Long"].map(F=>u.jsx("button",{onClick:()=>pe(F),className:`px-3 py-1 rounded text-xs font-bold transition-all ${n.defaultOutputLength===F?"bg-nexus-accent text-white":"text-slate-500 hover:text-slate-300"}`,children:F},F))})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex justify-between text-xs text-slate-500 uppercase font-bold mb-1.5",children:[u.jsx("span",{children:"Short (Concise)"}),u.jsx("span",{className:"text-slate-600",children:'e.g. "Max 30 words"'})]}),u.jsx(cn,{value:$.short,onChange:F=>ce(ge=>({...ge,short:F.target.value})),className:"h-16",placeholder:"Instruction for Short output..."})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex justify-between text-xs text-slate-500 uppercase font-bold mb-1.5",children:[u.jsx("span",{children:"Medium (Standard)"}),u.jsx("span",{className:"text-slate-600",children:'e.g. "Approx 100 words"'})]}),u.jsx(cn,{value:$.medium,onChange:F=>ce(ge=>({...ge,medium:F.target.value})),className:"h-16",placeholder:"Instruction for Medium output..."})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex justify-between text-xs text-slate-500 uppercase font-bold mb-1.5",children:[u.jsx("span",{children:"Long (Detailed)"}),u.jsx("span",{className:"text-slate-600",children:'e.g. "Min 500 words"'})]}),u.jsx(cn,{value:$.long,onChange:F=>ce(ge=>({...ge,long:F.target.value})),className:"h-20",placeholder:"Instruction for Long output..."})]}),u.jsx("div",{className:"flex justify-end pt-2",children:u.jsx(Se,{onClick:Ce,icon:u.jsx($n,{size:16}),children:"Save Definitions"})})]})]})]})}),u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-purple-400 border border-slate-700",children:u.jsx($r,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-1",children:"Narrative Roles"}),u.jsx("p",{className:"text-sm text-slate-400",children:"Define the personality and writing style of the AI."})]}),u.jsx(Se,{variant:"secondary",onClick:()=>Ae(),icon:u.jsx(Ft,{size:14}),children:"New Role"})]}),u.jsx("div",{className:"space-y-3",children:n.tones.map(F=>u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded-lg p-4 flex justify-between items-center group hover:border-nexus-accent/50 transition-colors",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-bold text-slate-200 text-sm flex items-center gap-2",children:[F.name,F.i18n&&u.jsx("span",{className:"text-xs bg-slate-800 text-slate-500 px-1 rounded uppercase tracking-wider",children:"Multilingual"})]}),u.jsx("div",{className:"text-xs text-slate-500 mb-1",children:F.description}),u.jsxs("div",{className:"text-xs text-slate-600 font-mono italic truncate max-w-md border-l-2 border-slate-700 pl-2 opacity-70",children:['"',F.instruction,'"']})]}),u.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>Ae(F),className:"p-2 bg-nexus-800 rounded border border-slate-700 text-slate-400 hover:text-white hover:border-slate-500 transition-all",title:"Edit Role",children:u.jsx(Br,{size:14})}),u.jsx("button",{onClick:()=>Z(F.id),className:"p-2 bg-nexus-800 rounded border border-slate-700 text-slate-400 hover:text-red-400 hover:border-red-500/50 transition-all",title:"Delete Role",children:u.jsx(Qt,{size:14})})]})]},F.id))})]})]})}),u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-orange-400 border border-slate-700",children:u.jsx(uC,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-1",children:"Experimental Features"}),u.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Enable or disable features that are currently in testing."}),u.jsxs("div",{className:"flex items-center justify-between bg-nexus-900 p-4 rounded-lg border border-slate-700",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:"Image Generation"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Allows generating visual previews for items using AI."})]}),u.jsxs("button",{onClick:ve,className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-sm font-bold ${n.enableImageGen?"bg-green-500/10 border-green-500 text-green-400":"bg-slate-800 border-slate-600 text-slate-500"}`,children:[n.enableImageGen?u.jsx(qc,{size:20}):u.jsx(Hc,{size:20}),n.enableImageGen?"Enabled":"Disabled"]})]})]})]})}),u.jsx("div",{className:"bg-nexus-800 border border-slate-700 rounded-xl p-6 shadow-lg",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"p-3 bg-nexus-900 rounded-lg text-slate-400 border border-slate-700",children:u.jsx(yC,{size:24})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-1",children:"System History"}),u.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Full generation history. Logs are cleared when refreshing the application."}),u.jsx(xE,{logs:V,toggleLog:le})]})]})})]}),u.jsx(Zt,{isOpen:M,onClose:()=>k(!1),title:u.jsxs(u.Fragment,{children:[u.jsx($r,{size:18,className:"text-purple-400"})," ",I.id?"Edit Narrative Role":"Create New Role"]}),footer:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>k(!1),children:"Cancel"}),u.jsx(Se,{onClick:D,children:"Save Role"})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(nt,{label:"Role Name",value:I.name||"",onChange:F=>j({...I,name:F.target.value}),placeholder:"e.g. The Crypt Keeper"}),u.jsx(nt,{label:"Short Description",value:I.description||"",onChange:F=>j({...I,description:F.target.value}),placeholder:"e.g. Spooky & Ancient"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:"System Prompt Instruction"}),u.jsx(cn,{value:I.instruction||"",onChange:F=>j({...I,instruction:F.target.value}),className:"h-32 font-mono text-xs leading-relaxed",placeholder:"Define who the AI is. E.g., 'You are an ancient scholar writing in a dusty tome...'"}),u.jsxs("p",{className:"text-xs text-slate-500 mt-2 bg-nexus-900 p-2 rounded border border-slate-800",children:[u.jsx("strong",{className:"text-nexus-accent",children:"Tip:"})," Custom edits apply universally. To support multilingual switching for this role, please use the ",u.jsx("strong",{children:"Import Config"})," feature with an ",u.jsx("code",{children:"i18n"})," block."]})]})]})}),u.jsx(Zt,{isOpen:!!J,onClose:()=>Z(null),title:u.jsxs("span",{className:"text-red-400 flex items-center gap-2",children:[u.jsx(Zs,{size:20})," Confirm Deletion"]}),footer:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>Z(null),children:"Cancel"}),u.jsx(Se,{variant:"destructive",onClick:q,children:"Delete Role"})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-slate-300",children:"Are you sure you want to delete this narrative role?"}),u.jsx("div",{className:"bg-red-900/10 border border-red-500/20 p-3 rounded text-xs text-red-300",children:"This action cannot be undone. Any generations using this role will revert to the default."})]})})]})},W3=()=>{const{currentWorld:n,worldManager:e,refreshWorld:s}=zi(),{toast:o}=as(),{s:r}=kn(),[c,d]=N.useState(""),[h,g]=N.useState("All"),[m,v]=N.useState(null),[b,S]=N.useState(null),[E,T]=N.useState(!1),[R,_]=N.useState(null),[M,k]=N.useState(""),[I,j]=N.useState(""),[J,Z]=N.useState(null),[$,ce]=N.useState(!1),[V,le]=N.useState(!1),[ie,pe]=N.useState(""),[H,ve]=N.useState(""),[Ce,U]=N.useState(!1),[ne,me]=N.useState(new Set),[Ee,Ae]=N.useState(!1);if(!n)return null;N.useEffect(()=>{(async()=>{if(h==="All"){me(new Set);return}Ae(!0);try{const ae=await De.getEntitiesForPool(n.id,h),te=new Set;ae.forEach(ze=>{ze.tags.forEach(rt=>te.add(rt))});const Te=n.pools[h];Te&&Te.suggestedTags&&Te.suggestedTags.forEach(ze=>te.add(ze)),me(te)}catch(ae){console.error("Failed to load pool tags",ae)}finally{Ae(!1)}})()},[h,n.id]);const D=N.useMemo(()=>{const W=Object.values(n.pools);return[{id:"All",label:"All Tags",icon:qr},...W.map(ae=>({id:ae.name,label:ae.name,icon:gu,color:ae.color}))]},[n]),q=N.useMemo(()=>{let W=Object.values(n.tags);return h!=="All"&&(W=W.filter(ae=>ne.has(ae.id))),c.trim()&&(W=W.filter(ae=>ae.label.toLowerCase().includes(c.toLowerCase())||ae.id.includes(c.toLowerCase()))),W.sort((ae,te)=>ae.label.localeCompare(te.label))},[n,c,h,ne]),oe=async()=>{if(!ie.trim()){o({title:r("tagManager.toast.validationError.title"),message:r("tagManager.toast.validationError.message"),type:"warning"});return}U(!0);try{await e.updateTagDefinition(n.id,ie,H),s(),le(!1),pe(""),ve(""),o({title:r("tagManager.toast.tagCreated.title"),message:r("tagManager.toast.tagCreated.message",{label:ie}),type:"success"})}catch{o({title:r("tagManager.toast.persistFailed.title"),message:r("tagManager.toast.persistFailed.message"),type:"error"})}finally{U(!1)}},fe=async W=>{T(!0);try{const ae=await De.getTagUsageCount(n.id,W);S(ae>0?{"Global Usage":ae}:null)}catch{o({title:r("tagManager.toast.scanFailed.title"),message:r("tagManager.toast.scanFailed.message"),type:"error"})}finally{T(!1)}},F=W=>{v(W),S(null),fe(W)},ge=async()=>{if(m)try{const W={...n.tags};delete W[m],await e.updateWorldTags(n.id,W),o({title:r("tagManager.toast.tagDeleted.title"),message:r("tagManager.toast.tagDeleted.message"),type:"info"}),v(null),s()}catch{o({title:r("tagManager.toast.deleteFailed.title"),message:r("tagManager.toast.deleteFailed.message"),type:"error"})}},_e=W=>{const ae=n.tags[W];_(W),k((ae==null?void 0:ae.label)||W),j((ae==null?void 0:ae.description)||"")},X=async()=>{if(!R)return;const W=Tc(M),ae=R;if(W&&W!==ae){Z({oldId:ae,newId:W,newLabel:M});return}try{await e.updateTagDefinition(n.id,M,I),o({title:r("tagManager.toast.saved.title"),message:r("tagManager.toast.saved.message"),type:"success"}),_(null),s()}catch{o({title:r("tagManager.toast.saveFailed.title"),message:r("tagManager.toast.saveFailed.message"),type:"error"})}},O=async()=>{if(J){ce(!0);try{const W=await e.renameTag(n.id,J.oldId,J.newLabel);o({title:r("tagManager.toast.migrationComplete.title"),message:r("tagManager.toast.migrationComplete.message",{count:W,label:J.newLabel}),type:"success"}),Z(null),_(null),s()}catch(W){console.error("Migration failed",W),o({title:r("tagManager.toast.migrationFailed.title"),message:r("tagManager.toast.migrationFailed.message"),type:"error"})}finally{ce(!1)}}};return u.jsxs("div",{className:"h-[calc(100vh-6rem)] animate-fade-in flex flex-col",children:[u.jsx(yE,{sources:D,selectedSource:h,onSourceSelect:g,searchQuery:c,onSearchChange:d,searchPlaceholder:r("tagManager.searchPlaceholder"),className:"flex-1",actions:u.jsx(Se,{onClick:()=>le(!0),icon:u.jsx(Ft,{size:16}),children:r("tagManager.newTag")}),children:Ee?u.jsx("div",{className:"flex justify-center items-center h-full",children:u.jsx(_c,{className:"animate-spin text-nexus-accent",size:32})}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 pb-12",children:[q.map(W=>R===W.id?u.jsxs("div",{className:"bg-nexus-950 border-2 border-nexus-accent p-4 rounded-xl shadow-2xl relative",children:[u.jsxs("h3",{className:"text-xs font-bold text-nexus-accent uppercase mb-4 flex items-center gap-2",children:[u.jsx($c,{size:12})," Editing '",W.id,"'"]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(nt,{label:r("tagManager.field.label"),value:M,onChange:te=>k(te.target.value),autoFocus:!0}),u.jsx(cn,{label:r("tagManager.field.description"),value:I,onChange:te=>j(te.target.value),className:"h-20 text-xs"}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-slate-800",children:[u.jsx("button",{onClick:()=>_(null),className:"px-3 py-1.5 rounded text-xs text-slate-400 hover:bg-white/5",children:r("tagManager.button.cancel")}),u.jsx(Se,{onClick:X,className:"h-8 text-xs",icon:u.jsx($n,{size:12}),children:r("tagManager.button.save")})]})]})]},W.id):u.jsxs("div",{className:"group bg-nexus-800 border border-slate-700 p-4 rounded-xl flex justify-between items-start hover:border-nexus-accent/50 hover:shadow-lg transition-all h-full",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-bold text-white mb-1 flex items-center gap-2 truncate",children:u.jsx(cp,{tagName:W.label,color:W.color||"#64748b",className:"pointer-events-none"})}),W.description?u.jsxs("p",{className:"text-xs text-slate-400 italic line-clamp-2 mt-2 leading-relaxed",children:['"',W.description,'"']}):u.jsx("p",{className:"text-xs text-slate-600 italic mt-2",children:r("tagManager.noDescription")})]}),u.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[u.jsx("button",{onClick:()=>_e(W.id),className:"text-slate-600 hover:text-nexus-accent opacity-0 group-hover:opacity-100 transition-all p-1.5 rounded hover:bg-nexus-900",children:u.jsx($c,{size:14})}),u.jsx("button",{onClick:()=>F(W.id),className:"text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all p-1.5 hover:bg-red-900/10 rounded",children:u.jsx(Qt,{size:14})})]})]},W.id)),q.length===0&&u.jsx("div",{className:"col-span-full text-center py-16",children:u.jsx("div",{className:"text-slate-500 font-medium",children:r("tagManager.noMatches")})})]})}),u.jsx(Zt,{isOpen:!!J,onClose:()=>Z(null),title:u.jsxs("span",{className:"text-yellow-400 flex items-center gap-2",children:[u.jsx(Zs,{size:20})," ",r("tagManager.modal.confirmRenaming")]}),footer:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>Z(null),children:r("tagManager.button.cancel")}),u.jsx(Se,{onClick:O,disabled:$,children:r($?"tagManager.button.migrating":"tagManager.button.confirmRename")})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-slate-300",children:r("tagManager.modal.renameBody",{old:(J==null?void 0:J.oldId)||"",new:(J==null?void 0:J.newId)||""})}),u.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/30 p-3 rounded text-xs text-yellow-200",children:r("tagManager.modal.renameHint")})]})}),u.jsx(Zt,{isOpen:!!m,onClose:()=>v(null),title:u.jsxs("span",{className:"text-red-400 flex items-center gap-2",children:[u.jsx(Qt,{size:20})," ",r("tagManager.modal.deleteTag")]}),footer:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>v(null),children:r("tagManager.button.cancel")}),u.jsx(Se,{variant:"destructive",onClick:ge,children:t.common.delete})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-slate-300",children:r("tagManager.modal.deleteQuestion")}),E&&u.jsxs("div",{className:"text-xs text-slate-500 flex gap-2",children:[u.jsx(_c,{className:"animate-spin",size:12})," ",r("tagManager.modal.checkingUsage")]}),b&&u.jsxs("div",{className:"bg-red-900/10 border border-red-500/30 p-3 rounded text-xs text-red-300",children:[u.jsx("strong",{children:r("tagManager.modal.warningPrefix")})," ",r("tagManager.modal.usageWarning",{count:b["Global Usage"]})]})]})}),u.jsx(Zt,{isOpen:V,onClose:()=>le(!1),title:r("tagManager.modal.createNewTag"),footer:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>le(!1),children:r("tagManager.button.cancel")}),u.jsx(Se,{onClick:oe,disabled:Ce,children:Ce?u.jsx(_c,{className:"animate-spin"}):r("tagManager.button.createTag")})]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(nt,{label:r("tagManager.field.label"),value:ie,onChange:W=>pe(W.target.value),autoFocus:!0,placeholder:r("tagManager.placeholder.exampleLabel")}),u.jsx(cn,{label:r("tagManager.field.description"),value:H,onChange:W=>ve(W.target.value),placeholder:r("tagManager.placeholder.contextUsage")})]})})]})},zb=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#6366f1"],Y3=({data:n,size:e=100})=>{const s=N.useMemo(()=>n.reduce((c,d)=>c+d.weight,0),[n]);let o=0;const r=n.map((c,d)=>{if(s===0)return null;const h=c.weight/s*360,g=o,m=o+h;o=m;const v=50+50*Math.cos(Math.PI*g/180),b=50+50*Math.sin(Math.PI*g/180),S=50+50*Math.cos(Math.PI*m/180),E=50+50*Math.sin(Math.PI*m/180),T=h>180?1:0;return{path:`M 50 50 L ${v} ${b} A 50 50 0 ${T} 1 ${S} ${E} Z`,color:c.color||zb[d%zb.length],label:c.label,percentage:Math.round(c.weight/s*100)}}).filter(Boolean);return s===0?u.jsx("div",{className:"rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-xs text-slate-500",style:{width:e,height:e},children:"No Data"}):u.jsxs("div",{className:"relative group",style:{width:e,height:e},children:[u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:[r.map((c,d)=>u.jsx("path",{d:c.path,fill:c.color,stroke:"#0f172a",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer",children:u.jsx("title",{children:`${c.label}: ${c.percentage}%`})},d)),u.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"#0f172a"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["Total",u.jsx("br",{}),s]})})]})},K3=["System","Core"],X3=["General"],Q3=()=>{const{currentWorld:n,worldManager:e,refreshWorld:s}=zi(),{toast:o}=as(),{s:r}=kn(),[c,d]=N.useState([]),[h,g]=N.useState(null),[m,v]=N.useState(""),[b,S]=N.useState(""),[E,T]=N.useState(""),[R,_]=N.useState([]),[M,k]=N.useState([]),[I,j]=N.useState(null),[J,Z]=N.useState(null);if(!n)return null;N.useEffect(()=>{d(Object.values(n.componentRegistry))},[n,s]);const $=N.useMemo(()=>{const X=Object.keys(n.pools).map(O=>O.charAt(0).toUpperCase()+O.slice(1));return Array.from(new Set([...X3,...X])).sort()},[n.pools]),ce=N.useMemo(()=>{const X={};return c.forEach(O=>{const W=O.category||"General";X[W]||(X[W]=[]),X[W].push(O)}),X},[c]),V=X=>{var O;if(g(X),v(X.label),S(X.category||"General"),T(X.description||""),X.id==="rarity"){const W=((O=n.config.raritySettings)==null?void 0:O.levels)||[];k(W.map(ae=>({...ae,id:ae.id||crypto.randomUUID()}))),_([])}else{const W=X.fields.map(ae=>({_uiId:crypto.randomUUID(),key:ae.key,type:ae.type,defaultValue:ae.defaultValue,options:ae.options||[]}));_(W),k([])}},le=()=>{g(null),setTimeout(()=>{v(""),S("General"),T(""),_([]),k([])},0)},ie=async()=>{if(!m.trim()){o({title:r("componentManager.toast.validationError.title"),message:r("componentManager.toast.validationError.message"),type:"warning"});return}const X=(h==null?void 0:h.id)||m.trim().toLowerCase().replace(/\s+/g,"_");let O=[];if(X==="metadata"){o({title:r("componentManager.toast.accessDenied.title"),message:r("componentManager.toast.accessDenied.message"),type:"error"});return}if(X==="rarity"){const ae=M.map(ze=>ze.label),te=M.length>0?M[0].label:"Common";O=[{key:"value",type:"select",defaultValue:te,options:ae}];const Te={...n.config,raritySettings:{defaultLevel:te,levels:M.map(ze=>({id:ze.label.toLowerCase(),label:ze.label,weight:parseFloat(String(ze.weight))||1,color:ze.color}))}};await e.updateWorldConfig(n.id,n.name,Te)}else O=R.map(ae=>{var Te;let te=ae.defaultValue;if(ae.type==="number"){const ze=((Te=ae.options)==null?void 0:Te[0])==="integer",rt=parseFloat(String(ae.defaultValue));te=ze?Math.floor(rt||0):rt||0}return ae.type==="boolean"&&(te=String(ae.defaultValue)==="true"),{key:ae.key.trim()||"untitled_field",type:ae.type,defaultValue:te,options:ae.options}});const W={id:X,label:m,description:E,category:b,fields:O,isCore:(h==null?void 0:h.isCore)||!1};try{await e.registerComponentDefinition(n.id,W),o({title:r("componentManager.toast.schemaUpdated.title"),message:r("componentManager.toast.schemaUpdated.message",{label:W.label}),type:"success"}),s(),V(W)}catch(ae){o({title:r("componentManager.toast.saveFailed.title"),message:ae.message,type:"error"})}},pe=async X=>{const O=c.find(ae=>ae.id===X);if(O!=null&&O.isCore){o({title:r("componentManager.toast.systemProtected.title"),message:r("componentManager.toast.systemProtected.message"),type:"error"});return}const W=await e.getComponentUsageReport(n.id,X);Z(W),j(X)},H=async()=>{if(I)try{await e.deleteComponentDefinition(n.id,I),s(),(h==null?void 0:h.id)===I&&le(),o({title:r("componentManager.toast.deleted.title"),message:r("componentManager.toast.deleted.message"),type:"info"}),j(null)}catch(X){o({title:r("componentManager.toast.deletionFailed.title"),message:X.message,type:"error"})}},ve=()=>{_([...R,{_uiId:crypto.randomUUID(),key:"new_field",type:"text",defaultValue:"",options:[]}])},Ce=X=>{_(R.filter((O,W)=>W!==X))},U=(X,O,W)=>{var te;const ae=[...R];if(O==="defaultValue"&&ae[X].type==="number"&&((te=ae[X].options)==null?void 0:te[0])==="integer"){const Te=String(W);if(Te!==""&&Te!=="-"&&!/^-?\d+$/.test(Te))return}ae[X]={...ae[X],[O]:W},O==="type"&&(W==="boolean"&&(ae[X].defaultValue="false"),W==="number"&&(ae[X].defaultValue=0),W==="text"&&(ae[X].defaultValue=""),W==="date"&&(ae[X].defaultValue=""),ae[X].options=[]),_(ae)},ne=X=>{const O=[...R];let W="New Option",ae=1;for(;O[X].options.includes(W);)W=`New Option ${ae++}`;O[X].options.push(W),_(O)},me=(X,O,W)=>{const ae=[...R];ae[X].options[O]=W,_(ae)},Ee=(X,O)=>{const W=[...R];W[X].options=W[X].options.filter((ae,te)=>te!==O),_(W)},Ae=()=>{k([...M,{id:crypto.randomUUID(),label:"New Tier",weight:10,color:"#64748b"}])},D=(X,O,W)=>{const ae=[...M];ae[X]={...ae[X],[O]:W},k(ae)},q=X=>{k(M.filter((O,W)=>W!==X))},oe=()=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5 tracking-wide",children:r("componentManager.label.category")}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:b,onChange:X=>S(X.target.value),disabled:h==null?void 0:h.isCore,className:"w-full bg-nexus-900 border border-slate-600 rounded p-2.5 text-sm text-slate-200 outline-none focus:border-nexus-accent appearance-none cursor-pointer",children:[K3.includes(b)&&u.jsxs("option",{value:b,children:[b," (System)"]}),$.map(X=>u.jsx("option",{value:X,children:X},X))]}),u.jsx("div",{className:"absolute right-3 top-3 pointer-events-none text-slate-500",children:u.jsx(wh,{size:14})})]})]}),fe=()=>{const X=M.reduce((O,W)=>O+(parseFloat(String(W.weight))||0),0);return u.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[u.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-4 rounded-lg flex gap-4 items-center",children:[u.jsx("div",{className:"p-2 bg-blue-900/50 rounded-full text-blue-400",children:u.jsx(uN,{size:20})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-blue-200 text-sm",children:r("componentManager.probabilityEngine")}),u.jsxs("p",{className:"text-xs text-blue-300/70",children:["Define tiers. Weights determine roll probability automatically.",r("componentManager.totalWeight")," ",u.jsx("span",{className:"font-mono text-white",children:X})]})]}),u.jsx("div",{className:"ml-auto",children:u.jsx(Y3,{data:M,size:60})})]}),u.jsxs("div",{className:"space-y-2",children:[M.map((O,W)=>{const ae=X>0?(O.weight/X*100).toFixed(1):"0.0";return u.jsxs("div",{className:"flex gap-2 items-center bg-nexus-900 p-2 rounded border border-slate-700",children:[u.jsx("div",{className:"w-8 h-8 rounded shrink-0 border border-slate-600 overflow-hidden",style:{backgroundColor:O.color},children:u.jsx("input",{type:"color",className:"opacity-0 w-full h-full cursor-pointer",value:O.color,onChange:te=>D(W,"color",te.target.value)})}),u.jsx("div",{className:"flex-1",children:u.jsx(nt,{value:O.label,onChange:te=>D(W,"label",te.target.value),placeholder:"Label",className:"text-sm font-bold"})}),u.jsx("div",{className:"w-20",children:u.jsx("input",{type:"number",value:O.weight,onChange:te=>D(W,"weight",parseFloat(te.target.value)),className:"bg-nexus-900 border border-slate-700 rounded px-2 py-1 text-xs text-right w-full outline-none focus:border-nexus-accent text-slate-200"})}),u.jsxs("div",{className:"w-12 text-right text-xs text-slate-500 font-mono pt-1",children:[ae,"%"]}),u.jsx("button",{onClick:()=>q(W),className:"p-1 hover:text-red-400 text-slate-600",children:u.jsx(Qt,{size:14})})]},O.id)}),u.jsxs("button",{onClick:Ae,className:"w-full py-2 border border-dashed border-slate-700 rounded text-xs text-slate-500 hover:text-white hover:border-slate-500 transition-colors flex justify-center items-center gap-2",children:[u.jsx(Ft,{size:14})," Add Rarity Tier"]})]})]})},F=()=>u.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[u.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-lg flex gap-3 items-start",children:[u.jsx(Zs,{className:"text-yellow-500 shrink-0 mt-0.5",size:18}),u.jsxs("div",{className:"text-sm",children:[u.jsx("strong",{className:"text-yellow-200 block mb-1",children:r("componentManager.systemComponent")}),u.jsx("span",{className:"text-yellow-200/70",children:"This component defines critical entity identity. Schema fields are visible for reference but cannot be modified to prevent database corruption."})]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4 opacity-75 pointer-events-none grayscale-[0.5]",children:h==null?void 0:h.fields.map((X,O)=>u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded-lg p-4 flex gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5",children:r("componentManager.key")}),u.jsx("div",{className:"text-sm font-mono text-slate-300 border-b border-slate-700 pb-1",children:X.key})]}),u.jsxs("div",{className:"w-32",children:[u.jsx("label",{className:"block text-xs text-slate-500 uppercase font-bold mb-1.5",children:r("componentManager.type")}),u.jsx("div",{className:"text-sm text-slate-400 border-b border-slate-700 pb-1",children:X.type})]})]},O))})]}),ge=(X,O)=>{var W,ae;switch(X.type){case"boolean":return u.jsxs(xn,{label:r("componentManager.defaultState"),value:String(X.defaultValue),onChange:te=>U(O,"defaultValue",te.target.value),children:[u.jsx("option",{value:"false",children:"False"}),u.jsx("option",{value:"true",children:"True"})]});case"select":return u.jsxs(xn,{label:r("componentManager.defaultSelection"),value:String(X.defaultValue),onChange:te=>U(O,"defaultValue",te.target.value),children:[u.jsx("option",{value:"",children:"-- Select Default --"}),X.options.map(te=>u.jsx("option",{value:te,children:te},te))]});case"number":return u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(nt,{type:"text",inputMode:((W=X.options)==null?void 0:W[0])==="integer"?"numeric":"decimal",label:r("componentManager.default"),value:String(X.defaultValue),onChange:te=>U(O,"defaultValue",te.target.value)})}),u.jsx("div",{className:"w-32",children:u.jsxs(xn,{label:r("componentManager.constraint"),value:((ae=X.options)==null?void 0:ae[0])||"float",onChange:te=>{const Te=[...R];Te[O].options=[te.target.value],_(Te)},children:[u.jsx("option",{value:"float",children:r("componentManager.float")}),u.jsx("option",{value:"integer",children:r("componentManager.integer")})]})})]});case"date":return u.jsx(nt,{type:"date",label:r("componentManager.defaultDate"),value:String(X.defaultValue),onChange:te=>U(O,"defaultValue",te.target.value)});case"text":default:return u.jsx(nt,{label:r("componentManager.defaultText"),value:String(X.defaultValue),onChange:te=>U(O,"defaultValue",te.target.value)})}},_e=()=>u.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[u.jsxs("h3",{className:"font-bold text-slate-200 text-sm uppercase tracking-wider flex items-center gap-2",children:[u.jsx(qN,{size:14})," Schema Fields"]}),u.jsxs("button",{onClick:ve,className:"text-xs font-bold text-nexus-accent hover:text-white flex items-center gap-1 bg-nexus-900 px-3 py-1.5 rounded border border-nexus-accent/30 hover:bg-nexus-accent transition-colors",children:[u.jsx(Ft,{size:12})," Add Field"]})]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:R.map((X,O)=>u.jsxs("div",{className:"bg-nexus-900 border border-slate-700 rounded-lg p-4 relative group hover:border-nexus-accent/50 transition-colors",children:[u.jsx("button",{onClick:()=>Ce(O),className:"absolute top-3 right-3 text-slate-600 hover:text-red-400 p-1 opacity-0 group-hover:opacity-100 transition-all",children:u.jsx(ei,{size:14})}),u.jsxs("div",{className:"flex flex-col gap-4 mb-2",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(nt,{label:r("componentManager.fieldKey"),value:X.key,onChange:W=>U(O,"key",W.target.value),className:"font-mono",placeholder:"property_name"})}),u.jsx("div",{className:"w-40",children:u.jsxs(xn,{label:r("componentManager.dataType"),value:X.type,onChange:W=>U(O,"type",W.target.value),children:[u.jsx("option",{value:"text",children:"Text (String)"}),u.jsx("option",{value:"number",children:"Number"}),u.jsx("option",{value:"boolean",children:"Boolean"}),u.jsx("option",{value:"date",children:"Date"}),u.jsx("option",{value:"select",children:"Select Menu"})]})})]}),u.jsx("div",{className:"w-full",children:ge(X,O)})]}),X.type==="select"&&u.jsxs("div",{className:"mt-2 pl-4 border-l-2 border-slate-800",children:[u.jsx("label",{className:"text-xs uppercase font-bold text-slate-500 mb-2 block",children:r("componentManager.dropdownOptions")}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.options.map((W,ae)=>u.jsxs("div",{className:"flex items-center bg-nexus-950 border border-slate-700 rounded px-2 py-1",children:[u.jsx(nt,{value:W,onChange:te=>me(O,ae,te.target.value),className:"text-xs text-slate-200 w-24"}),u.jsx("button",{onClick:()=>Ee(O,ae),className:"ml-2 text-slate-600 hover:text-red-400",children:u.jsx(ei,{size:10})})]},ae)),u.jsx("button",{onClick:()=>ne(O),className:"text-xs bg-nexus-accent/20 text-nexus-accent px-2 rounded border border-nexus-accent/30 hover:bg-nexus-accent hover:text-white transition-colors",children:"+ Add Option"})]})]})]},X._uiId))})]});return u.jsxs("div",{className:"flex h-[calc(100vh-6rem)] gap-6 pb-6 animate-fade-in",children:[u.jsxs("div",{className:"w-64 bg-nexus-800 border border-slate-700 rounded-xl flex flex-col overflow-hidden shadow-lg shrink-0",children:[u.jsxs("div",{className:"p-4 bg-nexus-900 border-b border-slate-700 flex justify-between items-center",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-200 uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Fc,{size:14,className:"text-nexus-accent"})," Registry"]}),u.jsx("button",{onClick:le,className:"text-nexus-accent hover:text-white p-1 rounded hover:bg-slate-800 transition-colors",children:u.jsx(Ft,{size:16})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-4 custom-scrollbar",children:Object.entries(ce).map(([X,O])=>u.jsxs("div",{children:[u.jsxs("div",{className:"px-2 mb-1 text-xs font-bold text-slate-500 uppercase flex items-center gap-1",children:[u.jsx(wh,{size:10})," ",X]}),u.jsx("div",{className:"space-y-1",children:O.map(W=>u.jsxs("button",{onClick:()=>V(W),className:`w-full text-left px-3 py-2.5 rounded text-xs font-medium flex items-center justify-between group transition-all ${(h==null?void 0:h.id)===W.id?"bg-nexus-accent text-white shadow-md":"text-slate-400 hover:bg-nexus-900 hover:text-slate-200"}`,children:[u.jsxs("span",{className:"flex items-center gap-2 truncate",children:[u.jsx(ha,{size:14,className:(h==null?void 0:h.id)===W.id?"opacity-100":"opacity-50"}),W.label]}),!W.isCore&&u.jsx("span",{onClick:ae=>{ae.stopPropagation(),pe(W.id)},className:"opacity-0 group-hover:opacity-100 hover:text-red-300 p-1 rounded hover:bg-black/20",children:u.jsx(Qt,{size:12})})]},W.id))})]},X))})]}),u.jsxs("div",{className:"flex-1 bg-nexus-800 border border-slate-700 rounded-xl overflow-hidden shadow-lg flex flex-col",children:[u.jsxs("div",{className:"p-6 border-b border-slate-700 bg-nexus-900 flex justify-between items-center shrink-0",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-100 flex items-center gap-3",children:h?u.jsxs(u.Fragment,{children:[u.jsx($c,{size:24,className:"text-nexus-accent"})," Edit Schema: ",u.jsx("span",{className:"text-white",children:h.label})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ft,{size:24,className:"text-nexus-accent"})," Create Component"]})}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[(h==null?void 0:h.isCore)&&u.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-2 rounded border border-purple-500/30 uppercase font-bold",children:"System Core"}),u.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["ID: ",h?h.id:"new_component"]})]})]}),(h==null?void 0:h.id)!=="metadata"&&u.jsx(Se,{onClick:ie,icon:u.jsx($n,{size:16}),children:"Save Definition"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-6",children:[u.jsxs("div",{className:"bg-nexus-950/50 p-4 rounded-lg border border-slate-800 mb-4 text-xs text-slate-400",children:[u.jsx("strong",{className:"text-nexus-accent",children:"Developer Note:"})," This is a low-level schema editor. Changes made here affect how the database stores data. To change how entities interact, use the ",u.jsx("strong",{children:"Pool Configuration"})," or ",u.jsx("strong",{children:"Rules"})," engine."]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-2xl",children:[u.jsx(nt,{label:"Component Label",value:m,onChange:X=>v(X.target.value),disabled:h==null?void 0:h.isCore,placeholder:"e.g. Combat Stats"}),oe()]}),u.jsx("div",{className:"max-w-2xl",children:u.jsx(cn,{label:"AI Context Description",value:E,onChange:X=>T(X.target.value),placeholder:"Explain to the AI what this component represents (e.g. 'Physical attributes determining damage output')...",className:"h-20 text-xs"})}),(h==null?void 0:h.id)==="metadata"?F():(h==null?void 0:h.id)==="rarity"?fe():_e()]})]}),u.jsx(Zt,{isOpen:!!I,onClose:()=>{j(null),Z(null)},title:u.jsxs("span",{className:"flex items-center gap-2 text-red-400",children:[u.jsx(Zs,{size:20})," Delete Component"]}),children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-slate-300 text-sm",children:["Permanently delete ",u.jsx("strong",{children:I}),"?"]}),J&&J.entityCount>0&&u.jsxs("div",{className:"bg-red-900/10 border border-red-500/30 p-4 rounded-lg text-sm",children:[u.jsx("div",{className:"text-red-400 font-bold mb-2 uppercase tracking-wide text-xs",children:"Usage Warning"}),u.jsxs("p",{className:"text-slate-300 text-xs mb-1",children:["Used by ",u.jsxs("strong",{children:[J.entityCount," entities"]})," across ",J.pools.length," pools."]})]}),u.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[u.jsx(Se,{variant:"ghost",onClick:()=>{j(null),Z(null)},children:"Cancel"}),u.jsx(Se,{variant:"destructive",onClick:H,children:"Confirm Deletion"})]})]})})]})},Z3=()=>u.jsx(g2,{children:u.jsx(V2,{children:u.jsx(N3,{children:u.jsx(QA,{children:u.jsx(D3,{children:u.jsx(L3,{children:u.jsx(O3,{children:u.jsx(H2,{children:u.jsx(zT,{children:u.jsx(kT,{children:u.jsxs(fn,{path:"/",element:u.jsx(VR,{}),children:[u.jsx(fn,{index:!0,element:u.jsx(R3,{})}),u.jsxs(fn,{path:"world/:worldId/*",children:[u.jsx(fn,{path:"edit",element:u.jsx(I3,{})}),u.jsx(fn,{path:"settings",element:u.jsx(V3,{})}),u.jsx(fn,{path:"app-settings",element:u.jsx(J3,{})}),u.jsx(fn,{path:"pool/:poolName",element:u.jsx(U3,{})}),u.jsx(fn,{path:"rules",element:u.jsx(q3,{})}),u.jsx(fn,{path:"tags",element:u.jsx(W3,{})}),u.jsx(fn,{path:"components",element:u.jsx(Q3,{})}),u.jsx(fn,{path:"forge",element:u.jsx(xh,{defaultMode:"Asset"})}),u.jsx(fn,{path:"lore-forge",element:u.jsx(xh,{defaultMode:"Lore"})}),u.jsx(fn,{path:"character-forge",element:u.jsx(xh,{defaultMode:"Character"})}),u.jsx(fn,{path:"roller",element:u.jsx(H3,{})})]}),u.jsx(fn,{path:"*",element:u.jsx(RT,{to:"/",replace:!0})})]})})})})})})})})})})}),vE=document.getElementById("root");if(!vE)throw new Error("Could not find root element to mount to");const ej=z1.createRoot(vE);ej.render(u.jsx(be.StrictMode,{children:u.jsx(Z3,{})}));
